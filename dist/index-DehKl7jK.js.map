{"version":3,"file":"index-DehKl7jK.js","sources":["../node_modules/.pnpm/base64-js@1.5.1/node_modules/base64-js/index.js","../node_modules/.pnpm/ieee754@1.2.1/node_modules/ieee754/index.js","../node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js","../src/types/index.d.ts","../assets/dfinity.webp","../node_modules/.pnpm/@dfinity+ledger-icp@2.6.12_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2.4._pv46coz4knd3osuit4q7qad5su/node_modules/@dfinity/ledger-icp/dist/esm/chunk-D2JQPN4X.js","../node_modules/.pnpm/@dfinity+ledger-icp@2.6.12_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2.4._pv46coz4knd3osuit4q7qad5su/node_modules/@dfinity/ledger-icp/dist/esm/chunk-CQ4GZJ2C.js","../node_modules/.pnpm/@dfinity+ledger-icp@2.6.12_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2.4._pv46coz4knd3osuit4q7qad5su/node_modules/@dfinity/ledger-icp/dist/esm/chunk-W2HWVSWO.js","../node_modules/.pnpm/@dfinity+ledger-icp@2.6.12_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2.4._pv46coz4knd3osuit4q7qad5su/node_modules/@dfinity/ledger-icp/dist/esm/index.js","../src/adapters/ic/BaseIcAdapter.ts","../src/adapters/ic/IIAdapter.ts","../assets/plug.webp","../src/adapters/ic/PlugAdapter.ts","../assets/nfid.webp","../node_modules/.pnpm/@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2_imjuikuemy62shujer7zbvykea/node_modules/@slide-computer/signer/lib/esm/errors.js","../node_modules/.pnpm/@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2_imjuikuemy62shujer7zbvykea/node_modules/@slide-computer/signer/lib/esm/utils.js","../node_modules/.pnpm/@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2_imjuikuemy62shujer7zbvykea/node_modules/@slide-computer/signer/lib/esm/signer.js","../node_modules/.pnpm/@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+principal@2_imjuikuemy62shujer7zbvykea/node_modules/@slide-computer/signer/lib/esm/transport.js","../node_modules/.pnpm/@slide-computer+signer-web@3.16.0_@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity_57cktmilakeo23z67boygmb5fm/node_modules/@slide-computer/signer-web/lib/esm/icrc29/postMessageChannel.js","../node_modules/.pnpm/@slide-computer+signer-web@3.16.0_@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity_57cktmilakeo23z67boygmb5fm/node_modules/@slide-computer/signer-web/lib/esm/utils.js","../node_modules/.pnpm/@slide-computer+signer-web@3.16.0_@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity_57cktmilakeo23z67boygmb5fm/node_modules/@slide-computer/signer-web/lib/esm/icrc29/heartbeat.js","../node_modules/.pnpm/@slide-computer+signer-web@3.16.0_@slide-computer+signer@3.16.0_@dfinity+agent@2.4.1_@dfinity_57cktmilakeo23z67boygmb5fm/node_modules/@slide-computer/signer-web/lib/esm/icrc29/postMessageTransport.js","../node_modules/.pnpm/bignumber.js@9.3.0/node_modules/bignumber.js/bignumber.mjs","../node_modules/.pnpm/@slide-computer+signer-agent@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+princ_lcfr223qs7enonyowe2hwhzu4e/node_modules/@slide-computer/signer-agent/lib/esm/utils.js","../node_modules/.pnpm/@slide-computer+signer-agent@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+princ_lcfr223qs7enonyowe2hwhzu4e/node_modules/@slide-computer/signer-agent/lib/esm/queue.js","../node_modules/.pnpm/@slide-computer+signer-agent@3.16.0_@dfinity+agent@2.4.1_@dfinity+candid@2.4.1_@dfinity+princ_lcfr223qs7enonyowe2hwhzu4e/node_modules/@slide-computer/signer-agent/lib/esm/agent.js","../src/adapters/ic/NFIDAdapter.ts","../assets/oisy_logo.webp","../src/adapters/ic/OisyAdapter.ts","../src/adapters/ic/index.ts","../node_modules/.pnpm/eventemitter3@5.0.1/node_modules/eventemitter3/index.js","../node_modules/.pnpm/@solana+wallet-adapter-base@0.9.25_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/errors.js","../node_modules/.pnpm/@solana+wallet-adapter-base@0.9.25_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/adapter.js","../node_modules/.pnpm/@solana+wallet-adapter-base@0.9.25_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/transaction.js","../node_modules/.pnpm/@solana+wallet-adapter-base@0.9.25_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/signer.js","../node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signAndSendTransaction.js","../node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signMessage.js","../node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signTransaction.js","../node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/connect.js","../node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/disconnect.js","../node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/events.js","../node_modules/.pnpm/@solana+wallet-adapter-base@0.9.25_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/types.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/_assert.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/crypto.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/utils.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/_md.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/sha256.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/_u64.js","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/sha512.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/abstract/utils.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/abstract/modular.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/abstract/curve.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/abstract/edwards.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/ed25519.js","../node_modules/.pnpm/bn.js@5.2.1/node_modules/bn.js/lib/bn.js","../node_modules/.pnpm/safe-buffer@5.2.1/node_modules/safe-buffer/index.js","../node_modules/.pnpm/base-x@3.0.11/node_modules/base-x/src/index.js","../node_modules/.pnpm/bs58@4.0.1/node_modules/bs58/index.js","../node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/utils.js","../node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/_md.js","../node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/sha2.js","../node_modules/.pnpm/@noble+hashes@1.8.0/node_modules/@noble/hashes/esm/sha256.js","../node_modules/.pnpm/text-encoding-utf-8@1.0.2/node_modules/text-encoding-utf-8/src/encoding.js","../node_modules/.pnpm/borsh@0.7.0/node_modules/borsh/lib/index.js","../node_modules/.pnpm/@solana+buffer-layout@4.0.1/node_modules/@solana/buffer-layout/lib/Layout.js","../node_modules/.pnpm/@solana+errors@2.1.0_typescript@5.8.2/node_modules/@solana/errors/dist/index.browser.mjs","../node_modules/.pnpm/@solana+codecs-core@2.1.0_typescript@5.8.2/node_modules/@solana/codecs-core/dist/index.browser.mjs","../node_modules/.pnpm/@solana+codecs-numbers@2.1.0_typescript@5.8.2/node_modules/@solana/codecs-numbers/dist/index.browser.mjs","../node_modules/.pnpm/superstruct@2.0.2/node_modules/superstruct/dist/index.mjs","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/regex.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/validate.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v1.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/parse.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v35.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/md5.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v3.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/sha1.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v5.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/nil.js","../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/version.js","../node_modules/.pnpm/jayson@4.2.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/jayson/lib/generateRequest.js","../node_modules/.pnpm/jayson@4.2.0_bufferutil@4.0.9_utf-8-validate@5.0.10/node_modules/jayson/lib/client/browser/index.js","../node_modules/.pnpm/rpc-websockets@9.1.1/node_modules/rpc-websockets/dist/index.browser.mjs","../node_modules/.pnpm/@noble+hashes@1.7.2/node_modules/@noble/hashes/esm/hmac.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/abstract/weierstrass.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/_shortw_utils.js","../node_modules/.pnpm/@noble+curves@1.8.2/node_modules/@noble/curves/esm/secp256k1.js","../node_modules/.pnpm/@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10/node_modules/@solana/web3.js/lib/index.browser.esm.js","../node_modules/.pnpm/@solana+wallet-adapter-phantom@0.9.26_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-phantom/lib/esm/adapter.js","../node_modules/.pnpm/@wallet-standard+wallet@1.1.0/node_modules/@wallet-standard/wallet/lib/esm/register.js","../node_modules/.pnpm/@solana+wallet-standard-chains@1.1.1/node_modules/@solana/wallet-standard-chains/lib/esm/index.js","../node_modules/.pnpm/@solana+wallet-adapter-solflare@0.6.30_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/icon.js","../node_modules/.pnpm/@solana+wallet-adapter-solflare@0.6.30_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/wallet.js","../node_modules/.pnpm/@solana+wallet-adapter-solflare@0.6.30_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/detect.js","../node_modules/.pnpm/@solana+wallet-adapter-solflare@0.6.30_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-solflare/lib/esm/adapter.js","../node_modules/.pnpm/@solana+wallet-adapter-backpack@0.1.14_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-backpack/lib/esm/adapter.js","../node_modules/.pnpm/base-x@5.0.1/node_modules/base-x/src/esm/index.js","../node_modules/.pnpm/bs58@6.0.0/node_modules/bs58/src/esm/index.js","../src/adapters/sol/utils.ts","../src/did/ic_siws_provider.did.js","../node_modules/.pnpm/@solana+spl-token@0.4.13_@solana+web3.js@1.98.1_bufferutil@4.0.9_typescript@5.8.2_utf-8-valid_phaj55xhjl5ygphg4e4fbwa67q/node_modules/@solana/spl-token/lib/esm/constants.js","../src/adapters/sol/SolSiwsAdapter.ts","../assets/phantom.svg","../assets/solflare.svg","../assets/backpack.png","../src/adapters/sol/index.ts","../src/config.ts","../src/index.ts"],"sourcesContent":["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// Adapters\nimport { InternetIdentity } from \"./src/adapters/InternetIdentity\";\nimport { PlugAdapter } from \"./src/adapters/PlugAdapter\";\nimport { BitfinityAdapter } from \"./src/adapters/BitfinityAdapter\";\nimport { BatchTransact } from \"./src/utils/batchTransact\";\nimport { AnonymousIdentity, HttpAgent } from \"@dfinity/agent\";\nimport { Principal } from \"@dfinity/principal\";\nimport { ActorSubclass } from \"@dfinity/agent\";\nimport { WalletAdapterNetwork } from \"@solana/wallet-adapter-base\";\n\ndeclare module \"*.jpg\";\ndeclare module \"*.jpeg\";\ndeclare module \"*.svg\";\n\nexport namespace Wallet {\n  export interface PNPConfig {\n    hostUrl?: string;\n    localStorageKey?: string;\n    defaultCanisterId?: string;\n    delegationTargets?: Principal[] | string[];\n    delegationTimeout?: bigint;\n    derivationOrigin?: string;\n    dfxNetwork?: string;\n    fetchRootKeys?: boolean;\n    verifyQuerySignatures?: boolean;\n    adapters?: Record<string, Adapter.Info>;\n    identityProvider?: string;\n    timeout?: number;\n  }\n\n  export interface Account {\n    subaccount: string | null;\n    owner: string | null;\n  }\n\n  export type AdapterConstructor = new (config: Wallet.PNPConfig) => Adapter.Interface;\n}\n\nexport namespace Adapter {\n  // deprecated\n  export interface Info {\n    id: string;\n    logo: string;\n    walletName: string;\n    chain: 'ICP' | 'SOL';\n    website?: string;\n    adapter: AdapterConstructor;\n    config: {\n      identityProvider?: string;\n      signerUrl?: string;\n      rpcUrl?: string;\n      timeout?: number;\n      enabled?: boolean;\n      siwsProviderCanisterId?: string;\n      solanaNetwork?: WalletAdapterNetwork | undefined;\n      solanaRpcUrl?: string;\n      derivationOrigin?: string;\n    };\n    rpcUrl?: string;\n    timeout?: number;\n    enabled?: boolean;\n  }\n\n  // replaces Info\n  export interface Wallet {\n    id: string;\n    logo: string;\n    walletName: string;\n    adapter: AdapterConstructor;\n  }\n\n  export enum Status {\n    INIT = \"INIT\",\n    READY = \"READY\",\n    CONNECTING = \"CONNECTING\",\n    CONNECTED = \"CONNECTED\",\n    DISCONNECTING = \"DISCONNECTING\",\n    DISCONNECTED = \"DISCONNECTED\",\n    ERROR = \"ERROR\",\n  }\n\n  export enum Chain {\n    ICP = \"icp\",\n    SOL = \"sol\",\n    ETH = \"eth\",\n  }\n\n  export interface Addresses {\n    [key in Chain]?: string | Wallet.Account;\n  }\n\n  export interface Interface {\n    // Core wallet functionality\n    isAvailable(): Promise<boolean>;\n    isConnected(): Promise<boolean>;\n    connect(): Promise<Wallet.Account>;\n    disconnect(): Promise<void>;\n    getPrincipal(): Promise<string>;\n    getAccountId(): Promise<string>;\n    getAddresses(): Promise<Addresses>;\n    // Actor creation\n    createActor<T>(\n      canisterId: string,\n      idl: any,\n      options?: { requiresSigning?: boolean },\n    ): ActorSubclass<T>;\n    undelegatedActor?<T>(\n      canisterId: string,\n      idlFactory: any,\n      options?: { requiresSigning?: boolean },\n    ): ActorSubclass<T>;\n  }\n}\n\nexport class PNP {\n  account: Wallet.Account | null;\n  provider: Adapter.Interface | null;\n  config: Wallet.PNPConfig;\n  actorCache: Map<string, ActorSubclass<any>>;\n  fetchRootKeys: boolean;\n\n  constructor(config?: Wallet.PNPConfig);\n\n  connect(walletId: string): Promise<Wallet.Account>;\n  disconnect(): Promise<void>;\n  isWalletConnected(): boolean;\n  getActor<T>(canisterId: string, idl: any, isAnon?: boolean): ActorSubclass<T>;\n  createAnonymousActor<T>(\n    canisterId: string,\n    idl: any,\n    options?: { requiresSigning?: boolean },\n  ): ActorSubclass<T>;\n}\n\ndeclare global {\n  interface Window {\n    ic?: {\n      plug?: {\n        requestConnect: (options?: {\n          whitelist?: string[];\n          host?: string;\n          timeout?: number;\n          onConnectionUpdate?: () => void;\n        }) => Promise<boolean>;\n        isConnected: () => Promise<boolean>;\n        createActor: <T>(options: {\n          canisterId: string;\n          interfaceFactory: any;\n        }) => Promise<ActorSubclass<T>>;\n        disconnect: () => Promise<void>;\n        onExternalDisconnect: (callback: () => void) => void;\n        principalId?: string;\n        accountId?: string;\n      };\n    };\n  }\n}\n","export default \"data:image/webp;base64,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\"","var N=Object.create;var H=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var v=(e,t,n,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of j(t))!G.call(e,o)&&o!==n&&H(e,o,{get:()=>t[o],enumerable:!(r=F(t,o))||r.enumerable});return e};var J=(e,t,n)=>(n=e!=null?N(V(e)):{},v(t||!e||!e.__esModule?H(n,\"default\",{value:e,enumerable:!0}):n,e));import{arrayOfNumberToUint8Array as R,asciiStringToByteArray as X,bigEndianCrc32 as K,uint8ArrayToHexString as q}from\"@dfinity/utils\";function W(e){return e instanceof Uint8Array||e!=null&&typeof e==\"object\"&&e.constructor.name===\"Uint8Array\"}function A(e,...t){if(!W(e))throw new Error(\"Uint8Array expected\");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function U(e,t=!0){if(e.destroyed)throw new Error(\"Hash instance has been destroyed\");if(t&&e.finished)throw new Error(\"Hash#digest() has already been called\")}function S(e,t){A(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var g=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),h=(e,t)=>e<<32-t|e>>>t;var tt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $(e){if(typeof e!=\"string\")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function B(e){return typeof e==\"string\"&&(e=$(e)),A(e),e}var d=class{clone(){return this._cloneInto()}},et={}.toString;function T(e){let t=r=>e().update(B(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function M(e,t,n,r){if(typeof e.setBigUint64==\"function\")return e.setBigUint64(t,n,r);let o=BigInt(32),c=BigInt(4294967295),i=Number(n>>o&c),s=Number(n&c),u=r?4:0,a=r?0:4;e.setUint32(t+u,i,r),e.setUint32(t+a,s,r)}var C=(e,t,n)=>e&t^~e&n,k=(e,t,n)=>e&t^e&n^t&n,w=class extends d{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=g(this.buffer)}update(t){U(this);let{view:n,buffer:r,blockLen:o}=this;t=B(t);let c=t.length;for(let i=0;i<c;){let s=Math.min(o-this.pos,c-i);if(s===o){let u=g(t);for(;o<=c-i;i+=o)this.process(u,i);continue}r.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){U(this),S(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:c}=this,{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let f=i;f<o;f++)n[f]=0;M(r,o-8,BigInt(this.length*8),c),this.process(r,0);let s=g(t),u=this.outputLen;if(u%4)throw new Error(\"_sha2: outputLen should be aligned to 32bit\");let a=u/4,p=this.get();if(a>p.length)throw new Error(\"_sha2: outputLen bigger than state\");for(let f=0;f<a;f++)s.setUint32(4*f,p[f],c)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:c,destroyed:i,pos:s}=this;return t.length=o,t.pos=s,t.finished=c,t.destroyed=i,o%n&&t.buffer.set(r),t}};var P=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),x=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),b=new Uint32Array(64),E=class extends w{constructor(){super(64,32,8,!1),this.A=x[0]|0,this.B=x[1]|0,this.C=x[2]|0,this.D=x[3]|0,this.E=x[4]|0,this.F=x[5]|0,this.G=x[6]|0,this.H=x[7]|0}get(){let{A:t,B:n,C:r,D:o,E:c,F:i,G:s,H:u}=this;return[t,n,r,o,c,i,s,u]}set(t,n,r,o,c,i,s,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=c|0,this.F=i|0,this.G=s|0,this.H=u|0}process(t,n){for(let f=0;f<16;f++,n+=4)b[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){let y=b[f-15],l=b[f-2],I=h(y,7)^h(y,18)^y>>>3,m=h(l,17)^h(l,19)^l>>>10;b[f]=m+b[f-7]+I+b[f-16]|0}let{A:r,B:o,C:c,D:i,E:s,F:u,G:a,H:p}=this;for(let f=0;f<64;f++){let y=h(s,6)^h(s,11)^h(s,25),l=p+y+C(s,u,a)+P[f]+b[f]|0,m=(h(r,2)^h(r,13)^h(r,22))+k(r,o,c)|0;p=a,a=u,u=s,s=i+l|0,i=c,c=o,o=r,r=l+m|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,i=i+this.D|0,s=s+this.E|0,u=u+this.F|0,a=a+this.G|0,p=p+this.H|0,this.set(r,o,c,i,s,u,a,p)}roundClean(){b.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},L=class extends E{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};var O=T(()=>new L);var D=class e{constructor(t){this.bytes=t}static fromHex(t){return new e(Uint8Array.from(Buffer.from(t,\"hex\")))}static fromPrincipal({principal:t,subAccount:n=_.fromID(0)}){let r=X(`\naccount-id`),o=O.create();o.update(R([...r,...t.toUint8Array(),...n.toUint8Array()]));let c=o.digest(),i=K(c),s=new Uint8Array([...i,...c]);return new e(s)}toHex(){return q(this.bytes)}toUint8Array(){return this.bytes}toNumbers(){return Array.from(this.bytes)}toAccountIdentifierHash(){return{hash:this.toUint8Array()}}},_=class e{constructor(t){this.bytes=t}static fromBytes(t){return t.length!=32?Error(\"Subaccount length must be 32-bytes\"):new e(t)}static fromPrincipal(t){let n=new Uint8Array(32).fill(0),r=t.toUint8Array();n[0]=r.length;for(let o=0;o<r.length;o++)n[1+o]=r[o];return new e(n)}static fromID(t){if(t<0)throw new Error(\"Number cannot be negative\");if(t>Number.MAX_SAFE_INTEGER)throw new Error(\"Number is too large to fit in 32 bytes.\");let n=new DataView(new ArrayBuffer(32));if(typeof n.setBigUint64==\"function\")n.setBigUint64(24,BigInt(t));else{let o=BigInt(1)<<BigInt(32);n.setUint32(24,Number(BigInt(t)>>BigInt(32))),n.setUint32(28,Number(BigInt(t)%o))}let r=new Uint8Array(n.buffer);return new e(r)}toUint8Array(){return this.bytes}};export{z as a,J as b,O as c,D as d,_ as e};\n/*! Bundled license information:\n\n@noble/hashes/esm/utils.js:\n  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)\n*/\n//# sourceMappingURL=chunk-D2JQPN4X.js.map\n","import{d as e}from\"./chunk-D2JQPN4X.js\";import{Principal as o}from\"@dfinity/principal\";var r=o.fromText(\"ryjl3-tyaaa-aaaaa-aaaba-cai\"),c=o.fromText(\"qhbym-qaaaa-aaaaa-aaafq-cai\");var f=t=>t instanceof e?t:e.fromHex(t),m=t=>t instanceof e?t.toHex():t;export{r as a,c as b,f as c,m as d};\n//# sourceMappingURL=chunk-CQ4GZJ2C.js.map\n","import{a as ke,c as Ae}from\"./chunk-CQ4GZJ2C.js\";import{Canister as Ke,createServices as Ye}from\"@dfinity/utils\";var he=({IDL:e})=>{let o=e.Vec(e.Nat8),t=e.Record({owner:e.Principal,subaccount:e.Opt(o)}),a=e.Record({icrc2:e.Bool}),n=e.Record({icrc1_minting_account:e.Opt(t),feature_flags:e.Opt(a)}),c=e.Record({e8s:e.Nat64}),_=e.Text,T=e.Record({secs:e.Nat64,nanos:e.Nat32}),q=e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),C=e.Record({send_whitelist:e.Vec(e.Principal),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(c),minting_account:_,transaction_window:e.Opt(T),max_message_size_bytes:e.Opt(e.Nat64),icrc1_minting_account:e.Opt(t),archive_options:e.Opt(q),initial_values:e.Vec(e.Tuple(_,c)),token_name:e.Opt(e.Text),feature_flags:e.Opt(a)}),He=e.Variant({Upgrade:e.Opt(n),Init:C}),s=e.Vec(e.Nat8),P=e.Record({account:s}),E=e.Record({account:_}),U=e.Record({canister_id:e.Principal}),M=e.Record({archives:e.Vec(U)}),r=e.Nat,S=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),d=e.Nat64,G=e.Record({to:t,fee:e.Opt(r),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(o),created_at_time:e.Opt(d),amount:r}),u=e.Nat,Q=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:r}),Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,InsufficientFunds:e.Record({balance:r})}),z=e.Variant({Ok:u,Err:Q}),y=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),H=e.Record({metadata:y,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),J=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:H}),$=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),K=e.Record({metadata:y,consent_message:$}),g=e.Record({description:e.Text}),Y=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:g,UnsupportedCanisterCall:g,ConsentMessageUnavailable:g}),j=e.Variant({Ok:K,Err:Y}),W=e.Record({account:t,spender:t}),X=e.Record({allowance:r,expires_at:e.Opt(d)}),Z=e.Record({fee:e.Opt(r),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(o),created_at_time:e.Opt(d),amount:r,expected_allowance:e.Opt(r),expires_at:e.Opt(d),spender:t}),I=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),AllowanceChanged:e.Record({current_allowance:r}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,Expired:e.Record({ledger_time:e.Nat64}),InsufficientFunds:e.Record({balance:r})}),D=e.Variant({Ok:u,Err:I}),L=e.Record({to:t,fee:e.Opt(r),spender_subaccount:e.Opt(o),from:t,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(d),amount:r}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:r}),BadBurn:e.Record({min_burn_amount:r}),Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),CreatedInFuture:e.Record({ledger_time:d}),TooOld:e.Null,InsufficientFunds:e.Record({balance:r})}),te=e.Variant({Ok:u,Err:ee}),i=e.Nat64,f=e.Record({start:i,length:e.Nat64}),x=e.Nat64,p=e.Record({timestamp_nanos:e.Nat64}),ce=e.Variant({Approve:e.Record({fee:c,from:s,allowance_e8s:e.Int,allowance:c,expected_allowance:e.Opt(c),expires_at:e.Opt(p),spender:s}),Burn:e.Record({from:s,amount:c,spender:e.Opt(s)}),Mint:e.Record({to:s,amount:c}),Transfer:e.Record({to:s,fee:c,from:s,amount:c,spender:e.Opt(e.Vec(e.Nat8))})}),re=e.Record({memo:x,icrc1_memo:e.Opt(e.Vec(e.Nat8)),operation:e.Opt(ce),created_at_time:p}),b=e.Record({transaction:re,timestamp:p,parent_hash:e.Opt(e.Vec(e.Nat8))}),ne=e.Record({blocks:e.Vec(b)}),F=e.Variant({BadFirstBlockIndex:e.Record({requested_index:i,first_valid_index:i}),Other:e.Record({error_message:e.Text,error_code:e.Nat64})}),ae=e.Variant({Ok:ne,Err:F}),oe=e.Func([f],[ae],[]),se=e.Record({callback:oe,start:i,length:e.Nat64}),ie=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(b),chain_length:e.Nat64,first_block_index:i,archived_blocks:e.Vec(se)}),de=e.Record({callback:e.Func([f],[e.Variant({Ok:e.Vec(e.Vec(e.Nat8)),Err:F})],[]),start:e.Nat64,length:e.Nat64}),ue=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(e.Vec(e.Nat8)),chain_length:e.Nat64,first_block_index:e.Nat64,archived_blocks:e.Vec(de)}),le=e.Record({to:_,fee:c,memo:x,from_subaccount:e.Opt(o),created_at_time:e.Opt(p),amount:c}),_e=e.Record({to:s,fee:c,memo:x,from_subaccount:e.Opt(o),created_at_time:e.Opt(p),amount:c}),pe=e.Variant({TxTooOld:e.Record({allowed_window_nanos:e.Nat64}),BadFee:e.Record({expected_fee:c}),TxDuplicate:e.Record({duplicate_of:i}),TxCreatedInFuture:e.Null,InsufficientFunds:e.Record({balance:c})}),me=e.Variant({Ok:i,Err:pe}),fe=e.Record({}),Re=e.Record({transfer_fee:c});return e.Service({account_balance:e.Func([P],[c],[]),account_balance_dfx:e.Func([E],[c],[]),account_identifier:e.Func([t],[s],[]),archives:e.Func([],[M],[]),decimals:e.Func([],[e.Record({decimals:e.Nat32})],[]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_balance_of:e.Func([t],[r],[]),icrc1_decimals:e.Func([],[e.Nat8],[]),icrc1_fee:e.Func([],[r],[]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,S))],[]),icrc1_minting_account:e.Func([],[e.Opt(t)],[]),icrc1_name:e.Func([],[e.Text],[]),icrc1_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_symbol:e.Func([],[e.Text],[]),icrc1_total_supply:e.Func([],[r],[]),icrc1_transfer:e.Func([G],[z],[]),icrc21_canister_call_consent_message:e.Func([J],[j],[]),icrc2_allowance:e.Func([W],[X],[]),icrc2_approve:e.Func([Z],[D],[]),icrc2_transfer_from:e.Func([L],[te],[]),is_ledger_ready:e.Func([],[e.Bool],[]),name:e.Func([],[e.Record({name:e.Text})],[]),query_blocks:e.Func([f],[ie],[]),query_encoded_blocks:e.Func([f],[ue],[]),send_dfx:e.Func([le],[i],[]),symbol:e.Func([],[e.Record({symbol:e.Text})],[]),transfer:e.Func([_e],[me],[]),transfer_fee:e.Func([fe],[Re],[])})};var we=({IDL:e})=>{let o=e.Vec(e.Nat8),t=e.Record({owner:e.Principal,subaccount:e.Opt(o)}),a=e.Record({icrc2:e.Bool}),n=e.Record({icrc1_minting_account:e.Opt(t),feature_flags:e.Opt(a)}),c=e.Record({e8s:e.Nat64}),_=e.Text,T=e.Record({secs:e.Nat64,nanos:e.Nat32}),q=e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),C=e.Record({send_whitelist:e.Vec(e.Principal),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(c),minting_account:_,transaction_window:e.Opt(T),max_message_size_bytes:e.Opt(e.Nat64),icrc1_minting_account:e.Opt(t),archive_options:e.Opt(q),initial_values:e.Vec(e.Tuple(_,c)),token_name:e.Opt(e.Text),feature_flags:e.Opt(a)}),He=e.Variant({Upgrade:e.Opt(n),Init:C}),s=e.Vec(e.Nat8),P=e.Record({account:s}),E=e.Record({account:_}),U=e.Record({canister_id:e.Principal}),M=e.Record({archives:e.Vec(U)}),r=e.Nat,S=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),d=e.Nat64,G=e.Record({to:t,fee:e.Opt(r),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(o),created_at_time:e.Opt(d),amount:r}),u=e.Nat,Q=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:r}),Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,InsufficientFunds:e.Record({balance:r})}),z=e.Variant({Ok:u,Err:Q}),y=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),H=e.Record({metadata:y,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),J=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:H}),$=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),K=e.Record({metadata:y,consent_message:$}),g=e.Record({description:e.Text}),Y=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:g,UnsupportedCanisterCall:g,ConsentMessageUnavailable:g}),j=e.Variant({Ok:K,Err:Y}),W=e.Record({account:t,spender:t}),X=e.Record({allowance:r,expires_at:e.Opt(d)}),Z=e.Record({fee:e.Opt(r),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(o),created_at_time:e.Opt(d),amount:r,expected_allowance:e.Opt(r),expires_at:e.Opt(d),spender:t}),I=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),AllowanceChanged:e.Record({current_allowance:r}),CreatedInFuture:e.Record({ledger_time:e.Nat64}),TooOld:e.Null,Expired:e.Record({ledger_time:e.Nat64}),InsufficientFunds:e.Record({balance:r})}),D=e.Variant({Ok:u,Err:I}),L=e.Record({to:t,fee:e.Opt(r),spender_subaccount:e.Opt(o),from:t,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(d),amount:r}),ee=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:r}),BadBurn:e.Record({min_burn_amount:r}),Duplicate:e.Record({duplicate_of:u}),BadFee:e.Record({expected_fee:r}),CreatedInFuture:e.Record({ledger_time:d}),TooOld:e.Null,InsufficientFunds:e.Record({balance:r})}),te=e.Variant({Ok:u,Err:ee}),i=e.Nat64,f=e.Record({start:i,length:e.Nat64}),x=e.Nat64,p=e.Record({timestamp_nanos:e.Nat64}),ce=e.Variant({Approve:e.Record({fee:c,from:s,allowance_e8s:e.Int,allowance:c,expected_allowance:e.Opt(c),expires_at:e.Opt(p),spender:s}),Burn:e.Record({from:s,amount:c,spender:e.Opt(s)}),Mint:e.Record({to:s,amount:c}),Transfer:e.Record({to:s,fee:c,from:s,amount:c,spender:e.Opt(e.Vec(e.Nat8))})}),re=e.Record({memo:x,icrc1_memo:e.Opt(e.Vec(e.Nat8)),operation:e.Opt(ce),created_at_time:p}),b=e.Record({transaction:re,timestamp:p,parent_hash:e.Opt(e.Vec(e.Nat8))}),ne=e.Record({blocks:e.Vec(b)}),F=e.Variant({BadFirstBlockIndex:e.Record({requested_index:i,first_valid_index:i}),Other:e.Record({error_message:e.Text,error_code:e.Nat64})}),ae=e.Variant({Ok:ne,Err:F}),oe=e.Func([f],[ae],[\"query\"]),se=e.Record({callback:oe,start:i,length:e.Nat64}),ie=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(b),chain_length:e.Nat64,first_block_index:i,archived_blocks:e.Vec(se)}),de=e.Record({callback:e.Func([f],[e.Variant({Ok:e.Vec(e.Vec(e.Nat8)),Err:F})],[\"query\"]),start:e.Nat64,length:e.Nat64}),ue=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),blocks:e.Vec(e.Vec(e.Nat8)),chain_length:e.Nat64,first_block_index:e.Nat64,archived_blocks:e.Vec(de)}),le=e.Record({to:_,fee:c,memo:x,from_subaccount:e.Opt(o),created_at_time:e.Opt(p),amount:c}),_e=e.Record({to:s,fee:c,memo:x,from_subaccount:e.Opt(o),created_at_time:e.Opt(p),amount:c}),pe=e.Variant({TxTooOld:e.Record({allowed_window_nanos:e.Nat64}),BadFee:e.Record({expected_fee:c}),TxDuplicate:e.Record({duplicate_of:i}),TxCreatedInFuture:e.Null,InsufficientFunds:e.Record({balance:c})}),me=e.Variant({Ok:i,Err:pe}),fe=e.Record({}),Re=e.Record({transfer_fee:c});return e.Service({account_balance:e.Func([P],[c],[\"query\"]),account_balance_dfx:e.Func([E],[c],[\"query\"]),account_identifier:e.Func([t],[s],[\"query\"]),archives:e.Func([],[M],[\"query\"]),decimals:e.Func([],[e.Record({decimals:e.Nat32})],[\"query\"]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[\"query\"]),icrc1_balance_of:e.Func([t],[r],[\"query\"]),icrc1_decimals:e.Func([],[e.Nat8],[\"query\"]),icrc1_fee:e.Func([],[r],[\"query\"]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,S))],[\"query\"]),icrc1_minting_account:e.Func([],[e.Opt(t)],[\"query\"]),icrc1_name:e.Func([],[e.Text],[\"query\"]),icrc1_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[\"query\"]),icrc1_symbol:e.Func([],[e.Text],[\"query\"]),icrc1_total_supply:e.Func([],[r],[\"query\"]),icrc1_transfer:e.Func([G],[z],[]),icrc21_canister_call_consent_message:e.Func([J],[j],[]),icrc2_allowance:e.Func([W],[X],[\"query\"]),icrc2_approve:e.Func([Z],[D],[]),icrc2_transfer_from:e.Func([L],[te],[]),is_ledger_ready:e.Func([],[e.Bool],[\"query\"]),name:e.Func([],[e.Record({name:e.Text})],[\"query\"]),query_blocks:e.Func([f],[ie],[\"query\"]),query_encoded_blocks:e.Func([f],[ue],[\"query\"]),send_dfx:e.Func([le],[i],[]),symbol:e.Func([],[e.Record({symbol:e.Text})],[\"query\"]),transfer:e.Func([_e],[me],[]),transfer_fee:e.Func([fe],[Re],[\"query\"])})};import{arrayOfNumberToUint8Array as Je,isNullish as $e,toNullable as l}from\"@dfinity/utils\";var Xe=BigInt(1095062083),Ze=BigInt(1347768404),A=BigInt(1e4),Ie=BigInt(1e8);var ve=e=>({e8s:e}),Be=({to:e,amount:o,memo:t,fee:a,fromSubAccount:n,createdAt:c})=>({to:e.toUint8Array(),fee:ve(a??A),amount:ve(o),memo:t??BigInt(0),created_at_time:c!==void 0?[{timestamp_nanos:c}]:[],from_subaccount:n===void 0?[]:[Je(n)]}),qe=({fromSubAccount:e,to:o,amount:t,fee:a,icrc1Memo:n,createdAt:c})=>({to:o,fee:l(a??A),amount:t,memo:l(n),created_at_time:l(c),from_subaccount:l(e)}),Ce=({fee:e,createdAt:o,icrc1Memo:t,fromSubAccount:a,expected_allowance:n,expires_at:c,amount:_,...T})=>({...T,fee:l(e??A),memo:l(t),from_subaccount:l(a),created_at_time:l(o),amount:_,expected_allowance:l(n),expires_at:l(c)}),Pe=({userPreferences:{metadata:{utcOffsetMinutes:e,language:o},deriveSpec:t},...a})=>({...a,user_preferences:{metadata:{language:o,utc_offset_minutes:l(e)},device_spec:$e(t)?l():l(\"GenericDisplay\"in t?{GenericDisplay:null}:{LineDisplay:{characters_per_line:t.LineDisplay.charactersPerLine,lines_per_page:t.LineDisplay.linesPerPage}})}});var O=class extends Error{},R=class extends O{},m=class extends O{},N=class extends O{},Ee=class extends R{},Ue=class extends Error{},V=class extends R{constructor(t){super();this.balance=t}},h=class extends R{constructor(t){super();this.allowed_window_secs=t}},w=class extends R{},v=class extends R{constructor(t){super();this.duplicateOf=t}},k=class extends O{constructor(t){super();this.expectedFee=t}},B=class extends m{constructor(t,a){super();this.message=t;this.error_code=a}},ge=class extends m{},xe=class extends m{constructor(t){super();this.duplicateOf=t}},Oe=class extends m{constructor(t){super();this.currentAllowance=t}},Ne=class extends m{},Te=class extends m{},ye=class extends m{constructor(t){super();this.ledgerTime=t}},be=class extends N{},Fe=class extends N{},Ve=class extends N{},Me=e=>\"TxDuplicate\"in e?new v(e.TxDuplicate.duplicate_of):\"InsufficientFunds\"in e?new V(e.InsufficientFunds.balance.e8s):\"TxCreatedInFuture\"in e?new w:\"TxTooOld\"in e?new h(Number(e.TxTooOld.allowed_window_nanos)):\"BadFee\"in e?new k(e.BadFee.expected_fee.e8s):new R(`Unknown error type ${JSON.stringify(e)}`),Se=e=>\"Duplicate\"in e?new v(e.Duplicate.duplicate_of):\"InsufficientFunds\"in e?new V(e.InsufficientFunds.balance):\"CreatedInFuture\"in e?new w:\"TooOld\"in e?new h:\"BadFee\"in e?new k(e.BadFee.expected_fee):new R(`Unknown error type ${JSON.stringify(e)}`),Ge=e=>\"GenericError\"in e?new B(e.GenericError.message,e.GenericError.error_code):\"TemporarilyUnavailable\"in e?new ge:\"Duplicate\"in e?new xe(e.Duplicate.duplicate_of):\"BadFee\"in e?new k(e.BadFee.expected_fee):\"AllowanceChanged\"in e?new Oe(e.AllowanceChanged.current_allowance):\"CreatedInFuture\"in e?new Ne:\"TooOld\"in e?new Te:\"Expired\"in e?new ye(e.Expired.ledger_time):\"InsufficientFunds\"in e?new V(e.InsufficientFunds.balance):new m(`Unknown error type ${JSON.stringify(e)}`),Qe=e=>\"GenericError\"in e?new B(e.GenericError.description,e.GenericError.error_code):\"InsufficientPayment\"in e?new be(e.InsufficientPayment.description):\"UnsupportedCanisterCall\"in e?new Fe(e.UnsupportedCanisterCall.description):\"ConsentMessageUnavailable\"in e?new Ve(e.ConsentMessageUnavailable.description):new N(`Unknown error type ${JSON.stringify(e)}`);var ze=class e extends Ke{constructor(){super(...arguments);this.accountBalance=async({accountIdentifier:t,certified:a=!0})=>{let n=Ae(t);return(await(a?this.certifiedService:this.service).account_balance({account:n.toUint8Array()})).e8s};this.metadata=t=>{let{icrc1_metadata:a}=this.caller(t);return a()};this.transactionFee=async(t={certified:!1})=>{let{transfer_fee:a}=this.caller(t),{transfer_fee:{e8s:n}}=await a({});return n};this.transfer=async t=>{let a=Be(t),n=await this.certifiedService.transfer(a);if(\"Err\"in n)throw Me(n.Err);return n.Ok};this.icrc1Transfer=async t=>{let a=qe(t),n=await this.certifiedService.icrc1_transfer(a);if(\"Err\"in n)throw Se(n.Err);return n.Ok};this.icrc2Approve=async t=>{let{icrc2_approve:a}=this.caller({certified:!0}),n=await a(Ce(t));if(\"Err\"in n)throw Ge(n.Err);return n.Ok};this.icrc21ConsentMessage=async t=>{let{icrc21_canister_call_consent_message:a}=this.caller({certified:!0}),n=await a(Pe(t));if(\"Err\"in n)throw Qe(n.Err);return n.Ok}}static create(t={}){let a=t.canisterId??ke,{service:n,certifiedService:c}=Ye({options:{...t,canisterId:a},idlFactory:we,certifiedIdlFactory:he});return new e(a,n,c)}};export{Be as a,qe as b,Ce as c,Pe as d,O as e,R as f,m as g,N as h,Ee as i,Ue as j,V as k,h as l,w as m,v as n,k as o,B as p,ge as q,xe as r,Oe as s,Ne as t,Te as u,ye as v,be as w,Fe as x,Ve as y,Me as z,Se as A,Ge as B,Qe as C,ze as D};\n//# sourceMappingURL=chunk-W2HWVSWO.js.map\n","import{a as dr}from\"./chunk-OHHNCOLH.js\";import{A as _t,B as kt,C as bt,D as mr,a as ot,b as ut,c as ct,d as ft,e as ht,f as pt,g as st,h as lt,i as at,j as N,k as yt,l as xt,m as wt,n as Bt,o as dt,p as mt,q as Et,r as gt,s as It,t as At,u as Ft,v as Ut,w as Tt,x as Rt,y as Ct,z as St}from\"./chunk-W2HWVSWO.js\";import\"./chunk-CQ4GZJ2C.js\";import{a as L,b as xr,c as V,d as wr,e as Br}from\"./chunk-D2JQPN4X.js\";var J=L(S=>{\"use strict\";S.byteLength=gr;S.toByteArray=Ar;S.fromByteArray=Tr;var B=[],x=[],Er=typeof Uint8Array<\"u\"?Uint8Array:Array,M=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";for(g=0,X=M.length;g<X;++g)B[g]=M[g],x[M.charCodeAt(g)]=g;var g,X;x[45]=62;x[95]=63;function z(i){var r=i.length;if(r%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var t=i.indexOf(\"=\");t===-1&&(t=r);var e=t===r?0:4-t%4;return[t,e]}function gr(i){var r=z(i),t=r[0],e=r[1];return(t+e)*3/4-e}function Ir(i,r,t){return(r+t)*3/4-t}function Ar(i){var r,t=z(i),e=t[0],n=t[1],o=new Er(Ir(i,e,n)),u=0,f=n>0?e-4:e,h;for(h=0;h<f;h+=4)r=x[i.charCodeAt(h)]<<18|x[i.charCodeAt(h+1)]<<12|x[i.charCodeAt(h+2)]<<6|x[i.charCodeAt(h+3)],o[u++]=r>>16&255,o[u++]=r>>8&255,o[u++]=r&255;return n===2&&(r=x[i.charCodeAt(h)]<<2|x[i.charCodeAt(h+1)]>>4,o[u++]=r&255),n===1&&(r=x[i.charCodeAt(h)]<<10|x[i.charCodeAt(h+1)]<<4|x[i.charCodeAt(h+2)]>>2,o[u++]=r>>8&255,o[u++]=r&255),o}function Fr(i){return B[i>>18&63]+B[i>>12&63]+B[i>>6&63]+B[i&63]}function Ur(i,r,t){for(var e,n=[],o=r;o<t;o+=3)e=(i[o]<<16&16711680)+(i[o+1]<<8&65280)+(i[o+2]&255),n.push(Fr(e));return n.join(\"\")}function Tr(i){for(var r,t=i.length,e=t%3,n=[],o=16383,u=0,f=t-e;u<f;u+=o)n.push(Ur(i,u,u+o>f?f:u+o));return e===1?(r=i[t-1],n.push(B[r>>2]+B[r<<4&63]+\"==\")):e===2&&(r=(i[t-2]<<8)+i[t-1],n.push(B[r>>10]+B[r>>4&63]+B[r<<2&63]+\"=\")),n.join(\"\")}});var K=L($=>{$.read=function(i,r,t,e,n){var o,u,f=n*8-e-1,h=(1<<f)-1,l=h>>1,s=-7,p=t?n-1:0,A=t?-1:1,w=i[r+p];for(p+=A,o=w&(1<<-s)-1,w>>=-s,s+=f;s>0;o=o*256+i[r+p],p+=A,s-=8);for(u=o&(1<<-s)-1,o>>=-s,s+=e;s>0;u=u*256+i[r+p],p+=A,s-=8);if(o===0)o=1-l;else{if(o===h)return u?NaN:(w?-1:1)*(1/0);u=u+Math.pow(2,e),o=o-l}return(w?-1:1)*u*Math.pow(2,o-e)};$.write=function(i,r,t,e,n,o){var u,f,h,l=o*8-n-1,s=(1<<l)-1,p=s>>1,A=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=e?0:o-1,b=e?1:-1,yr=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=s):(u=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+p>=1?r+=A/h:r+=A*Math.pow(2,1-p),r*h>=2&&(u++,h/=2),u+p>=s?(f=0,u=s):u+p>=1?(f=(r*h-1)*Math.pow(2,n),u=u+p):(f=r*Math.pow(2,p-1)*Math.pow(2,n),u=0));n>=8;i[t+w]=f&255,w+=b,f/=256,n-=8);for(u=u<<n|f,l+=n;l>0;i[t+w]=u&255,w+=b,u/=256,l-=8);i[t+w-b]|=yr*128}});var ar=L(R=>{\"use strict\";var D=J(),U=K(),Z=typeof Symbol==\"function\"&&typeof Symbol.for==\"function\"?Symbol.for(\"nodejs.util.inspect.custom\"):null;R.Buffer=c;R.SlowBuffer=br;R.INSPECT_MAX_BYTES=50;var _=2147483647;R.kMaxLength=_;c.TYPED_ARRAY_SUPPORT=Rr();!c.TYPED_ARRAY_SUPPORT&&typeof console<\"u\"&&typeof console.error==\"function\"&&console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\");function Rr(){try{let i=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(i,r),i.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,\"parent\",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}});Object.defineProperty(c.prototype,\"offset\",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function m(i){if(i>_)throw new RangeError('The value \"'+i+'\" is invalid for option \"size\"');let r=new Uint8Array(i);return Object.setPrototypeOf(r,c.prototype),r}function c(i,r,t){if(typeof i==\"number\"){if(typeof r==\"string\")throw new TypeError('The \"string\" argument must be of type string. Received type number');return G(i)}return tr(i,r,t)}c.poolSize=8192;function tr(i,r,t){if(typeof i==\"string\")return Sr(i,r);if(ArrayBuffer.isView(i))return _r(i);if(i==null)throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof i);if(d(i,ArrayBuffer)||i&&d(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<\"u\"&&(d(i,SharedArrayBuffer)||i&&d(i.buffer,SharedArrayBuffer)))return O(i,r,t);if(typeof i==\"number\")throw new TypeError('The \"value\" argument must not be of type number. Received type number');let e=i.valueOf&&i.valueOf();if(e!=null&&e!==i)return c.from(e,r,t);let n=kr(i);if(n)return n;if(typeof Symbol<\"u\"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]==\"function\")return c.from(i[Symbol.toPrimitive](\"string\"),r,t);throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \"+typeof i)}c.from=function(i,r,t){return tr(i,r,t)};Object.setPrototypeOf(c.prototype,Uint8Array.prototype);Object.setPrototypeOf(c,Uint8Array);function ir(i){if(typeof i!=\"number\")throw new TypeError('\"size\" argument must be of type number');if(i<0)throw new RangeError('The value \"'+i+'\" is invalid for option \"size\"')}function Cr(i,r,t){return ir(i),i<=0?m(i):r!==void 0?typeof t==\"string\"?m(i).fill(r,t):m(i).fill(r):m(i)}c.alloc=function(i,r,t){return Cr(i,r,t)};function G(i){return ir(i),m(i<0?0:H(i)|0)}c.allocUnsafe=function(i){return G(i)};c.allocUnsafeSlow=function(i){return G(i)};function Sr(i,r){if((typeof r!=\"string\"||r===\"\")&&(r=\"utf8\"),!c.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r);let t=er(i,r)|0,e=m(t),n=e.write(i,r);return n!==t&&(e=e.slice(0,n)),e}function P(i){let r=i.length<0?0:H(i.length)|0,t=m(r);for(let e=0;e<r;e+=1)t[e]=i[e]&255;return t}function _r(i){if(d(i,Uint8Array)){let r=new Uint8Array(i);return O(r.buffer,r.byteOffset,r.byteLength)}return P(i)}function O(i,r,t){if(r<0||i.byteLength<r)throw new RangeError('\"offset\" is outside of buffer bounds');if(i.byteLength<r+(t||0))throw new RangeError('\"length\" is outside of buffer bounds');let e;return r===void 0&&t===void 0?e=new Uint8Array(i):t===void 0?e=new Uint8Array(i,r):e=new Uint8Array(i,r,t),Object.setPrototypeOf(e,c.prototype),e}function kr(i){if(c.isBuffer(i)){let r=H(i.length)|0,t=m(r);return t.length===0||i.copy(t,0,0,r),t}if(i.length!==void 0)return typeof i.length!=\"number\"||W(i.length)?m(0):P(i);if(i.type===\"Buffer\"&&Array.isArray(i.data))return P(i.data)}function H(i){if(i>=_)throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+_.toString(16)+\" bytes\");return i|0}function br(i){return+i!=i&&(i=0),c.alloc(+i)}c.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==c.prototype};c.compare=function(r,t){if(d(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),d(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(r)||!c.isBuffer(t))throw new TypeError('The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array');if(r===t)return 0;let e=r.length,n=t.length;for(let o=0,u=Math.min(e,n);o<u;++o)if(r[o]!==t[o]){e=r[o],n=t[o];break}return e<n?-1:n<e?1:0};c.isEncoding=function(r){switch(String(r).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}};c.concat=function(r,t){if(!Array.isArray(r))throw new TypeError('\"list\" argument must be an Array of Buffers');if(r.length===0)return c.alloc(0);let e;if(t===void 0)for(t=0,e=0;e<r.length;++e)t+=r[e].length;let n=c.allocUnsafe(t),o=0;for(e=0;e<r.length;++e){let u=r[e];if(d(u,Uint8Array))o+u.length>n.length?(c.isBuffer(u)||(u=c.from(u)),u.copy(n,o)):Uint8Array.prototype.set.call(n,u,o);else if(c.isBuffer(u))u.copy(n,o);else throw new TypeError('\"list\" argument must be an Array of Buffers');o+=u.length}return n};function er(i,r){if(c.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||d(i,ArrayBuffer))return i.byteLength;if(typeof i!=\"string\")throw new TypeError('The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let t=i.length,e=arguments.length>2&&arguments[2]===!0;if(!e&&t===0)return 0;let n=!1;for(;;)switch(r){case\"ascii\":case\"latin1\":case\"binary\":return t;case\"utf8\":case\"utf-8\":return q(i).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return t*2;case\"hex\":return t>>>1;case\"base64\":return lr(i).length;default:if(n)return e?-1:q(i).length;r=(\"\"+r).toLowerCase(),n=!0}}c.byteLength=er;function Lr(i,r,t){let e=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,r>>>=0,t<=r))return\"\";for(i||(i=\"utf8\");;)switch(i){case\"hex\":return Yr(this,r,t);case\"utf8\":case\"utf-8\":return or(this,r,t);case\"ascii\":return Gr(this,r,t);case\"latin1\":case\"binary\":return Hr(this,r,t);case\"base64\":return Or(this,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return Wr(this,r,t);default:if(e)throw new TypeError(\"Unknown encoding: \"+i);i=(i+\"\").toLowerCase(),e=!0}}c.prototype._isBuffer=!0;function I(i,r,t){let e=i[r];i[r]=i[t],i[t]=e}c.prototype.swap16=function(){let r=this.length;if(r%2!==0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(let t=0;t<r;t+=2)I(this,t,t+1);return this};c.prototype.swap32=function(){let r=this.length;if(r%4!==0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(let t=0;t<r;t+=4)I(this,t,t+3),I(this,t+1,t+2);return this};c.prototype.swap64=function(){let r=this.length;if(r%8!==0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(let t=0;t<r;t+=8)I(this,t,t+7),I(this,t+1,t+6),I(this,t+2,t+5),I(this,t+3,t+4);return this};c.prototype.toString=function(){let r=this.length;return r===0?\"\":arguments.length===0?or(this,0,r):Lr.apply(this,arguments)};c.prototype.toLocaleString=c.prototype.toString;c.prototype.equals=function(r){if(!c.isBuffer(r))throw new TypeError(\"Argument must be a Buffer\");return this===r?!0:c.compare(this,r)===0};c.prototype.inspect=function(){let r=\"\",t=R.INSPECT_MAX_BYTES;return r=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim(),this.length>t&&(r+=\" ... \"),\"<Buffer \"+r+\">\"};Z&&(c.prototype[Z]=c.prototype.inspect);c.prototype.compare=function(r,t,e,n,o){if(d(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),!c.isBuffer(r))throw new TypeError('The \"target\" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(t===void 0&&(t=0),e===void 0&&(e=r?r.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||e>r.length||n<0||o>this.length)throw new RangeError(\"out of range index\");if(n>=o&&t>=e)return 0;if(n>=o)return-1;if(t>=e)return 1;if(t>>>=0,e>>>=0,n>>>=0,o>>>=0,this===r)return 0;let u=o-n,f=e-t,h=Math.min(u,f),l=this.slice(n,o),s=r.slice(t,e);for(let p=0;p<h;++p)if(l[p]!==s[p]){u=l[p],f=s[p];break}return u<f?-1:f<u?1:0};function nr(i,r,t,e,n){if(i.length===0)return-1;if(typeof t==\"string\"?(e=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,W(t)&&(t=n?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(n)return-1;t=i.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof r==\"string\"&&(r=c.from(r,e)),c.isBuffer(r))return r.length===0?-1:Q(i,r,t,e,n);if(typeof r==\"number\")return r=r&255,typeof Uint8Array.prototype.indexOf==\"function\"?n?Uint8Array.prototype.indexOf.call(i,r,t):Uint8Array.prototype.lastIndexOf.call(i,r,t):Q(i,[r],t,e,n);throw new TypeError(\"val must be string, number or Buffer\")}function Q(i,r,t,e,n){let o=1,u=i.length,f=r.length;if(e!==void 0&&(e=String(e).toLowerCase(),e===\"ucs2\"||e===\"ucs-2\"||e===\"utf16le\"||e===\"utf-16le\")){if(i.length<2||r.length<2)return-1;o=2,u/=2,f/=2,t/=2}function h(s,p){return o===1?s[p]:s.readUInt16BE(p*o)}let l;if(n){let s=-1;for(l=t;l<u;l++)if(h(i,l)===h(r,s===-1?0:l-s)){if(s===-1&&(s=l),l-s+1===f)return s*o}else s!==-1&&(l-=l-s),s=-1}else for(t+f>u&&(t=u-f),l=t;l>=0;l--){let s=!0;for(let p=0;p<f;p++)if(h(i,l+p)!==h(r,p)){s=!1;break}if(s)return l}return-1}c.prototype.includes=function(r,t,e){return this.indexOf(r,t,e)!==-1};c.prototype.indexOf=function(r,t,e){return nr(this,r,t,e,!0)};c.prototype.lastIndexOf=function(r,t,e){return nr(this,r,t,e,!1)};function Nr(i,r,t,e){t=Number(t)||0;let n=i.length-t;e?(e=Number(e),e>n&&(e=n)):e=n;let o=r.length;e>o/2&&(e=o/2);let u;for(u=0;u<e;++u){let f=parseInt(r.substr(u*2,2),16);if(W(f))return u;i[t+u]=f}return u}function Mr(i,r,t,e){return k(q(r,i.length-t),i,t,e)}function $r(i,r,t,e){return k(zr(r),i,t,e)}function Dr(i,r,t,e){return k(lr(r),i,t,e)}function Pr(i,r,t,e){return k(Jr(r,i.length-t),i,t,e)}c.prototype.write=function(r,t,e,n){if(t===void 0)n=\"utf8\",e=this.length,t=0;else if(e===void 0&&typeof t==\"string\")n=t,e=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(e)?(e=e>>>0,n===void 0&&(n=\"utf8\")):(n=e,e=void 0);else throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");let o=this.length-t;if((e===void 0||e>o)&&(e=o),r.length>0&&(e<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");let u=!1;for(;;)switch(n){case\"hex\":return Nr(this,r,t,e);case\"utf8\":case\"utf-8\":return Mr(this,r,t,e);case\"ascii\":case\"latin1\":case\"binary\":return $r(this,r,t,e);case\"base64\":return Dr(this,r,t,e);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return Pr(this,r,t,e);default:if(u)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),u=!0}};c.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function Or(i,r,t){return r===0&&t===i.length?D.fromByteArray(i):D.fromByteArray(i.slice(r,t))}function or(i,r,t){t=Math.min(i.length,t);let e=[],n=r;for(;n<t;){let o=i[n],u=null,f=o>239?4:o>223?3:o>191?2:1;if(n+f<=t){let h,l,s,p;switch(f){case 1:o<128&&(u=o);break;case 2:h=i[n+1],(h&192)===128&&(p=(o&31)<<6|h&63,p>127&&(u=p));break;case 3:h=i[n+1],l=i[n+2],(h&192)===128&&(l&192)===128&&(p=(o&15)<<12|(h&63)<<6|l&63,p>2047&&(p<55296||p>57343)&&(u=p));break;case 4:h=i[n+1],l=i[n+2],s=i[n+3],(h&192)===128&&(l&192)===128&&(s&192)===128&&(p=(o&15)<<18|(h&63)<<12|(l&63)<<6|s&63,p>65535&&p<1114112&&(u=p))}}u===null?(u=65533,f=1):u>65535&&(u-=65536,e.push(u>>>10&1023|55296),u=56320|u&1023),e.push(u),n+=f}return qr(e)}var v=4096;function qr(i){let r=i.length;if(r<=v)return String.fromCharCode.apply(String,i);let t=\"\",e=0;for(;e<r;)t+=String.fromCharCode.apply(String,i.slice(e,e+=v));return t}function Gr(i,r,t){let e=\"\";t=Math.min(i.length,t);for(let n=r;n<t;++n)e+=String.fromCharCode(i[n]&127);return e}function Hr(i,r,t){let e=\"\";t=Math.min(i.length,t);for(let n=r;n<t;++n)e+=String.fromCharCode(i[n]);return e}function Yr(i,r,t){let e=i.length;(!r||r<0)&&(r=0),(!t||t<0||t>e)&&(t=e);let n=\"\";for(let o=r;o<t;++o)n+=Kr[i[o]];return n}function Wr(i,r,t){let e=i.slice(r,t),n=\"\";for(let o=0;o<e.length-1;o+=2)n+=String.fromCharCode(e[o]+e[o+1]*256);return n}c.prototype.slice=function(r,t){let e=this.length;r=~~r,t=t===void 0?e:~~t,r<0?(r+=e,r<0&&(r=0)):r>e&&(r=e),t<0?(t+=e,t<0&&(t=0)):t>e&&(t=e),t<r&&(t=r);let n=this.subarray(r,t);return Object.setPrototypeOf(n,c.prototype),n};function a(i,r,t){if(i%1!==0||i<0)throw new RangeError(\"offset is not uint\");if(i+r>t)throw new RangeError(\"Trying to access beyond buffer length\")}c.prototype.readUintLE=c.prototype.readUIntLE=function(r,t,e){r=r>>>0,t=t>>>0,e||a(r,t,this.length);let n=this[r],o=1,u=0;for(;++u<t&&(o*=256);)n+=this[r+u]*o;return n};c.prototype.readUintBE=c.prototype.readUIntBE=function(r,t,e){r=r>>>0,t=t>>>0,e||a(r,t,this.length);let n=this[r+--t],o=1;for(;t>0&&(o*=256);)n+=this[r+--t]*o;return n};c.prototype.readUint8=c.prototype.readUInt8=function(r,t){return r=r>>>0,t||a(r,1,this.length),this[r]};c.prototype.readUint16LE=c.prototype.readUInt16LE=function(r,t){return r=r>>>0,t||a(r,2,this.length),this[r]|this[r+1]<<8};c.prototype.readUint16BE=c.prototype.readUInt16BE=function(r,t){return r=r>>>0,t||a(r,2,this.length),this[r]<<8|this[r+1]};c.prototype.readUint32LE=c.prototype.readUInt32LE=function(r,t){return r=r>>>0,t||a(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};c.prototype.readUint32BE=c.prototype.readUInt32BE=function(r,t){return r=r>>>0,t||a(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};c.prototype.readBigUInt64LE=E(function(r){r=r>>>0,T(r,\"offset\");let t=this[r],e=this[r+7];(t===void 0||e===void 0)&&C(r,this.length-8);let n=t+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,o=this[++r]+this[++r]*2**8+this[++r]*2**16+e*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))});c.prototype.readBigUInt64BE=E(function(r){r=r>>>0,T(r,\"offset\");let t=this[r],e=this[r+7];(t===void 0||e===void 0)&&C(r,this.length-8);let n=t*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],o=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+e;return(BigInt(n)<<BigInt(32))+BigInt(o)});c.prototype.readIntLE=function(r,t,e){r=r>>>0,t=t>>>0,e||a(r,t,this.length);let n=this[r],o=1,u=0;for(;++u<t&&(o*=256);)n+=this[r+u]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};c.prototype.readIntBE=function(r,t,e){r=r>>>0,t=t>>>0,e||a(r,t,this.length);let n=t,o=1,u=this[r+--n];for(;n>0&&(o*=256);)u+=this[r+--n]*o;return o*=128,u>=o&&(u-=Math.pow(2,8*t)),u};c.prototype.readInt8=function(r,t){return r=r>>>0,t||a(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};c.prototype.readInt16LE=function(r,t){r=r>>>0,t||a(r,2,this.length);let e=this[r]|this[r+1]<<8;return e&32768?e|4294901760:e};c.prototype.readInt16BE=function(r,t){r=r>>>0,t||a(r,2,this.length);let e=this[r+1]|this[r]<<8;return e&32768?e|4294901760:e};c.prototype.readInt32LE=function(r,t){return r=r>>>0,t||a(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};c.prototype.readInt32BE=function(r,t){return r=r>>>0,t||a(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};c.prototype.readBigInt64LE=E(function(r){r=r>>>0,T(r,\"offset\");let t=this[r],e=this[r+7];(t===void 0||e===void 0)&&C(r,this.length-8);let n=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(e<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)});c.prototype.readBigInt64BE=E(function(r){r=r>>>0,T(r,\"offset\");let t=this[r],e=this[r+7];(t===void 0||e===void 0)&&C(r,this.length-8);let n=(t<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(n)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+e)});c.prototype.readFloatLE=function(r,t){return r=r>>>0,t||a(r,4,this.length),U.read(this,r,!0,23,4)};c.prototype.readFloatBE=function(r,t){return r=r>>>0,t||a(r,4,this.length),U.read(this,r,!1,23,4)};c.prototype.readDoubleLE=function(r,t){return r=r>>>0,t||a(r,8,this.length),U.read(this,r,!0,52,8)};c.prototype.readDoubleBE=function(r,t){return r=r>>>0,t||a(r,8,this.length),U.read(this,r,!1,52,8)};function y(i,r,t,e,n,o){if(!c.isBuffer(i))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(r>n||r<o)throw new RangeError('\"value\" argument is out of bounds');if(t+e>i.length)throw new RangeError(\"Index out of range\")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(r,t,e,n){if(r=+r,t=t>>>0,e=e>>>0,!n){let f=Math.pow(2,8*e)-1;y(this,r,t,e,f,0)}let o=1,u=0;for(this[t]=r&255;++u<e&&(o*=256);)this[t+u]=r/o&255;return t+e};c.prototype.writeUintBE=c.prototype.writeUIntBE=function(r,t,e,n){if(r=+r,t=t>>>0,e=e>>>0,!n){let f=Math.pow(2,8*e)-1;y(this,r,t,e,f,0)}let o=e-1,u=1;for(this[t+o]=r&255;--o>=0&&(u*=256);)this[t+o]=r/u&255;return t+e};c.prototype.writeUint8=c.prototype.writeUInt8=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,1,255,0),this[t]=r&255,t+1};c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,2,65535,0),this[t]=r&255,this[t+1]=r>>>8,t+2};c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,2,65535,0),this[t]=r>>>8,this[t+1]=r&255,t+2};c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,4,4294967295,0),this[t+3]=r>>>24,this[t+2]=r>>>16,this[t+1]=r>>>8,this[t]=r&255,t+4};c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,4,4294967295,0),this[t]=r>>>24,this[t+1]=r>>>16,this[t+2]=r>>>8,this[t+3]=r&255,t+4};function ur(i,r,t,e,n){sr(r,e,n,i,t,7);let o=Number(r&BigInt(4294967295));i[t++]=o,o=o>>8,i[t++]=o,o=o>>8,i[t++]=o,o=o>>8,i[t++]=o;let u=Number(r>>BigInt(32)&BigInt(4294967295));return i[t++]=u,u=u>>8,i[t++]=u,u=u>>8,i[t++]=u,u=u>>8,i[t++]=u,t}function cr(i,r,t,e,n){sr(r,e,n,i,t,7);let o=Number(r&BigInt(4294967295));i[t+7]=o,o=o>>8,i[t+6]=o,o=o>>8,i[t+5]=o,o=o>>8,i[t+4]=o;let u=Number(r>>BigInt(32)&BigInt(4294967295));return i[t+3]=u,u=u>>8,i[t+2]=u,u=u>>8,i[t+1]=u,u=u>>8,i[t]=u,t+8}c.prototype.writeBigUInt64LE=E(function(r,t=0){return ur(this,r,t,BigInt(0),BigInt(\"0xffffffffffffffff\"))});c.prototype.writeBigUInt64BE=E(function(r,t=0){return cr(this,r,t,BigInt(0),BigInt(\"0xffffffffffffffff\"))});c.prototype.writeIntLE=function(r,t,e,n){if(r=+r,t=t>>>0,!n){let h=Math.pow(2,8*e-1);y(this,r,t,e,h-1,-h)}let o=0,u=1,f=0;for(this[t]=r&255;++o<e&&(u*=256);)r<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(r/u>>0)-f&255;return t+e};c.prototype.writeIntBE=function(r,t,e,n){if(r=+r,t=t>>>0,!n){let h=Math.pow(2,8*e-1);y(this,r,t,e,h-1,-h)}let o=e-1,u=1,f=0;for(this[t+o]=r&255;--o>=0&&(u*=256);)r<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(r/u>>0)-f&255;return t+e};c.prototype.writeInt8=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,1,127,-128),r<0&&(r=255+r+1),this[t]=r&255,t+1};c.prototype.writeInt16LE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,2,32767,-32768),this[t]=r&255,this[t+1]=r>>>8,t+2};c.prototype.writeInt16BE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,2,32767,-32768),this[t]=r>>>8,this[t+1]=r&255,t+2};c.prototype.writeInt32LE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,4,2147483647,-2147483648),this[t]=r&255,this[t+1]=r>>>8,this[t+2]=r>>>16,this[t+3]=r>>>24,t+4};c.prototype.writeInt32BE=function(r,t,e){return r=+r,t=t>>>0,e||y(this,r,t,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[t]=r>>>24,this[t+1]=r>>>16,this[t+2]=r>>>8,this[t+3]=r&255,t+4};c.prototype.writeBigInt64LE=E(function(r,t=0){return ur(this,r,t,-BigInt(\"0x8000000000000000\"),BigInt(\"0x7fffffffffffffff\"))});c.prototype.writeBigInt64BE=E(function(r,t=0){return cr(this,r,t,-BigInt(\"0x8000000000000000\"),BigInt(\"0x7fffffffffffffff\"))});function fr(i,r,t,e,n,o){if(t+e>i.length)throw new RangeError(\"Index out of range\");if(t<0)throw new RangeError(\"Index out of range\")}function hr(i,r,t,e,n){return r=+r,t=t>>>0,n||fr(i,r,t,4,34028234663852886e22,-34028234663852886e22),U.write(i,r,t,e,23,4),t+4}c.prototype.writeFloatLE=function(r,t,e){return hr(this,r,t,!0,e)};c.prototype.writeFloatBE=function(r,t,e){return hr(this,r,t,!1,e)};function pr(i,r,t,e,n){return r=+r,t=t>>>0,n||fr(i,r,t,8,17976931348623157e292,-17976931348623157e292),U.write(i,r,t,e,52,8),t+8}c.prototype.writeDoubleLE=function(r,t,e){return pr(this,r,t,!0,e)};c.prototype.writeDoubleBE=function(r,t,e){return pr(this,r,t,!1,e)};c.prototype.copy=function(r,t,e,n){if(!c.isBuffer(r))throw new TypeError(\"argument should be a Buffer\");if(e||(e=0),!n&&n!==0&&(n=this.length),t>=r.length&&(t=r.length),t||(t=0),n>0&&n<e&&(n=e),n===e||r.length===0||this.length===0)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(e<0||e>=this.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),r.length-t<n-e&&(n=r.length-t+e);let o=n-e;return this===r&&typeof Uint8Array.prototype.copyWithin==\"function\"?this.copyWithin(t,e,n):Uint8Array.prototype.set.call(r,this.subarray(e,n),t),o};c.prototype.fill=function(r,t,e,n){if(typeof r==\"string\"){if(typeof t==\"string\"?(n=t,t=0,e=this.length):typeof e==\"string\"&&(n=e,e=this.length),n!==void 0&&typeof n!=\"string\")throw new TypeError(\"encoding must be a string\");if(typeof n==\"string\"&&!c.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n);if(r.length===1){let u=r.charCodeAt(0);(n===\"utf8\"&&u<128||n===\"latin1\")&&(r=u)}}else typeof r==\"number\"?r=r&255:typeof r==\"boolean\"&&(r=Number(r));if(t<0||this.length<t||this.length<e)throw new RangeError(\"Out of range index\");if(e<=t)return this;t=t>>>0,e=e===void 0?this.length:e>>>0,r||(r=0);let o;if(typeof r==\"number\")for(o=t;o<e;++o)this[o]=r;else{let u=c.isBuffer(r)?r:c.from(r,n),f=u.length;if(f===0)throw new TypeError('The value \"'+r+'\" is invalid for argument \"value\"');for(o=0;o<e-t;++o)this[o+t]=u[o%f]}return this};var F={};function Y(i,r,t){F[i]=class extends t{constructor(){super(),Object.defineProperty(this,\"message\",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(n){Object.defineProperty(this,\"code\",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Y(\"ERR_BUFFER_OUT_OF_BOUNDS\",function(i){return i?`${i} is outside of buffer bounds`:\"Attempt to access memory outside buffer bounds\"},RangeError);Y(\"ERR_INVALID_ARG_TYPE\",function(i,r){return`The \"${i}\" argument must be of type number. Received type ${typeof r}`},TypeError);Y(\"ERR_OUT_OF_RANGE\",function(i,r,t){let e=`The value of \"${i}\" is out of range.`,n=t;return Number.isInteger(t)&&Math.abs(t)>2**32?n=rr(String(t)):typeof t==\"bigint\"&&(n=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(n=rr(n)),n+=\"n\"),e+=` It must be ${r}. Received ${n}`,e},RangeError);function rr(i){let r=\"\",t=i.length,e=i[0]===\"-\"?1:0;for(;t>=e+4;t-=3)r=`_${i.slice(t-3,t)}${r}`;return`${i.slice(0,t)}${r}`}function jr(i,r,t){T(r,\"offset\"),(i[r]===void 0||i[r+t]===void 0)&&C(r,i.length-(t+1))}function sr(i,r,t,e,n,o){if(i>t||i<r){let u=typeof r==\"bigint\"?\"n\":\"\",f;throw o>3?r===0||r===BigInt(0)?f=`>= 0${u} and < 2${u} ** ${(o+1)*8}${u}`:f=`>= -(2${u} ** ${(o+1)*8-1}${u}) and < 2 ** ${(o+1)*8-1}${u}`:f=`>= ${r}${u} and <= ${t}${u}`,new F.ERR_OUT_OF_RANGE(\"value\",f,i)}jr(e,n,o)}function T(i,r){if(typeof i!=\"number\")throw new F.ERR_INVALID_ARG_TYPE(r,\"number\",i)}function C(i,r,t){throw Math.floor(i)!==i?(T(i,t),new F.ERR_OUT_OF_RANGE(t||\"offset\",\"an integer\",i)):r<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE(t||\"offset\",`>= ${t?1:0} and <= ${r}`,i)}var Vr=/[^+/0-9A-Za-z-_]/g;function Xr(i){if(i=i.split(\"=\")[0],i=i.trim().replace(Vr,\"\"),i.length<2)return\"\";for(;i.length%4!==0;)i=i+\"=\";return i}function q(i,r){r=r||1/0;let t,e=i.length,n=null,o=[];for(let u=0;u<e;++u){if(t=i.charCodeAt(u),t>55295&&t<57344){if(!n){if(t>56319){(r-=3)>-1&&o.push(239,191,189);continue}else if(u+1===e){(r-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(r-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(r-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((r-=1)<0)break;o.push(t)}else if(t<2048){if((r-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error(\"Invalid code point\")}return o}function zr(i){let r=[];for(let t=0;t<i.length;++t)r.push(i.charCodeAt(t)&255);return r}function Jr(i,r){let t,e,n,o=[];for(let u=0;u<i.length&&!((r-=2)<0);++u)t=i.charCodeAt(u),e=t>>8,n=t%256,o.push(n),o.push(e);return o}function lr(i){return D.toByteArray(Xr(i))}function k(i,r,t,e){let n;for(n=0;n<e&&!(n+t>=r.length||n>=i.length);++n)r[n+t]=i[n];return n}function d(i,r){return i instanceof r||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===r.name}function W(i){return i!==i}var Kr=function(){let i=\"0123456789abcdef\",r=new Array(256);for(let t=0;t<16;++t){let e=t*16;for(let n=0;n<16;++n)r[e+n]=i[t]+i[n]}return r}();function E(i){return typeof BigInt>\"u\"?Zr:i}function Zr(){throw new Error(\"BigInt not supported\")}});import{arrayOfNumberToUint8Array as Qr,asciiStringToByteArray as vr,bigEndianCrc32 as rt,uint8ArrayToHexString as tt}from\"@dfinity/utils\";var j=xr(ar()),Ot=i=>Uint8Array.from(j.Buffer.from(i,\"hex\")).subarray(4),qt=i=>j.Buffer.from(i).toString(\"hex\"),Gt=(i,r)=>{let t=vr(`\naccount-id`),e=V.create();e.update(Qr([...t,...i.toUint8Array(),...r??Array(32).fill(0)]));let n=e.digest(),o=rt(n),u=new Uint8Array([...o,...n]);return tt(u)};import{bigEndianCrc32 as it,isNullish as et}from\"@dfinity/utils\";var nt=i=>{if(i.length!=64)throw new N(`Invalid account identifier ${i}. The account identifier must be 64 chars in length.`);let r=Buffer.from(i,\"hex\"),t=r.slice(0,4),e=Buffer.from(it(r.slice(4)));if(!e.equals(t))throw new N(`Account identifier ${i} has an invalid checksum. Are you sure the account identifier is correct?\n\nExpected checksum: ${e.toString(\"hex\")}\nFound checksum: ${t.toString(\"hex\")}`)},jt=i=>{if(et(i))return!1;try{return nt(i),!0}catch{}return!1};export{wr as AccountIdentifier,It as AllowanceChangedError,st as ApproveError,dt as BadFeeError,lt as ConsentMessageError,Ct as ConsentMessageUnavailableError,At as CreatedInFutureError,gt as DuplicateError,Ut as ExpiredError,mt as GenericError,ht as IcrcError,dr as IndexCanister,yt as InsufficientFundsError,Tt as InsufficientPaymentError,N as InvalidAccountIDError,at as InvalidSenderError,mr as LedgerCanister,Br as SubAccount,Et as TemporarilyUnavailableError,Ft as TooOldError,pt as TransferError,wt as TxCreatedInFutureError,Bt as TxDuplicateError,xt as TxTooOldError,Rt as UnsupportedCanisterCallError,qt as accountIdentifierFromBytes,Ot as accountIdentifierToBytes,nt as checkAccountId,jt as isIcpAccountIdentifier,_t as mapIcrc1TransferError,bt as mapIcrc21ConsentMessageError,kt as mapIcrc2ApproveError,St as mapTransferError,Gt as principalToAccountIdentifier,ut as toIcrc1TransferRawRequest,ft as toIcrc21ConsentMessageRawRequest,ct as toIcrc2ApproveRawRequest,ot as toTransferRawRequest};\n/*! Bundled license information:\n\nieee754/index.js:\n  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)\n\nbuffer/index.js:\n  (*!\n   * The buffer module from node.js, for the browser.\n   *\n   * @author   Feross Aboukhadijeh <https://feross.org>\n   * @license  MIT\n   *)\n*/\n//# sourceMappingURL=index.js.map\n","// src/adapters/BaseIcAdapter.ts\n\nimport { Actor, type ActorSubclass } from \"@dfinity/agent\";\nimport { Principal } from \"@dfinity/principal\";\nimport { type Wallet, Adapter } from \"../../types/index.d\"; // Adjusted path\nimport { AccountIdentifier } from \"@dfinity/ledger-icp\";\n\n/**\n * Abstract base class for adapters implementing Adapter.Interface\n */\nexport abstract class BaseIcAdapter implements Adapter.Interface {\n  // Abstract properties to be implemented by subclasses\n  abstract walletName: string;\n  abstract logo: string;\n  static supportedChains: Adapter.Chain[] = [Adapter.Chain.ICP];\n  protected state: Adapter.Status = Adapter.Status.INIT;\n  protected config: Wallet.PNPConfig;\n  protected actorCache: Map<string, ActorSubclass<any>> = new Map();\n\n  constructor(config: Wallet.PNPConfig) {\n    this.config = config; // Store config\n  }\n\n  // Common state management\n  protected setState(newState: Adapter.Status): void {\n    this.state = newState;\n  }\n\n  getState(): Adapter.Status {\n    return this.state;\n  }\n\n  // Standard implementation for getAccountId, can be overridden by subclasses if needed\n  async getAccountId(): Promise<string> {\n    const principal = await this.getPrincipal();\n    if (!principal)\n      throw new Error(\"Principal not available to derive account ID\");\n    \n    try {\n      const principalObj = Principal.fromText(principal);\n      \n      const accountId = AccountIdentifier.fromPrincipal({\n        principal: principalObj,\n        subAccount: undefined, // Default subaccount\n      }).toHex();\n      \n      return accountId;\n    } catch (err) {\n      console.error(\"[BaseIcAdapter] Error deriving account ID:\", err);\n      throw err;\n    }\n  }\n\n  // Abstract methods to be implemented by subclasses\n  abstract isAvailable(): Promise<boolean>;\n  abstract isConnected(): Promise<boolean>;\n  abstract connect(): Promise<Wallet.Account>; // Config is available via this.config\n  abstract getPrincipal(): Promise<string>; // Subclasses must implement how to get the principal\n\n  async getAddresses(): Promise<Adapter.Addresses> {\n    return {\n      icp: {\n        owner: await this.getPrincipal(),\n        subaccount: await this.getAccountId(),\n      },\n    };\n  }\n  // Base implementation of createActor with caching\n  createActor<T>(\n    canisterId: string,\n    idl: any,\n    options?: { requiresSigning?: boolean, anon?: boolean }\n  ): ActorSubclass<T> {\n    const { anon = false, requiresSigning = false } = options;\n    // Generate cache key that doesn't depend on async getPrincipal\n    const cacheKey = `${this.walletName}-${canisterId}-${\n      requiresSigning\n    }-${anon}`;\n\n    // Check if we have a cached actor\n    const cachedActor = this.actorCache.get(cacheKey);\n    if (cachedActor) {\n      return cachedActor;\n    }\n\n    // No cached actor, create a new one\n    let actor: ActorSubclass<T>;\n    if (anon) {\n      actor = Actor.createActor<T>(idl, {\n        canisterId,\n      });\n    } else {\n      actor = this.createActorInternal<T>(canisterId, idl, options);\n    }\n    this.actorCache.set(cacheKey, actor);\n    return actor;\n  }\n\n  // Abstract method for adapter-specific actor creation\n  protected abstract createActorInternal<T>(\n    canisterId: string,\n    idl: any,\n    options?: { requiresSigning?: boolean }\n  ): ActorSubclass<T>;\n\n  // Base disconnect logic\n  async disconnect(): Promise<void> {\n    if (\n      this.state === Adapter.Status.DISCONNECTING ||\n      this.state === Adapter.Status.CONNECTING ||\n      this.state === Adapter.Status.DISCONNECTED\n    ) {\n      return;\n    }\n    this.setState(Adapter.Status.DISCONNECTING);\n    try {\n      await this.disconnectInternal(); // Call subclass-specific logic\n    } catch (error) {\n      console.error(`[${this.walletName}] Error during disconnect:`, error);\n      // Ensure state is set even on error, but maybe log or handle differently\n    } finally {\n      this.cleanupInternal(); // Allow subclasses for further cleanup\n      this.setState(Adapter.Status.DISCONNECTED);\n    }\n  }\n\n  // Abstract methods for subclass-specific disconnect logic and resource cleanup\n  // Default implementations do nothing, subclasses can override if needed.\n  protected async disconnectInternal(): Promise<void> {\n    /* No-op by default */\n    console.log(`[${this.walletName}] Disconnecting...`);\n\n    // Clear actor cache on disconnect\n    this.actorCache.clear();\n\n    // Clear localStorage on disconnect   \n    if (this.config?.localStorageKey) {\n      localStorage.removeItem(this.config.localStorageKey);\n    }\n  }\n  protected cleanupInternal(): void {\n    /* No-op by default */\n  }\n}\n","// src/adapters/IIAdapter.ts\n\nimport { Actor, HttpAgent, type ActorSubclass, Identity } from \"@dfinity/agent\";\nimport { AuthClient } from \"@dfinity/auth-client\";\nimport { type Wallet, Adapter } from \"../../types/index.d\";\nimport dfinityLogo from \"../../../assets/dfinity.webp\";\nimport { BaseIcAdapter } from \"./BaseIcAdapter\";\n\n// Extend BaseIcAdapter\nexport class IIAdapter extends BaseIcAdapter implements Adapter.Interface {\n  static readonly logo: string = dfinityLogo;\n  static readonly walletName: string = \"Internet Identity\";\n  walletName: string = IIAdapter.walletName;\n  logo: string = IIAdapter.logo;\n  \n  // II specific properties\n  private authClient: AuthClient | null = null;\n  private agent: HttpAgent | null = null;\n\n  // Constructor calls super and does II specific initialization\n  constructor(config: Wallet.PNPConfig) {\n    super(config); // Call base constructor\n\n    // Initialize AuthClient immediately, using this.config\n    AuthClient.create({\n      idleOptions: {\n        idleTimeout: Number(this.config.adapters?.ii?.config?.timeout || this.config.timeout || 1000 * 60 * 60 * 24),\n        disableDefaultIdleCallback: true,\n      },\n    }).then(client => {\n      this.authClient = client;\n      this.authClient.idleManager?.registerCallback?.(() => this.refreshLogin());\n    }).catch(err => {\n        console.error(\"[II] Failed to create AuthClient:\", err);\n        this.setState(Adapter.Status.ERROR); // Use inherited setState\n    });\n  }\n\n  // Use the resolved config for agent initialization\n  private async initAgent(identity: Identity): Promise<void> {    \n    this.agent = HttpAgent.createSync({\n      identity,\n      host: this.config.hostUrl, \n      verifyQuerySignatures: this.config.verifyQuerySignatures\n    });\n    \n    if (this.config.fetchRootKeys) { \n      try {\n        await this.agent.fetchRootKey();\n      } catch (e) {\n        console.warn(\"[II] Unable to fetch root key. Check replica status.\", e);\n      }\n    }\n  }\n\n  // Implement abstract methods\n  async isAvailable(): Promise<boolean> {\n    return true; // Always available\n  }\n\n  async connect(): Promise<Wallet.Account> {\n    try {\n      this.setState(Adapter.Status.CONNECTING);\n      \n      if (!this.authClient) {\n         await new Promise(resolve => setTimeout(resolve, 500)); \n         if (!this.authClient) throw new Error(\"AuthClient failed to initialize.\");\n      }\n\n      const isAuthenticated = await this.authClient.isAuthenticated();\n\n      if (!isAuthenticated) {\n        return new Promise<Wallet.Account>((resolve, reject) => {\n          this.authClient!.login({\n            derivationOrigin: this.config.derivationOrigin,\n            identityProvider: this.config.identityProvider, \n            maxTimeToLive: BigInt(1 * 24 * 60 * 60 * 1000 * 1000 * 1000), // 1 day\n            onSuccess: () => {\n              this._continueLogin()\n                .then(account => {\n                  this.setState(Adapter.Status.READY);\n                  resolve(account);\n                })\n                .catch(reject);\n            },\n            onError: (error) => {\n              console.error(\"[II] Login error:\", error);\n              this.disconnect().catch(() => {}); // Use inherited disconnect\n              this.setState(Adapter.Status.ERROR); \n              reject(new Error(\"II Authentication failed: \" + error));\n            },\n          });\n        });\n      }\n\n      const account = await this._continueLogin(); \n      this.setState(Adapter.Status.READY);\n      return account;\n    } catch (error) {\n        // Use the helper method\n        await this._handleConnectError(error, \"Connect error\");\n    }\n  }\n\n  // Helper method for handling errors during connection/login flow\n  private async _handleConnectError(error: unknown, contextMessage: string): Promise<never> {\n      console.error(`[II] ${contextMessage}:`, error);\n      this.setState(Adapter.Status.ERROR);\n      // Attempt to disconnect, but don't let disconnect errors mask the original error\n      await this.disconnect().catch(disconnectError => {\n          console.error(\"[II] Error during disconnect after handling error:\", disconnectError);\n      });\n      // Re-throw the original error to propagate it\n      throw error;\n  }\n\n  private async _continueLogin(): Promise<Wallet.Account> {\n    if (!this.authClient) throw new Error(\"AuthClient not available in _continueLogin\");\n    try {        \n      const identity = this.authClient.getIdentity();\n      const principal = identity.getPrincipal();\n      \n      if (principal.isAnonymous()) {\n        throw new Error(\"Login resulted in anonymous principal\");\n      }\n      \n      await this.initAgent(identity); \n      \n      // Get the account ID using the base method which derives from principal\n      const accountId = await this.getAccountId();\n      \n      return {\n        owner: principal.toText(),\n        // Use the derived account ID\n        subaccount: accountId,\n      };\n    } catch (error) {\n      // Use the helper method\n      await this._handleConnectError(error, \"Error during _continueLogin\");\n    }\n  }\n\n  async isConnected(): Promise<boolean> {\n    return this.authClient ? await this.authClient.isAuthenticated() : false;\n  }\n\n  // Implementation for BaseIcAdapter actor caching\n  protected createActorInternal<T>(\n    canisterId: string, \n    idl: any, \n  ): ActorSubclass<T> {\n    if (!this.agent) {\n      throw new Error(\"Agent not initialized. Connect first.\");\n    }\n    return Actor.createActor(idl, {\n      agent: this.agent,\n      canisterId,\n    });\n  }\n\n  async getPrincipal(): Promise<string> {\n    if (!this.authClient) throw new Error(\"Not connected\");\n    const identity = this.authClient.getIdentity();\n    if (!identity) throw new Error(\"Identity not available\");\n    const principal = identity.getPrincipal();\n    return principal.toText();\n  }\n\n  private async refreshLogin(): Promise<void> {\n    try {\n      await this.connect(); \n    } catch (error) {\n      console.error(\"[II] Failed to refresh login:\", error);\n      await this.disconnect().catch(() => {}); \n    }\n  }\n\n  // Disconnect logic specific to II\n  protected async disconnectInternal(): Promise<void> {\n    if (this.authClient) { \n        await this.authClient.logout();\n    } \n  }\n\n  // Cleanup logic specific to II\n  protected cleanupInternal(): void {\n      this.authClient = null;\n      this.agent = null;\n  }\n}","export default \"data:image/webp;base64,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\"","// src/adapters/PlugAdapter.ts\n\nimport { ActorSubclass } from \"@dfinity/agent\";\nimport { Principal } from \"@dfinity/principal\";\nimport { Adapter, Wallet } from \"../../types/index.d\";\nimport plugLogo from \"../../../assets/plug.webp\";\nimport { AccountIdentifier } from \"@dfinity/ledger-icp\";\nimport { BaseIcAdapter } from \"./BaseIcAdapter\";\n\n// Extend BaseIcAdapter\nexport class PlugAdapter extends BaseIcAdapter implements Adapter.Interface {\n  static readonly logo: string = plugLogo;\n  static readonly walletName: string = \"Plug\";\n  walletName: string = PlugAdapter.walletName;\n  logo: string = PlugAdapter.logo;\n\n  // Plug specific properties\n  private readyState:\n    | \"NotDetected\"\n    | \"Installed\"\n    | \"Connected\" = \"NotDetected\"; // Removed \"Disconnected\" as it's handled by BaseIcAdapter state\n  \n  private _connectionState: boolean = false;\n  private _connectionStateTimestamp: number = 0;\n  private _connectionStateUpdateInterval: number = 2000; // Update every 2 seconds\n  // state and config are inherited\n\n  // Constructor calls super and does Plug specific initialization\n  constructor(config: Wallet.PNPConfig) {\n    super(config); // Call base constructor\n    this.initPlug();\n    this.updateConnectionState();\n  }\n\n  // Initialize Plug and set readyState accordingly\n  private initPlug(): void {\n    if (typeof window !== \"undefined\" && window.ic?.plug) {\n      window.ic.plug.isConnected().then((connected) => {\n        this.readyState = connected ? \"Connected\" : \"Installed\";\n        if (connected) {\n            this.setState(Adapter.Status.CONNECTED); // Set base state if already connected\n        } else {\n            this.setState(Adapter.Status.READY); // Set base state if installed but not connected\n        }\n      });\n    } else {\n      this.readyState = \"NotDetected\";\n      this.setState(Adapter.Status.INIT); // Or perhaps ERROR/UNAVAILABLE?\n    }\n  }\n\n  // Implement abstract methods\n  async isAvailable(): Promise<boolean> {\n    // Reflects if the Plug extension is installed\n    return this.readyState !== \"NotDetected\";\n  }\n\n  async connect(): Promise<Wallet.Account> {\n    this.setState(Adapter.Status.CONNECTING);\n    const isConnected = await this.isConnected();\n\n    if (!isConnected) {\n      if (!window.ic?.plug) {\n          this.setState(Adapter.Status.ERROR);\n          throw new Error(\"Plug Wallet extension not detected.\");\n      }\n      try {\n        const connected = await window.ic.plug.requestConnect({\n          whitelist: this.config.delegationTargets?.map(p => typeof p === 'string' ? p : p.toText()) || [], \n          host: this.config.hostUrl, \n          timeout: this.config.adapters?.plug?.config?.timeout || this.config.timeout || 1000 * 60 * 60 * 24 * 7, \n          onConnectionUpdate: () => this.handleConnectionUpdate(),\n        });\n        if (!connected) {\n          this.setState(Adapter.Status.READY);\n          throw new Error(\"User declined the connection request\");\n        }\n        this.readyState = \"Connected\";\n      } catch (e) {\n        this.setState(Adapter.Status.READY);\n        console.error(\"Failed to connect to Plug wallet:\", e);\n        throw e;\n      }\n    } else {\n      this.readyState = \"Connected\";\n    }\n\n    this._connectionState = true;\n    this._connectionStateTimestamp = Date.now();\n    this.setState(Adapter.Status.CONNECTED);\n    \n    const principal = await this.getPrincipal();\n\n    return {\n      owner: principal,\n      subaccount: AccountIdentifier.fromPrincipal({\n        principal: Principal.fromText(principal),\n        subAccount: undefined,\n      }).toHex(),\n    };\n  }\n  \n  // disconnect method is inherited, uses disconnectInternal and cleanupInternal\n\n  async getPrincipal(): Promise<string> {\n    // Ensure Plug is available and we have a principal ID\n    if (this.readyState === \"Connected\" && window.ic?.plug?.principalId) {\n      return Principal.fromText(window.ic.plug.principalId).toText();\n    } else if (this.readyState === \"Installed\") {\n        // Try connecting silently if installed but not connected? Or just throw?\n        throw new Error(\"Plug wallet is installed but not connected.\");\n    } else {\n        throw new Error(\"Plug wallet is not available or principal ID is unavailable\");\n    }\n  }\n\n  // getAccountId is inherited\n\n  // Implementation of the required abstract method from BaseIcAdapter\n  protected createActorInternal<T>(\n    canisterId: string,\n    idl: any,\n    options?: { requiresSigning?: boolean }\n  ): ActorSubclass<T> {\n    if (!window.ic?.plug?.createActor) {\n        throw new Error(\"Plug wallet is not available or not connected to create actor.\");\n    }\n    if (!canisterId || !idl) {\n      throw new Error(\"Canister ID and IDL factory are required\");\n    }\n\n    try {\n      // Plug's createActor returns a Promise<ActorSubclass<T>>\n      const actorPromise = window.ic.plug.createActor<T>({\n        canisterId,\n        interfaceFactory: idl,\n      });\n\n      // Use a proxy to handle the promise resolution smoothly\n      const proxy = new Proxy({}, {\n        get: (_, prop) => {\n          if (prop === 'then') {\n            return undefined;\n          }\n          return (...args: any[]) => {\n            return actorPromise.then(actor => {\n              const value = actor[prop];\n              if (typeof value === 'function') {\n                return value.apply(actor, args);\n              }\n              return value;\n            });\n          };\n        }\n      }) as ActorSubclass<T>;\n\n      return proxy;\n    } catch (e) {\n      console.error(\"Failed to create actor through Plug:\", e);\n      throw e;\n    }\n  }\n  \n  // Plug specific connection state update\n  private async updateConnectionState(): Promise<void> {\n    if (window.ic?.plug?.isConnected) {\n      this._connectionState = await window.ic.plug.isConnected();\n      this._connectionStateTimestamp = Date.now();\n      this.readyState = this._connectionState ? \"Connected\" : \"Installed\";\n      if (this._connectionState && this.state !== Adapter.Status.CONNECTED) {\n          this.setState(Adapter.Status.CONNECTED);\n      } else if (!this._connectionState && this.state === Adapter.Status.CONNECTED){\n          // If Plug reports disconnected but base state is connected, update base state\n          this.setState(Adapter.Status.READY); // Or DISCONNECTED?\n      }\n    } else {\n      this._connectionState = false;\n      this.readyState = \"NotDetected\";\n      this.setState(Adapter.Status.INIT);\n    }\n  }\n\n  // Use polling check for synchronous isConnected\n  async isConnected(): Promise<boolean> {\n    if (Date.now() - this._connectionStateTimestamp > this._connectionStateUpdateInterval) {\n      // Don't await, let it run in background\n      this.updateConnectionState().catch(err => console.error(\"[Plug] Failed background connection state update:\", err));\n    }\n    return this._connectionState;\n  }\n\n  // Handle Plug's connection updates\n  private handleConnectionUpdate(): void {\n    // Trigger a state update\n    this.updateConnectionState().then(() => {\n        // Potentially emit a custom event for the dapp\n        window.dispatchEvent(new CustomEvent('pnp:connectionUpdate', { detail: { adapterId: 'plug', state: this.state } }));\n    }).catch(err => console.error(\"[Plug] Error handling connection update:\", err));\n  }\n\n  // Plug specific disconnect logic\n  protected async disconnectInternal(): Promise<void> {\n    if (window.ic?.plug?.disconnect) {\n      await window.ic.plug.disconnect();\n    } else {\n      console.warn(\"Plug wallet is not available for disconnect\");\n    }\n  }\n\n  // Plug specific cleanup (resetting internal state)\n  protected cleanupInternal(): void {\n      this.readyState = this._connectionState ? \"Installed\" : \"NotDetected\"; // Reset readyState based on installation\n      this._connectionState = false;\n      this._connectionStateTimestamp = 0;\n  }\n\n}","export default \"data:image/webp;base64,UklGRtg2AABXRUJQVlA4WAoAAAAwAAAAUwEAUwEASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBI6xgAAAHwgP2fKqf9/53dzUZ244prBahQL5qkTakCdS8UKyFovUVqSN1dI/XyrisNVPEWiUHwNw2EoMGje865dOY1r5nMOe+PRoSD23rBVtfTWdNhQahE+T910//7T1SMPyYoIfwxvtighEnpMnDoLfc/8uoX3y/95aMpqbLhstd/WLLoi6InHhkzNO/k9jFUZGR57QfdPveN1UePRdQWTdN0e9p0iVRIWGAbC9uYtETU441VP7561+C+AdnMnz8uJSbzlEHTXpi//YhOToRBazhXIoT/pg6LU4Gahe89PLx/h+iUeL+/beNr33/EvPe+Wl5R20QeHkjRVRLhPp017a1eXfreC3decXob3YtCo97ZqbfqWOkOeSzmfTZrQxiniHa09OFT2haBtO4jVhzVUdMKaXCFjpuqX+rTKbqttHvF/MrjxM6z1jKat9RpTpcFr9nBHLWaJXdmtIW9e8guY8nySJ1kQQlkyDD2nyejRXce+r3jeA1iF22OlwWv63xGbe24sMj0+MbxMmRcuiA1vpXG4/MxRg2oxvoR4jKCdRSckHVx0Ece1aqRR42oxupEQR3du5toloS5aEv98jgXT4CCsup/PClKQK4vV2lLFXNit3WWSTTpeceo8TDL2g9DwtF3H73/iCPycZJcfPhxB2yLm8vD1nt8gpnVsC0cut54aO/m1at+futKn2wCTF1mf71qZdWufYdRXvPUkXyig1AO2wsNkH4CTcwWZlr7zZsP3Hhm15NT01KD5ECTTJpJTEvq2b3nDaPmfvPXXlz7rBDpyj5K2VuAlqSqev3Gjx8ZMShZkW7qPXTa24u26pqKshO9LM5iP6/KWRf0OVqz8tfvXn5wTPZZRntyT7G9zrp+2tz53/7x77oWu8kCN9IHRWnsmoNwa/l30ehTu8WHwsYRzUVSdFxchy4XvPRnK3itqB+J8afxiyE7jNWpPc+eG1TafBLaVR2xRgMeWg+cLgSTWkA92vz8JQL73vLw9c6Y/FUENOQLRQiQjW2BrL7DD8fJYZtpC8G/c2uIewLBPeZvxRkHIBay5QTFSi558yXo7wq4L7y3Ia/cYsPFddMUvBcS7qnhHcfpfJTOoX4298FNbxMXAK5ZnJkFcLbnGG26bjp/H90fqIvjyrlHqNTfF6MoLnz9TLfoT7hSRe1D00AjEOPKKWEtGcsp6MORXq1USmMVB25bYZJzApybzzyOPEHtwb5OCjG56/8UGoNPqVDGz6jjSqnfPRQzufXtMjOYQ36fdedGeDuNNxWRkoQDkdYjYvGLuXG2aRPEDuzKNHDzryIjI9v1l9x4h/b9tRH+cvV0VSvlnXYkmROBLXbFDcOwqz9NcXe6NtAsezgnzqKWzlJcPn1oIIL4AI1fFLcn21nMvqHv4cT3NEYqrp92mtNArMAnKhhTT+FYyP15g8b1XOhGi9usUtyffFqoYQIXBqt2U3DsW894ANpHKNcrXBipUlS/wQOQupNWMYoHE2jmcI4HII0Wcf01zIOnKJofaUfCvYNiSylUBXl4b8UUtmZ5APyfUSIN+9M4EP0ThXJDcw+QXqPtGO15aL6WQkW0F2AWzfnqyiNou4vCAsULcLVG4XYOJDbq5HPxq56AQbRT7T0c6E5bYLPtuH2Y0fS7iA/f4cBNNG5VPEEyPAXynlHBgek0Y+jvDdhCMe9aDnxAy3p6A76jzQWHY+1ijbLAFG/ACzQG4VNLUXuTR2CEw7S5NZVOM4UfPAJn0ngOnQE0HvUIJNMm4xN8X4XGeMUjpIMU1qDzGI1zvQJLTEiljqJTSCPZK/CtORekB8dSsCk1HA0izYpX4FnCtyVFOnNwVYwbUtTWM3A/ZdOInIVMzG6K1ks9AzcYkHeNPGQyGylZiWfgDJ3yw03YEcbjFK3neQa6tZoWTmIqtqdymMLdnoHexynZ/cjkGoZArjjMM5Cyh2LiLyBzTStF6YGegbRNxrogGnlRAJdbKTT29w7ZKoqJfxGNy0SKzse6uxnYR9u1RpvE20U+VHxPUajr4RkILqK4tRUhVPyv2rYrpzHUdFM8Q/qKYuOb4nF1fpGic22id6CEQg2yMJvC6ljvwDQD4s9/h3B1Hh0h85niHbhCJW/GXwRx6biXaAj1Awy8Q8FvyTZ+DbbSOcSldYOieIlrM4n5+EoXtDq/ChVvkYYcNi3cNh+/8zgxDHxvv67rh78dEXRDcI8NZz+zQdf1hg3jo/loHX3WmMHxfsVMXuMmeP61Q7KMEMP/Q5yyXiopKi52SCXFRSVFDsmhzgNRMHrZFLW0BChq1wiuzpxH7x2b2ztd8blbaGSALUxpC1Xa43JUNep9MEbrjIncFaA2B6sXfvDw2It6t3cpchsJ4w0d9VgY4wEzxieph+o2zM6LcSEuajAngo0wjAmGsoyLAneetz14huJ3HYFppC0BqO0opFr2D3FWwdpp618f1clVuLABYNyEUbakgyEY+TrmDzBdHCoRt5/mLy9zEfJMWAUgcGvnOsfNn/aNcg8BOND8BNoc42u37LZkt8hYhpspQ95hUE8gR+6PdgMuaISNvn38bcQBG0LcWTjM6ntZAZerZvM1UKvBnnLY4A8Xt5P/ufg4cAbs9awsHnou5p2Y7adA9uQ0Ak3YDoP/dgdkHRBVID/l5djdFZK9oLHaqh8aZxA9tS68SvIC06i2KQFwSh7tkziDm0C/kwGeqcbB9n7Gi8efXSbx09zAFo06JVQBeKIag9Uim04I+h3/V7J7CQkwChiWBXdHmdL8G9I+IQ9qJhsqiCCMsXobSXNC0oZu6FSBBUx/g0EhDaQk+R9/SHJVATpn6Hco/zvRJ/sijgypCPrsMD1gNqWLJN0QaExRGmo76ch4KQvH4Kbr9DWYBHGqsym8vYOMfeIWa/SF84kFO9Y9LOXYDdNGyhK7AdcX84TcMlLG1YwZEDHOsPfq7Jzc7Nzc7Nyc7NycHKeUN2rm6381akZP7dNFsgFWc+ogYcGaFSbBBxSYjftoOlNXu101/YutTahr5VfpRhxyGxlWvd0442CMZzbpukzW3vrje89rgAnAJRMZIlvyGpgfh/kIO7MwetzhLc2cMkBZmC4f+GQrtLJaaT1Q21F2rYxhB0/DsXScPvd5+xCW2DRUslxoy4wtBB4HOAgMn+QzbxO1WUidDqQvxLoawpKFVWCAJRxjIxOt20mLmw07QrlGyVZghEWA3hIEvH7HXLMN1gX6BK8LybcIeGaYioAhFUHteTPoDhAYO0vCDRnrHjScbA2BITWE2vUpR1HEKZIVHE/szeH5GpaCTNoavgZu38/bQe4ElD0h9/eJd2Qhd36aCt/2SHM7WaZkm/4bxdaJKtiIYYrdGGYAq2RZcwYyKYsxxJU+6cYZWBrgFWM8ko7d+0zS+ZjBSgZIVbDMHPqis2UJMArMQwpblZos9O6f3Yzw9ZBEGWwFpphmph4Yixpn+43FpvdnoJNQgcB8iTKw2fxmsvX6KBhjnBMIUdq+qtLx+z/Z0QsWKsMyFRh8YjaBZcwdAj6hAzr7GaazPBnEtoEyZGNpew1E23QOAzCJ3hWAC9dVptiWOgtBIMz7w4EMDoSrHNsew7/cIlOBAbZqZtyLVeAxAm9bJdgG4TWJFmmxLJ1JCACLaKw71eF0LicfzfaEXp5kNT9I1H9jaojJf2N+j+3N4EH7OmhnSAdDmVZjLgKOMziN1/gnFgHdh6tir5ws0XgYBPJiZ/CJra2KxSfmIkSXWT1m69AgaZLTyCzEAuO2zOzO5DIEX4P6T5ne2+QrkIyTogRTjJFkzqAYIxdeZhcelqjAapT1wNDeKEIJqCUcS+fC/XbDIJkIvUvPS5MLGghDBxVCcIHt2sVHGMGevSdN8uwYxwZ6M06AEZN85lHfyUe4Umf+oVCiAnNDClRgEHkKl7Nnv0k1A5ZnzZyY/wKzZSPj85pmZ5FkHzvnBfEx06hzfDwEAZcQGKox7rjchKvZ+VGiPjHrtMDPxeQfyCuM67n4ZoRqrui/AS/b8zo+wmSiWQBt5S2JCowZPM5gt2SWOAMf4QX27FHZCsD9gzUe5vwRGA/jI7zLno10xbgtdey5x20Df1p9YftpmDQZ2GINGXT8bFkAxhiN1QIOcxEStrALXaVaje3RwQQYBY5iYgndd0C+beUI9qVIk0HNAJOkxRiDMMYyW/IBLsJJtN0PEv5YI2tsZk8TooCQNbWWCl1bZgH6vmV+/IYiW8HcQ6AZXHBqC9yqOAmr2H+Zosi1CHlmABmwCPOwH+SRnWV+WLe/fvJkcBNsqROJhjGOoCHUCvbzeLzEeML6lt5v+IQuEWdgqMY67qbA4XxuWgNhIwN2p9J438rTJ25hhM0nJg6+CD7xZzp7Whpsu3Cwy0bCtmHYJab/xjzue/BtucNRBJ5SXERAjzPwijH6XiV0hNQj6hq83ECu8TDHzMC25HofULB/GCzgKLYQNcXqBatR7U+UKLnscds4YNyWdejx47ZXGy8ThDRDkSh5DcyEEXwt0LLaiSwkrwT1gL4JdVGkKrBSD9R2FLMxH8MVTv0X9I6yBksUmXIhITO3EVgWgpHv1BQ8A7WowpkHdIzUMFiukAVMNNbHtZhC0kKbAbB3pJsiXYFlGxVfiB232LakILVo6nxkuDzuWMQwaBYLwCvif9FhSrZ+MFVorxi4X0NmxtoQkofRt1THSi8qBi5SDe5r2OHsa8Rd/jktFsfyXWYLILmgT0zcKnj5xLdujVA3F4ar9SZFsuSwC7HA2I019sRpIGmAE7sJtT/xsZXwujDLcPgZMo0xsix3phgjeSZg1fpkZGYSpQyHdOI5QybP+6Rsq7HR4aZrFMUVhQKE8VcpkqZZkqqZS4FHmq1Il8H09xNxuG1ZNIxxUD3B2lDegBy0rFDky0BIKIpGAMYYHZqwJxBJpyOnG7iPkAAUIOsBbwIZFAKpYn8mYQY1g4aVnAVhjEWaNciEc1C19cuwnGHOoKCuC1BzjEpRFHjePEJKWSAOozHKeALf7RtVpb0nKgZSLgIfV8YiYF3t1i9Q2nCdYiHjhqgmSs+gDWGtBO7T+lsHxULK1cDLnzXOYM4TbPZtmTgHu8NnKgSkGw9jHVq4TwxMgpyWHc9b5g9UCMg3dsNiqkyxG+hCoK8UqDbEPYlJ5yesP5K3YI45bMQxYozsM8W3euRV6yNxAW7Wjmo+GKPQjsL8Jnb9RYrU0wXscds4GON5nYjpesAn+c1ERe7kNUCgZECfNB++DBgymJJgFY9cqziSxKsxo7AJpE1boGo7nu6rGLhdFgJm9glkNnS0nYiiwttpxqFR/lzYwPwYCm3S0EpRlCBoQz5lLB2gWMkFBMuSOQjY70RGpUjtvH55lEJE5ufiBs2EKQsDz8XOibBmSpT9+9DkaCNM5BYpl6khu/8GbIhs4OBVYE0z2tJRD1TmK8TkStVovgYwzkCYC6JvS9MFsbnmJW8OP9UZdaMK8o6HgTP2eBjrvo23VpqWTO3qN8zFbVJ2kzEt4BmxEwOM3fAPebU2NuzZsPbZW9sprpR6raoqq6wqq6wsq6osq6ooqyovt6SyClOyNPoSaLznGVoCFDX1tySnOhXlNo0s/cnqLP15ftGz992UO6R3Z+Ot62LJ5/wDiARWmFlRBHX+2y+52hbq+0/r42ovc+MNa82ZzxebkJycnBQf5/fZZ9BezlTCez2xrYCE066eVbJ8VVn1ztr1a9cu/3DW1acmKj6/ra6JB7uPOWHC/JoGzXKR7EEKVdM0tXHnp/knRAf8XmyPjkrtM2lJs66puurwOp1xDqto05+jTkmNMrck7t3zK1F+Q3lZ3vEf4vD5M5ftN9qDetuOwNrSWf3CASty4Qsak8JptZz89KIGXV31YD9XXGsdpy6sUzUj+AaEsP/o6q4FEzv2nPDVIT2yqTCHByfudfThyA1uttc4zhZ31FjRUOAT2u6jqU079qmOuX0Yn541hE7sOdnlrkDXkia0eBt1wtGvlL1Enbec6Gb4u8/dY2w13AKaFyBzbQtZ55dcq5biixldZd7xSx9F4TKdovPKKFfC8h8yixs0NcKRJXG4vEjZtnYmuBXnbdF0TeWZbfPh7m6v0nTu5E7P/Dn/6LzTP4m4HX3KhPBQq+vhSp/o4dUadzaHcbt6N0XnY93c6BM3Z6+mcqcmhCuOobwwGvu70CdU2KxzTQ53oygO9bqJQuR89yF6tuFfCJFaZkdjkk072FzkMk8Un3+44UvxhPiO2zMM86vfEYr7d7fL4PfnGK2Jgroux4d306uBoLE1qXPdJrJw7j+W0ybKzY4z8eKFqY0UjQtdhswtujB3lquyuZ0f6zZmN4UF0gRrTIvNp0LdFAbRHu2jUO4qdfyjzf1UqEs7NiqAxUoKB13lRNzdioAJdlPVEy14Q9M32U3qzNW0iGhEHsGq8jiNvi5C1z1WBEy0a29nJEbRGOEexH5gPBExFcficAnlnao/6h6MaxQHSiBmLE4jHWjKfuQazzr94/gI92g7ziP/EQob3ILAtFZdUFqn4nyVW22TmnKL71CpLhCUgKFaGkbhA5q2WXK7MENSdSREczh2n69g3E53qmr/m/7uQNRMVRc2qTOjMMin6XqV5MCLSC0zXDdxr6WpGPSmMcsVflf61OsCp/peGCTTeNUdSk4yZYHFAoyOhw9S+MIVPjGLjROUyNeSaIyuV1JYG+UGkbATmnWhU1MPBKIXUChPc4OvCWJ/ND0f47zzFYUtWW5Qcr4m9EfVPsMo+Dxl0zvsBs5GQo29pLjuRk0CwvUgxZpaznQBTmvQBReb+iIwXiVc1kq5wgWEqzUhM/LUDPWxXzm0nk93AWbqIkKbGgR6HaPwuwtQYpQUnSIEIfE4hWMx0se/XHcgcKjBj9D5FbRdarj0iV0tPqtiEXicpmmh/NsqF5+yBASyaRwNyZ6kDeJTnYxAoI6m6s2SAyPAVys+tckYvf/MVoPgxhUHJE9KWyAFwyseRlN1c5zshWrxWZ/kw+j9Lpqus2RfpEwV8WBMi8PGY/Q+/DuNI6lyJ26tJjxrcDaQ54jxHmsg1rTzOL7Gcj8KeRGbRZH+7M2A1H3iD8Tnfb8PZZnSX9GHT5H61yzx4wwzDFC6P7yJqu6Wi2XO1eIz3IiH4azT18k/27y4ayXOqU2i03SakSH1v5luVBUn+KUFQoBvh4BQzg41SX7rC8MvXgBQuu7RsKyLKPMFJ/KxD83K+6iOZ6S/UUuDksaXL3qWj3gYe0yF6L1joE/K+E9qFvtq7unz+bDmI+ZFmhnY6/14Sw/J3GAN4RKxsz+CmAaeUWG/aP8UafwhW75fwdGqmG6xYyImWL/jPSggnH2IA2E7z31Y0CclPSYgUa+4T31E4Oxgb9x9OGpMPctK27du1XfFT4y66swM2f1mO7KmLBVZXkIO2uK4cY3kW4IORBU0XW1d++WzI3M7Squ27bUVnCVwpk6PIoMSb/iqGfAEbicNG/54+eHrzzktK7NdOBQtjxvHFtuvTtzv3f2MFrHHITziAHn+UP6l5Uht9caVP//45JRu8sAav1Jh79UF4QAHv/YmmpOuYVrOoQkyeRiY2KQJSutk80zM4Uw57x/AKNBmlymeGZJI8533ifq1vYMJj3HoXux4sbA2Z84qYIrf88mjsetUQWkc5VccoDfxsQYvAdWGoFFDB3lki0WqQz5tlcRxDBJeVUbbXBA3oTekQQ9j1IT8qHu7+njuALEjd1EnjKgC02I5Lg3miOoOPxLl47urBt9laZJp8XSSBSWCUilAHKv3pBX1HLqbLgveFg77W+p2ZyG+BbrllWgIv5DXSrU0hAkiFopo7wbFOU5d/tkeTVfNXQZn87lDGqQeF/HamMFSiMtJ+bL8J778elXtvlbm/q5Lk4ez8YSA1PT1+4Q79gdig0ntkoaOm/3D8kPwxdI0xPCK5fG1STBUbX12wPDchHalOueMmVG0YmeL2qhq1m5kNW19HpVKVKxXtWC/7rkq4DdoC+5pqNvZF4+dOueNj777a2PNxr9e7qnIJaXc9cOmmk2V27CdY3jU75Ggz0xtyOX3Bf2xCf6wEbeRT4qO98WHQkUtqsb/15aikFFWhqkNWVrc7D0q/18fDQUUOaa2tHyHrdM0Xg/tL6jqq2wHYq9xk7NDNY71/GILWk12wPx4kOvMzcYXRxejb8DvTfC3Kzxu3PIp1vBuBvHs5jmaGFUVUfE/aqTydvPs5lnw+wI9HtmHz95HehhPCXiUnzoXN2laRMM6C6t6Y0lX4+TmgVLs2O2thuOBVatl++gQZV14mIedppTutv+H8apku9v90+SOwFiNR3lJhs+fubRe1XTjUAd6YGmjReqXTu8Xdj7xSjdRqb0KljTpqnFUBrWrNf9R0Dsl6At4LXw+vxLdI//TmiYKVpC05pP8HsahzdKMfBj2VP+ScPqw6cXL/i7bUFu7bs2aZe/PGHpakrUubFpRnnirhWItgtjE5JSUpISQ374sSO15t8u2A5H2IlMRGF5vdi3Mm/8DISkAVlA4IPYbAABwgwCdASpUAVQBPlEmj0WjpCEVCYyEQAUEpu/D9eAy/+gGViwB7sqn+u/lV4Clz/Bf4P9kP75+3XzNWN+3fiLlNKd85Tl7/W/3X8qPh5/j/ZR+rv+Z7gX6Uf6X+0f5j9nu875hP6j/gP2d94H/Ef9f+8e67+3f5r2AP6r/jf/x7Uv/T9ir9yPYD/mX9+/73riftR8G37aftz7TP/p9gD0AOGI/t/4r/tL5Rf3/8l/X/8S+t/sP4+7vprqfKvtP+1/vH7kevv+f8IfiZqBfjH8v/2e876x/r/QF9evo3/G/vXjKf3HoZ9jfYA/mH9O/6/rB/p/AU+r/8T2Av5V/Vv+V/Xvy3+l3+O/5X+Q/Mz2j/mP+R/9n+n/Hz7Bf5V/TP+p/dv3p/z/zdesT9tP/x7k36q/80uDZUiQFMdICmOkBTGwIOTlrFsluZs/VCENhfEdkCMDCsqY0dGvDMzKWGpm8A1DDznouopFE0iKNfWRLuCpvhMoSc5WabFu2N6cImFknefL/Y36X2ue/h1cQWY8rEkvGJNZlnc+5apWn2O7PS013ZW7ZsP7Xs81Si54BsoEX0XGEXxqbmPkX7ZfTJ2cZMLJomFk0QaHfuMcZebGfGx5+hBBWVMdICmOeWCLjc+GZaoB6IcUsde0KypjpAUx0gJ5rRwrU9PyT1D2XgCxGVXpgVyDzqeqNz8rveo8Cyzqxs3GJDaCkYe159NEQeL6EYpKy9gFvM90dX9JNLcFJs/UelIg4uN85GRD7EupjpAUvHury+OBVqlfZW9nRmKn4M4zpv2f/JZVFrjePGOkAHPlOoYd82aNvqR0dJg3IcqCYQy8mvPpoiDqnl7TS8Nu1zUVLkk/qyRmVzNroFk0TCwb/jkGshp1S8NPe7cftEUvXnhJlmS2tG0PM72jemlagomFk0S5/1BK4XBXfu/6dd55Q6xh/+P9bP/qZqFNlLKPUOCG/qTI3h8Hx7gZAuUkKGLFs6W7RjeHHXUHiQHLaG4MFE18Q9b2Waa/tbfKQbIeP6qtHxml9XFcCYQ7QPyxXToT6uQu8RuzYFNlSJAUurr/C+Fpnka6V+BEjPkTO4mnKp2oV01+K1rNDKKvwILILi2AsmiYWSg1+CB4tg+ZrBgv38rZArC6XmNTaAPyN/GqoMVhrym9MdwgsY6JUiQFMbDEsOFWB9ptfMzWJhacwiFusFHTw7zRvp2VxJv9GJd1yDrOvGrrMofIbqRICeNCvTnCaxhR9wvdvve8TVf0kmMtFzXIcYQkMc+sy6X5KC0ISZShushJOQuPgEBDY4HKthzWWp7KezUUmiJF33hyHzrMFw+nlguaTkMK7d6TGqs1acl64HI0bBjz6Z7pYkUPLZfgutqg9H6GW5V1bQAKFi18o9X7orZsP7Xn00TCyWThvdmbgAP771+AAglTGv1YbtW5LP48HESLz6gBy7WjjclDRWjzCshZmdwZQ/flsY64K3pA52kkYZdgwmQTqNUlXqr5Vmh5N1TU24hyHyAjxwnrMtCMHxUUM/G5dI1DIWX3Jo4gtQBlE4vN+KLqpcMrCgZuDvSl9xtpyq2iMbS2fTzZqPnuUpKDjvxAE587m+wEMM+H6dK6/iZ0nKUZS+IKEpXFw91DZHp7oiCofRoHu1RIVDmoOtqamWt/qKu98kztmC6w5c6RhLTrJ0271PffbnitprJbYtNIYD2Eyvr7ppC2yIHNZN9grUJsh1aCfsVD2kCeQs4FyhpBs/u5VezaM5MCXkgSf9pmSauYJhxBw9OtmhV0/3uItQ1kTBMy5ZW+PtgnLmM5ug8Ukh/cUD1L9L2ZY6HLi5sjfYuzjShgUydOCuOm60/6pKArQqjS/Tux2Mp/z2Lur03Cf2plzNw69xo3f8NflCYDOZ6oN2VMLnF9Y5bl7Ze5eotPsQJ33xJVyigB0J7uqRVhPRF+ngtX6CFU3+UNCQJ4iENZjllvYsUxZjllvbsNXHn58mcbkhB3zBKiJr4VhgfQT+fmlTqcWE7nFjni1L1PFtlRg8VUoT7YJrQi01lPtb7jQkThXjOF7EOOsrmqib3aaLdIwUvkk43OXG6D5EBcVUuLFTdC+fOap+c+xBnuF1lIZdstwJcvjb0xpA+Ac2O+Jj9BTlPRwp6DvVbD5NXyqFLVscW7UCPqgjfUIdF0aW/rOLEj2BJ9cFKgcXzhIk9WMONAYY6UU/OHjMhjo39M2nIc1/dvB8ZvGEKfNOoNXa/oJVHO4zGcd0CUrNM7fIOWcODktALNuRzxXuPByJaTbSvISTLuQ4X/83NTBExOZZAr7WAJx87Ky0vkC1GNUkGVkZvKdBEqpWxL68zkok/SN1DKIWergvqOocGKS6rkFvhO08DxLiAcEUcidAVDAYx7ETeFIbaZDbmmCkQSTeIPQy41EEXDCu/x0om5yomdRTGeku+pyBkYyTg+7l+tx55Z70SGf3qdZFt1hTrkMN/aapV+cqGlEMfC8//ENhQ+gIiXRgdM2kw1T2IT0BJACUTPGBi8usQJCozDM99pi0wkxrex4DVvOlAtfabhbkTc+lhqzth6wBrO/xC2sw3E/yjQsv3TjOCDlP6cxqLOfkD5quLJ0UZw3qjFf70apO1K1ES+x3k/BOrogGNans4P1pGksAww7oFz70aOOloz8Rs39qMCLkP4G8hh2O1gtJdAn87E578Ub4AABq9c+RdgFtg97Lh+VRKHvE0mW5mRF/ctznjtCXR2cpq6KH49I2ZG4iOeOaCeLM1nan7GQzduvxwCrBwVDaBDQchrXRsq9+B/661ZOt8TOlLSR/CVUQYspnB2BZn4yckehQxcYfiAUU1VsfEyA3FyR8HEO5yB1TwsRAxcNEXu/2RA326du5HF6wNBDb46vZmR2LNQ0+ESIeA/m5p33K65lA+2qyEWsG0WhhuhsYM35eAcQACCS09P8P2p3UZWrePOUYcqUrsul7Iv9EI7er2vv9/4ksgMMHNmvA/irVM+Jp09VAXyvRxz0bCLuuI6fA8javlpdUlDqN/K/IOcoprWCR7UQlvKZyYMzklVix2UtEXir4tk1BvdGicfLuPXBI1/HkqXDGR47x46ITOO+BocAWN3o8LLLkA6q4nX9lgcW5ulUMGBZLZd3By0P7wXknkwYuzuuB8TR2psb48+DsZe/bzPQNrYqXtbgbhr6Jja4xau+9jEr7kO3VT4lc5eFLGI7nK+ySzRZ0Yf0WYIkjt9JZRMu/na6N9SpGbPZoHU6BV0gZMuYklp/+2Sgf/lFW15H/6F0ChPbODxdadjqVlD8vWJa2WwAY0WahlS/qLAz2QQ9GnjmpWrjHudtGxph2a7co1jnIGwaWktnmhYI6LRSHKoLvsDQYTVWnBVpX/ed0+56EpL54O8b19c1cKwB/9/oPhJ8Z/KlDQAbNndJ8tBkmNBCRlf+jfVUd0b41eYaHXf/8pQsZkGBW2QumtXat/+IG8vv1tu1KZfz288OkAJeFWwOYblquUL4v+u1pwcTCfkltrG19O6bWpsD8r1U24U+cFomJ3q+w88b8P6IAP6aVj3NQdm1mi3I8kzm3H7yKuSLELAYof3+bUcSSDMAZA7m/ae6+Ig0m0mU2D+PSbS63U8ipUX8w7vrDob7X2OY/3aAd31hNC8mH7Kvr+UodDWgYTB6d6YYDyYaju0maeAXH3h1yLt9huEexmYJtOztmZUKIs0107Dum0m7jz9X+qHF4SXTmy6woT78qYQ659gg3J/ssTpL19CW16fKcar33U7jPq3NUXWswaBROsvKF6bWpjylQZtHJhxqA7/7EiPsmaJYV5PTmi0+sR94HAbvu2Imi7rzttZsBgzGizLDLA6uPenSMCOmXJU+Ajn5gQT8OMf8zlOIXtgBZB919cCesUEq6/EhZCHY4NbcCHcBwkKox8LRGYMpGu0hmZHPAfQO+P5P593Jufyx1LSG9oInH2rwcZPabbLQgpeR/3mWzKhidOWaVLkPG1amkHFyx/zofVVaj/oQEvfR+K5AE7bPYY65cp/3aOzCtNBggG+njxjWH3zXZpPBUXhvCVdXHHmMcRYV9eKyHSQKpLJoTVpM0SxH/Jr/cgHC/+oo+wL7Z4DXhY8duI6vVhXw2XuxiCZjH5smjONwbfzQbcKYfBRLZ8aS6uA1iYr6Jiv+aPC3OkbVqZVe6AS8pNE5wDhCpXmwINgZKo33gJOeaOIhOBoek2uV3LfoOrhUJC+MxrH43sohl9hAyDdUwqyJvO1/uEtjlBijn8HDlWzJ4eJfhtJnKx98IKQ6wvqr+/bSvlGtcE/HnLnCwAWwS4MbEeg4j6huonXjWn3RbYTzSRLF0HdpUfEMiQIQrlWYwQ6+uc1n5lDB3pX00wKmsH4F0IKh3U+hIUwXdeDAGcfYB/ArMFLX0FZWtcU0oZ8cuJsczDG4KaxgUL9ePTjGyZvoUpuqFAV+TaGgSOxRUwIwSmfrCZFCOYs+ad38q9r4/UJfxZ7eTdpgQjYjGPzid22WppvGobcwp4Ii3DTIxAQYnoXyq5lXJrjUuOFQHLJAqQ7hwD5MBugEBj3PbAAo7fzSOcZ0YfiQ6e5HxVAqDpEl4MhN00Wq8NQmO3LMpFZ0C+LZITRqhMlj5tcNrHrF0oCmDr2qyAPrpBwWyzO+Dj7mR3hA5XVxW0O6HeOQywv7vWYJfjiaBch1hXkDeVEy1f0pVJCe20uxSRh7/DX1V1qfM+2q8WVyL3rvEojaV9rE96CQKrRrzH6iYcKKVYaLNo/sQm+J23uIQuqwCcLKHwGiVKkLwJyE2bcMVM6EL1XxIW/oAWWGRlH4s5TvMpQX4F56lOBQ6londi0m3KeP6trSu9R7Yy+PVZAad5SnhAvA7aaiYC/z8EDMbkvHZKv8ezi3yj+1MHdA4owbwAUNUn4iWRExbHtwd2twdKFl6iHt4XOft8hhLbu6YabYJT0XbyjABOxVgYr0/AM5fIKvR/cFNL0Au2yE9EzDJYNND48ze3o97meXykIt5FAHXPGLhM33DTnarz/g1nknqJpT1TiPPsIs/i31MOZJCnh9s+8DdIDqO/kgRd+hPcYPIfz5Lj6hIPhnt+SX8fHXr1BOOtZSm1Koio3XTs+7O8ctS9movrT+7SUoCxJSJJZ12n1R97mSjnwOeHyZFV3/T04p+et9vN4RAB4qe5YhmCNWaPpeS63QQ96GWcKAlHxdXTJaPoQDeBWzjmILeOOY7ipo33ipuMmjjFwg7vWGycDDWZlxaVF39eXjkOxUEZ5EJQQczaUXyfDwugJf7cyo1JQoJVI6dEgcFnZCxId7TovucINsGgQUXbhmWKzjejcXs8hdMSopcXJUXsDpo5/v8skFc7ziDKsPDRWeFu8kpP0RvelFQIZ75eCQF11QkUe12JXEX5Uw9hEvNZd67+/vU+kAMrQln/rxUO5Kzf/8g9BmbpI5KvbEiW3yJObdgADh6Ge6pp+H2AboCK970PWvUu6clj88g/iEzJU+o5aS2wDJO4pmaP1qPvYRLIZSq7sDoi7U3+QJkk9/Dhj4eI3g0+Q3DOB6mSG1/KsQaUCaJ8mg0E1H3xTSBO3cAIhvjXs4Ib/X4K2VGmWq0xaQzzYFSlB2sgR+8bWMuPv/8/zJXNBAQa9sXpN+Di/TC9Yj8VjI1cVjiFEV+TqwkdvjP5Uoek0tzirE6vy3oOb3Fs7HLNj50XXlXceXecPZFpeCU5yFZOKZLRwfjvU+CGJHx3qfKA4KNLec2XZNPGQSitgAQWzSETyyrQIvh8UQCECX/EbrQFFC1TocScT77nX6DmcnvQnLrHNNi0VsFgY/2L5ApVnOmK0H/tJrpEyuUIyEWXYQqDlZMvqZbJZLhJQ6q45ABCkr5JRbMhYb8bklBikpAxvv3LxKlJut/cPWRTkI9PNhOFl7HTDmpguBDpakNe/rB203IfZ31UHUgDjo20cG/kf7qZnf9R06zAABBSRVkK40SglZbAqGisoJtdcccGmSDd/5+njU9+Bb5mtP/jqVHl8UPziXWqGmvwAiltsbpELFVx5qk9jaKStRSXhX+8/xLRLWxklBNzX9+CDxKaU15A7fAYlmYaTIUe36z10x7MSlX+Mxb00bvX3DYuf2Lnoo7jv7+tcM4yMPNH3e5i5HJOGVXXLP/iM5YyJR9N9JCjVwBzMgJRPOEJGXKrqByym3l1ceP5dxE1xYw0BKq3TSfoUYYFly4JzeOdDGge2fw+BDLF/jRUjtVrrYa7mciAmuBPgmj4Vq9FkdEpKzv0JiyfwWBniAEONAHPdPMennjSRDKiLlMvvk9GCLgvbw2lQvzIFX1rpWlVbc8UpSRq1fV0G0KIKPsnakUz3wPG/cQACotn2YwxnMvll/xH4P1M3j0rTFcfjiTnYaBjc8aEjyU4PgO3wRcwv5O7tx+wLHRZ30lrHATCVbqq/XO1fmUC77cOXa8VGNV0KE2xCAw6zC5LYK8He1ViJnDqBwbhEMXl1apld+rP3RAO049t7U+rADxZ5DW82B7wJXIXPUCEtGgc5r9/ay8/7i1493X+G8T9nPm0u+Lt6NSn0MbI5wEmbiehp/OZIb0Wl/Tm+gwf+a0BLN3tz6QgoVVQuTmiLRT9EE9WQFQGU7nTz0ILkW9HxNT2erMGymhk0KJ2YzCFtmgvjI4gjlextqlBtUa9UTr2bD+k6IUX/+USt4OwCHOl1McBBUNf1112G26tMkt59MDMy2MBLHz8THSesyzQ8UinJRqLFhQuWdqqGpYmru+FeFr81NGAAY7YDoxuux4ml/UdJGeJs/pytqHaAl8Hgv881gn0e+EI203htDP4BivI6P9FBQollYDo67GJnsLjwiysDjV67D3j8+7B1TA1kYYTDET2HwSFJAvRjcOL8DJ+44XdWDoZJXVQ9viYpADm5tGNc6+zZd+i7xbtW1uRKDtUJit1tqpCD3QPqAHFLgGh+ewOrh/OmXCXRmz7b0+KluAUrvnEX5tnmLY8+L1G4AXes7GoOQiOjG3ZgkmcdODpguUGy6Ci20+nHyueGl+PzYkoPzBx6VQDMH85VDsCQIEklR1DfERYpxMntaSKciwbhWieRIAgGM5dPHnRZorUrSZKKGBrq7agmy6fYknAAs1ahf6HLahPTSih9Gutrb7A7RSLbBjQ5rtgwYUQQwSpJmjcBzhEsDYI/cAx9OIyLU3O95jP4UFrBzSue0e59uWZcecz1bUkqL40VtUNo8gOHh7DmTAF1lQTixI9Kguih5FRHuvfsVTggq+UbL+DbVSFVZATHALQ8+783CWgxUPI0gwo8kkJOqJVdxkT7X4OWloFNh8jJvLxoBEeLJehtC803oHXEiilgmMpf+jSw/IknCm9E+IrxL632GhVo3eCkHMwoKpYwGDuoj6hipQcIdyPmdlMix1tvyoZzK9O+e/tt2Sv2ZIoxCCI/cqUWzCtdkQ+GyggWL5QugT6B6D8yVoYwAcgT9ApYpXZ+hYYLhQ19RC2C8JtdRoSaxzM5zh3rsyVRL+Mml6YNwgz58o7mFnRj4sg0SE+zNQGTXUJlc9BKyL3Azplh3dMXKsOUJ93QZ0nJMLb6YhvzquEChEuK1j06qglmIbThevCm0GXGYSs1FBy+Iw2Ey78HfEOnbe+nB58Wu9nYSULmNvRlAvORkpknCRCRM/mmecfoyVqiK0gDH8b/oJ2cevYN5WU41KfYeHPSDBl1JQPOilsmGQzc9Ek6/32qj/999sA7Uz6kBJhZkQpNr2HDhSM2GiH975RB01Z8U/DYhiEtEJ4VjXjlqDMQJ2/GsfjEuSl8kp6v4TvJTGrP/StN1fwMzOoJA34c7AGS5+p3O7g5ZvkUXFBvwKeRjtAO3aiZpPwd4ABlfBmzOTS3y85gwlLUCXHyveBfRLAh7iZ7hfZ9AahaRcbh8TqiQQwbaKo/GdxmKbg9bUVVlsEpqvihKgkS4i+fcOQcWnQXjAhsayxOem7fRPdPRrODPsrOO/kXOfNlAzcFIlIkX/+e06bs1xYXnL8v++EsOrN/OgZP/3fJ/IJCf/guxajIwd+//Bq4YdXWVLQUxlaf1qyhagV8fgCOKveVuo5UArKvDVt0HDC72ezcP9GyPK9NntFiWmyH3Ux/x5QCgRNWy2eVhvF4kmljG9Jkc5oYtWIPF1FkQM+E8526XICF/KMkQTM/5K+RjqW6G01W+hr3hd1AxWzcOBNGqhFve3Hh74ieAM7BlLJupvLdLkDFID8X8qTsGcUfi2aB4o+H99xEDV5whfnMv/fIp3EOf7tu0pcuP+GZuIQP8jzEUvMIQww9JCjoGoTE3WLFUbjiWw4Rb1Zuge/E8n+G/s62dcY50nV11Rb+K4+Ch47JRUPnxJIHKxzZJIPQDD3a3Usq2g9QBvQNpqVm5SRWL4JLPV+p/Z3nIwqvNLhkYCh9ZANMMrgdgzfEPFA9r1EtvWAdtQwELqkU+6iEqaOXN103Lnaf7+86XGY64MV1sb5yr6C1r8j7V+WAXIW3IRz87AEarBK1t3ehkV+Xhge4k54ZJrhwwehL4e7JNrU35ir1RU+0Dg4mf6acOI2O8IJLqKVDgoXitHxXCDaN4p8OVj1A08TUmoWdlgJsvzDQDVbEv5WtzH1Hi1IJuBGNe2X0X2dWnE/n1C1gVH3c15XrpiUsKGdJjUas/puOi36oqgn2r8XwxY9mzd+oCuPSoqzKZt3IbKCeFOgsUD09O5er7YXOC82W4e4Gk+2DL/2ZAwimzWTcTh6hLnxicw4toc1RttqZydXfPVDYEXzt8QM4hzq+L3XbTU7av/HelP5howcnPmiVZrREndfcA6cDGz+kKXmc093JFKdsTB/+U5v1f/kVBI+A1xmwZzWPCGl2WlRsSwMTyOJ9to4uLF3kpPpTC1DWLMhf3PSsfmbxYC71sjRxUxh36+FWtw/CJZV4craw/VLL5LTo6/3wZSCMhbf3AlTJ15XPsryipGConb1QiggBxvvxIsiZysGOHwLuv6JdEcyG61/hHPC5JcDAW3PPw4AKp3sQK/hPRPza/vIzBud3I1VU0DTdubC2yMFt/feIigbrBJastCmYfOkqwVSYGT5wpxVJIMOi/mR4PkMpQ/pGG6fOrzQovjlIYKlepc/oeWM/zE5HOFvGASeC8bDkVjt4G74eR+m64Nuh/oLr9XpqccUqTSO9+KgPHFY98mxVTcJXv2xICN59F3vMQ6WwNEfryR8P3jd159n+OXbmldj4n0SwAAAAcaskl6vP5+98OS3m1Yy2Coz3jZAZ2f+tGTVp1ZKXtH8e4PyilITEMKoykMDVZ0Wawy+4Dc4uVDOFEWjxZxDFTwHXcQ82Ppeuh/jRh606k1azkN61Mr3f5P/puk7u6SGaUvJ6k4Cl1JpXKGLJ8O4joyCQqRnA+H6IbhrZ76PADTCtW2iQSc6uzDKxGj8wh4oBVmMxdGQGAFrjkm2cqG0tF0tR8/eO8OG44nyCbI2KuFe9/mEnx8KCvNiXQFIRxp6MmFxQiLM+z+CfMSn/D5LMIT5pFNml7zjso0IVfzyz5lalr/+Xn8QFOMo5Cp4ZgAAAAAAA=\"","// JSON RPC errors\nexport const JSON_PARSE_ERROR = -32700;\nexport const INVALID_REQUEST_ERROR = -32600;\nexport const METHOD_NOT_FOUND_ERROR = -32601;\nexport const INVALID_PARAMS_ERROR = -32602;\nexport const INTERNAL_ERROR = -32603;\nexport const isServerError = (error) => error >= -32099 && error <= -32000;\nexport const isJsonRpcError = (error) => error >= -32768 && error <= -32000;\n// ICRC-25 errors\nexport const GENERIC_ERROR = 1000;\nexport const NOT_SUPPORTED_ERROR = 2000;\nexport const PERMISSION_NOT_GRANTED_ERROR = 3000;\nexport const ACTION_ABORTED_ERROR = 3001;\nexport const NETWORK_ERROR = 4000;\nexport const isGeneralError = (error) => error >= 1000 && error <= 1999;\nexport const isNotSupportedError = (error) => error >= 2000 && error <= 2999;\nexport const isUserActionError = (error) => error >= 3000 && error <= 3999;\nexport const isNetworkError = (error) => error >= 4000 && error <= 4999;\n//# sourceMappingURL=errors.js.map","const ENCODE_CHUNK_SIZE = 100000;\nexport const fromBase64 = (base64) => {\n    if (typeof globalThis.Buffer !== \"undefined\") {\n        return globalThis.Buffer.from(base64, \"base64\").buffer;\n    }\n    if (typeof globalThis.atob !== \"undefined\") {\n        return Uint8Array.from(globalThis.atob(base64), (m) => m.charCodeAt(0))\n            .buffer;\n    }\n    throw Error(\"Could not decode base64 string\");\n};\nexport const toBase64 = (bytes) => {\n    if (typeof globalThis.Buffer !== \"undefined\") {\n        return globalThis.Buffer.from(bytes).toString(\"base64\");\n    }\n    if (typeof globalThis.btoa !== \"undefined\") {\n        return btoa(Array.from({ length: Math.ceil(bytes.byteLength / ENCODE_CHUNK_SIZE) })\n            .map((_, index) => String.fromCharCode(...new Uint8Array(bytes.slice(index * ENCODE_CHUNK_SIZE, (index + 1) * ENCODE_CHUNK_SIZE))))\n            .join(\"\"));\n    }\n    throw Error(\"Could not encode base64 string\");\n};\n//# sourceMappingURL=utils.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Signer_options, _Signer_channel, _Signer_establishingChannel, _Signer_scheduledChannelClosure;\nimport { Principal } from \"@dfinity/principal\";\nimport { Delegation, DelegationChain } from \"@dfinity/identity\";\nimport {} from \"@dfinity/agent\";\nimport { NETWORK_ERROR } from \"./errors\";\nimport { fromBase64, toBase64 } from \"./utils\";\nexport class SignerError extends Error {\n    constructor(error) {\n        super(error.message);\n        Object.setPrototypeOf(this, SignerError.prototype);\n        this.code = error.code;\n        this.data = error.data;\n    }\n}\nconst wrapTransportError = (error) => new SignerError({\n    code: NETWORK_ERROR,\n    message: error instanceof Error ? error.message : \"Network error\",\n});\nconst unwrapResponse = (response) => {\n    if (\"error\" in response) {\n        throw new SignerError(response.error);\n    }\n    if (\"result\" in response) {\n        return response.result;\n    }\n    throw new SignerError({\n        code: NETWORK_ERROR,\n        message: \"Invalid response\",\n    });\n};\nexport class Signer {\n    constructor(options) {\n        _Signer_options.set(this, void 0);\n        _Signer_channel.set(this, void 0);\n        _Signer_establishingChannel.set(this, void 0);\n        _Signer_scheduledChannelClosure.set(this, void 0);\n        __classPrivateFieldSet(this, _Signer_options, Object.assign({ autoCloseTransportChannel: true, closeTransportChannelAfter: 200, crypto: globalThis.crypto }, options), \"f\");\n    }\n    get transport() {\n        return __classPrivateFieldGet(this, _Signer_options, \"f\").transport;\n    }\n    async openChannel() {\n        // Stop any existing channel from being closed\n        clearTimeout(__classPrivateFieldGet(this, _Signer_scheduledChannelClosure, \"f\"));\n        // Wait for ongoing establishing of a channel\n        if (__classPrivateFieldGet(this, _Signer_establishingChannel, \"f\")) {\n            await __classPrivateFieldGet(this, _Signer_establishingChannel, \"f\");\n        }\n        // Reuse existing channel\n        if (__classPrivateFieldGet(this, _Signer_channel, \"f\") && !__classPrivateFieldGet(this, _Signer_channel, \"f\").closed) {\n            return __classPrivateFieldGet(this, _Signer_channel, \"f\");\n        }\n        // Establish a new transport channel\n        const channel = __classPrivateFieldGet(this, _Signer_options, \"f\").transport.establishChannel();\n        // Indicate that transport channel is being established\n        __classPrivateFieldSet(this, _Signer_establishingChannel, channel.then(() => { }).catch(() => { }), \"f\");\n        // Clear previous transport channel\n        __classPrivateFieldSet(this, _Signer_channel, undefined, \"f\");\n        // Assign transport channel once established\n        __classPrivateFieldSet(this, _Signer_channel, await channel.catch((error) => {\n            throw wrapTransportError(error);\n        }), \"f\");\n        // Remove transport channel being established indicator\n        __classPrivateFieldSet(this, _Signer_establishingChannel, undefined, \"f\");\n        // Return established channel\n        return __classPrivateFieldGet(this, _Signer_channel, \"f\");\n    }\n    async closeChannel() {\n        var _a;\n        await ((_a = __classPrivateFieldGet(this, _Signer_channel, \"f\")) === null || _a === void 0 ? void 0 : _a.close());\n    }\n    async transformRequest(request) {\n        if (__classPrivateFieldGet(this, _Signer_options, \"f\").derivationOrigin) {\n            return Object.assign(Object.assign({}, request), { params: Object.assign(Object.assign({}, request.params), { icrc95DerivationOrigin: __classPrivateFieldGet(this, _Signer_options, \"f\").derivationOrigin }) });\n        }\n        return request;\n    }\n    async sendRequest(request) {\n        // Establish new or re-use existing transport channel\n        const channel = await this.openChannel();\n        return new Promise(async (resolve, reject) => {\n            // Listen on transport channel for incoming response\n            const responseListener = channel.addEventListener(\"response\", async (response) => {\n                if (response.id !== request.id) {\n                    // Ignore responses that don't match the request id\n                    return;\n                }\n                // Stop listening to events once a valid response has been received\n                responseListener();\n                closeListener();\n                // Return response\n                resolve(response);\n                // Close transport channel after a certain timeout\n                if (__classPrivateFieldGet(this, _Signer_options, \"f\").autoCloseTransportChannel) {\n                    __classPrivateFieldSet(this, _Signer_scheduledChannelClosure, setTimeout(() => {\n                        if (!channel.closed) {\n                            channel.close();\n                        }\n                    }, __classPrivateFieldGet(this, _Signer_options, \"f\").closeTransportChannelAfter), \"f\");\n                }\n            });\n            // Monitor if channel is closed before a response has been received\n            const closeListener = channel.addEventListener(\"close\", () => {\n                // Stop listening to events once a channel is closed\n                responseListener();\n                closeListener();\n                // Throw error if channel is closed before response is received\n                reject(new SignerError({\n                    code: NETWORK_ERROR,\n                    message: \"Channel was closed before a response was received\",\n                }));\n            });\n            // Send outgoing request over transport channel\n            try {\n                await channel.send(await this.transformRequest(request));\n            }\n            catch (error) {\n                responseListener();\n                closeListener();\n                reject(wrapTransportError(error));\n            }\n        });\n    }\n    async supportedStandards() {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc25_supported_standards\",\n        });\n        const result = unwrapResponse(response);\n        return result.supportedStandards;\n    }\n    async requestPermissions(scopes) {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc25_request_permissions\",\n            params: { scopes },\n        });\n        const result = unwrapResponse(response);\n        return result.scopes;\n    }\n    async permissions() {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc25_permissions\",\n        });\n        const result = unwrapResponse(response);\n        return result.scopes;\n    }\n    async accounts() {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc27_accounts\",\n        });\n        const result = unwrapResponse(response);\n        return result.accounts.map(({ owner, subaccount }) => ({\n            owner: Principal.fromText(owner),\n            subaccount: subaccount === undefined ? undefined : fromBase64(subaccount),\n        }));\n    }\n    async delegation(params) {\n        var _a;\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc34_delegation\",\n            params: {\n                publicKey: toBase64(params.publicKey),\n                targets: (_a = params.targets) === null || _a === void 0 ? void 0 : _a.map((p) => p.toText()),\n                maxTimeToLive: params.maxTimeToLive === undefined\n                    ? undefined\n                    : String(params.maxTimeToLive),\n            },\n        });\n        const result = unwrapResponse(response);\n        return DelegationChain.fromDelegations(result.signerDelegation.map((delegation) => {\n            var _a;\n            return ({\n                delegation: new Delegation(fromBase64(delegation.delegation.pubkey), BigInt(delegation.delegation.expiration), (_a = delegation.delegation.targets) === null || _a === void 0 ? void 0 : _a.map((principal) => Principal.fromText(principal))),\n                signature: fromBase64(delegation.signature),\n            });\n        }), fromBase64(result.publicKey));\n    }\n    async callCanister(params) {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc49_call_canister\",\n            params: {\n                canisterId: params.canisterId.toText(),\n                sender: params.sender.toText(),\n                method: params.method,\n                arg: toBase64(params.arg),\n            },\n        });\n        const result = unwrapResponse(response);\n        const contentMap = fromBase64(result.contentMap);\n        const certificate = fromBase64(result.certificate);\n        return { contentMap, certificate };\n    }\n    async batchCallCanister(params) {\n        const response = await this.sendRequest({\n            id: __classPrivateFieldGet(this, _Signer_options, \"f\").crypto.randomUUID(),\n            jsonrpc: \"2.0\",\n            method: \"icrc112_batch_call_canister\",\n            params: {\n                sender: params.sender.toText(),\n                requests: params.requests.map((requests) => requests.map((request) => ({\n                    canisterId: request.canisterId.toText(),\n                    method: request.method,\n                    arg: toBase64(request.arg),\n                }))),\n                validation: params.validation\n                    ? {\n                        canisterId: params.validation.canisterId.toText(),\n                        method: params.validation.method,\n                    }\n                    : undefined,\n            },\n        });\n        const result = unwrapResponse(response);\n        if (params.requests.length !== result.responses.length ||\n            params.requests.some((entries, index) => entries.length !== result.responses[index].length)) {\n            throw new SignerError({\n                code: NETWORK_ERROR,\n                message: \"Invalid batch call canister response, responses structure does not match request structure\",\n            });\n        }\n        return result.responses.map((responses) => responses.map((response) => {\n            if (\"result\" in response) {\n                const contentMap = fromBase64(response.result.contentMap);\n                const certificate = fromBase64(response.result.certificate);\n                return { result: { contentMap, certificate } };\n            }\n            return response;\n        }));\n    }\n}\n_Signer_options = new WeakMap(), _Signer_channel = new WeakMap(), _Signer_establishingChannel = new WeakMap(), _Signer_scheduledChannelClosure = new WeakMap();\n//# sourceMappingURL=signer.js.map","export const isJsonRpcMessage = (message) => typeof message === \"object\" &&\n    !!message &&\n    \"jsonrpc\" in message &&\n    message.jsonrpc === \"2.0\";\nexport const isJsonRpcRequest = (message) => isJsonRpcMessage(message) &&\n    \"method\" in message &&\n    typeof message.method === \"string\";\nexport const isJsonRpcResponse = (message) => isJsonRpcMessage(message) &&\n    \"id\" in message &&\n    (typeof message.id === \"string\" || typeof message.id === \"number\");\n//# sourceMappingURL=transport.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PostMessageChannel_closeListeners, _PostMessageChannel_options, _PostMessageChannel_closed;\nimport { isJsonRpcResponse, } from \"@slide-computer/signer\";\nimport { PostMessageTransportError } from \"./postMessageTransport\";\nexport class PostMessageChannel {\n    constructor(options) {\n        _PostMessageChannel_closeListeners.set(this, new Set());\n        _PostMessageChannel_options.set(this, void 0);\n        _PostMessageChannel_closed.set(this, false);\n        __classPrivateFieldSet(this, _PostMessageChannel_options, Object.assign({ window: globalThis.window, manageFocus: true }, options), \"f\");\n    }\n    get closed() {\n        return __classPrivateFieldGet(this, _PostMessageChannel_closed, \"f\");\n    }\n    addEventListener(...[event, listener]) {\n        switch (event) {\n            case \"close\":\n                __classPrivateFieldGet(this, _PostMessageChannel_closeListeners, \"f\").add(listener);\n                return () => {\n                    __classPrivateFieldGet(this, _PostMessageChannel_closeListeners, \"f\").delete(listener);\n                };\n            case \"response\":\n                const messageListener = async (event) => {\n                    if (event.source !== __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerWindow ||\n                        event.origin !== __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerOrigin ||\n                        !isJsonRpcResponse(event.data)) {\n                        return;\n                    }\n                    listener(event.data);\n                };\n                __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").window.addEventListener(\"message\", messageListener);\n                return () => {\n                    __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").window.removeEventListener(\"message\", messageListener);\n                };\n        }\n    }\n    async send(request) {\n        if (__classPrivateFieldGet(this, _PostMessageChannel_closed, \"f\")) {\n            throw new PostMessageTransportError(\"Communication channel is closed\");\n        }\n        __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerWindow.postMessage(request, __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerOrigin);\n        if (__classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").manageFocus) {\n            __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerWindow.focus();\n        }\n    }\n    async close() {\n        if (__classPrivateFieldGet(this, _PostMessageChannel_closed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _PostMessageChannel_closed, true, \"f\");\n        __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").signerWindow.close();\n        if (__classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").manageFocus) {\n            __classPrivateFieldGet(this, _PostMessageChannel_options, \"f\").window.focus();\n        }\n        __classPrivateFieldGet(this, _PostMessageChannel_closeListeners, \"f\").forEach((listener) => listener());\n    }\n}\n_PostMessageChannel_closeListeners = new WeakMap(), _PostMessageChannel_options = new WeakMap(), _PostMessageChannel_closed = new WeakMap();\n//# sourceMappingURL=postMessageChannel.js.map","export const urlIsSecureContext = (value) => {\n    try {\n        const url = new URL(value);\n        return (url.protocol === \"https:\" ||\n            url.hostname === \"127.0.0.1\" ||\n            url.hostname.split(\".\").slice(-1)[0] === \"localhost\");\n    }\n    catch (_a) {\n        return false;\n    }\n};\n//# sourceMappingURL=utils.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _HeartbeatClient_instances, _HeartbeatClient_options, _HeartbeatClient_establish, _HeartbeatClient_maintain, _HeartbeatClient_receiveReadyResponse, _HeartbeatClient_sendStatusRequest, _HeartbeatServer_instances, _HeartbeatServer_options, _HeartbeatServer_establish, _HeartbeatServer_maintain, _HeartbeatServer_receiveStatusRequest, _HeartbeatServer_sendReadyResponse;\nimport { isJsonRpcRequest, isJsonRpcResponse, } from \"@slide-computer/signer\";\nexport class HeartbeatClient {\n    constructor(options) {\n        _HeartbeatClient_instances.add(this);\n        _HeartbeatClient_options.set(this, void 0);\n        __classPrivateFieldSet(this, _HeartbeatClient_options, Object.assign({ establishTimeout: 10000, disconnectTimeout: 2000, statusPollingRate: 300, window: globalThis.window, crypto: globalThis.crypto }, options), \"f\");\n        __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_establish).call(this);\n    }\n}\n_HeartbeatClient_options = new WeakMap(), _HeartbeatClient_instances = new WeakSet(), _HeartbeatClient_establish = function _HeartbeatClient_establish() {\n    const pending = [];\n    // Create new pending entry that's waiting for a response\n    const create = () => {\n        const id = __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").crypto.randomUUID();\n        pending.push(id);\n        return id;\n    };\n    // Establish communication channel if a response is received for any pending id\n    const listener = __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_receiveReadyResponse).call(this, (response) => {\n        if (pending.includes(response.data.id)) {\n            listener();\n            clearInterval(interval);\n            clearTimeout(timeout);\n            __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").onEstablish(response.origin);\n            __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_maintain).call(this, response.origin);\n        }\n    });\n    // Init timeout\n    const timeout = setTimeout(() => {\n        listener();\n        clearInterval(interval);\n        __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").onEstablishTimeout();\n    }, __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").establishTimeout);\n    // Start sending requests\n    const interval = setInterval(() => __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_sendStatusRequest).call(this, create()), __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").statusPollingRate);\n}, _HeartbeatClient_maintain = function _HeartbeatClient_maintain(origin) {\n    let interval;\n    let timeout;\n    let pending = [];\n    // Consume a pending entry if it exists\n    const consume = (id) => {\n        const index = pending.findIndex((entry) => entry.id === id);\n        if (index > -1) {\n            pending.splice(index, 1);\n        }\n        return index > -1;\n    };\n    // Create new pending entry that's waiting for a response\n    const create = () => {\n        const id = __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").crypto.randomUUID();\n        const time = new Date().getTime();\n        // Cleanup ids outside disconnect window\n        pending = pending.filter((entry) => time - __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").disconnectTimeout > entry.time);\n        // Insert and return new id\n        pending.push({ id, time });\n        return id;\n    };\n    // Clear existing timeout (if any) and create a new one\n    const resetTimeout = () => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            listener();\n            clearInterval(interval);\n            __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").onDisconnect();\n        }, __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").disconnectTimeout);\n    };\n    // Reset disconnect timeout if a response is received to an id within disconnect window\n    const listener = __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_receiveReadyResponse).call(this, (response) => {\n        if (response.origin === origin && consume(response.data.id)) {\n            resetTimeout();\n        }\n    });\n    // Init timeout and start sending requests\n    resetTimeout();\n    interval = setInterval(() => __classPrivateFieldGet(this, _HeartbeatClient_instances, \"m\", _HeartbeatClient_sendStatusRequest).call(this, create()), __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").statusPollingRate);\n}, _HeartbeatClient_receiveReadyResponse = function _HeartbeatClient_receiveReadyResponse(handler) {\n    const listener = (event) => {\n        if (event.source === __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").signerWindow &&\n            isJsonRpcResponse(event.data) &&\n            \"result\" in event.data &&\n            event.data.result === \"ready\") {\n            handler(event);\n        }\n    };\n    __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").window.addEventListener(\"message\", listener);\n    return () => __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").window.removeEventListener(\"message\", listener);\n}, _HeartbeatClient_sendStatusRequest = function _HeartbeatClient_sendStatusRequest(id) {\n    __classPrivateFieldGet(this, _HeartbeatClient_options, \"f\").signerWindow.postMessage({ jsonrpc: \"2.0\", id, method: \"icrc29_status\" }, \"*\");\n};\nexport class HeartbeatServer {\n    constructor(options) {\n        _HeartbeatServer_instances.add(this);\n        _HeartbeatServer_options.set(this, void 0);\n        __classPrivateFieldSet(this, _HeartbeatServer_options, Object.assign({ establishTimeout: 10000, disconnectTimeout: 2000, window: globalThis.window }, options), \"f\");\n        __classPrivateFieldGet(this, _HeartbeatServer_instances, \"m\", _HeartbeatServer_establish).call(this);\n    }\n}\n_HeartbeatServer_options = new WeakMap(), _HeartbeatServer_instances = new WeakSet(), _HeartbeatServer_establish = function _HeartbeatServer_establish() {\n    // Establish communication channel if a request is received\n    const listener = __classPrivateFieldGet(this, _HeartbeatServer_instances, \"m\", _HeartbeatServer_receiveStatusRequest).call(this, (request) => {\n        if (!request.source) {\n            return;\n        }\n        listener();\n        clearTimeout(timeout);\n        __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").onEstablish(request.origin);\n        __classPrivateFieldGet(this, _HeartbeatServer_instances, \"m\", _HeartbeatServer_maintain).call(this, request.origin, request.source);\n    });\n    // Init timeout\n    const timeout = setTimeout(() => {\n        listener();\n        __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").onEstablishTimeout();\n    }, __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").establishTimeout);\n}, _HeartbeatServer_maintain = function _HeartbeatServer_maintain(origin, source) {\n    let interval;\n    let timeout;\n    let pending = [];\n    // Consume a pending entry if it exists\n    const consume = (id) => {\n        const index = pending.findIndex((entry) => entry.id === id);\n        if (index > -1) {\n            pending.splice(index, 1);\n        }\n        return index > -1;\n    };\n    // Create new pending entry that's waiting for a response\n    const create = () => {\n        const id = __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").crypto.randomUUID();\n        const time = new Date().getTime();\n        // Cleanup ids outside disconnect window\n        pending = pending.filter((entry) => time - __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").disconnectTimeout > entry.time);\n        // Insert and return new id\n        pending.push({ id, time });\n        return id;\n    };\n    // Clear existing timeout (if any) and create a new one\n    const resetTimeout = () => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            listener();\n            clearInterval(interval);\n            __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").onDisconnect();\n        }, __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").disconnectTimeout);\n    };\n    // Reset disconnect timeout if a response is received to an id within disconnect window\n    const listener = __classPrivateFieldGet(this, _HeartbeatServer_instances, \"m\", _HeartbeatServer_receiveStatusRequest).call(this, (response) => {\n        if (response.origin === origin && consume(response.data.id)) {\n            resetTimeout();\n        }\n    });\n    // Init timeout and start sending messages\n    resetTimeout();\n    interval = setInterval(() => __classPrivateFieldGet(this, _HeartbeatServer_instances, \"m\", _HeartbeatServer_sendReadyResponse).call(this, create()), __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").statusPollingRate);\n}, _HeartbeatServer_receiveStatusRequest = function _HeartbeatServer_receiveStatusRequest(handler) {\n    const listener = (event) => {\n        if (isJsonRpcRequest(event.data) &&\n            event.data.method === \"icrc29_status\") {\n            handler(event);\n        }\n    };\n    __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").window.addEventListener(\"message\", listener);\n    return () => __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").window.removeEventListener(\"message\", listener);\n}, _HeartbeatServer_sendReadyResponse = function _HeartbeatServer_sendReadyResponse(id) {\n    __classPrivateFieldGet(this, _HeartbeatServer_options, \"f\").signerWindow.postMessage({ jsonrpc: \"2.0\", id, method: \"icrc29_status\" }, \"*\");\n};\n//# sourceMappingURL=heartbeat.js.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PostMessageTransport_options;\nimport {} from \"@slide-computer/signer\";\nimport { PostMessageChannel } from \"./postMessageChannel\";\nimport { urlIsSecureContext } from \"../utils\";\nimport { HeartbeatClient } from \"./heartbeat\";\nconst NON_CLICK_ESTABLISHMENT_LINK = \"https://github.com/slide-computer/signer-js/blob/main/packages/signer-web/README.md#channels-must-be-established-in-a-click-handler\";\nexport class PostMessageTransportError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, PostMessageTransportError.prototype);\n    }\n}\n// Boolean that tracks click events to check if the popup is opened within a click context\nlet withinClick = false;\nif (globalThis.window) {\n    globalThis.window.addEventListener(\"click\", () => (withinClick = true), true);\n    globalThis.window.addEventListener(\"click\", () => (withinClick = false));\n}\nexport class PostMessageTransport {\n    constructor(options) {\n        _PostMessageTransport_options.set(this, void 0);\n        if (!urlIsSecureContext(options.url)) {\n            throw new PostMessageTransportError(\"Invalid signer RPC url\");\n        }\n        __classPrivateFieldSet(this, _PostMessageTransport_options, Object.assign({ windowOpenerFeatures: \"\", window: globalThis.window, establishTimeout: 120000, disconnectTimeout: 2000, statusPollingRate: 300, crypto: globalThis.crypto, manageFocus: true, closeOnEstablishTimeout: true, detectNonClickEstablishment: true }, options), \"f\");\n    }\n    async establishChannel() {\n        if (__classPrivateFieldGet(this, _PostMessageTransport_options, \"f\").detectNonClickEstablishment && !withinClick) {\n            throw new PostMessageTransportError(`Signer window should not be opened outside of click handler, see: ${NON_CLICK_ESTABLISHMENT_LINK}`);\n        }\n        const signerWindow = __classPrivateFieldGet(this, _PostMessageTransport_options, \"f\").window.open(__classPrivateFieldGet(this, _PostMessageTransport_options, \"f\").url, \"signerWindow\", __classPrivateFieldGet(this, _PostMessageTransport_options, \"f\").windowOpenerFeatures);\n        if (!signerWindow) {\n            throw new PostMessageTransportError(\"Signer window could not be opened\");\n        }\n        return new Promise((resolve, reject) => {\n            let channel;\n            new HeartbeatClient(Object.assign(Object.assign({}, __classPrivateFieldGet(this, _PostMessageTransport_options, \"f\")), { signerWindow, onEstablish: (origin) => {\n                    channel = new PostMessageChannel(Object.assign(Object.assign({}, __classPrivateFieldGet(this, _PostMessageTransport_options, \"f\")), { signerOrigin: origin, signerWindow: signerWindow }));\n                    resolve(channel);\n                }, onEstablishTimeout: () => {\n                    if (__classPrivateFieldGet(this, _PostMessageTransport_options, \"f\").closeOnEstablishTimeout) {\n                        signerWindow.close();\n                    }\n                    reject(new PostMessageTransportError(\"Communication channel could not be established within a reasonable time\"));\n                }, onDisconnect: () => channel.close() }));\n        });\n    }\n}\n_PostMessageTransport_options = new WeakMap();\n//# sourceMappingURL=postMessageTransport.js.map","/*\r\n *      bignumber.js v9.3.0\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, -1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // The index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne;\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  // If any number is NaN, return NaN.\r\n  function maxOrMin(args, n) {\r\n    var k, y,\r\n      i = 1,\r\n      x = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      y = new BigNumber(args[i]);\r\n      if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n        x = y;\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return 0, else return Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return Infinity if either is Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return 0 if either is 0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) {\r\n      zc = xc;\r\n      xc = yc;\r\n      yc = zc;\r\n      i = xcL;\r\n      xcL = ycL;\r\n      ycL = i;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return Infinity if either Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n      b = a;\r\n    }\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) {\r\n        i = g1;\r\n        g1 = g2;\r\n        g2 = i;\r\n        len -= i;\r\n      }\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nexport var BigNumber = clone();\r\n\r\nexport default BigNumber;\r\n","import { Cbor, Expiry, } from \"@dfinity/agent\";\nimport { Principal } from \"@dfinity/principal\";\nimport { BigNumber } from \"bignumber.js\";\nexport const decodeCallRequest = (contentMap) => {\n    const decoded = Cbor.decode(contentMap);\n    const expiry = new Expiry(0);\n    // @ts-ignore Expiry class currently has no method to create instance from value\n    expiry._value = BigInt(decoded.ingress_expiry.toString(10));\n    return Object.assign(Object.assign({}, decoded), { canister_id: Principal.from(decoded.canister_id), ingress_expiry: expiry });\n};\n//# sourceMappingURL=utils.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _Queue_ongoing;\nexport class Queue {\n    constructor() {\n        _Queue_ongoing.set(this, Promise.resolve());\n    }\n    async schedule(job) {\n        return new Promise((resolve, reject) => {\n            __classPrivateFieldSet(this, _Queue_ongoing, __classPrivateFieldGet(this, _Queue_ongoing, \"f\").finally(async () => {\n                try {\n                    resolve(await job());\n                }\n                catch (error) {\n                    reject(error);\n                }\n            }), \"f\");\n        });\n    }\n}\n_Queue_ongoing = new WeakMap();\n//# sourceMappingURL=queue.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SignerAgent_instances, _a, _SignerAgent_isInternalConstructing, _SignerAgent_options, _SignerAgent_certificates, _SignerAgent_queue, _SignerAgent_executeTimeout, _SignerAgent_scheduled, _SignerAgent_autoBatch, _SignerAgent_validation, _SignerAgent_executeQueue, _SignerAgent_executeBatch;\nimport { Certificate, compare, HttpAgent, IC_ROOT_KEY, lookupResultToBuffer, LookupStatus, requestIdOf, SubmitRequestType, } from \"@dfinity/agent\";\nimport { lebDecode, PipeArrayBuffer } from \"@dfinity/candid\";\nimport { Principal } from \"@dfinity/principal\";\nimport { toBase64 } from \"@slide-computer/signer\";\nimport { decodeCallRequest } from \"./utils\";\nimport { Queue } from \"./queue\";\nconst ROOT_KEY = new Uint8Array(IC_ROOT_KEY.match(/[\\da-f]{2}/gi).map((h) => parseInt(h, 16))).buffer;\nconst MAX_AGE_IN_MINUTES = 5;\nconst INVALID_RESPONSE_MESSAGE = \"Received invalid response from signer\";\nexport class SignerAgentError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, SignerAgentError.prototype);\n    }\n}\nexport class SignerAgent {\n    constructor(options) {\n        _SignerAgent_instances.add(this);\n        _SignerAgent_options.set(this, void 0);\n        _SignerAgent_certificates.set(this, new Map());\n        _SignerAgent_queue.set(this, new Queue());\n        _SignerAgent_executeTimeout.set(this, void 0);\n        _SignerAgent_scheduled.set(this, [[]]);\n        _SignerAgent_autoBatch.set(this, true);\n        _SignerAgent_validation.set(this, void 0);\n        const throwError = !__classPrivateFieldGet(_a, _a, \"f\", _SignerAgent_isInternalConstructing);\n        __classPrivateFieldSet(_a, _a, false, \"f\", _SignerAgent_isInternalConstructing);\n        if (throwError) {\n            throw new SignerAgentError(\"SignerAgent is not constructable\");\n        }\n        __classPrivateFieldSet(this, _SignerAgent_options, options, \"f\");\n    }\n    get rootKey() {\n        var _b;\n        return (_b = __classPrivateFieldGet(this, _SignerAgent_options, \"f\").agent.rootKey) !== null && _b !== void 0 ? _b : ROOT_KEY;\n    }\n    get signer() {\n        return __classPrivateFieldGet(this, _SignerAgent_options, \"f\").signer;\n    }\n    static async create(options) {\n        var _b, _c, _d;\n        __classPrivateFieldSet(_a, _a, true, \"f\", _SignerAgent_isInternalConstructing);\n        return new _a(Object.assign(Object.assign({}, options), { agent: (_b = options.agent) !== null && _b !== void 0 ? _b : (await HttpAgent.create()), scheduleDelay: (_c = options.scheduleDelay) !== null && _c !== void 0 ? _c : 20, validation: (_d = options.validation) !== null && _d !== void 0 ? _d : null }));\n    }\n    static createSync(options) {\n        var _b, _c, _d;\n        __classPrivateFieldSet(_a, _a, true, \"f\", _SignerAgent_isInternalConstructing);\n        return new _a(Object.assign(Object.assign({}, options), { agent: (_b = options.agent) !== null && _b !== void 0 ? _b : HttpAgent.createSync(), scheduleDelay: (_c = options.scheduleDelay) !== null && _c !== void 0 ? _c : 20, validation: (_d = options.validation) !== null && _d !== void 0 ? _d : null }));\n    }\n    async execute() {\n        const scheduled = [...__classPrivateFieldGet(this, _SignerAgent_scheduled, \"f\")];\n        const validation = __classPrivateFieldGet(this, _SignerAgent_validation, \"f\");\n        this.clear();\n        const pending = scheduled.flat().length;\n        if (pending === 0) {\n            __classPrivateFieldSet(this, _SignerAgent_validation, undefined, \"f\");\n            return;\n        }\n        const needsBatch = pending > 1;\n        if (!needsBatch) {\n            await __classPrivateFieldGet(this, _SignerAgent_instances, \"m\", _SignerAgent_executeQueue).call(this, scheduled);\n            return;\n        }\n        const supportedStandards = await __classPrivateFieldGet(this, _SignerAgent_queue, \"f\").schedule(() => this.signer.supportedStandards());\n        const supportsBatch = supportedStandards.some((supportedStandard) => supportedStandard.name === \"ICRC-112\");\n        if (supportsBatch) {\n            await __classPrivateFieldGet(this, _SignerAgent_instances, \"m\", _SignerAgent_executeBatch).call(this, scheduled, validation);\n        }\n        else {\n            await __classPrivateFieldGet(this, _SignerAgent_instances, \"m\", _SignerAgent_executeQueue).call(this, scheduled);\n        }\n    }\n    async call(canisterId, options) {\n        // Make sure canisterId is a principal\n        canisterId = Principal.from(canisterId);\n        // Manually open the transport channel here first to make sure that\n        // the scheduler does not e.g. block a popup window from opening.\n        await __classPrivateFieldGet(this, _SignerAgent_options, \"f\").signer.openChannel();\n        // Make call through scheduler that automatically performs a single call or batch call.\n        const response = await new Promise((resolve, reject) => {\n            clearTimeout(__classPrivateFieldGet(this, _SignerAgent_executeTimeout, \"f\"));\n            __classPrivateFieldGet(this, _SignerAgent_scheduled, \"f\").slice(-1)[0].push({\n                options: {\n                    canisterId,\n                    method: options.methodName,\n                    arg: options.arg,\n                },\n                resolve,\n                reject,\n            });\n            if (__classPrivateFieldGet(this, _SignerAgent_autoBatch, \"f\")) {\n                __classPrivateFieldSet(this, _SignerAgent_executeTimeout, setTimeout(() => this.execute(), __classPrivateFieldGet(this, _SignerAgent_options, \"f\").scheduleDelay), \"f\");\n            }\n        });\n        // Validate content map\n        const requestBody = decodeCallRequest(response.contentMap);\n        const contentMapMatchesRequest = SubmitRequestType.Call === requestBody.request_type &&\n            canisterId.compareTo(requestBody.canister_id) === \"eq\" &&\n            options.methodName === requestBody.method_name &&\n            compare(options.arg, requestBody.arg) === 0 &&\n            __classPrivateFieldGet(this, _SignerAgent_options, \"f\").account.compareTo(Principal.from(requestBody.sender)) ===\n                \"eq\";\n        if (!contentMapMatchesRequest) {\n            throw new SignerAgentError(INVALID_RESPONSE_MESSAGE);\n        }\n        // Validate certificate\n        const requestId = requestIdOf(requestBody);\n        const certificate = await Certificate.create({\n            certificate: response.certificate,\n            rootKey: this.rootKey,\n            canisterId,\n            maxAgeInMinutes: MAX_AGE_IN_MINUTES,\n        }).catch(() => {\n            throw new SignerAgentError(INVALID_RESPONSE_MESSAGE);\n        });\n        const certificateIsResponseToContentMap = certificate.lookup([\"request_status\", requestId, \"status\"]).status ===\n            LookupStatus.Found;\n        if (!certificateIsResponseToContentMap) {\n            throw new SignerAgentError(INVALID_RESPONSE_MESSAGE);\n        }\n        // Check if response has already been received previously to avoid replay attacks\n        const requestKey = toBase64(requestId);\n        if (__classPrivateFieldGet(this, _SignerAgent_certificates, \"f\").has(requestKey)) {\n            throw new SignerAgentError(INVALID_RESPONSE_MESSAGE);\n        }\n        // Store certificate in map\n        __classPrivateFieldGet(this, _SignerAgent_certificates, \"f\").set(requestKey, response.certificate);\n        // Cleanup when certificate expires\n        const now = Date.now();\n        const lookupTime = lookupResultToBuffer(certificate.lookup([\"time\"]));\n        if (!lookupTime) {\n            throw new SignerAgentError(INVALID_RESPONSE_MESSAGE);\n        }\n        const certificateTime = Number(lebDecode(new PipeArrayBuffer(lookupTime))) / 1000000;\n        const expiry = certificateTime - now + MAX_AGE_IN_MINUTES * 60 * 1000;\n        setTimeout(() => __classPrivateFieldGet(this, _SignerAgent_certificates, \"f\").delete(requestKey), expiry);\n        // Return request id with http response\n        return {\n            requestId,\n            response: {\n                ok: true,\n                status: 202,\n                statusText: \"Call has been sent over ICRC-25 JSON-RPC\",\n                body: null,\n                headers: [],\n            },\n        };\n    }\n    async fetchRootKey() {\n        return __classPrivateFieldGet(this, _SignerAgent_options, \"f\").agent.fetchRootKey();\n    }\n    async getPrincipal() {\n        return __classPrivateFieldGet(this, _SignerAgent_options, \"f\").account;\n    }\n    async query(canisterId, options) {\n        // Make sure canisterId is a principal\n        canisterId = Principal.from(canisterId);\n        // Upgrade query request to a call sent through signer\n        const submitResponse = await this.call(canisterId, options);\n        const readStateResponse = await this.readState(canisterId, {\n            paths: [\n                [new TextEncoder().encode(\"request_status\"), submitResponse.requestId],\n            ],\n        });\n        const certificate = await Certificate.create({\n            certificate: readStateResponse.certificate,\n            rootKey: this.rootKey,\n            canisterId,\n        });\n        const status = certificate.lookup([\n            \"request_status\",\n            submitResponse.requestId,\n            \"status\",\n        ]);\n        const reply = certificate.lookup([\n            \"request_status\",\n            submitResponse.requestId,\n            \"reply\",\n        ]);\n        if (status.status !== LookupStatus.Found ||\n            new TextDecoder().decode(status.value) !== \"replied\" ||\n            reply.status !== LookupStatus.Found) {\n            throw new SignerAgentError(\"Certificate is missing reply\");\n        }\n        return {\n            requestId: submitResponse.requestId,\n            status: \"replied\",\n            reply: {\n                arg: reply.value,\n            },\n            httpDetails: {\n                ok: true,\n                status: 202,\n                statusText: \"Certificate with reply has been received over ICRC-25 JSON-RPC\",\n                headers: [],\n            },\n        };\n    }\n    async createReadStateRequest(_options) {\n        // Since request is typed as any it shouldn't need any data,\n        // but since agent-js 2.1.3 this would cause a runtime error.\n        return {\n            body: {\n                content: {},\n            },\n        };\n    }\n    async readState(_canisterId, options, _identity, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _request) {\n        if (options.paths.length !== 1 ||\n            options.paths[0].length !== 2 ||\n            new TextDecoder().decode(options.paths[0][0]) !== \"request_status\") {\n            throw new SignerAgentError(\"Given paths are not supported\");\n        }\n        const requestId = options.paths[0][1];\n        const key = toBase64(requestId);\n        const certificate = __classPrivateFieldGet(this, _SignerAgent_certificates, \"f\").get(key);\n        if (!certificate) {\n            throw new SignerAgentError(\"Certificate could not be found\");\n        }\n        return { certificate };\n    }\n    async status() {\n        return __classPrivateFieldGet(this, _SignerAgent_options, \"f\").agent.status();\n    }\n    replaceAccount(account) {\n        __classPrivateFieldGet(this, _SignerAgent_options, \"f\").account = account;\n    }\n    replaceValidation(validation) {\n        __classPrivateFieldSet(this, _SignerAgent_validation, validation, \"f\");\n    }\n    /**\n     * Enable manual triggering of canister calls execution\n     */\n    batch() {\n        __classPrivateFieldSet(this, _SignerAgent_autoBatch, false, \"f\");\n        if (__classPrivateFieldGet(this, _SignerAgent_scheduled, \"f\").slice(-1)[0].length > 0) {\n            __classPrivateFieldGet(this, _SignerAgent_scheduled, \"f\").push([]);\n        }\n    }\n    /**\n     * Clear scheduled canister calls and switch back to automatic canister calls execution\n     */\n    clear() {\n        __classPrivateFieldSet(this, _SignerAgent_scheduled, [[]], \"f\");\n        __classPrivateFieldSet(this, _SignerAgent_autoBatch, true, \"f\");\n    }\n}\n_a = SignerAgent, _SignerAgent_options = new WeakMap(), _SignerAgent_certificates = new WeakMap(), _SignerAgent_queue = new WeakMap(), _SignerAgent_executeTimeout = new WeakMap(), _SignerAgent_scheduled = new WeakMap(), _SignerAgent_autoBatch = new WeakMap(), _SignerAgent_validation = new WeakMap(), _SignerAgent_instances = new WeakSet(), _SignerAgent_executeQueue = async function _SignerAgent_executeQueue(scheduled) {\n    await Promise.all(scheduled.flat().map(({ options, resolve, reject }) => __classPrivateFieldGet(this, _SignerAgent_queue, \"f\").schedule(async () => {\n        try {\n            const response = await this.signer.callCanister(Object.assign({ sender: __classPrivateFieldGet(this, _SignerAgent_options, \"f\").account }, options));\n            resolve(response);\n        }\n        catch (error) {\n            reject(error);\n        }\n    })));\n}, _SignerAgent_executeBatch = async function _SignerAgent_executeBatch(scheduled, validation) {\n    await __classPrivateFieldGet(this, _SignerAgent_queue, \"f\").schedule(async () => {\n        try {\n            const responses = await this.signer.batchCallCanister({\n                sender: __classPrivateFieldGet(this, _SignerAgent_options, \"f\").account,\n                requests: scheduled.map((entries) => entries.map(({ options }) => options)),\n                validation: validation !== null && validation !== void 0 ? validation : undefined,\n            });\n            scheduled.forEach((entries, sequenceIndex) => entries.forEach(({ resolve, reject }, requestIndex) => {\n                const response = responses[sequenceIndex][requestIndex];\n                if (\"result\" in response) {\n                    resolve(response.result);\n                    return;\n                }\n                if (\"error\" in response) {\n                    reject(new SignerAgentError(`${response.error.code}: ${response.error.message}\\n${JSON.stringify(response.error.data)}`));\n                    return;\n                }\n                reject(new SignerAgentError(INVALID_RESPONSE_MESSAGE));\n            }));\n        }\n        catch (error) {\n            // Forward error to each canister call handler\n            scheduled.flat().forEach(({ reject }) => reject(error));\n        }\n    });\n};\n// noinspection JSUnusedLocalSymbols\n_SignerAgent_isInternalConstructing = { value: false };\n//# sourceMappingURL=agent.js.map","import { Principal } from \"@dfinity/principal\";\nimport { Actor, HttpAgent, type ActorSubclass } from \"@dfinity/agent\";\nimport { DelegationIdentity, Ed25519KeyIdentity } from \"@dfinity/identity\";\nimport { type Wallet, Adapter } from \"../../types/index.d\";\nimport nfidLogo from \"../../../assets/nfid.webp\";\nimport { PostMessageTransport } from \"@slide-computer/signer-web\";\nimport { SignerAgent } from \"@slide-computer/signer-agent\";\nimport { Signer } from \"@slide-computer/signer\";\nimport { SignerError } from \"@slide-computer/signer\";\nimport { AccountIdentifier } from \"@dfinity/ledger-icp\";\nimport { BaseIcAdapter } from \"./BaseIcAdapter\"; // Add BaseIcAdapter import\n\n// Extend BaseIcAdapter instead of just implementing Adapter.Interface\nexport class NFIDAdapter extends BaseIcAdapter implements Adapter.Interface {\n  private static readonly TRANSPORT_CONFIG = {\n    windowOpenerFeatures: \"width=525,height=705\",\n    establishTimeout: 45000,\n    disconnectTimeout: 45000,\n    statusPollingRate: 500,\n    detectNonClickEstablishment: false, // Allow connection outside of click handler for auto-connect\n  };\n\n  private agent: HttpAgent;\n  private identity: DelegationIdentity | null = null;\n  private sessionKey: Ed25519KeyIdentity | null = null;\n  private signerAgent: SignerAgent<Signer> | null;\n  private signer: Signer | null;\n  private transport: PostMessageTransport | null;\n\n  // Defaults\n  static readonly logo: string = nfidLogo;\n  static readonly walletName: string = \"NFID\";\n  walletName: string = NFIDAdapter.walletName;\n  logo: string = NFIDAdapter.logo;\n  url: string;\n\n  constructor(config: Wallet.PNPConfig) {\n    super(config); // Call BaseIcAdapter constructor\n    const nfidInfo = this.config.adapters?.['nfid'] as Adapter.Info | undefined;\n    // Provide a default URL if none is found in the config\n    this.url = nfidInfo?.rpcUrl ?? \"https://nfid.one/rpc\"; // Default NFID RPC endpoint\n\n    // Create transport with the configured URL and non-click detection disabled\n    this.transport = new PostMessageTransport({\n      url: this.url,\n      ...NFIDAdapter.TRANSPORT_CONFIG,\n    });\n\n    // Create signer with the transport\n    this.signer = new Signer({\n      transport: this.transport,\n    });\n\n    // Agent interacting with the Signer/NFID uses the provider URL\n    const signerHttpAgent = HttpAgent.createSync({ host: this.url });\n\n    this.signerAgent = SignerAgent.createSync({\n      signer: this.signer,\n      account: Principal.anonymous(), // Start anonymous\n      agent: signerHttpAgent,\n    });\n\n    // General purpose agent for non-signed/initial actions\n    this.agent = HttpAgent.createSync({ host: this.url });\n\n    this.setState(Adapter.Status.READY); // Use inherited setState\n  }\n\n  async isAvailable(): Promise<boolean> {\n    return true; // NFID is web-based, so it's always available\n  }\n\n  async isConnected(): Promise<boolean> {\n    return this.identity !== null && this.state === Adapter.Status.CONNECTED;\n  }\n\n  async getPrincipal(): Promise<string> {\n    if (!this.identity) {\n      throw new Error(\"NFID Adapter: Not connected. Call connect() first.\");\n    }\n    return this.identity.getPrincipal().toText();\n  }\n\n  unwrapResponse = <T extends any>(response: any): T => {\n    if (\"error\" in response) {\n      throw new SignerError(response.error);\n    }\n    if (\"result\" in response) {\n      return response.result;\n    }\n    throw new SignerError({\n      code: 500,\n      message: \"Invalid response\",\n    });\n  };\n\n  async connect(): Promise<Wallet.Account> {\n    this.setState(Adapter.Status.CONNECTING);\n\n    // --- Connection Flow (Handles both initial and potential re-establishment) ---\n    if (!this.signer || !this.transport || !this.agent) {\n      this.setState(Adapter.Status.ERROR);\n      throw new Error(\"NFID Adapter not initialized correctly.\");\n    }\n\n    try {\n      await this.signer.openChannel();\n      // Generate a new session key for each connection attempt\n      this.sessionKey = Ed25519KeyIdentity.generate();\n\n      // maxTimeToLive is expected in nanoseconds from Date.now() epoch\n      const maxTimeToLiveNs =\n        this.config.delegationTimeout !== undefined\n          ? BigInt(Date.now() * 1_000_000) +\n            BigInt(this.config.delegationTimeout) // Convert Date.now() (ms) to ns and add timeout (ns)\n          : BigInt(Date.now() * 1_000_000) +\n            BigInt(48 * 60 * 60 * 1_000_000_000); // Default: Now + 24h in ns\n\n      // This call will prompt the user if necessary or use existing session\n      const delegationChain = await this.signer.delegation({\n        publicKey: this.sessionKey.getPublicKey().toDer(),\n        targets: Array.isArray(this.config.delegationTargets) \n          ? this.config.delegationTargets\n              .filter((target): target is string => typeof target === 'string' && target.length > 0)\n              .map(target => Principal.fromText(target))\n          : [],\n        maxTimeToLive: maxTimeToLiveNs,\n      });\n\n      const delegationIdentity = DelegationIdentity.fromDelegation(\n        this.sessionKey,\n        delegationChain\n      );\n\n      // Create/Update SignerAgent with the new principal\n      this.signerAgent = SignerAgent.createSync({\n        signer: this.signer,\n        account: delegationIdentity.getPrincipal(),\n        agent: HttpAgent.createSync({ host: this.url }), // Use RPC URL for the signer agent\n      });\n\n      this.identity = delegationIdentity;\n\n      if (this.config.fetchRootKeys) {\n        await this.agent.fetchRootKey();\n      }\n\n      const principal = delegationIdentity.getPrincipal();\n\n      if (principal.isAnonymous()) {\n        this.setState(Adapter.Status.READY);\n        // Clear potentially invalid state\n        this.identity = null;\n        this.signerAgent = null;\n        this.sessionKey = null;\n        throw new Error(\n          \"Failed to authenticate with NFID - got anonymous principal\"\n        );\n      }\n\n      this.setState(Adapter.Status.CONNECTED);\n      return {\n        owner: principal.toText(),\n        subaccount: AccountIdentifier.fromPrincipal({\n          principal,\n          subAccount: undefined, // This will use the default subaccount\n        }).toHex(),\n      };\n    } catch (error) {\n      // Attempt cleanup on error\n      this.identity = null;\n      this.signerAgent = null;\n      this.sessionKey = null;\n      if (this.signer) {\n        try {\n          this.signer.closeChannel();\n        } catch (e) {\n          console.debug(\"Error closing channel on connect failure:\", e);\n        }\n      }\n      this.setState(Adapter.Status.READY); // Or Adapter.Status.ERROR ?\n      throw error; // Re-throw original error\n    }\n  }\n\n  undelegatedActor<T>(canisterId: string, idlFactory: any): ActorSubclass<T> {\n    const agent = HttpAgent.createSync({\n      identity: this.identity,\n      host: this.config.hostUrl,\n      verifyQuerySignatures: this.config.verifyQuerySignatures,\n    });\n    const actor = Actor.createActor<T>(idlFactory, {\n      agent: agent,\n      canisterId,\n    });\n    return actor;\n  }\n\n  // Implementation for BaseIcAdapter actor caching\n  protected createActorInternal<T>(\n    canisterId: string,\n    idlFactory: any,\n    options?: { requiresSigning?: boolean }\n  ): ActorSubclass<T> {\n    const requiresSigning = options?.requiresSigning !== false; // Default to true\n\n    // Add null checks for potentially null properties\n    if (!this.identity) {\n      throw new Error(\"Not connected. Identity not available.\");\n    }\n    if (!this.signerAgent && requiresSigning) {\n      throw new Error(\"Signer agent not available. Please connect first.\");\n    }\n    if (!this.config.hostUrl) {\n      throw new Error(\"Host URL configuration is missing.\");\n    }\n\n    try {\n      // Check if canister id is in the delegation targets\n      const inTargets = this.identity\n        .getDelegation()\n        .delegations.some((d) =>\n          d.delegation.targets?.some((p) => p.toText() === canisterId)\n        );\n\n      // Determine if we should use undelegated actor\n      if ((inTargets && !requiresSigning) || (!inTargets && !requiresSigning)) {\n        return this.undelegatedActor<T>(canisterId, idlFactory);\n      }\n\n      // Create actor with delegation identity for authenticated calls\n      if (requiresSigning) {\n        return Actor.createActor<T>(idlFactory, {\n          agent: this.signerAgent,\n          canisterId,\n        });\n      }\n\n      // Fallback case\n      return Actor.createActor<T>(idlFactory, {\n        agent: this.signerAgent,\n        canisterId,\n      });\n    } catch (error) {\n      console.error(\"Error creating actor:\", error);\n      throw new Error(\n        `Failed to create actor: ${\n          error instanceof Error ? error.message : String(error)\n        }`\n      );\n    }\n  }\n\n  // disconnect is handled by BaseIcAdapter, implement internal methods instead\n  protected async disconnectInternal(): Promise<void> {\n    // Existing logic minus state changes and cleanup\n    this.identity = null;\n    this.signerAgent = null; // Nullify signer agent specific to connection\n    this.sessionKey = null;\n\n    try {\n      if (this.signer) {\n        this.signer.closeChannel(); // Close the channel if signer exists\n      }\n    } catch (error) {\n      console.error(\"[NFID] Error during disconnect internal cleanup:\", error);\n    }\n  }\n\n  protected cleanupInternal(): void {\n    // Nullify resources specific to the connection/session\n    this.transport = null;\n    this.signer = null;\n  }\n}\n","export default \"data:image/webp;base64,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\"","import { Principal } from \"@dfinity/principal\";\nimport { Actor, HttpAgent, type ActorSubclass } from \"@dfinity/agent\";\nimport { type Wallet, Adapter } from \"../../types/index.d\";\nimport oisyLogo from \"../../../assets/oisy_logo.webp\";\nimport { PostMessageTransport } from \"@slide-computer/signer-web\";\nimport { SignerAgent } from \"@slide-computer/signer-agent\";\nimport { Signer } from \"@slide-computer/signer\";\nimport { AccountIdentifier } from \"@dfinity/ledger-icp\";\nimport { BaseIcAdapter } from \"./BaseIcAdapter\";\n\nexport class OisyAdapter extends BaseIcAdapter implements Adapter.Interface {\n  private static readonly TRANSPORT_CONFIG = {\n    windowOpenerFeatures: \"width=525,height=705\",\n    establishTimeout: 45000,\n    disconnectTimeout: 45000,\n    statusPollingRate: 500,\n    detectNonClickEstablishment: false,\n  };\n\n  private static readonly OISY_PRINCIPAL_KEY = \"oisy_principal\"; // Key for localStorage\n\n  private signer: Signer | null = null;\n  private agent: HttpAgent | SignerAgent<any> | null = null;\n  private signerAgent: SignerAgent<Signer> | null = null;\n  private transport: PostMessageTransport | null = null;\n\n  static readonly logo: string = oisyLogo;\n  static readonly walletName: string = \"OISY Wallet\";\n  walletName: string = OisyAdapter.walletName;\n  logo: string = OisyAdapter.logo;\n\n  constructor(config: Wallet.PNPConfig) {\n    super(config);\n\n    const signerUrl = this.config.adapters?.oisy?.config?.signerUrl || \"https://oisy.com/sign\";    \n    this.agent = HttpAgent.createSync({ host: this.config.hostUrl });\n    \n    this.transport = new PostMessageTransport({\n      url: signerUrl,\n      ...OisyAdapter.TRANSPORT_CONFIG,\n    });\n    \n    this.signer = new Signer({\n      transport: this.transport\n    });\n    \n    this.signerAgent = SignerAgent.createSync({\n      signer: this.signer,\n      account: Principal.anonymous(),\n      agent: this.agent,\n    });\n  }\n\n  async isAvailable(): Promise<boolean> {\n    return true; // Oisy is web-based\n  }\n\n  async isConnected(): Promise<boolean> {\n    return this.agent !== null && this.signer !== null && this.signerAgent !== null;\n  }\n\n  async getPrincipal(): Promise<string> {\n    if (!this.signerAgent) {\n      // If we have existing transport and signer but missing signerAgent, recreate only what's needed\n      if (this.transport && this.signer) {\n        this.agent = HttpAgent.createSync({ host: this.config.hostUrl });\n        this.signerAgent = SignerAgent.createSync({\n          signer: this.signer,\n          account: Principal.anonymous(),\n          agent: this.agent,\n        });\n      } else {\n        throw new Error(\"Oisy signer agent not initialized or connected\");\n      }\n    }\n    const principal = await this.signerAgent.getPrincipal();\n    return principal.toText();\n  }\n\n  async getAccountId(): Promise<string> {\n    return AccountIdentifier.fromPrincipal({\n      principal: Principal.fromText(await this.getPrincipal()),\n      subAccount: undefined, // This will use the default subaccount\n    }).toHex();\n  }\n\n  async connect(): Promise<Wallet.Account> {\n    this.setState(Adapter.Status.CONNECTING);\n    try {\n      // If we don't have a signerAgent but we have transport and signer, recreate signerAgent only\n      if (!this.signerAgent && this.transport && this.signer) {\n        this.agent = HttpAgent.createSync({ host: this.config.hostUrl });\n        this.signerAgent = SignerAgent.createSync({\n          signer: this.signer,\n          account: Principal.anonymous(),\n          agent: this.agent,\n        });\n      } else if (!this.signerAgent || !this.signerAgent.signer) {\n        throw new Error(\"Oisy signer agent not initialized. Was the constructor called with config?\");\n      }\n            \n      let principal: Principal;\n      const storedPrincipal = localStorage.getItem(OisyAdapter.OISY_PRINCIPAL_KEY);\n\n      if (storedPrincipal && storedPrincipal !== \"null\" && storedPrincipal !== \"undefined\") {\n        console.debug(\"[Oisy] Attempting to use stored principal:\", storedPrincipal);\n        try {\n          principal = Principal.fromText(storedPrincipal);\n          // Assume the stored principal is valid for now to avoid the popup.\n          // If it's invalid, subsequent agent operations will likely fail.\n          this.signerAgent.replaceAccount(principal);\n          console.debug(\"[Oisy] Replaced account with stored principal.\");\n        } catch (e) {\n          console.warn(\"[Oisy] Failed to parse stored principal, proceeding with normal flow:\", e);\n          localStorage.removeItem(OisyAdapter.OISY_PRINCIPAL_KEY);\n          // Fall through to normal connection flow if parsing fails\n          const accounts = await this.signerAgent.signer.accounts();\n          if (!accounts || accounts.length === 0) {\n            this.disconnect();\n            throw new Error(\"No accounts returned from Oisy\");\n          }\n          principal = accounts[0].owner;\n          localStorage.setItem(OisyAdapter.OISY_PRINCIPAL_KEY, principal.toText());\n          this.signerAgent.replaceAccount(principal); // Ensure agent has the correct account even after fallback\n        }\n      } else {\n        const accounts = await this.signerAgent.signer.accounts();\n        if (!accounts || accounts.length === 0) {\n          this.disconnect();\n          throw new Error(\"No accounts returned from Oisy\");\n        }\n\n        principal = accounts[0].owner;\n        localStorage.setItem(OisyAdapter.OISY_PRINCIPAL_KEY, principal.toText());\n        // No need to call replaceAccount here as the agent is likely fresh or will be handled below\n        // If the agent existed before, it might need replacement, let's ensure it.\n        this.signerAgent.replaceAccount(principal);\n      }\n\n      if (principal.isAnonymous()) {\n        this.setState(Adapter.Status.READY);\n        throw new Error(\"Failed to authenticate with Oisy - got anonymous principal\");\n      }\n\n      if (this.config.fetchRootKeys) {\n        if (!this.signerAgent) throw new Error(\"Signer agent not ready for fetchRootKeys\");\n        await this.signerAgent.fetchRootKey();\n      }\n      \n      this.setState(Adapter.Status.CONNECTED);\n      return {\n        owner: principal.toText(),\n        subaccount: await this.getAccountId(),\n      };\n    } catch (error) {\n      console.error(\"[Oisy] Connection error:\", error);\n      await this.disconnect();\n      throw error;\n    }\n  }\n\n  // Use BaseIcAdapter's actor caching by implementing createActorInternal\n  protected createActorInternal<T>(\n    canisterId: string,\n    idlFactory: any,\n  ): ActorSubclass<T> {\n    if (!this.signerAgent) {\n      throw new Error(\"No signer agent available. Please connect first.\");\n    }\n    try {\n      const agentToUse = this.signerAgent;\n      \n      return Actor.createActor<T>(idlFactory, {\n        agent: agentToUse, \n        canisterId,\n      });\n    } catch (error) {\n      console.error(\"[Oisy] Actor creation error:\", error);\n      throw error;\n    }\n  }\n\n  protected async disconnectInternal(): Promise<void> {\n    if (this.signer) {\n      try {\n        console.debug(\"[Oisy] Closing signer channel\");\n        this.signer.closeChannel();\n      } catch (error) {\n        console.debug(\"[Oisy] Error closing signer channel:\", error);\n      }\n    }\n    // Clear stored principal on disconnect\n    localStorage.removeItem(OisyAdapter.OISY_PRINCIPAL_KEY);\n    console.debug(\"[Oisy] Cleared stored principal from localStorage.\");\n  }\n\n  protected cleanupInternal(): void {\n    // Reset agents but keep transport and signer for faster reconnection\n    this.agent = null;\n    this.signerAgent = null;\n    // Don't reset transport or signer: this.transport = null; this.signer = null;\n  }\n}\n","// Path: src/adapters/ic/index.ts\n// Import adapters\nimport { IIAdapter } from \"./IIAdapter\";\nimport { PlugAdapter } from \"./PlugAdapter\";\nimport { NFIDAdapter } from \"./NFIDAdapter\";\nimport { OisyAdapter } from \"./OisyAdapter\";\nimport { Adapter } from \"../../types\";\n\n// Common default config for adapters\nconst commonDefaultConfig = {\n  timeout: 1000 * 60 * 60 * 24, // 1 day\n  enabled: true,\n};\n\n// Define the default adapters map, now including default config\nconst ICAdapters: Record<string, Adapter.Info> = {\n  'oisy': {\n    id: 'oisy',\n    walletName: OisyAdapter.walletName,\n    logo: OisyAdapter.logo, \n    website: \"https://oisy.com\",\n    chain: 'ICP',\n    adapter: OisyAdapter,\n    config: {\n      ...commonDefaultConfig,\n      signerUrl: \"https://oisy.com/sign\", // Default Oisy sign URL\n    },\n  },\n  'nfid': {\n    id: 'nfid',\n    walletName: NFIDAdapter.walletName,\n    logo: NFIDAdapter.logo, \n    website: \"https://nfid.one\",\n    chain: 'ICP',\n    adapter: NFIDAdapter,\n    config: {\n      ...commonDefaultConfig,\n      rpcUrl: \"https://nfid.one/rpc\", // Default NFID RPC endpoint\n    },\n  },\n  'ii': {\n    id: 'ii',\n    walletName: IIAdapter.walletName,\n    logo: IIAdapter.logo,\n    website: \"https://internetcomputer.org\",\n    chain: 'ICP',\n    adapter: IIAdapter,\n    config: {\n      ...commonDefaultConfig,\n      identityProvider: \"https://identity.ic0.app\",\n    },\n  },\n  'plug': {\n    id: 'plug',\n    walletName: PlugAdapter.walletName,\n    logo: PlugAdapter.logo, \n    website: \"https://plugwallet.io\",\n    chain: 'ICP',\n    adapter: PlugAdapter,\n    config: {\n      ...commonDefaultConfig,\n      identityProvider: \"https://identity.ic0.app\",\n    },\n  },\n};\n\nexport { IIAdapter, PlugAdapter, NFIDAdapter, OisyAdapter, ICAdapters };\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","export class WalletError extends Error {\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    constructor(message, error) {\n        super(message);\n        this.error = error;\n    }\n}\nexport class WalletNotReadyError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletNotReadyError';\n    }\n}\nexport class WalletLoadError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletLoadError';\n    }\n}\nexport class WalletConfigError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletConfigError';\n    }\n}\nexport class WalletConnectionError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletConnectionError';\n    }\n}\nexport class WalletDisconnectedError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletDisconnectedError';\n    }\n}\nexport class WalletDisconnectionError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletDisconnectionError';\n    }\n}\nexport class WalletAccountError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletAccountError';\n    }\n}\nexport class WalletPublicKeyError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletPublicKeyError';\n    }\n}\nexport class WalletKeypairError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletKeypairError';\n    }\n}\nexport class WalletNotConnectedError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletNotConnectedError';\n    }\n}\nexport class WalletSendTransactionError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletSendTransactionError';\n    }\n}\nexport class WalletSignTransactionError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletSignTransactionError';\n    }\n}\nexport class WalletSignMessageError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletSignMessageError';\n    }\n}\nexport class WalletSignInError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletSignInError';\n    }\n}\nexport class WalletTimeoutError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletTimeoutError';\n    }\n}\nexport class WalletWindowBlockedError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletWindowBlockedError';\n    }\n}\nexport class WalletWindowClosedError extends WalletError {\n    constructor() {\n        super(...arguments);\n        this.name = 'WalletWindowClosedError';\n    }\n}\n//# sourceMappingURL=errors.js.map","import EventEmitter from 'eventemitter3';\nimport { WalletNotConnectedError } from './errors.js';\nexport { EventEmitter };\n/**\n * A wallet's readiness describes a series of states that the wallet can be in,\n * depending on what kind of wallet it is. An installable wallet (eg. a browser\n * extension like Phantom) might be `Installed` if we've found the Phantom API\n * in the global scope, or `NotDetected` otherwise. A loadable, zero-install\n * runtime (eg. Torus Wallet) might simply signal that it's `Loadable`. Use this\n * metadata to personalize the wallet list for each user (eg. to show their\n * installed wallets first).\n */\nexport var WalletReadyState;\n(function (WalletReadyState) {\n    /**\n     * User-installable wallets can typically be detected by scanning for an API\n     * that they've injected into the global context. If such an API is present,\n     * we consider the wallet to have been installed.\n     */\n    WalletReadyState[\"Installed\"] = \"Installed\";\n    WalletReadyState[\"NotDetected\"] = \"NotDetected\";\n    /**\n     * Loadable wallets are always available to you. Since you can load them at\n     * any time, it's meaningless to say that they have been detected.\n     */\n    WalletReadyState[\"Loadable\"] = \"Loadable\";\n    /**\n     * If a wallet is not supported on a given platform (eg. server-rendering, or\n     * mobile) then it will stay in the `Unsupported` state.\n     */\n    WalletReadyState[\"Unsupported\"] = \"Unsupported\";\n})(WalletReadyState || (WalletReadyState = {}));\nexport class BaseWalletAdapter extends EventEmitter {\n    get connected() {\n        return !!this.publicKey;\n    }\n    async autoConnect() {\n        await this.connect();\n    }\n    async prepareTransaction(transaction, connection, options = {}) {\n        const publicKey = this.publicKey;\n        if (!publicKey)\n            throw new WalletNotConnectedError();\n        transaction.feePayer = transaction.feePayer || publicKey;\n        transaction.recentBlockhash =\n            transaction.recentBlockhash ||\n                (await connection.getLatestBlockhash({\n                    commitment: options.preflightCommitment,\n                    minContextSlot: options.minContextSlot,\n                })).blockhash;\n        return transaction;\n    }\n}\nexport function scopePollingDetectionStrategy(detect) {\n    // Early return when server-side rendering\n    if (typeof window === 'undefined' || typeof document === 'undefined')\n        return;\n    const disposers = [];\n    function detectAndDispose() {\n        const detected = detect();\n        if (detected) {\n            for (const dispose of disposers) {\n                dispose();\n            }\n        }\n    }\n    // Strategy #1: Try detecting every second.\n    const interval = \n    // TODO: #334 Replace with idle callback strategy.\n    setInterval(detectAndDispose, 1000);\n    disposers.push(() => clearInterval(interval));\n    // Strategy #2: Detect as soon as the DOM becomes 'ready'/'interactive'.\n    if (\n    // Implies that `DOMContentLoaded` has not yet fired.\n    document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', detectAndDispose, { once: true });\n        disposers.push(() => document.removeEventListener('DOMContentLoaded', detectAndDispose));\n    }\n    // Strategy #3: Detect after the `window` has fully loaded.\n    if (\n    // If the `complete` state has been reached, we're too late.\n    document.readyState !== 'complete') {\n        window.addEventListener('load', detectAndDispose, { once: true });\n        disposers.push(() => window.removeEventListener('load', detectAndDispose));\n    }\n    // Strategy #4: Detect synchronously, now.\n    detectAndDispose();\n}\n/**\n * Users on iOS can be redirected into a wallet's in-app browser automatically,\n * if that wallet has a universal link configured to do so\n * But should not be redirected from within a webview, eg. if they're already\n * inside a wallet's browser\n * This function can be used to identify users who are on iOS and can be redirected\n *\n * @returns true if the user can be redirected\n */\nexport function isIosAndRedirectable() {\n    // SSR: return false\n    if (!navigator)\n        return false;\n    const userAgent = navigator.userAgent.toLowerCase();\n    // if on iOS the user agent will contain either iPhone or iPad\n    // caveat: if requesting desktop site then this won't work\n    const isIos = userAgent.includes('iphone') || userAgent.includes('ipad');\n    // if in a webview then it will not include Safari\n    // note that other iOS browsers also include Safari\n    // so we will redirect only if Safari is also included\n    const isSafari = userAgent.includes('safari');\n    return isIos && isSafari;\n}\n//# sourceMappingURL=adapter.js.map","export function isVersionedTransaction(transaction) {\n    return 'version' in transaction;\n}\n//# sourceMappingURL=transaction.js.map","import { BaseWalletAdapter, } from './adapter.js';\nimport { WalletSendTransactionError, WalletSignTransactionError } from './errors.js';\nimport { isVersionedTransaction } from './transaction.js';\nexport class BaseSignerWalletAdapter extends BaseWalletAdapter {\n    async sendTransaction(transaction, connection, options = {}) {\n        let emit = true;\n        try {\n            if (isVersionedTransaction(transaction)) {\n                if (!this.supportedTransactionVersions)\n                    throw new WalletSendTransactionError(`Sending versioned transactions isn't supported by this wallet`);\n                if (!this.supportedTransactionVersions.has(transaction.version))\n                    throw new WalletSendTransactionError(`Sending transaction version ${transaction.version} isn't supported by this wallet`);\n                try {\n                    transaction = await this.signTransaction(transaction);\n                    const rawTransaction = transaction.serialize();\n                    return await connection.sendRawTransaction(rawTransaction, options);\n                }\n                catch (error) {\n                    // If the error was thrown by `signTransaction`, rethrow it and don't emit a duplicate event\n                    if (error instanceof WalletSignTransactionError) {\n                        emit = false;\n                        throw error;\n                    }\n                    throw new WalletSendTransactionError(error?.message, error);\n                }\n            }\n            else {\n                try {\n                    const { signers, ...sendOptions } = options;\n                    transaction = await this.prepareTransaction(transaction, connection, sendOptions);\n                    signers?.length && transaction.partialSign(...signers);\n                    transaction = await this.signTransaction(transaction);\n                    const rawTransaction = transaction.serialize();\n                    return await connection.sendRawTransaction(rawTransaction, sendOptions);\n                }\n                catch (error) {\n                    // If the error was thrown by `signTransaction`, rethrow it and don't emit a duplicate event\n                    if (error instanceof WalletSignTransactionError) {\n                        emit = false;\n                        throw error;\n                    }\n                    throw new WalletSendTransactionError(error?.message, error);\n                }\n            }\n        }\n        catch (error) {\n            if (emit) {\n                this.emit('error', error);\n            }\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        for (const transaction of transactions) {\n            if (isVersionedTransaction(transaction)) {\n                if (!this.supportedTransactionVersions)\n                    throw new WalletSignTransactionError(`Signing versioned transactions isn't supported by this wallet`);\n                if (!this.supportedTransactionVersions.has(transaction.version))\n                    throw new WalletSignTransactionError(`Signing transaction version ${transaction.version} isn't supported by this wallet`);\n            }\n        }\n        const signedTransactions = [];\n        for (const transaction of transactions) {\n            signedTransactions.push(await this.signTransaction(transaction));\n        }\n        return signedTransactions;\n    }\n}\nexport class BaseMessageSignerWalletAdapter extends BaseSignerWalletAdapter {\n}\nexport class BaseSignInMessageSignerWalletAdapter extends BaseMessageSignerWalletAdapter {\n}\n//# sourceMappingURL=signer.js.map","/** Name of the feature. */\nexport const SolanaSignAndSendTransaction = 'solana:signAndSendTransaction';\n//# sourceMappingURL=signAndSendTransaction.js.map","/** Name of the feature. */\nexport const SolanaSignMessage = 'solana:signMessage';\n//# sourceMappingURL=signMessage.js.map","/** Name of the feature. */\nexport const SolanaSignTransaction = 'solana:signTransaction';\n//# sourceMappingURL=signTransaction.js.map","/** Name of the feature. */\nexport const StandardConnect = 'standard:connect';\n/**\n * @deprecated Use {@link StandardConnect} instead.\n *\n * @group Deprecated\n */\nexport const Connect = StandardConnect;\n//# sourceMappingURL=connect.js.map","/** Name of the feature. */\nexport const StandardDisconnect = 'standard:disconnect';\n/**\n * @deprecated Use {@link StandardDisconnect} instead.\n *\n * @group Deprecated\n */\nexport const Disconnect = StandardDisconnect;\n//# sourceMappingURL=disconnect.js.map","/** Name of the feature. */\nexport const StandardEvents = 'standard:events';\n/**\n * @deprecated Use {@link StandardEvents} instead.\n *\n * @group Deprecated\n */\nexport const Events = StandardEvents;\n//# sourceMappingURL=events.js.map","export var WalletAdapterNetwork;\n(function (WalletAdapterNetwork) {\n    WalletAdapterNetwork[\"Mainnet\"] = \"mainnet-beta\";\n    WalletAdapterNetwork[\"Testnet\"] = \"testnet\";\n    WalletAdapterNetwork[\"Devnet\"] = \"devnet\";\n})(WalletAdapterNetwork || (WalletAdapterNetwork = {}));\n//# sourceMappingURL=types.js.map","/**\n * Internal assertion helpers.\n * @module\n */\n/** Asserts something is positive integer. */\nfunction anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Is number an Uint8Array? Copied from utils for perf. */\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nfunction ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nfunction aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nfunction aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\nexport { anumber, abytes, ahash, aexists, aoutput };\n//# sourceMappingURL=_assert.js.map","export const crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\nimport { abytes } from \"./_assert.js\";\n// export { isBytes } from './_assert.ts';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n// Cast array to different type\nexport function u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\nexport function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n// Cast array to view\nexport function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n// The byte swap operation for uint32\nexport function byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const byteSwapIfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n}\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function';\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Convert JS string to byte array.\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('utf8ToBytes expected string, got ' + typeof str);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n/** For runtime check if class implements interface */\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** Wraps hash function, creating an interface on top of it */\nexport function wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (crypto && typeof crypto.randomBytes === 'function') {\n        return Uint8Array.from(crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { aexists, aoutput } from \"./_assert.js\";\nimport { Hash, createView, toBytes } from \"./utils.js\";\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */\nexport function Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport class HashMD extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        aexists(this);\n        const { view, buffer, blockLen } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        aoutput(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n//# sourceMappingURL=_md.js.map","/**\n * SHA2-256 a.k.a. sha256. In JS, it is the fastest hash, even faster than Blake3.\n *\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n *\n * Check out [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj } from \"./_md.js\";\nimport { rotr, wrapConstructor } from \"./utils.js\";\n/** Round constants: first 32 bits of fractional parts of the cube roots of the first 64 primes 2..311). */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Initial state: first 32 bits of fractional parts of the square roots of the first 8 primes 2..19. */\n// prettier-ignore\nconst SHA256_IV = /* @__PURE__ */ new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n/**\n * Temporary buffer, not used to store anything between runs.\n * Named this way because it matches specification.\n */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD {\n    constructor(outputLen = 32) {\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = SHA256_IV[0] | 0;\n        this.B = SHA256_IV[1] | 0;\n        this.C = SHA256_IV[2] | 0;\n        this.D = SHA256_IV[3] | 0;\n        this.E = SHA256_IV[4] | 0;\n        this.F = SHA256_IV[5] | 0;\n        this.G = SHA256_IV[6] | 0;\n        this.H = SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n/**\n * Constants taken from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf.\n */\nclass SHA224 extends SHA256 {\n    constructor() {\n        super(28);\n        this.A = 0xc1059ed8 | 0;\n        this.B = 0x367cd507 | 0;\n        this.C = 0x3070dd17 | 0;\n        this.D = 0xf70e5939 | 0;\n        this.E = 0xffc00b31 | 0;\n        this.F = 0x68581511 | 0;\n        this.G = 0x64f98fa7 | 0;\n        this.H = 0xbefa4fa4 | 0;\n    }\n}\n/** SHA2-256 hash function */\nexport const sha256 = /* @__PURE__ */ wrapConstructor(() => new SHA256());\n/** SHA2-224 hash function */\nexport const sha224 = /* @__PURE__ */ wrapConstructor(() => new SHA224());\n//# sourceMappingURL=sha256.js.map","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { fromBig, split, toBig, shrSH, shrSL, rotrSH, rotrSL, rotrBH, rotrBL, rotr32H, rotr32L, rotlSH, rotlSL, rotlBH, rotlBL, add, add3L, add3H, add4L, add4H, add5H, add5L, };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","/**\n * SHA2-512 a.k.a. sha512 and sha384. It is slower than sha256 in js because u64 operations are slow.\n *\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [the paper on truncated SHA512/256](https://eprint.iacr.org/2010/548.pdf).\n * @module\n */\nimport { HashMD } from \"./_md.js\";\nimport u64 from \"./_u64.js\";\nimport { wrapConstructor } from \"./utils.js\";\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nexport class SHA512 extends HashMD {\n    constructor(outputLen = 64) {\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n        // Also looks cleaner and easier to verify with spec.\n        // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x6a09e667 | 0;\n        this.Al = 0xf3bcc908 | 0;\n        this.Bh = 0xbb67ae85 | 0;\n        this.Bl = 0x84caa73b | 0;\n        this.Ch = 0x3c6ef372 | 0;\n        this.Cl = 0xfe94f82b | 0;\n        this.Dh = 0xa54ff53a | 0;\n        this.Dl = 0x5f1d36f1 | 0;\n        this.Eh = 0x510e527f | 0;\n        this.El = 0xade682d1 | 0;\n        this.Fh = 0x9b05688c | 0;\n        this.Fl = 0x2b3e6c1f | 0;\n        this.Gh = 0x1f83d9ab | 0;\n        this.Gl = 0xfb41bd6b | 0;\n        this.Hh = 0x5be0cd19 | 0;\n        this.Hl = 0x137e2179 | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        SHA512_W_H.fill(0);\n        SHA512_W_L.fill(0);\n    }\n    destroy() {\n        this.buffer.fill(0);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexport class SHA512_224 extends SHA512 {\n    constructor() {\n        super(28);\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x8c3d37c8 | 0;\n        this.Al = 0x19544da2 | 0;\n        this.Bh = 0x73e19966 | 0;\n        this.Bl = 0x89dcd4d6 | 0;\n        this.Ch = 0x1dfab7ae | 0;\n        this.Cl = 0x32ff9c82 | 0;\n        this.Dh = 0x679dd514 | 0;\n        this.Dl = 0x582f9fcf | 0;\n        this.Eh = 0x0f6d2b69 | 0;\n        this.El = 0x7bd44da8 | 0;\n        this.Fh = 0x77e36f73 | 0;\n        this.Fl = 0x04c48942 | 0;\n        this.Gh = 0x3f9d85a8 | 0;\n        this.Gl = 0x6a1d36c8 | 0;\n        this.Hh = 0x1112e6ad | 0;\n        this.Hl = 0x91d692a1 | 0;\n    }\n}\nexport class SHA512_256 extends SHA512 {\n    constructor() {\n        super(32);\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0x22312194 | 0;\n        this.Al = 0xfc2bf72c | 0;\n        this.Bh = 0x9f555fa3 | 0;\n        this.Bl = 0xc84c64c2 | 0;\n        this.Ch = 0x2393b86b | 0;\n        this.Cl = 0x6f53b151 | 0;\n        this.Dh = 0x96387719 | 0;\n        this.Dl = 0x5940eabd | 0;\n        this.Eh = 0x96283ee2 | 0;\n        this.El = 0xa88effe3 | 0;\n        this.Fh = 0xbe5e1e25 | 0;\n        this.Fl = 0x53863992 | 0;\n        this.Gh = 0x2b0199fc | 0;\n        this.Gl = 0x2c85b8aa | 0;\n        this.Hh = 0x0eb72ddc | 0;\n        this.Hl = 0x81c52ca2 | 0;\n    }\n}\nexport class SHA384 extends SHA512 {\n    constructor() {\n        super(48);\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = 0xcbbb9d5d | 0;\n        this.Al = 0xc1059ed8 | 0;\n        this.Bh = 0x629a292a | 0;\n        this.Bl = 0x367cd507 | 0;\n        this.Ch = 0x9159015a | 0;\n        this.Cl = 0x3070dd17 | 0;\n        this.Dh = 0x152fecd8 | 0;\n        this.Dl = 0xf70e5939 | 0;\n        this.Eh = 0x67332667 | 0;\n        this.El = 0xffc00b31 | 0;\n        this.Fh = 0x8eb44a87 | 0;\n        this.Fl = 0x68581511 | 0;\n        this.Gh = 0xdb0c2e0d | 0;\n        this.Gl = 0x64f98fa7 | 0;\n        this.Hh = 0x47b5481d | 0;\n        this.Hl = 0xbefa4fa4 | 0;\n    }\n}\n/** SHA2-512 hash function. */\nexport const sha512 = /* @__PURE__ */ wrapConstructor(() => new SHA512());\n/** SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks. */\nexport const sha512_224 = /* @__PURE__ */ wrapConstructor(() => new SHA512_224());\n/** SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks. */\nexport const sha512_256 = /* @__PURE__ */ wrapConstructor(() => new SHA512_256());\n/** SHA2-384 hash function. */\nexport const sha384 = /* @__PURE__ */ wrapConstructor(() => new SHA384());\n//# sourceMappingURL=sha512.js.map","/**\n * Hex, bytes and number utilities.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// 100 lines of code in the file are duplicated from noble-hashes (utils).\n// This is OK: `abstract` directory does not use noble-hashes.\n// User may opt-in into using different hashing library. This way, noble-hashes\n// won't be included into their bundle.\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\nexport function abytes(item) {\n    if (!isBytes(item))\n        throw new Error('Uint8Array expected');\n}\nexport function abool(title, value) {\n    if (typeof value !== 'boolean')\n        throw new Error(title + ' boolean expected, got ' + value);\n}\nexport function numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? '0' + hex : hex;\n}\nexport function hexToNumber(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    return hex === '' ? _0n : BigInt('0x' + hex); // Big Endian\n}\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function';\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nexport function bytesToNumberLE(bytes) {\n    abytes(bytes);\n    return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\nexport function numberToBytesBE(n, len) {\n    return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\nexport function numberToBytesLE(n, len) {\n    return numberToBytesBE(n, len).reverse();\n}\n// Unpadded, rarely used\nexport function numberToVarBytesBE(n) {\n    return hexToBytes(numberToHexUnpadded(n));\n}\n/**\n * Takes hex string or Uint8Array, converts to Uint8Array.\n * Validates output length.\n * Will throw error for other types.\n * @param title descriptive title for an error e.g. 'private key'\n * @param hex hex string or Uint8Array\n * @param expectedLength optional, will compare to result array's length\n * @returns\n */\nexport function ensureBytes(title, hex, expectedLength) {\n    let res;\n    if (typeof hex === 'string') {\n        try {\n            res = hexToBytes(hex);\n        }\n        catch (e) {\n            throw new Error(title + ' must be hex string or Uint8Array, cause: ' + e);\n        }\n    }\n    else if (isBytes(hex)) {\n        // Uint8Array.from() instead of hash.slice() because node.js Buffer\n        // is instance of Uint8Array, and its slice() creates **mutable** copy\n        res = Uint8Array.from(hex);\n    }\n    else {\n        throw new Error(title + ' must be hex string or Uint8Array');\n    }\n    const len = res.length;\n    if (typeof expectedLength === 'number' && len !== expectedLength)\n        throw new Error(title + ' of length ' + expectedLength + ' expected, got ' + len);\n    return res;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n// Compares 2 u8a-s in kinda constant time\nexport function equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let diff = 0;\n    for (let i = 0; i < a.length; i++)\n        diff |= a[i] ^ b[i];\n    return diff === 0;\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n// Is positive bigint\nconst isPosBig = (n) => typeof n === 'bigint' && _0n <= n;\nexport function inRange(n, min, max) {\n    return isPosBig(n) && isPosBig(min) && isPosBig(max) && min <= n && n < max;\n}\n/**\n * Asserts min <= n < max. NOTE: It's < max and not <= max.\n * @example\n * aInRange('x', x, 1n, 256n); // would assume x is in (1n..255n)\n */\nexport function aInRange(title, n, min, max) {\n    // Why min <= n < max and not a (min < n < max) OR b (min <= n <= max)?\n    // consider P=256n, min=0n, max=P\n    // - a for min=0 would require -1:          `inRange('x', x, -1n, P)`\n    // - b would commonly require subtraction:  `inRange('x', x, 0n, P - 1n)`\n    // - our way is the cleanest:               `inRange('x', x, 0n, P)\n    if (!inRange(n, min, max))\n        throw new Error('expected valid ' + title + ': ' + min + ' <= n < ' + max + ', got ' + n);\n}\n// Bit operations\n/**\n * Calculates amount of bits in a bigint.\n * Same as `n.toString(2).length`\n */\nexport function bitLen(n) {\n    let len;\n    for (len = 0; n > _0n; n >>= _1n, len += 1)\n        ;\n    return len;\n}\n/**\n * Gets single bit at position.\n * NOTE: first bit position is 0 (same as arrays)\n * Same as `!!+Array.from(n.toString(2)).reverse()[pos]`\n */\nexport function bitGet(n, pos) {\n    return (n >> BigInt(pos)) & _1n;\n}\n/**\n * Sets single bit at position.\n */\nexport function bitSet(n, pos, value) {\n    return n | ((value ? _1n : _0n) << BigInt(pos));\n}\n/**\n * Calculate mask for N bits. Not using ** operator with bigints because of old engines.\n * Same as BigInt(`0b${Array(i).fill('1').join('')}`)\n */\nexport const bitMask = (n) => (_1n << BigInt(n)) - _1n;\n// DRBG\nconst u8n = (len) => new Uint8Array(len); // creates Uint8Array\nconst u8fr = (arr) => Uint8Array.from(arr); // another shortcut\n/**\n * Minimal HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n * @returns function that will call DRBG until 2nd arg returns something meaningful\n * @example\n *   const drbg = createHmacDRBG<Key>(32, 32, hmac);\n *   drbg(seed, bytesToKey); // bytesToKey must return Key or undefined\n */\nexport function createHmacDrbg(hashLen, qByteLen, hmacFn) {\n    if (typeof hashLen !== 'number' || hashLen < 2)\n        throw new Error('hashLen must be a number');\n    if (typeof qByteLen !== 'number' || qByteLen < 2)\n        throw new Error('qByteLen must be a number');\n    if (typeof hmacFn !== 'function')\n        throw new Error('hmacFn must be a function');\n    // Step B, Step C: set hashLen to 8*ceil(hlen/8)\n    let v = u8n(hashLen); // Minimal non-full-spec HMAC-DRBG from NIST 800-90 for RFC6979 sigs.\n    let k = u8n(hashLen); // Steps B and C of RFC6979 3.2: set hashLen, in our case always same\n    let i = 0; // Iterations counter, will throw when over 1000\n    const reset = () => {\n        v.fill(1);\n        k.fill(0);\n        i = 0;\n    };\n    const h = (...b) => hmacFn(k, v, ...b); // hmac(k)(v, ...values)\n    const reseed = (seed = u8n(0)) => {\n        // HMAC-DRBG reseed() function. Steps D-G\n        k = h(u8fr([0x00]), seed); // k = hmac(k || v || 0x00 || seed)\n        v = h(); // v = hmac(k || v)\n        if (seed.length === 0)\n            return;\n        k = h(u8fr([0x01]), seed); // k = hmac(k || v || 0x01 || seed)\n        v = h(); // v = hmac(k || v)\n    };\n    const gen = () => {\n        // HMAC-DRBG generate() function\n        if (i++ >= 1000)\n            throw new Error('drbg: tried 1000 values');\n        let len = 0;\n        const out = [];\n        while (len < qByteLen) {\n            v = h();\n            const sl = v.slice();\n            out.push(sl);\n            len += v.length;\n        }\n        return concatBytes(...out);\n    };\n    const genUntil = (seed, pred) => {\n        reset();\n        reseed(seed); // Steps D-G\n        let res = undefined; // Step H: grind until k is in [1..n-1]\n        while (!(res = pred(gen())))\n            reseed();\n        reset();\n        return res;\n    };\n    return genUntil;\n}\n// Validating curves and fields\nconst validatorFns = {\n    bigint: (val) => typeof val === 'bigint',\n    function: (val) => typeof val === 'function',\n    boolean: (val) => typeof val === 'boolean',\n    string: (val) => typeof val === 'string',\n    stringOrUint8Array: (val) => typeof val === 'string' || isBytes(val),\n    isSafeInteger: (val) => Number.isSafeInteger(val),\n    array: (val) => Array.isArray(val),\n    field: (val, object) => object.Fp.isValid(val),\n    hash: (val) => typeof val === 'function' && Number.isSafeInteger(val.outputLen),\n};\n// type Record<K extends string | number | symbol, T> = { [P in K]: T; }\nexport function validateObject(object, validators, optValidators = {}) {\n    const checkField = (fieldName, type, isOptional) => {\n        const checkVal = validatorFns[type];\n        if (typeof checkVal !== 'function')\n            throw new Error('invalid validator function');\n        const val = object[fieldName];\n        if (isOptional && val === undefined)\n            return;\n        if (!checkVal(val, object)) {\n            throw new Error('param ' + String(fieldName) + ' is invalid. Expected ' + type + ', got ' + val);\n        }\n    };\n    for (const [fieldName, type] of Object.entries(validators))\n        checkField(fieldName, type, false);\n    for (const [fieldName, type] of Object.entries(optValidators))\n        checkField(fieldName, type, true);\n    return object;\n}\n// validate type tests\n// const o: { a: number; b: number; c: number } = { a: 1, b: 5, c: 6 };\n// const z0 = validateObject(o, { a: 'isSafeInteger' }, { c: 'bigint' }); // Ok!\n// // Should fail type-check\n// const z1 = validateObject(o, { a: 'tmp' }, { c: 'zz' });\n// const z2 = validateObject(o, { a: 'isSafeInteger' }, { c: 'zz' });\n// const z3 = validateObject(o, { test: 'boolean', z: 'bug' });\n// const z4 = validateObject(o, { a: 'boolean', z: 'bug' });\n/**\n * throws not implemented error\n */\nexport const notImplemented = () => {\n    throw new Error('not implemented');\n};\n/**\n * Memoizes (caches) computation result.\n * Uses WeakMap: the value is going auto-cleaned by GC after last reference is removed.\n */\nexport function memoized(fn) {\n    const map = new WeakMap();\n    return (arg, ...args) => {\n        const val = map.get(arg);\n        if (val !== undefined)\n            return val;\n        const computed = fn(arg, ...args);\n        map.set(arg, computed);\n        return computed;\n    };\n}\n//# sourceMappingURL=utils.js.map","/**\n * Utils for modular division and finite fields.\n * A finite field over 11 is integer number operations `mod 11`.\n * There is no division: it is replaced by modular multiplicative inverse.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { bitMask, bytesToNumberBE, bytesToNumberLE, ensureBytes, numberToBytesBE, numberToBytesLE, validateObject, } from \"./utils.js\";\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = /* @__PURE__ */ BigInt(2), _3n = /* @__PURE__ */ BigInt(3);\n// prettier-ignore\nconst _4n = /* @__PURE__ */ BigInt(4), _5n = /* @__PURE__ */ BigInt(5), _8n = /* @__PURE__ */ BigInt(8);\n// prettier-ignore\nconst _9n = /* @__PURE__ */ BigInt(9), _16n = /* @__PURE__ */ BigInt(16);\n// Calculates a modulo b\nexport function mod(a, b) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\n/**\n * Efficiently raise num to power and do modular division.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n * @todo use field version && remove\n * @example\n * pow(2n, 6n, 11n) // 64n % 11n == 9n\n */\nexport function pow(num, power, modulo) {\n    if (power < _0n)\n        throw new Error('invalid exponent, negatives unsupported');\n    if (modulo <= _0n)\n        throw new Error('invalid modulus');\n    if (modulo === _1n)\n        return _0n;\n    let res = _1n;\n    while (power > _0n) {\n        if (power & _1n)\n            res = (res * num) % modulo;\n        num = (num * num) % modulo;\n        power >>= _1n;\n    }\n    return res;\n}\n/** Does `x^(2^power)` mod p. `pow2(30, 4)` == `30^(2^4)` */\nexport function pow2(x, power, modulo) {\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= modulo;\n    }\n    return res;\n}\n/**\n * Inverses number over modulo.\n * Implemented using [Euclidean GCD](https://brilliant.org/wiki/extended-euclidean-algorithm/).\n */\nexport function invert(number, modulo) {\n    if (number === _0n)\n        throw new Error('invert: expected non-zero number');\n    if (modulo <= _0n)\n        throw new Error('invert: expected positive modulus, got ' + modulo);\n    // Fermat's little theorem \"CT-like\" version inv(n) = n^(m-2) mod m is 30x slower.\n    let a = mod(number, modulo);\n    let b = modulo;\n    // prettier-ignore\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        // JIT applies optimization if those two lines follow each other\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        // prettier-ignore\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\n/**\n * Tonelli-Shanks square root search algorithm.\n * 1. https://eprint.iacr.org/2012/685.pdf (page 12)\n * 2. Square Roots from 1; 24, 51, 10 to Dan Shanks\n * Will start an infinite loop if field order P is not prime.\n * @param P field order\n * @returns function that takes field Fp (created from P) and number n\n */\nexport function tonelliShanks(P) {\n    // Legendre constant: used to calculate Legendre symbol (a | p),\n    // which denotes the value of a^((p-1)/2) (mod p).\n    // (a | p)  1    if a is a square (mod p)\n    // (a | p)  -1   if a is not a square (mod p)\n    // (a | p)  0    if a  0 (mod p)\n    const legendreC = (P - _1n) / _2n;\n    let Q, S, Z;\n    // Step 1: By factoring out powers of 2 from p - 1,\n    // find q and s such that p - 1 = q*(2^s) with q odd\n    for (Q = P - _1n, S = 0; Q % _2n === _0n; Q /= _2n, S++)\n        ;\n    // Step 2: Select a non-square z such that (z | p)  -1 and set c  zq\n    for (Z = _2n; Z < P && pow(Z, legendreC, P) !== P - _1n; Z++) {\n        // Crash instead of infinity loop, we cannot reasonable count until P.\n        if (Z > 1000)\n            throw new Error('Cannot find square root: likely non-prime P');\n    }\n    // Fast-path\n    if (S === 1) {\n        const p1div4 = (P + _1n) / _4n;\n        return function tonelliFast(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Slow-path\n    const Q1div2 = (Q + _1n) / _2n;\n    return function tonelliSlow(Fp, n) {\n        // Step 0: Check that n is indeed a square: (n | p) should not be  -1\n        if (Fp.pow(n, legendreC) === Fp.neg(Fp.ONE))\n            throw new Error('Cannot find square root');\n        let r = S;\n        // TODO: will fail at Fp2/etc\n        let g = Fp.pow(Fp.mul(Fp.ONE, Z), Q); // will update both x and b\n        let x = Fp.pow(n, Q1div2); // first guess at the square root\n        let b = Fp.pow(n, Q); // first guess at the fudge factor\n        while (!Fp.eql(b, Fp.ONE)) {\n            if (Fp.eql(b, Fp.ZERO))\n                return Fp.ZERO; // https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm (4. If t = 0, return r = 0)\n            // Find m such b^(2^m)==1\n            let m = 1;\n            for (let t2 = Fp.sqr(b); m < r; m++) {\n                if (Fp.eql(t2, Fp.ONE))\n                    break;\n                t2 = Fp.sqr(t2); // t2 *= t2\n            }\n            // NOTE: r-m-1 can be bigger than 32, need to convert to bigint before shift, otherwise there will be overflow\n            const ge = Fp.pow(g, _1n << BigInt(r - m - 1)); // ge = 2^(r-m-1)\n            g = Fp.sqr(ge); // g = ge * ge\n            x = Fp.mul(x, ge); // x *= ge\n            b = Fp.mul(b, g); // b *= g\n            r = m;\n        }\n        return x;\n    };\n}\n/**\n * Square root for a finite field. It will try to check if optimizations are applicable and fall back to 4:\n *\n * 1. P  3 (mod 4)\n * 2. P  5 (mod 8)\n * 3. P  9 (mod 16)\n * 4. Tonelli-Shanks algorithm\n *\n * Different algorithms can give different roots, it is up to user to decide which one they want.\n * For example there is FpSqrtOdd/FpSqrtEven to choice root based on oddness (used for hash-to-curve).\n */\nexport function FpSqrt(P) {\n    // P  3 (mod 4)\n    // n = n^((P+1)/4)\n    if (P % _4n === _3n) {\n        // Not all roots possible!\n        // const ORDER =\n        //   0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n        // const NUM = 72057594037927816n;\n        const p1div4 = (P + _1n) / _4n;\n        return function sqrt3mod4(Fp, n) {\n            const root = Fp.pow(n, p1div4);\n            // Throw if root**2 != n\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // Atkin algorithm for q  5 (mod 8), https://eprint.iacr.org/2012/685.pdf (page 10)\n    if (P % _8n === _5n) {\n        const c1 = (P - _5n) / _8n;\n        return function sqrt5mod8(Fp, n) {\n            const n2 = Fp.mul(n, _2n);\n            const v = Fp.pow(n2, c1);\n            const nv = Fp.mul(n, v);\n            const i = Fp.mul(Fp.mul(nv, _2n), v);\n            const root = Fp.mul(nv, Fp.sub(i, Fp.ONE));\n            if (!Fp.eql(Fp.sqr(root), n))\n                throw new Error('Cannot find square root');\n            return root;\n        };\n    }\n    // P  9 (mod 16)\n    if (P % _16n === _9n) {\n        // NOTE: tonelli is too slow for bls-Fp2 calculations even on start\n        // Means we cannot use sqrt for constants at all!\n        //\n        // const c1 = Fp.sqrt(Fp.negate(Fp.ONE)); //  1. c1 = sqrt(-1) in F, i.e., (c1^2) == -1 in F\n        // const c2 = Fp.sqrt(c1);                //  2. c2 = sqrt(c1) in F, i.e., (c2^2) == c1 in F\n        // const c3 = Fp.sqrt(Fp.negate(c1));     //  3. c3 = sqrt(-c1) in F, i.e., (c3^2) == -c1 in F\n        // const c4 = (P + _7n) / _16n;           //  4. c4 = (q + 7) / 16        # Integer arithmetic\n        // sqrt = (x) => {\n        //   let tv1 = Fp.pow(x, c4);             //  1. tv1 = x^c4\n        //   let tv2 = Fp.mul(c1, tv1);           //  2. tv2 = c1 * tv1\n        //   const tv3 = Fp.mul(c2, tv1);         //  3. tv3 = c2 * tv1\n        //   let tv4 = Fp.mul(c3, tv1);           //  4. tv4 = c3 * tv1\n        //   const e1 = Fp.equals(Fp.square(tv2), x); //  5.  e1 = (tv2^2) == x\n        //   const e2 = Fp.equals(Fp.square(tv3), x); //  6.  e2 = (tv3^2) == x\n        //   tv1 = Fp.cmov(tv1, tv2, e1); //  7. tv1 = CMOV(tv1, tv2, e1)  # Select tv2 if (tv2^2) == x\n        //   tv2 = Fp.cmov(tv4, tv3, e2); //  8. tv2 = CMOV(tv4, tv3, e2)  # Select tv3 if (tv3^2) == x\n        //   const e3 = Fp.equals(Fp.square(tv2), x); //  9.  e3 = (tv2^2) == x\n        //   return Fp.cmov(tv1, tv2, e3); //  10.  z = CMOV(tv1, tv2, e3)  # Select the sqrt from tv1 and tv2\n        // }\n    }\n    // Other cases: Tonelli-Shanks algorithm\n    return tonelliShanks(P);\n}\n// Little-endian check for first LE bit (last BE bit);\nexport const isNegativeLE = (num, modulo) => (mod(num, modulo) & _1n) === _1n;\n// prettier-ignore\nconst FIELD_FIELDS = [\n    'create', 'isValid', 'is0', 'neg', 'inv', 'sqrt', 'sqr',\n    'eql', 'add', 'sub', 'mul', 'pow', 'div',\n    'addN', 'subN', 'mulN', 'sqrN'\n];\nexport function validateField(field) {\n    const initial = {\n        ORDER: 'bigint',\n        MASK: 'bigint',\n        BYTES: 'isSafeInteger',\n        BITS: 'isSafeInteger',\n    };\n    const opts = FIELD_FIELDS.reduce((map, val) => {\n        map[val] = 'function';\n        return map;\n    }, initial);\n    return validateObject(field, opts);\n}\n// Generic field functions\n/**\n * Same as `pow` but for Fp: non-constant-time.\n * Unsafe in some contexts: uses ladder, so can expose bigint bits.\n */\nexport function FpPow(f, num, power) {\n    // Should have same speed as pow for bigints\n    // TODO: benchmark!\n    if (power < _0n)\n        throw new Error('invalid exponent, negatives unsupported');\n    if (power === _0n)\n        return f.ONE;\n    if (power === _1n)\n        return num;\n    let p = f.ONE;\n    let d = num;\n    while (power > _0n) {\n        if (power & _1n)\n            p = f.mul(p, d);\n        d = f.sqr(d);\n        power >>= _1n;\n    }\n    return p;\n}\n/**\n * Efficiently invert an array of Field elements.\n * `inv(0)` will return `undefined` here: make sure to throw an error.\n */\nexport function FpInvertBatch(f, nums) {\n    const tmp = new Array(nums.length);\n    // Walk from first to last, multiply them by each other MOD p\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = acc;\n        return f.mul(acc, num);\n    }, f.ONE);\n    // Invert last element\n    const inverted = f.inv(lastMultiplied);\n    // Walk from last to first, multiply them by inverted each other MOD p\n    nums.reduceRight((acc, num, i) => {\n        if (f.is0(num))\n            return acc;\n        tmp[i] = f.mul(acc, tmp[i]);\n        return f.mul(acc, num);\n    }, inverted);\n    return tmp;\n}\nexport function FpDiv(f, lhs, rhs) {\n    return f.mul(lhs, typeof rhs === 'bigint' ? invert(rhs, f.ORDER) : f.inv(rhs));\n}\n/**\n * Legendre symbol.\n * * (a | p)  1    if a is a square (mod p), quadratic residue\n * * (a | p)  -1   if a is not a square (mod p), quadratic non residue\n * * (a | p)  0    if a  0 (mod p)\n */\nexport function FpLegendre(order) {\n    const legendreConst = (order - _1n) / _2n; // Integer arithmetic\n    return (f, x) => f.pow(x, legendreConst);\n}\n// This function returns True whenever the value x is a square in the field F.\nexport function FpIsSquare(f) {\n    const legendre = FpLegendre(f.ORDER);\n    return (x) => {\n        const p = legendre(f, x);\n        return f.eql(p, f.ZERO) || f.eql(p, f.ONE);\n    };\n}\n// CURVE.n lengths\nexport function nLength(n, nBitLength) {\n    // Bit size, byte size of CURVE.n\n    const _nBitLength = nBitLength !== undefined ? nBitLength : n.toString(2).length;\n    const nByteLength = Math.ceil(_nBitLength / 8);\n    return { nBitLength: _nBitLength, nByteLength };\n}\n/**\n * Initializes a finite field over prime.\n * Major performance optimizations:\n * * a) denormalized operations like mulN instead of mul\n * * b) same object shape: never add or remove keys\n * * c) Object.freeze\n * Fragile: always run a benchmark on a change.\n * Security note: operations don't check 'isValid' for all elements for performance reasons,\n * it is caller responsibility to check this.\n * This is low-level code, please make sure you know what you're doing.\n * @param ORDER prime positive bigint\n * @param bitLen how many bits the field consumes\n * @param isLE (def: false) if encoding / decoding should be in little-endian\n * @param redef optional faster redefinitions of sqrt and other methods\n */\nexport function Field(ORDER, bitLen, isLE = false, redef = {}) {\n    if (ORDER <= _0n)\n        throw new Error('invalid field: expected ORDER > 0, got ' + ORDER);\n    const { nBitLength: BITS, nByteLength: BYTES } = nLength(ORDER, bitLen);\n    if (BYTES > 2048)\n        throw new Error('invalid field: expected ORDER of <= 2048 bytes');\n    let sqrtP; // cached sqrtP\n    const f = Object.freeze({\n        ORDER,\n        isLE,\n        BITS,\n        BYTES,\n        MASK: bitMask(BITS),\n        ZERO: _0n,\n        ONE: _1n,\n        create: (num) => mod(num, ORDER),\n        isValid: (num) => {\n            if (typeof num !== 'bigint')\n                throw new Error('invalid field element: expected bigint, got ' + typeof num);\n            return _0n <= num && num < ORDER; // 0 is valid element, but it's not invertible\n        },\n        is0: (num) => num === _0n,\n        isOdd: (num) => (num & _1n) === _1n,\n        neg: (num) => mod(-num, ORDER),\n        eql: (lhs, rhs) => lhs === rhs,\n        sqr: (num) => mod(num * num, ORDER),\n        add: (lhs, rhs) => mod(lhs + rhs, ORDER),\n        sub: (lhs, rhs) => mod(lhs - rhs, ORDER),\n        mul: (lhs, rhs) => mod(lhs * rhs, ORDER),\n        pow: (num, power) => FpPow(f, num, power),\n        div: (lhs, rhs) => mod(lhs * invert(rhs, ORDER), ORDER),\n        // Same as above, but doesn't normalize\n        sqrN: (num) => num * num,\n        addN: (lhs, rhs) => lhs + rhs,\n        subN: (lhs, rhs) => lhs - rhs,\n        mulN: (lhs, rhs) => lhs * rhs,\n        inv: (num) => invert(num, ORDER),\n        sqrt: redef.sqrt ||\n            ((n) => {\n                if (!sqrtP)\n                    sqrtP = FpSqrt(ORDER);\n                return sqrtP(f, n);\n            }),\n        invertBatch: (lst) => FpInvertBatch(f, lst),\n        // TODO: do we really need constant cmov?\n        // We don't have const-time bigints anyway, so probably will be not very useful\n        cmov: (a, b, c) => (c ? b : a),\n        toBytes: (num) => (isLE ? numberToBytesLE(num, BYTES) : numberToBytesBE(num, BYTES)),\n        fromBytes: (bytes) => {\n            if (bytes.length !== BYTES)\n                throw new Error('Field.fromBytes: expected ' + BYTES + ' bytes, got ' + bytes.length);\n            return isLE ? bytesToNumberLE(bytes) : bytesToNumberBE(bytes);\n        },\n    });\n    return Object.freeze(f);\n}\nexport function FpSqrtOdd(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(\"Field doesn't have isOdd\");\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? root : Fp.neg(root);\n}\nexport function FpSqrtEven(Fp, elm) {\n    if (!Fp.isOdd)\n        throw new Error(\"Field doesn't have isOdd\");\n    const root = Fp.sqrt(elm);\n    return Fp.isOdd(root) ? Fp.neg(root) : root;\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Same as mapKeyToField, but accepts less bytes (40 instead of 48 for 32-byte field).\n * Which makes it slightly more biased, less secure.\n * @deprecated use `mapKeyToField` instead\n */\nexport function hashToPrivateScalar(hash, groupOrder, isLE = false) {\n    hash = ensureBytes('privateHash', hash);\n    const hashLen = hash.length;\n    const minLen = nLength(groupOrder).nByteLength + 8;\n    if (minLen < 24 || hashLen < minLen || hashLen > 1024)\n        throw new Error('hashToPrivateScalar: expected ' + minLen + '-1024 bytes of input, got ' + hashLen);\n    const num = isLE ? bytesToNumberLE(hash) : bytesToNumberBE(hash);\n    return mod(num, groupOrder - _1n) + _1n;\n}\n/**\n * Returns total number of bytes consumed by the field element.\n * For example, 32 bytes for usual 256-bit weierstrass curve.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of field\n */\nexport function getFieldBytesLength(fieldOrder) {\n    if (typeof fieldOrder !== 'bigint')\n        throw new Error('field order must be bigint');\n    const bitLength = fieldOrder.toString(2).length;\n    return Math.ceil(bitLength / 8);\n}\n/**\n * Returns minimal amount of bytes that can be safely reduced\n * by field order.\n * Should be 2^-128 for 128-bit curve such as P256.\n * @param fieldOrder number of field elements, usually CURVE.n\n * @returns byte length of target hash\n */\nexport function getMinHashLength(fieldOrder) {\n    const length = getFieldBytesLength(fieldOrder);\n    return length + Math.ceil(length / 2);\n}\n/**\n * \"Constant-time\" private key generation utility.\n * Can take (n + n/2) or more bytes of uniform input e.g. from CSPRNG or KDF\n * and convert them into private scalar, with the modulo bias being negligible.\n * Needs at least 48 bytes of input for 32-byte private key.\n * https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/\n * FIPS 186-5, A.2 https://csrc.nist.gov/publications/detail/fips/186/5/final\n * RFC 9380, https://www.rfc-editor.org/rfc/rfc9380#section-5\n * @param hash hash output from SHA3 or a similar function\n * @param groupOrder size of subgroup - (e.g. secp256k1.CURVE.n)\n * @param isLE interpret hash bytes as LE num\n * @returns valid private scalar\n */\nexport function mapHashToField(key, fieldOrder, isLE = false) {\n    const len = key.length;\n    const fieldLen = getFieldBytesLength(fieldOrder);\n    const minLen = getMinHashLength(fieldOrder);\n    // No small numbers: need to understand bias story. No huge numbers: easier to detect JS timings.\n    if (len < 16 || len < minLen || len > 1024)\n        throw new Error('expected ' + minLen + '-1024 bytes of input, got ' + len);\n    const num = isLE ? bytesToNumberLE(key) : bytesToNumberBE(key);\n    // `mod(x, 11)` can sometimes produce 0. `mod(x, 10) + 1` is the same, but no 0\n    const reduced = mod(num, fieldOrder - _1n) + _1n;\n    return isLE ? numberToBytesLE(reduced, fieldLen) : numberToBytesBE(reduced, fieldLen);\n}\n//# sourceMappingURL=modular.js.map","/**\n * Methods for elliptic curve multiplication by scalars.\n * Contains wNAF, pippenger\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { nLength, validateField } from \"./modular.js\";\nimport { bitLen, bitMask, validateObject } from \"./utils.js\";\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nfunction validateW(W, bits) {\n    if (!Number.isSafeInteger(W) || W <= 0 || W > bits)\n        throw new Error('invalid window size, expected [1..' + bits + '], got W=' + W);\n}\nfunction calcWOpts(W, scalarBits) {\n    validateW(W, scalarBits);\n    const windows = Math.ceil(scalarBits / W) + 1; // W=8 33. Not 32, because we skip zero\n    const windowSize = 2 ** (W - 1); // W=8 128. Not 256, because we skip zero\n    const maxNumber = 2 ** W; // W=8 256\n    const mask = bitMask(W); // W=8 255 == mask 0b11111111\n    const shiftBy = BigInt(W); // W=8 8\n    return { windows, windowSize, mask, maxNumber, shiftBy };\n}\nfunction calcOffsets(n, window, wOpts) {\n    const { windowSize, mask, maxNumber, shiftBy } = wOpts;\n    let wbits = Number(n & mask); // extract W bits.\n    let nextN = n >> shiftBy; // shift number by W bits.\n    // What actually happens here:\n    // const highestBit = Number(mask ^ (mask >> 1n));\n    // let wbits2 = wbits - 1; // skip zero\n    // if (wbits2 & highestBit) { wbits2 ^= Number(mask); // (~);\n    // split if bits > max: +224 => 256-32\n    if (wbits > windowSize) {\n        // we skip zero, which means instead of `>= size-1`, we do `> size`\n        wbits -= maxNumber; // -32, can be maxNumber - wbits, but then we need to set isNeg here.\n        nextN += _1n; // +256 (carry)\n    }\n    const offsetStart = window * windowSize;\n    const offset = offsetStart + Math.abs(wbits) - 1; // -1 because we skip zero\n    const isZero = wbits === 0; // is current window slice a 0?\n    const isNeg = wbits < 0; // is current window slice negative?\n    const isNegF = window % 2 !== 0; // fake random statement for noise\n    const offsetF = offsetStart; // fake offset for noise\n    return { nextN, offset, isZero, isNeg, isNegF, offsetF };\n}\nfunction validateMSMPoints(points, c) {\n    if (!Array.isArray(points))\n        throw new Error('array expected');\n    points.forEach((p, i) => {\n        if (!(p instanceof c))\n            throw new Error('invalid point at index ' + i);\n    });\n}\nfunction validateMSMScalars(scalars, field) {\n    if (!Array.isArray(scalars))\n        throw new Error('array of scalars expected');\n    scalars.forEach((s, i) => {\n        if (!field.isValid(s))\n            throw new Error('invalid scalar at index ' + i);\n    });\n}\n// Since points in different groups cannot be equal (different object constructor),\n// we can have single place to store precomputes.\n// Allows to make points frozen / immutable.\nconst pointPrecomputes = new WeakMap();\nconst pointWindowSizes = new WeakMap();\nfunction getW(P) {\n    return pointWindowSizes.get(P) || 1;\n}\n/**\n * Elliptic curve multiplication of Point by scalar. Fragile.\n * Scalars should always be less than curve order: this should be checked inside of a curve itself.\n * Creates precomputation tables for fast multiplication:\n * - private scalar is split by fixed size windows of W bits\n * - every window point is collected from window's table & added to accumulator\n * - since windows are different, same point inside tables won't be accessed more than once per calc\n * - each multiplication is 'Math.ceil(CURVE_ORDER / ) + 1' point additions (fixed for any scalar)\n * - +1 window is neccessary for wNAF\n * - wNAF reduces table size: 2x less memory + 2x faster generation, but 10% slower multiplication\n *\n * @todo Research returning 2d JS array of windows, instead of a single window.\n * This would allow windows to be in different memory locations\n */\nexport function wNAF(c, bits) {\n    return {\n        constTimeNegate,\n        hasPrecomputes(elm) {\n            return getW(elm) !== 1;\n        },\n        // non-const time multiplication ladder\n        unsafeLadder(elm, n, p = c.ZERO) {\n            let d = elm;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        },\n        /**\n         * Creates a wNAF precomputation window. Used for caching.\n         * Default window size is set by `utils.precompute()` and is equal to 8.\n         * Number of precomputed points depends on the curve size:\n         * 2^(1) * (Math.ceil( / ) + 1), where:\n         * -  is the window size\n         * -  is the bitlength of the curve order.\n         * For a 256-bit curve and window size 8, the number of precomputed points is 128 * 33 = 4224.\n         * @param elm Point instance\n         * @param W window size\n         * @returns precomputed point tables flattened to a single array\n         */\n        precomputeWindow(elm, W) {\n            const { windows, windowSize } = calcWOpts(W, bits);\n            const points = [];\n            let p = elm;\n            let base = p;\n            for (let window = 0; window < windows; window++) {\n                base = p;\n                points.push(base);\n                // i=1, bc we skip 0\n                for (let i = 1; i < windowSize; i++) {\n                    base = base.add(p);\n                    points.push(base);\n                }\n                p = base.double();\n            }\n            return points;\n        },\n        /**\n         * Implements ec multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @returns real and fake (for const-time) points\n         */\n        wNAF(W, precomputes, n) {\n            // Smaller version:\n            // https://github.com/paulmillr/noble-secp256k1/blob/47cb1669b6e506ad66b35fe7d76132ae97465da2/index.ts#L502-L541\n            // TODO: check the scalar is less than group order?\n            // wNAF behavior is undefined otherwise. But have to carefully remove\n            // other checks before wNAF. ORDER == bits here.\n            // Accumulators\n            let p = c.ZERO;\n            let f = c.BASE;\n            // This code was first written with assumption that 'f' and 'p' will never be infinity point:\n            // since each addition is multiplied by 2 ** W, it cannot cancel each other. However,\n            // there is negate now: it is possible that negated element from low value\n            // would be the same as high element, which will create carry into next window.\n            // It's not obvious how this can fail, but still worth investigating later.\n            const wo = calcWOpts(W, bits);\n            for (let window = 0; window < wo.windows; window++) {\n                // (n === _0n) is handled and not early-exited. isEven and offsetF are used for noise\n                const { nextN, offset, isZero, isNeg, isNegF, offsetF } = calcOffsets(n, window, wo);\n                n = nextN;\n                if (isZero) {\n                    // bits are 0: add garbage to fake point\n                    // Important part for const-time getPublicKey: add random \"noise\" point to f.\n                    f = f.add(constTimeNegate(isNegF, precomputes[offsetF]));\n                }\n                else {\n                    // bits are 1: add to result point\n                    p = p.add(constTimeNegate(isNeg, precomputes[offset]));\n                }\n            }\n            // Return both real and fake points: JIT won't eliminate f.\n            // At this point there is a way to F be infinity-point even if p is not,\n            // which makes it less const-time: around 1 bigint multiply.\n            return { p, f };\n        },\n        /**\n         * Implements ec unsafe (non const-time) multiplication using precomputed tables and w-ary non-adjacent form.\n         * @param W window size\n         * @param precomputes precomputed tables\n         * @param n scalar (we don't check here, but should be less than curve order)\n         * @param acc accumulator point to add result of multiplication\n         * @returns point\n         */\n        wNAFUnsafe(W, precomputes, n, acc = c.ZERO) {\n            const wo = calcWOpts(W, bits);\n            for (let window = 0; window < wo.windows; window++) {\n                if (n === _0n)\n                    break; // Early-exit, skip 0 value\n                const { nextN, offset, isZero, isNeg } = calcOffsets(n, window, wo);\n                n = nextN;\n                if (isZero) {\n                    // Window bits are 0: skip processing.\n                    // Move to next window.\n                    continue;\n                }\n                else {\n                    const item = precomputes[offset];\n                    acc = acc.add(isNeg ? item.negate() : item); // Re-using acc allows to save adds in MSM\n                }\n            }\n            return acc;\n        },\n        getPrecomputes(W, P, transform) {\n            // Calculate precomputes on a first run, reuse them after\n            let comp = pointPrecomputes.get(P);\n            if (!comp) {\n                comp = this.precomputeWindow(P, W);\n                if (W !== 1)\n                    pointPrecomputes.set(P, transform(comp));\n            }\n            return comp;\n        },\n        wNAFCached(P, n, transform) {\n            const W = getW(P);\n            return this.wNAF(W, this.getPrecomputes(W, P, transform), n);\n        },\n        wNAFCachedUnsafe(P, n, transform, prev) {\n            const W = getW(P);\n            if (W === 1)\n                return this.unsafeLadder(P, n, prev); // For W=1 ladder is ~x2 faster\n            return this.wNAFUnsafe(W, this.getPrecomputes(W, P, transform), n, prev);\n        },\n        // We calculate precomputes for elliptic curve point multiplication\n        // using windowed method. This specifies window size and\n        // stores precomputed values. Usually only base point would be precomputed.\n        setWindowSize(P, W) {\n            validateW(W, bits);\n            pointWindowSizes.set(P, W);\n            pointPrecomputes.delete(P);\n        },\n    };\n}\n/**\n * Pippenger algorithm for multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * 30x faster vs naive addition on L=4096, 10x faster than precomputes.\n * For N=254bit, L=1, it does: 1024 ADD + 254 DBL. For L=5: 1536 ADD + 254 DBL.\n * Algorithmically constant-time (for same L), even when 1 point + scalar, or when scalar = 0.\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @param scalars array of L scalars (aka private keys / bigints)\n */\nexport function pippenger(c, fieldN, points, scalars) {\n    // If we split scalars by some window (let's say 8 bits), every chunk will only\n    // take 256 buckets even if there are 4096 scalars, also re-uses double.\n    // TODO:\n    // - https://eprint.iacr.org/2024/750.pdf\n    // - https://tches.iacr.org/index.php/TCHES/article/view/10287\n    // 0 is accepted in scalars\n    validateMSMPoints(points, c);\n    validateMSMScalars(scalars, fieldN);\n    if (points.length !== scalars.length)\n        throw new Error('arrays of points and scalars must have equal length');\n    const zero = c.ZERO;\n    const wbits = bitLen(BigInt(points.length));\n    const windowSize = wbits > 12 ? wbits - 3 : wbits > 4 ? wbits - 2 : wbits ? 2 : 1; // in bits\n    const MASK = bitMask(windowSize);\n    const buckets = new Array(Number(MASK) + 1).fill(zero); // +1 for zero array\n    const lastBits = Math.floor((fieldN.BITS - 1) / windowSize) * windowSize;\n    let sum = zero;\n    for (let i = lastBits; i >= 0; i -= windowSize) {\n        buckets.fill(zero);\n        for (let j = 0; j < scalars.length; j++) {\n            const scalar = scalars[j];\n            const wbits = Number((scalar >> BigInt(i)) & MASK);\n            buckets[wbits] = buckets[wbits].add(points[j]);\n        }\n        let resI = zero; // not using this will do small speed-up, but will lose ct\n        // Skip first bucket, because it is zero\n        for (let j = buckets.length - 1, sumI = zero; j > 0; j--) {\n            sumI = sumI.add(buckets[j]);\n            resI = resI.add(sumI);\n        }\n        sum = sum.add(resI);\n        if (i !== 0)\n            for (let j = 0; j < windowSize; j++)\n                sum = sum.double();\n    }\n    return sum;\n}\n/**\n * Precomputed multi-scalar multiplication (MSM, Pa + Qb + Rc + ...).\n * @param c Curve Point constructor\n * @param fieldN field over CURVE.N - important that it's not over CURVE.P\n * @param points array of L curve points\n * @returns function which multiplies points with scaars\n */\nexport function precomputeMSMUnsafe(c, fieldN, points, windowSize) {\n    /**\n     * Performance Analysis of Window-based Precomputation\n     *\n     * Base Case (256-bit scalar, 8-bit window):\n     * - Standard precomputation requires:\n     *   - 31 additions per scalar  256 scalars = 7,936 ops\n     *   - Plus 255 summary additions = 8,191 total ops\n     *   Note: Summary additions can be optimized via accumulator\n     *\n     * Chunked Precomputation Analysis:\n     * - Using 32 chunks requires:\n     *   - 255 additions per chunk\n     *   - 256 doublings\n     *   - Total: (255  32) + 256 = 8,416 ops\n     *\n     * Memory Usage Comparison:\n     * Window Size | Standard Points | Chunked Points\n     * ------------|-----------------|---------------\n     *     4-bit   |     520         |      15\n     *     8-bit   |    4,224        |     255\n     *    10-bit   |   13,824        |   1,023\n     *    16-bit   |  557,056        |  65,535\n     *\n     * Key Advantages:\n     * 1. Enables larger window sizes due to reduced memory overhead\n     * 2. More efficient for smaller scalar counts:\n     *    - 16 chunks: (16  255) + 256 = 4,336 ops\n     *    - ~2x faster than standard 8,191 ops\n     *\n     * Limitations:\n     * - Not suitable for plain precomputes (requires 256 constant doublings)\n     * - Performance degrades with larger scalar counts:\n     *   - Optimal for ~256 scalars\n     *   - Less efficient for 4096+ scalars (Pippenger preferred)\n     */\n    validateW(windowSize, fieldN.BITS);\n    validateMSMPoints(points, c);\n    const zero = c.ZERO;\n    const tableSize = 2 ** windowSize - 1; // table size (without zero)\n    const chunks = Math.ceil(fieldN.BITS / windowSize); // chunks of item\n    const MASK = bitMask(windowSize);\n    const tables = points.map((p) => {\n        const res = [];\n        for (let i = 0, acc = p; i < tableSize; i++) {\n            res.push(acc);\n            acc = acc.add(p);\n        }\n        return res;\n    });\n    return (scalars) => {\n        validateMSMScalars(scalars, fieldN);\n        if (scalars.length > points.length)\n            throw new Error('array of scalars must be smaller than array of points');\n        let res = zero;\n        for (let i = 0; i < chunks; i++) {\n            // No need to double if accumulator is still zero.\n            if (res !== zero)\n                for (let j = 0; j < windowSize; j++)\n                    res = res.double();\n            const shiftBy = BigInt(chunks * windowSize - (i + 1) * windowSize);\n            for (let j = 0; j < scalars.length; j++) {\n                const n = scalars[j];\n                const curr = Number((n >> shiftBy) & MASK);\n                if (!curr)\n                    continue; // skip zero scalars chunks\n                res = res.add(tables[j][curr - 1]);\n            }\n        }\n        return res;\n    };\n}\nexport function validateBasic(curve) {\n    validateField(curve.Fp);\n    validateObject(curve, {\n        n: 'bigint',\n        h: 'bigint',\n        Gx: 'field',\n        Gy: 'field',\n    }, {\n        nBitLength: 'isSafeInteger',\n        nByteLength: 'isSafeInteger',\n    });\n    // Set defaults\n    return Object.freeze({\n        ...nLength(curve.n, curve.nBitLength),\n        ...curve,\n        ...{ p: curve.Fp.ORDER },\n    });\n}\n//# sourceMappingURL=curve.js.map","/**\n * Twisted Edwards curve. The formula is: ax + y = 1 + dxy.\n * For design rationale of types / exports, see weierstrass module documentation.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { pippenger, validateBasic, wNAF, } from \"./curve.js\";\nimport { Field, mod } from \"./modular.js\";\n// prettier-ignore\nimport { abool, aInRange, bytesToHex, bytesToNumberLE, concatBytes, ensureBytes, memoized, numberToBytesLE, validateObject } from \"./utils.js\";\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _8n = BigInt(8);\n// verification rule is either zip215 or rfc8032 / nist186-5. Consult fromHex:\nconst VERIFY_DEFAULT = { zip215: true };\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    validateObject(curve, {\n        hash: 'function',\n        a: 'bigint',\n        d: 'bigint',\n        randomBytes: 'function',\n    }, {\n        adjustScalarBytes: 'function',\n        domain: 'function',\n        uvRatio: 'function',\n        mapToCurve: 'function',\n    });\n    // Set defaults\n    return Object.freeze({ ...opts });\n}\n/**\n * Creates Twisted Edwards curve with EdDSA signatures.\n * @example\n * import { Field } from '@noble/curves/abstract/modular';\n * // Before that, define BigInt-s: a, d, p, n, Gx, Gy, h\n * const curve = twistedEdwards({ a, d, Fp: Field(p), n, Gx, Gy, h })\n */\nexport function twistedEdwards(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER, prehash: prehash, hash: cHash, randomBytes, nByteLength, h: cofactor, } = CURVE;\n    // Important:\n    // There are some places where Fp.BYTES is used instead of nByteLength.\n    // So far, everything has been tested with curves of Fp.BYTES == nByteLength.\n    // TODO: test and find curves which behave otherwise.\n    const MASK = _2n << (BigInt(nByteLength * 8) - _1n);\n    const modP = Fp.create; // Function overrides\n    const Fn = Field(CURVE.n, CURVE.nBitLength);\n    // sqrt(u/v)\n    const uvRatio = CURVE.uvRatio ||\n        ((u, v) => {\n            try {\n                return { isValid: true, value: Fp.sqrt(u * Fp.inv(v)) };\n            }\n            catch (e) {\n                return { isValid: false, value: _0n };\n            }\n        });\n    const adjustScalarBytes = CURVE.adjustScalarBytes || ((bytes) => bytes); // NOOP\n    const domain = CURVE.domain ||\n        ((data, ctx, phflag) => {\n            abool('phflag', phflag);\n            if (ctx.length || phflag)\n                throw new Error('Contexts/pre-hash are not supported');\n            return data;\n        }); // NOOP\n    // 0 <= n < MASK\n    // Coordinates larger than Fp.ORDER are allowed for zip215\n    function aCoordinate(title, n, banZero = false) {\n        const min = banZero ? _1n : _0n;\n        aInRange('coordinate ' + title, n, min, MASK);\n    }\n    function aextpoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ExtendedPoint expected');\n    }\n    // Converts Extended point to default (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    const toAffineMemo = memoized((p, iz) => {\n        const { ex: x, ey: y, ez: z } = p;\n        const is0 = p.is0();\n        if (iz == null)\n            iz = is0 ? _8n : Fp.inv(z); // 8 was chosen arbitrarily\n        const ax = modP(x * iz);\n        const ay = modP(y * iz);\n        const zz = modP(z * iz);\n        if (is0)\n            return { x: _0n, y: _1n };\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return { x: ax, y: ay };\n    });\n    const assertValidMemo = memoized((p) => {\n        const { a, d } = CURVE;\n        if (p.is0())\n            throw new Error('bad point: ZERO'); // TODO: optimize, with vars below?\n        // Equation in affine coordinates: ax + y = 1 + dxy\n        // Equation in projective coordinates (X/Z, Y/Z, Z):  (aX + Y)Z = Z + dXY\n        const { ex: X, ey: Y, ez: Z, et: T } = p;\n        const X2 = modP(X * X); // X\n        const Y2 = modP(Y * Y); // Y\n        const Z2 = modP(Z * Z); // Z\n        const Z4 = modP(Z2 * Z2); // Z\n        const aX2 = modP(X2 * a); // aX\n        const left = modP(Z2 * modP(aX2 + Y2)); // (aX + Y)Z\n        const right = modP(Z4 + modP(d * modP(X2 * Y2))); // Z + dXY\n        if (left !== right)\n            throw new Error('bad point: equation left != right (1)');\n        // In Extended coordinates we also have T, which is x*y=T/Z: check X*Y == Z*T\n        const XY = modP(X * Y);\n        const ZT = modP(Z * T);\n        if (XY !== ZT)\n            throw new Error('bad point: equation left != right (2)');\n        return true;\n    });\n    // Extended Point works in extended coordinates: (x, y, z, t)  (x=x/z, y=y/z, t=xy).\n    // https://en.wikipedia.org/wiki/Twisted_Edwards_curve#Extended_coordinates\n    class Point {\n        constructor(ex, ey, ez, et) {\n            aCoordinate('x', ex);\n            aCoordinate('y', ey);\n            aCoordinate('z', ez, true);\n            aCoordinate('t', et);\n            this.ex = ex;\n            this.ey = ey;\n            this.ez = ez;\n            this.et = et;\n            Object.freeze(this);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        static fromAffine(p) {\n            if (p instanceof Point)\n                throw new Error('extended point not allowed');\n            const { x, y } = p || {};\n            aCoordinate('x', x);\n            aCoordinate('y', y);\n            return new Point(x, y, _1n, modP(x * y));\n        }\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.ez));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        // Multiscalar Multiplication\n        static msm(points, scalars) {\n            return pippenger(Point, Fn, points, scalars);\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            wnaf.setWindowSize(this, windowSize);\n        }\n        // Not required for fromHex(), which always creates valid points.\n        // Could be useful for fromAffine().\n        assertValidity() {\n            assertValidMemo(this);\n        }\n        // Compare one point to another.\n        equals(other) {\n            aextpoint(other);\n            const { ex: X1, ey: Y1, ez: Z1 } = this;\n            const { ex: X2, ey: Y2, ez: Z2 } = other;\n            const X1Z2 = modP(X1 * Z2);\n            const X2Z1 = modP(X2 * Z1);\n            const Y1Z2 = modP(Y1 * Z2);\n            const Y2Z1 = modP(Y2 * Z1);\n            return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        negate() {\n            // Flips point sign to a negative one (-x, y in affine coords)\n            return new Point(modP(-this.ex), this.ey, this.ez, modP(-this.et));\n        }\n        // Fast algo for doubling Extended Point.\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#doubling-dbl-2008-hwcd\n        // Cost: 4M + 4S + 1*a + 6add + 1*2.\n        double() {\n            const { a } = CURVE;\n            const { ex: X1, ey: Y1, ez: Z1 } = this;\n            const A = modP(X1 * X1); // A = X12\n            const B = modP(Y1 * Y1); // B = Y12\n            const C = modP(_2n * modP(Z1 * Z1)); // C = 2*Z12\n            const D = modP(a * A); // D = a*A\n            const x1y1 = X1 + Y1;\n            const E = modP(modP(x1y1 * x1y1) - A - B); // E = (X1+Y1)2-A-B\n            const G = D + B; // G = D+B\n            const F = G - C; // F = G-C\n            const H = D - B; // H = D-B\n            const X3 = modP(E * F); // X3 = E*F\n            const Y3 = modP(G * H); // Y3 = G*H\n            const T3 = modP(E * H); // T3 = E*H\n            const Z3 = modP(F * G); // Z3 = F*G\n            return new Point(X3, Y3, Z3, T3);\n        }\n        // Fast algo for adding 2 Extended Points.\n        // https://hyperelliptic.org/EFD/g1p/auto-twisted-extended.html#addition-add-2008-hwcd\n        // Cost: 9M + 1*a + 1*d + 7add.\n        add(other) {\n            aextpoint(other);\n            const { a, d } = CURVE;\n            const { ex: X1, ey: Y1, ez: Z1, et: T1 } = this;\n            const { ex: X2, ey: Y2, ez: Z2, et: T2 } = other;\n            const A = modP(X1 * X2); // A = X1*X2\n            const B = modP(Y1 * Y2); // B = Y1*Y2\n            const C = modP(T1 * d * T2); // C = T1*d*T2\n            const D = modP(Z1 * Z2); // D = Z1*Z2\n            const E = modP((X1 + Y1) * (X2 + Y2) - A - B); // E = (X1+Y1)*(X2+Y2)-A-B\n            const F = D - C; // F = D-C\n            const G = D + C; // G = D+C\n            const H = modP(B - a * A); // H = B-a*A\n            const X3 = modP(E * F); // X3 = E*F\n            const Y3 = modP(G * H); // Y3 = G*H\n            const T3 = modP(E * H); // T3 = E*H\n            const Z3 = modP(F * G); // Z3 = F*G\n            return new Point(X3, Y3, Z3, T3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, n, Point.normalizeZ);\n        }\n        // Constant-time multiplication.\n        multiply(scalar) {\n            const n = scalar;\n            aInRange('scalar', n, _1n, CURVE_ORDER); // 1 <= scalar < L\n            const { p, f } = this.wNAF(n);\n            return Point.normalizeZ([p, f])[0];\n        }\n        // Non-constant-time multiplication. Uses double-and-add algorithm.\n        // It's faster, but should only be used when you don't care about\n        // an exposed private key e.g. sig verification.\n        // Does NOT allow scalars higher than CURVE.n.\n        // Accepts optional accumulator to merge with multiply (important for sparse scalars)\n        multiplyUnsafe(scalar, acc = Point.ZERO) {\n            const n = scalar;\n            aInRange('scalar', n, _0n, CURVE_ORDER); // 0 <= scalar < L\n            if (n === _0n)\n                return I;\n            if (this.is0() || n === _1n)\n                return this;\n            return wnaf.wNAFCachedUnsafe(this, n, Point.normalizeZ, acc);\n        }\n        // Checks if point is of small order.\n        // If you add something to small order point, you will have \"dirty\"\n        // point with torsion component.\n        // Multiplies point by cofactor and checks if the result is 0.\n        isSmallOrder() {\n            return this.multiplyUnsafe(cofactor).is0();\n        }\n        // Multiplies point by curve order and checks if the result is 0.\n        // Returns `false` is the point is dirty.\n        isTorsionFree() {\n            return wnaf.unsafeLadder(this, CURVE_ORDER).is0();\n        }\n        // Converts Extended point to default (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        toAffine(iz) {\n            return toAffineMemo(this, iz);\n        }\n        clearCofactor() {\n            const { h: cofactor } = CURVE;\n            if (cofactor === _1n)\n                return this;\n            return this.multiplyUnsafe(cofactor);\n        }\n        // Converts hash string or Uint8Array to Point.\n        // Uses algo from RFC8032 5.1.3.\n        static fromHex(hex, zip215 = false) {\n            const { d, a } = CURVE;\n            const len = Fp.BYTES;\n            hex = ensureBytes('pointHex', hex, len); // copy hex to a new array\n            abool('zip215', zip215);\n            const normed = hex.slice(); // copy again, we'll manipulate it\n            const lastByte = hex[len - 1]; // select last byte\n            normed[len - 1] = lastByte & ~0x80; // clear last bit\n            const y = bytesToNumberLE(normed);\n            // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n            // RFC8032 prohibits >= p, but ZIP215 doesn't\n            // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n            // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n            const max = zip215 ? MASK : Fp.ORDER;\n            aInRange('pointHex.y', y, _0n, max);\n            // Ed25519: x = (y-1)/(dy+1) mod p. Ed448: x = (y-1)/(dy-1) mod p. Generic case:\n            // ax+y=1+dxy => y-1=dxy-ax => y-1=x(dy-a) => x=(y-1)/(dy-a)\n            const y2 = modP(y * y); // denominator is always non-0 mod p.\n            const u = modP(y2 - _1n); // u = y - 1\n            const v = modP(d * y2 - a); // v = d y + 1.\n            let { isValid, value: x } = uvRatio(u, v); // (u/v)\n            if (!isValid)\n                throw new Error('Point.fromHex: invalid y coordinate');\n            const isXOdd = (x & _1n) === _1n; // There are 2 square roots. Use x_0 bit to select proper\n            const isLastByteOdd = (lastByte & 0x80) !== 0; // x_0, last bit\n            if (!zip215 && x === _0n && isLastByteOdd)\n                // if x=0 and x_0 = 1, fail\n                throw new Error('Point.fromHex: x=0 and x_0=1');\n            if (isLastByteOdd !== isXOdd)\n                x = modP(-x); // if x_0 != x mod 2, set x = p-x\n            return Point.fromAffine({ x, y });\n        }\n        static fromPrivateKey(privKey) {\n            const { scalar } = getPrivateScalar(privKey);\n            return G.multiply(scalar); // reduced one call of `toRawBytes`\n        }\n        toRawBytes() {\n            const { x, y } = this.toAffine();\n            const bytes = numberToBytesLE(y, Fp.BYTES); // each y has 2 x values (x, -y)\n            bytes[bytes.length - 1] |= x & _1n ? 0x80 : 0; // when compressing, it's enough to store y\n            return bytes; // and use the last byte to encode sign of x\n        }\n        toHex() {\n            return bytesToHex(this.toRawBytes()); // Same as toRawBytes, but returns string.\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, _1n, modP(CURVE.Gx * CURVE.Gy));\n    Point.ZERO = new Point(_0n, _1n, _1n, _0n); // 0, 1, 1, 0\n    const { BASE: G, ZERO: I } = Point;\n    const wnaf = wNAF(Point, nByteLength * 8);\n    function modN(a) {\n        return mod(a, CURVE_ORDER);\n    }\n    // Little-endian SHA512 with modulo n\n    function modN_LE(hash) {\n        return modN(bytesToNumberLE(hash));\n    }\n    // Get the hashed private scalar per RFC8032 5.1.5\n    function getPrivateScalar(key) {\n        const len = Fp.BYTES;\n        key = ensureBytes('private key', key, len);\n        // Hash private key with curve's hash function to produce uniformingly random input\n        // Check byte lengths: ensure(64, h(ensure(32, key)))\n        const hashed = ensureBytes('hashed private key', cHash(key), 2 * len);\n        const head = adjustScalarBytes(hashed.slice(0, len)); // clear first half bits, produce FE\n        const prefix = hashed.slice(len, 2 * len); // second half is called key prefix (5.1.6)\n        const scalar = modN_LE(head); // The actual private scalar\n        return { head, prefix, scalar };\n    }\n    // Convenience method that creates public key from scalar. RFC8032 5.1.5\n    function getExtendedPublicKey(key) {\n        const { head, prefix, scalar } = getPrivateScalar(key);\n        const point = G.multiply(scalar); // Point on Edwards curve aka public key\n        const pointBytes = point.toRawBytes(); // Uint8Array representation\n        return { head, prefix, scalar, point, pointBytes };\n    }\n    // Calculates EdDSA pub key. RFC8032 5.1.5. Privkey is hashed. Use first half with 3 bits cleared\n    function getPublicKey(privKey) {\n        return getExtendedPublicKey(privKey).pointBytes;\n    }\n    // int('LE', SHA512(dom2(F, C) || msgs)) mod N\n    function hashDomainToScalar(context = new Uint8Array(), ...msgs) {\n        const msg = concatBytes(...msgs);\n        return modN_LE(cHash(domain(msg, ensureBytes('context', context), !!prehash)));\n    }\n    /** Signs message with privateKey. RFC8032 5.1.6 */\n    function sign(msg, privKey, options = {}) {\n        msg = ensureBytes('message', msg);\n        if (prehash)\n            msg = prehash(msg); // for ed25519ph etc.\n        const { prefix, scalar, pointBytes } = getExtendedPublicKey(privKey);\n        const r = hashDomainToScalar(options.context, prefix, msg); // r = dom2(F, C) || prefix || PH(M)\n        const R = G.multiply(r).toRawBytes(); // R = rG\n        const k = hashDomainToScalar(options.context, R, pointBytes, msg); // R || A || PH(M)\n        const s = modN(r + k * scalar); // S = (r + k * s) mod L\n        aInRange('signature.s', s, _0n, CURVE_ORDER); // 0 <= s < l\n        const res = concatBytes(R, numberToBytesLE(s, Fp.BYTES));\n        return ensureBytes('result', res, Fp.BYTES * 2); // 64-byte signature\n    }\n    const verifyOpts = VERIFY_DEFAULT;\n    /**\n     * Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\n     * An extended group equation is checked.\n     */\n    function verify(sig, msg, publicKey, options = verifyOpts) {\n        const { context, zip215 } = options;\n        const len = Fp.BYTES; // Verifies EdDSA signature against message and public key. RFC8032 5.1.7.\n        sig = ensureBytes('signature', sig, 2 * len); // An extended group equation is checked.\n        msg = ensureBytes('message', msg);\n        publicKey = ensureBytes('publicKey', publicKey, len);\n        if (zip215 !== undefined)\n            abool('zip215', zip215);\n        if (prehash)\n            msg = prehash(msg); // for ed25519ph, etc\n        const s = bytesToNumberLE(sig.slice(len, 2 * len));\n        let A, R, SB;\n        try {\n            // zip215=true is good for consensus-critical apps. =false follows RFC8032 / NIST186-5.\n            // zip215=true:  0 <= y < MASK (2^256 for ed25519)\n            // zip215=false: 0 <= y < P (2^255-19 for ed25519)\n            A = Point.fromHex(publicKey, zip215);\n            R = Point.fromHex(sig.slice(0, len), zip215);\n            SB = G.multiplyUnsafe(s); // 0 <= s < l is done inside\n        }\n        catch (error) {\n            return false;\n        }\n        if (!zip215 && A.isSmallOrder())\n            return false;\n        const k = hashDomainToScalar(context, R.toRawBytes(), A.toRawBytes(), msg);\n        const RkA = R.add(A.multiplyUnsafe(k));\n        // Extended group equation\n        // [8][S]B = [8]R + [8][k]A'\n        return RkA.subtract(SB).clearCofactor().equals(Point.ZERO);\n    }\n    G._setWindowSize(8); // Enable precomputes. Slows down first publicKey computation by 20ms.\n    const utils = {\n        getExtendedPublicKey,\n        /** ed25519 priv keys are uniform 32b. No need to check for modulo bias, like in secp256k1. */\n        randomPrivateKey: () => randomBytes(Fp.BYTES),\n        /**\n         * We're doing scalar multiplication (used in getPublicKey etc) with precomputed BASE_POINT\n         * values. This slows down first getPublicKey() by milliseconds (see Speed section),\n         * but allows to speed-up subsequent getPublicKey() calls up to 20x.\n         * @param windowSize 2, 4, 8, 16\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3));\n            return point;\n        },\n    };\n    return {\n        CURVE,\n        getPublicKey,\n        sign,\n        verify,\n        ExtendedPoint: Point,\n        utils,\n    };\n}\n//# sourceMappingURL=edwards.js.map","/**\n * ed25519 Twisted Edwards curve with following addons:\n * - X25519 ECDH\n * - Ristretto cofactor elimination\n * - Elligator hash-to-group / point indistinguishability\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha512 } from '@noble/hashes/sha2';\nimport { concatBytes, randomBytes, utf8ToBytes } from '@noble/hashes/utils';\nimport { pippenger } from \"./abstract/curve.js\";\nimport { twistedEdwards } from \"./abstract/edwards.js\";\nimport { createHasher, expand_message_xmd, } from \"./abstract/hash-to-curve.js\";\nimport { Field, FpSqrtEven, isNegativeLE, mod, pow2 } from \"./abstract/modular.js\";\nimport { montgomery } from \"./abstract/montgomery.js\";\nimport { bytesToHex, bytesToNumberLE, ensureBytes, equalBytes, numberToBytesLE, } from \"./abstract/utils.js\";\n// 2n**255n - 19n\nconst ED25519_P = BigInt('57896044618658097711785492504343953926634992332820282019728792003956564819949');\n// (-1) aka (a) aka 2^((p-1)/4)\n// Fp.sqrt(Fp.neg(1))\nconst ED25519_SQRT_M1 = /* @__PURE__ */ BigInt('19681161376707505956807079304988542015446066515923890162744021073123829784752');\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3);\n// prettier-ignore\nconst _5n = BigInt(5), _8n = BigInt(8);\nfunction ed25519_pow_2_252_3(x) {\n    // prettier-ignore\n    const _10n = BigInt(10), _20n = BigInt(20), _40n = BigInt(40), _80n = BigInt(80);\n    const P = ED25519_P;\n    const x2 = (x * x) % P;\n    const b2 = (x2 * x) % P; // x^3, 11\n    const b4 = (pow2(b2, _2n, P) * b2) % P; // x^15, 1111\n    const b5 = (pow2(b4, _1n, P) * x) % P; // x^31\n    const b10 = (pow2(b5, _5n, P) * b5) % P;\n    const b20 = (pow2(b10, _10n, P) * b10) % P;\n    const b40 = (pow2(b20, _20n, P) * b20) % P;\n    const b80 = (pow2(b40, _40n, P) * b40) % P;\n    const b160 = (pow2(b80, _80n, P) * b80) % P;\n    const b240 = (pow2(b160, _80n, P) * b80) % P;\n    const b250 = (pow2(b240, _10n, P) * b10) % P;\n    const pow_p_5_8 = (pow2(b250, _2n, P) * x) % P;\n    // ^ To pow to (p+3)/8, multiply it by x.\n    return { pow_p_5_8, b2 };\n}\nfunction adjustScalarBytes(bytes) {\n    // Section 5: For X25519, in order to decode 32 random bytes as an integer scalar,\n    // set the three least significant bits of the first byte\n    bytes[0] &= 248; // 0b1111_1000\n    // and the most significant bit of the last to zero,\n    bytes[31] &= 127; // 0b0111_1111\n    // set the second most significant bit of the last byte to 1\n    bytes[31] |= 64; // 0b0100_0000\n    return bytes;\n}\n// sqrt(u/v)\nfunction uvRatio(u, v) {\n    const P = ED25519_P;\n    const v3 = mod(v * v * v, P); // v\n    const v7 = mod(v3 * v3 * v, P); // v\n    // (p+3)/8 and (p-5)/8\n    const pow = ed25519_pow_2_252_3(u * v7).pow_p_5_8;\n    let x = mod(u * v3 * pow, P); // (uv)(uv)^(p-5)/8\n    const vx2 = mod(v * x * x, P); // vx\n    const root1 = x; // First root candidate\n    const root2 = mod(x * ED25519_SQRT_M1, P); // Second root candidate\n    const useRoot1 = vx2 === u; // If vx = u (mod p), x is a square root\n    const useRoot2 = vx2 === mod(-u, P); // If vx = -u, set x <-- x * 2^((p-1)/4)\n    const noRoot = vx2 === mod(-u * ED25519_SQRT_M1, P); // There is no valid root, vx = -u(-1)\n    if (useRoot1)\n        x = root1;\n    if (useRoot2 || noRoot)\n        x = root2; // We return root2 anyway, for const-time\n    if (isNegativeLE(x, P))\n        x = mod(-x, P);\n    return { isValid: useRoot1 || useRoot2, value: x };\n}\n/** Weird / bogus points, useful for debugging. */\nexport const ED25519_TORSION_SUBGROUP = [\n    '0100000000000000000000000000000000000000000000000000000000000000',\n    'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n    '0000000000000000000000000000000000000000000000000000000000000080',\n    '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n    'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n    '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n    '0000000000000000000000000000000000000000000000000000000000000000',\n    'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n];\nconst Fp = /* @__PURE__ */ (() => Field(ED25519_P, undefined, true))();\nconst ed25519Defaults = /* @__PURE__ */ (() => ({\n    // Removing Fp.create() will still work, and is 10% faster on sign\n    a: Fp.create(BigInt(-1)),\n    // d is -121665/121666 a.k.a. Fp.neg(121665 * Fp.inv(121666))\n    d: BigInt('37095705934669439343138083508754565189542113879843219016388785533085940283555'),\n    // Finite field 2n**255n - 19n\n    Fp,\n    // Subgroup order 2n**252n + 27742317777372353535851937790883648493n;\n    n: BigInt('7237005577332262213973186563042994240857116359379907606001950938285454250989'),\n    h: _8n,\n    Gx: BigInt('15112221349535400772501151409588531511454012693041857206046113283949847762202'),\n    Gy: BigInt('46316835694926478169428394003475163141307993866256225615783033603165251855960'),\n    hash: sha512,\n    randomBytes,\n    adjustScalarBytes,\n    // dom2\n    // Ratio of u to v. Allows us to combine inversion and square root. Uses algo from RFC8032 5.1.3.\n    // Constant-time, u/v\n    uvRatio,\n}))();\n/**\n * ed25519 curve with EdDSA signatures.\n * @example\n * import { ed25519 } from '@noble/curves/ed25519';\n * const priv = ed25519.utils.randomPrivateKey();\n * const pub = ed25519.getPublicKey(priv);\n * const msg = new TextEncoder().encode('hello');\n * const sig = ed25519.sign(msg, priv);\n * ed25519.verify(sig, msg, pub); // Default mode: follows ZIP215\n * ed25519.verify(sig, msg, pub, { zip215: false }); // RFC8032 / FIPS 186-5\n */\nexport const ed25519 = /* @__PURE__ */ (() => twistedEdwards(ed25519Defaults))();\nfunction ed25519_domain(data, ctx, phflag) {\n    if (ctx.length > 255)\n        throw new Error('Context is too big');\n    return concatBytes(utf8ToBytes('SigEd25519 no Ed25519 collisions'), new Uint8Array([phflag ? 1 : 0, ctx.length]), ctx, data);\n}\nexport const ed25519ctx = /* @__PURE__ */ (() => twistedEdwards({\n    ...ed25519Defaults,\n    domain: ed25519_domain,\n}))();\nexport const ed25519ph = /* @__PURE__ */ (() => twistedEdwards(Object.assign({}, ed25519Defaults, {\n    domain: ed25519_domain,\n    prehash: sha512,\n})))();\n/**\n * ECDH using curve25519 aka x25519.\n * @example\n * import { x25519 } from '@noble/curves/ed25519';\n * const priv = 'a546e36bf0527c9d3b16154b82465edd62144c0ac1fc5a18506a2244ba449ac4';\n * const pub = 'e6db6867583030db3594c1a424b15f7c726624ec26b3353b10a903a6d0ab1c4c';\n * x25519.getSharedSecret(priv, pub) === x25519.scalarMult(priv, pub); // aliases\n * x25519.getPublicKey(priv) === x25519.scalarMultBase(priv);\n * x25519.getPublicKey(x25519.utils.randomPrivateKey());\n */\nexport const x25519 = /* @__PURE__ */ (() => montgomery({\n    P: ED25519_P,\n    a: BigInt(486662),\n    montgomeryBits: 255, // n is 253 bits\n    nByteLength: 32,\n    Gu: BigInt(9),\n    powPminus2: (x) => {\n        const P = ED25519_P;\n        // x^(p-2) aka x^(2^255-21)\n        const { pow_p_5_8, b2 } = ed25519_pow_2_252_3(x);\n        return mod(pow2(pow_p_5_8, _3n, P) * b2, P);\n    },\n    adjustScalarBytes,\n    randomBytes,\n}))();\n/**\n * Converts ed25519 public key to x25519 public key. Uses formula:\n * * `(u, v) = ((1+y)/(1-y), sqrt(-486664)*u/x)`\n * * `(x, y) = (sqrt(-486664)*u/v, (u-1)/(u+1))`\n * @example\n *   const someonesPub = ed25519.getPublicKey(ed25519.utils.randomPrivateKey());\n *   const aPriv = x25519.utils.randomPrivateKey();\n *   x25519.getSharedSecret(aPriv, edwardsToMontgomeryPub(someonesPub))\n */\nexport function edwardsToMontgomeryPub(edwardsPub) {\n    const { y } = ed25519.ExtendedPoint.fromHex(edwardsPub);\n    const _1n = BigInt(1);\n    return Fp.toBytes(Fp.create((_1n + y) * Fp.inv(_1n - y)));\n}\nexport const edwardsToMontgomery = edwardsToMontgomeryPub; // deprecated\n/**\n * Converts ed25519 secret key to x25519 secret key.\n * @example\n *   const someonesPub = x25519.getPublicKey(x25519.utils.randomPrivateKey());\n *   const aPriv = ed25519.utils.randomPrivateKey();\n *   x25519.getSharedSecret(edwardsToMontgomeryPriv(aPriv), someonesPub)\n */\nexport function edwardsToMontgomeryPriv(edwardsPriv) {\n    const hashed = ed25519Defaults.hash(edwardsPriv.subarray(0, 32));\n    return ed25519Defaults.adjustScalarBytes(hashed).subarray(0, 32);\n}\n// Hash To Curve Elligator2 Map (NOTE: different from ristretto255 elligator)\n// NOTE: very important part is usage of FpSqrtEven for ELL2_C1_EDWARDS, since\n// SageMath returns different root first and everything falls apart\nconst ELL2_C1 = /* @__PURE__ */ (() => (Fp.ORDER + _3n) / _8n)(); // 1. c1 = (q + 3) / 8       # Integer arithmetic\nconst ELL2_C2 = /* @__PURE__ */ (() => Fp.pow(_2n, ELL2_C1))(); // 2. c2 = 2^c1\nconst ELL2_C3 = /* @__PURE__ */ (() => Fp.sqrt(Fp.neg(Fp.ONE)))(); // 3. c3 = sqrt(-1)\n// prettier-ignore\nfunction map_to_curve_elligator2_curve25519(u) {\n    const ELL2_C4 = (Fp.ORDER - _5n) / _8n; // 4. c4 = (q - 5) / 8       # Integer arithmetic\n    const ELL2_J = BigInt(486662);\n    let tv1 = Fp.sqr(u); //  1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, _2n); //  2.  tv1 = 2 * tv1\n    let xd = Fp.add(tv1, Fp.ONE); //  3.   xd = tv1 + 1         # Nonzero: -1 is square (mod p), tv1 is not\n    let x1n = Fp.neg(ELL2_J); //  4.  x1n = -J              # x1 = x1n / xd = -J / (1 + 2 * u^2)\n    let tv2 = Fp.sqr(xd); //  5.  tv2 = xd^2\n    let gxd = Fp.mul(tv2, xd); //  6.  gxd = tv2 * xd        # gxd = xd^3\n    let gx1 = Fp.mul(tv1, ELL2_J); //  7.  gx1 = J * tv1         # x1n + J * xd\n    gx1 = Fp.mul(gx1, x1n); //  8.  gx1 = gx1 * x1n       # x1n^2 + J * x1n * xd\n    gx1 = Fp.add(gx1, tv2); //  9.  gx1 = gx1 + tv2       # x1n^2 + J * x1n * xd + xd^2\n    gx1 = Fp.mul(gx1, x1n); //  10. gx1 = gx1 * x1n       # x1n^3 + J * x1n^2 * xd + x1n * xd^2\n    let tv3 = Fp.sqr(gxd); //  11. tv3 = gxd^2\n    tv2 = Fp.sqr(tv3); //  12. tv2 = tv3^2           # gxd^4\n    tv3 = Fp.mul(tv3, gxd); //  13. tv3 = tv3 * gxd       # gxd^3\n    tv3 = Fp.mul(tv3, gx1); //  14. tv3 = tv3 * gx1       # gx1 * gxd^3\n    tv2 = Fp.mul(tv2, tv3); //  15. tv2 = tv2 * tv3       # gx1 * gxd^7\n    let y11 = Fp.pow(tv2, ELL2_C4); //  16. y11 = tv2^c4        # (gx1 * gxd^7)^((p - 5) / 8)\n    y11 = Fp.mul(y11, tv3); //  17. y11 = y11 * tv3       # gx1*gxd^3*(gx1*gxd^7)^((p-5)/8)\n    let y12 = Fp.mul(y11, ELL2_C3); //  18. y12 = y11 * c3\n    tv2 = Fp.sqr(y11); //  19. tv2 = y11^2\n    tv2 = Fp.mul(tv2, gxd); //  20. tv2 = tv2 * gxd\n    let e1 = Fp.eql(tv2, gx1); //  21.  e1 = tv2 == gx1\n    let y1 = Fp.cmov(y12, y11, e1); //  22.  y1 = CMOV(y12, y11, e1)  # If g(x1) is square, this is its sqrt\n    let x2n = Fp.mul(x1n, tv1); //  23. x2n = x1n * tv1       # x2 = x2n / xd = 2 * u^2 * x1n / xd\n    let y21 = Fp.mul(y11, u); //  24. y21 = y11 * u\n    y21 = Fp.mul(y21, ELL2_C2); //  25. y21 = y21 * c2\n    let y22 = Fp.mul(y21, ELL2_C3); //  26. y22 = y21 * c3\n    let gx2 = Fp.mul(gx1, tv1); //  27. gx2 = gx1 * tv1       # g(x2) = gx2 / gxd = 2 * u^2 * g(x1)\n    tv2 = Fp.sqr(y21); //  28. tv2 = y21^2\n    tv2 = Fp.mul(tv2, gxd); //  29. tv2 = tv2 * gxd\n    let e2 = Fp.eql(tv2, gx2); //  30.  e2 = tv2 == gx2\n    let y2 = Fp.cmov(y22, y21, e2); //  31.  y2 = CMOV(y22, y21, e2)  # If g(x2) is square, this is its sqrt\n    tv2 = Fp.sqr(y1); //  32. tv2 = y1^2\n    tv2 = Fp.mul(tv2, gxd); //  33. tv2 = tv2 * gxd\n    let e3 = Fp.eql(tv2, gx1); //  34.  e3 = tv2 == gx1\n    let xn = Fp.cmov(x2n, x1n, e3); //  35.  xn = CMOV(x2n, x1n, e3)  # If e3, x = x1, else x = x2\n    let y = Fp.cmov(y2, y1, e3); //  36.   y = CMOV(y2, y1, e3)    # If e3, y = y1, else y = y2\n    let e4 = Fp.isOdd(y); //  37.  e4 = sgn0(y) == 1        # Fix sign of y\n    y = Fp.cmov(y, Fp.neg(y), e3 !== e4); //  38.   y = CMOV(y, -y, e3 XOR e4)\n    return { xMn: xn, xMd: xd, yMn: y, yMd: _1n }; //  39. return (xn, xd, y, 1)\n}\nconst ELL2_C1_EDWARDS = /* @__PURE__ */ (() => FpSqrtEven(Fp, Fp.neg(BigInt(486664))))(); // sgn0(c1) MUST equal 0\nfunction map_to_curve_elligator2_edwards25519(u) {\n    const { xMn, xMd, yMn, yMd } = map_to_curve_elligator2_curve25519(u); //  1.  (xMn, xMd, yMn, yMd) =\n    // map_to_curve_elligator2_curve25519(u)\n    let xn = Fp.mul(xMn, yMd); //  2.  xn = xMn * yMd\n    xn = Fp.mul(xn, ELL2_C1_EDWARDS); //  3.  xn = xn * c1\n    let xd = Fp.mul(xMd, yMn); //  4.  xd = xMd * yMn    # xn / xd = c1 * xM / yM\n    let yn = Fp.sub(xMn, xMd); //  5.  yn = xMn - xMd\n    let yd = Fp.add(xMn, xMd); //  6.  yd = xMn + xMd    # (n / d - 1) / (n / d + 1) = (n - d) / (n + d)\n    let tv1 = Fp.mul(xd, yd); //  7. tv1 = xd * yd\n    let e = Fp.eql(tv1, Fp.ZERO); //  8.   e = tv1 == 0\n    xn = Fp.cmov(xn, Fp.ZERO, e); //  9.  xn = CMOV(xn, 0, e)\n    xd = Fp.cmov(xd, Fp.ONE, e); //  10. xd = CMOV(xd, 1, e)\n    yn = Fp.cmov(yn, Fp.ONE, e); //  11. yn = CMOV(yn, 1, e)\n    yd = Fp.cmov(yd, Fp.ONE, e); //  12. yd = CMOV(yd, 1, e)\n    const inv = Fp.invertBatch([xd, yd]); // batch division\n    return { x: Fp.mul(xn, inv[0]), y: Fp.mul(yn, inv[1]) }; //  13. return (xn, xd, yn, yd)\n}\nconst htf = /* @__PURE__ */ (() => createHasher(ed25519.ExtendedPoint, (scalars) => map_to_curve_elligator2_edwards25519(scalars[0]), {\n    DST: 'edwards25519_XMD:SHA-512_ELL2_RO_',\n    encodeDST: 'edwards25519_XMD:SHA-512_ELL2_NU_',\n    p: Fp.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha512,\n}))();\nexport const hashToCurve = /* @__PURE__ */ (() => htf.hashToCurve)();\nexport const encodeToCurve = /* @__PURE__ */ (() => htf.encodeToCurve)();\nfunction aristp(other) {\n    if (!(other instanceof RistPoint))\n        throw new Error('RistrettoPoint expected');\n}\n// (-1) aka (a) aka 2^((p-1)/4)\nconst SQRT_M1 = ED25519_SQRT_M1;\n// (ad - 1)\nconst SQRT_AD_MINUS_ONE = /* @__PURE__ */ BigInt('25063068953384623474111414158702152701244531502492656460079210482610430750235');\n// 1 / (a-d)\nconst INVSQRT_A_MINUS_D = /* @__PURE__ */ BigInt('54469307008909316920995813868745141605393597292927456921205312896311721017578');\n// 1-d\nconst ONE_MINUS_D_SQ = /* @__PURE__ */ BigInt('1159843021668779879193775521855586647937357759715417654439879720876111806838');\n// (d-1)\nconst D_MINUS_ONE_SQ = /* @__PURE__ */ BigInt('40440834346308536858101042469323190826248399146238708352240133220865137265952');\n// Calculates 1/(number)\nconst invertSqrt = (number) => uvRatio(_1n, number);\nconst MAX_255B = /* @__PURE__ */ BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\nconst bytes255ToNumberLE = (bytes) => ed25519.CURVE.Fp.create(bytesToNumberLE(bytes) & MAX_255B);\n// Computes Elligator map for Ristretto\n// https://ristretto.group/formulas/elligator.html\nfunction calcElligatorRistrettoMap(r0) {\n    const { d } = ed25519.CURVE;\n    const P = ed25519.CURVE.Fp.ORDER;\n    const mod = ed25519.CURVE.Fp.create;\n    const r = mod(SQRT_M1 * r0 * r0); // 1\n    const Ns = mod((r + _1n) * ONE_MINUS_D_SQ); // 2\n    let c = BigInt(-1); // 3\n    const D = mod((c - d * r) * mod(r + d)); // 4\n    let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D); // 5\n    let s_ = mod(s * r0); // 6\n    if (!isNegativeLE(s_, P))\n        s_ = mod(-s_);\n    if (!Ns_D_is_sq)\n        s = s_; // 7\n    if (!Ns_D_is_sq)\n        c = r; // 8\n    const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D); // 9\n    const s2 = s * s;\n    const W0 = mod((s + s) * D); // 10\n    const W1 = mod(Nt * SQRT_AD_MINUS_ONE); // 11\n    const W2 = mod(_1n - s2); // 12\n    const W3 = mod(_1n + s2); // 13\n    return new ed25519.ExtendedPoint(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n}\n/**\n * Each ed25519/ExtendedPoint has 8 different equivalent points. This can be\n * a source of bugs for protocols like ring signatures. Ristretto was created to solve this.\n * Ristretto point operates in X:Y:Z:T extended coordinates like ExtendedPoint,\n * but it should work in its own namespace: do not combine those two.\n * https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-ristretto255-decaf448\n */\nclass RistPoint {\n    // Private property to discourage combining ExtendedPoint + RistrettoPoint\n    // Always use Ristretto encoding/decoding instead.\n    constructor(ep) {\n        this.ep = ep;\n    }\n    static fromAffine(ap) {\n        return new RistPoint(ed25519.ExtendedPoint.fromAffine(ap));\n    }\n    /**\n     * Takes uniform output of 64-byte hash function like sha512 and converts it to `RistrettoPoint`.\n     * The hash-to-group operation applies Elligator twice and adds the results.\n     * **Note:** this is one-way map, there is no conversion from point to hash.\n     * https://ristretto.group/formulas/elligator.html\n     * @param hex 64-byte output of a hash function\n     */\n    static hashToCurve(hex) {\n        hex = ensureBytes('ristrettoHash', hex, 64);\n        const r1 = bytes255ToNumberLE(hex.slice(0, 32));\n        const R1 = calcElligatorRistrettoMap(r1);\n        const r2 = bytes255ToNumberLE(hex.slice(32, 64));\n        const R2 = calcElligatorRistrettoMap(r2);\n        return new RistPoint(R1.add(R2));\n    }\n    /**\n     * Converts ristretto-encoded string to ristretto point.\n     * https://ristretto.group/formulas/decoding.html\n     * @param hex Ristretto-encoded 32 bytes. Not every 32-byte string is valid ristretto encoding\n     */\n    static fromHex(hex) {\n        hex = ensureBytes('ristrettoHex', hex, 32);\n        const { a, d } = ed25519.CURVE;\n        const P = ed25519.CURVE.Fp.ORDER;\n        const mod = ed25519.CURVE.Fp.create;\n        const emsg = 'RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint';\n        const s = bytes255ToNumberLE(hex);\n        // 1. Check that s_bytes is the canonical encoding of a field element, or else abort.\n        // 3. Check that s is non-negative, or else abort\n        if (!equalBytes(numberToBytesLE(s, 32), hex) || isNegativeLE(s, P))\n            throw new Error(emsg);\n        const s2 = mod(s * s);\n        const u1 = mod(_1n + a * s2); // 4 (a is -1)\n        const u2 = mod(_1n - a * s2); // 5\n        const u1_2 = mod(u1 * u1);\n        const u2_2 = mod(u2 * u2);\n        const v = mod(a * d * u1_2 - u2_2); // 6\n        const { isValid, value: I } = invertSqrt(mod(v * u2_2)); // 7\n        const Dx = mod(I * u2); // 8\n        const Dy = mod(I * Dx * v); // 9\n        let x = mod((s + s) * Dx); // 10\n        if (isNegativeLE(x, P))\n            x = mod(-x); // 10\n        const y = mod(u1 * Dy); // 11\n        const t = mod(x * y); // 12\n        if (!isValid || isNegativeLE(t, P) || y === _0n)\n            throw new Error(emsg);\n        return new RistPoint(new ed25519.ExtendedPoint(x, y, _1n, t));\n    }\n    static msm(points, scalars) {\n        const Fn = Field(ed25519.CURVE.n, ed25519.CURVE.nBitLength);\n        return pippenger(RistPoint, Fn, points, scalars);\n    }\n    /**\n     * Encodes ristretto point to Uint8Array.\n     * https://ristretto.group/formulas/encoding.html\n     */\n    toRawBytes() {\n        let { ex: x, ey: y, ez: z, et: t } = this.ep;\n        const P = ed25519.CURVE.Fp.ORDER;\n        const mod = ed25519.CURVE.Fp.create;\n        const u1 = mod(mod(z + y) * mod(z - y)); // 1\n        const u2 = mod(x * y); // 2\n        // Square root always exists\n        const u2sq = mod(u2 * u2);\n        const { value: invsqrt } = invertSqrt(mod(u1 * u2sq)); // 3\n        const D1 = mod(invsqrt * u1); // 4\n        const D2 = mod(invsqrt * u2); // 5\n        const zInv = mod(D1 * D2 * t); // 6\n        let D; // 7\n        if (isNegativeLE(t * zInv, P)) {\n            let _x = mod(y * SQRT_M1);\n            let _y = mod(x * SQRT_M1);\n            x = _x;\n            y = _y;\n            D = mod(D1 * INVSQRT_A_MINUS_D);\n        }\n        else {\n            D = D2; // 8\n        }\n        if (isNegativeLE(x * zInv, P))\n            y = mod(-y); // 9\n        let s = mod((z - y) * D); // 10 (check footer's note, no sqrt(-a))\n        if (isNegativeLE(s, P))\n            s = mod(-s);\n        return numberToBytesLE(s, 32); // 11\n    }\n    toHex() {\n        return bytesToHex(this.toRawBytes());\n    }\n    toString() {\n        return this.toHex();\n    }\n    // Compare one point to another.\n    equals(other) {\n        aristp(other);\n        const { ex: X1, ey: Y1 } = this.ep;\n        const { ex: X2, ey: Y2 } = other.ep;\n        const mod = ed25519.CURVE.Fp.create;\n        // (x1 * y2 == y1 * x2) | (y1 * y2 == x1 * x2)\n        const one = mod(X1 * Y2) === mod(Y1 * X2);\n        const two = mod(Y1 * Y2) === mod(X1 * X2);\n        return one || two;\n    }\n    add(other) {\n        aristp(other);\n        return new RistPoint(this.ep.add(other.ep));\n    }\n    subtract(other) {\n        aristp(other);\n        return new RistPoint(this.ep.subtract(other.ep));\n    }\n    multiply(scalar) {\n        return new RistPoint(this.ep.multiply(scalar));\n    }\n    multiplyUnsafe(scalar) {\n        return new RistPoint(this.ep.multiplyUnsafe(scalar));\n    }\n    double() {\n        return new RistPoint(this.ep.double());\n    }\n    negate() {\n        return new RistPoint(this.ep.negate());\n    }\n}\nexport const RistrettoPoint = /* @__PURE__ */ (() => {\n    if (!RistPoint.BASE)\n        RistPoint.BASE = new RistPoint(ed25519.ExtendedPoint.BASE);\n    if (!RistPoint.ZERO)\n        RistPoint.ZERO = new RistPoint(ed25519.ExtendedPoint.ZERO);\n    return RistPoint;\n})();\n// Hashing to ristretto255. https://www.rfc-editor.org/rfc/rfc9380#appendix-B\nexport const hashToRistretto255 = (msg, options) => {\n    const d = options.DST;\n    const DST = typeof d === 'string' ? utf8ToBytes(d) : d;\n    const uniform_bytes = expand_message_xmd(msg, DST, 64, sha512);\n    const P = RistPoint.hashToCurve(uniform_bytes);\n    return P;\n};\n/** @deprecated */\nexport const hash_to_ristretto255 = hashToRistretto255; // legacy\n//# sourceMappingURL=ed25519.js.map","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    if (typeof window !== 'undefined' && typeof window.Buffer !== 'undefined') {\n      Buffer = window.Buffer;\n    } else {\n      Buffer = require('buffer').Buffer;\n    }\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n      this.negative = 1;\n    }\n\n    if (start < number.length) {\n      if (base === 16) {\n        this._parseHex(number, start, endian);\n      } else {\n        this._parseBase(number, base, start);\n        if (endian === 'le') {\n          this._initArray(this.toArray(), base, endian);\n        }\n      }\n    }\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [number & 0x3ffffff];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [0];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this._strip();\n  };\n\n  function parseHex4Bits (string, index) {\n    var c = string.charCodeAt(index);\n    // '0' - '9'\n    if (c >= 48 && c <= 57) {\n      return c - 48;\n    // 'A' - 'F'\n    } else if (c >= 65 && c <= 70) {\n      return c - 55;\n    // 'a' - 'f'\n    } else if (c >= 97 && c <= 102) {\n      return c - 87;\n    } else {\n      assert(false, 'Invalid character in ' + string);\n    }\n  }\n\n  function parseHexByte (string, lowerBound, index) {\n    var r = parseHex4Bits(string, index);\n    if (index - 1 >= lowerBound) {\n      r |= parseHex4Bits(string, index - 1) << 4;\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start, endian) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    // 24-bits chunks\n    var off = 0;\n    var j = 0;\n\n    var w;\n    if (endian === 'be') {\n      for (i = number.length - 1; i >= start; i -= 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    } else {\n      var parseLength = number.length - start;\n      for (i = parseLength % 2 === 0 ? start + 1 : start; i < number.length; i += 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    }\n\n    this._strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var b = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        b = c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        b = c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        b = c;\n      }\n      assert(c >= 0 && b < mul, 'Invalid character');\n      r += b;\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [0];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    this._strip();\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  function move (dest, src) {\n    dest.words = src.words;\n    dest.length = src.length;\n    dest.negative = src.negative;\n    dest.red = src.red;\n  }\n\n  BN.prototype._move = function _move (dest) {\n    move(dest, this);\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype._strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  // Check Symbol.for because not everywhere where Symbol defined\n  // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#Browser_compatibility\n  if (typeof Symbol !== 'undefined' && typeof Symbol.for === 'function') {\n    try {\n      BN.prototype[Symbol.for('nodejs.util.inspect.custom')] = inspect;\n    } catch (e) {\n      BN.prototype.inspect = inspect;\n    }\n  } else {\n    BN.prototype.inspect = inspect;\n  }\n\n  function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  }\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modrn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16, 2);\n  };\n\n  if (Buffer) {\n    BN.prototype.toBuffer = function toBuffer (endian, length) {\n      return this.toArrayLike(Buffer, endian, length);\n    };\n  }\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  var allocate = function allocate (ArrayType, size) {\n    if (ArrayType.allocUnsafe) {\n      return ArrayType.allocUnsafe(size);\n    }\n    return new ArrayType(size);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    this._strip();\n\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    var res = allocate(ArrayType, reqLength);\n    var postfix = endian === 'le' ? 'LE' : 'BE';\n    this['_toArrayLike' + postfix](res, byteLength);\n    return res;\n  };\n\n  BN.prototype._toArrayLikeLE = function _toArrayLikeLE (res, byteLength) {\n    var position = 0;\n    var carry = 0;\n\n    for (var i = 0, shift = 0; i < this.length; i++) {\n      var word = (this.words[i] << shift) | carry;\n\n      res[position++] = word & 0xff;\n      if (position < res.length) {\n        res[position++] = (word >> 8) & 0xff;\n      }\n      if (position < res.length) {\n        res[position++] = (word >> 16) & 0xff;\n      }\n\n      if (shift === 6) {\n        if (position < res.length) {\n          res[position++] = (word >> 24) & 0xff;\n        }\n        carry = 0;\n        shift = 0;\n      } else {\n        carry = word >>> 24;\n        shift += 2;\n      }\n    }\n\n    if (position < res.length) {\n      res[position++] = carry;\n\n      while (position < res.length) {\n        res[position++] = 0;\n      }\n    }\n  };\n\n  BN.prototype._toArrayLikeBE = function _toArrayLikeBE (res, byteLength) {\n    var position = res.length - 1;\n    var carry = 0;\n\n    for (var i = 0, shift = 0; i < this.length; i++) {\n      var word = (this.words[i] << shift) | carry;\n\n      res[position--] = word & 0xff;\n      if (position >= 0) {\n        res[position--] = (word >> 8) & 0xff;\n      }\n      if (position >= 0) {\n        res[position--] = (word >> 16) & 0xff;\n      }\n\n      if (shift === 6) {\n        if (position >= 0) {\n          res[position--] = (word >> 24) & 0xff;\n        }\n        carry = 0;\n        shift = 0;\n      } else {\n        carry = word >>> 24;\n        shift += 2;\n      }\n    }\n\n    if (position >= 0) {\n      res[position--] = carry;\n\n      while (position >= 0) {\n        res[position--] = 0;\n      }\n    }\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] >>> wbit) & 0x01;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this._strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this._strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this._strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this._strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this._strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this._strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out._strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out._strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    // Temporary disable, see https://github.com/indutny/bn.js/issues/211\n    // var fftm = new FFTM();\n    // return fftm.mulp(self, num, out);\n    return bigMulTo(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out._strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    var isNegNum = num < 0;\n    if (isNegNum) num = -num;\n\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return isNegNum ? this.ineg() : this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this._strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this._strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this._strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) <= num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this._strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this._strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this._strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q._strip();\n    }\n    a._strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modrn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modrn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || (r2 === 1 && cmp === 0)) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modrn = function modrn (num) {\n    var isNegNum = num < 0;\n    if (isNegNum) num = -num;\n\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return isNegNum ? -acc : acc;\n  };\n\n  // WARNING: DEPRECATED\n  BN.prototype.modn = function modn (num) {\n    return this.modrn(num);\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    var isNegNum = num < 0;\n    if (isNegNum) num = -num;\n\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    this._strip();\n    return isNegNum ? this.ineg() : this;\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this._strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      if (r.strip !== undefined) {\n        // r is a BN v4 instance\n        r.strip();\n      } else {\n        // r is a BN v5 instance\n        r._strip();\n      }\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n\n    move(a, a.umod(this.m)._forceRed(this));\n    return a;\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\n// @ts-ignore\nvar _Buffer = require('safe-buffer').Buffer\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (Array.isArray(source) || source instanceof Uint8Array) { source = _Buffer.from(source) }\n    if (!_Buffer.isBuffer(source)) { throw new TypeError('Expected Buffer') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return _Buffer.alloc(0) }\n    var psz = 0\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (psz < source.length) {\n            // Find code of next character\n      var charCode = source.charCodeAt(psz)\n            // Base map can not be indexed using char code\n      if (charCode > 255) { return }\n            // Decode character\n      var carry = BASE_MAP[charCode]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = _Buffer.allocUnsafe(zeroes + (size - it4))\n    vch.fill(0x00, 0, zeroes)\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nexport function anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */\nexport function abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nexport function ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nexport function byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** @deprecated */\nexport const byteSwapIfBE = swap8IfBE;\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexport const swap32IfBE = isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes) {\n    return new TextDecoder().decode(bytes);\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** For runtime check if class implements interface */\nexport class Hash {\n}\n/** Wraps hash function, creating an interface on top of it */\nexport function createHasher(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function createOptHasher(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function createXOFer(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport const wrapConstructor = createHasher;\nexport const wrapConstructorWithOpts = createOptHasher;\nexport const wrapXOFConstructorWithOpts = createXOFer;\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (crypto && typeof crypto.randomBytes === 'function') {\n        return Uint8Array.from(crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { Hash, abytes, aexists, aoutput, clean, createView, toBytes } from \"./utils.js\";\n/** Polyfill for Safari 14. https://caniuse.com/mdn-javascript_builtins_dataview_setbiguint64 */\nexport function setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n/** Choice: a ? b : c */\nexport function Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport class HashMD extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        aexists(this);\n        data = toBytes(data);\n        abytes(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        aoutput(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        clean(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen should be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n}\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV = /* @__PURE__ */ Uint32Array.from([\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV = /* @__PURE__ */ Uint32Array.from([\n    0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n//# sourceMappingURL=_md.js.map","/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://datatracker.ietf.org/doc/html/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from \"./_md.js\";\nimport * as u64 from \"./_u64.js\";\nimport { clean, createHasher, rotr } from \"./utils.js\";\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\nexport class SHA256 extends HashMD {\n    constructor(outputLen = 32) {\n        super(64, outputLen, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = SHA256_IV[0] | 0;\n        this.B = SHA256_IV[1] | 0;\n        this.C = SHA256_IV[2] | 0;\n        this.D = SHA256_IV[3] | 0;\n        this.E = SHA256_IV[4] | 0;\n        this.F = SHA256_IV[5] | 0;\n        this.G = SHA256_IV[6] | 0;\n        this.H = SHA256_IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        clean(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n}\nexport class SHA224 extends SHA256 {\n    constructor() {\n        super(28);\n        this.A = SHA224_IV[0] | 0;\n        this.B = SHA224_IV[1] | 0;\n        this.C = SHA224_IV[2] | 0;\n        this.D = SHA224_IV[3] | 0;\n        this.E = SHA224_IV[4] | 0;\n        this.F = SHA224_IV[5] | 0;\n        this.G = SHA224_IV[6] | 0;\n        this.H = SHA224_IV[7] | 0;\n    }\n}\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\nexport class SHA512 extends HashMD {\n    constructor(outputLen = 64) {\n        super(128, outputLen, 16, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        // h -- high 32 bits, l -- low 32 bits\n        this.Ah = SHA512_IV[0] | 0;\n        this.Al = SHA512_IV[1] | 0;\n        this.Bh = SHA512_IV[2] | 0;\n        this.Bl = SHA512_IV[3] | 0;\n        this.Ch = SHA512_IV[4] | 0;\n        this.Cl = SHA512_IV[5] | 0;\n        this.Dh = SHA512_IV[6] | 0;\n        this.Dl = SHA512_IV[7] | 0;\n        this.Eh = SHA512_IV[8] | 0;\n        this.El = SHA512_IV[9] | 0;\n        this.Fh = SHA512_IV[10] | 0;\n        this.Fl = SHA512_IV[11] | 0;\n        this.Gh = SHA512_IV[12] | 0;\n        this.Gl = SHA512_IV[13] | 0;\n        this.Hh = SHA512_IV[14] | 0;\n        this.Hl = SHA512_IV[15] | 0;\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        clean(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        clean(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\nexport class SHA384 extends SHA512 {\n    constructor() {\n        super(48);\n        this.Ah = SHA384_IV[0] | 0;\n        this.Al = SHA384_IV[1] | 0;\n        this.Bh = SHA384_IV[2] | 0;\n        this.Bl = SHA384_IV[3] | 0;\n        this.Ch = SHA384_IV[4] | 0;\n        this.Cl = SHA384_IV[5] | 0;\n        this.Dh = SHA384_IV[6] | 0;\n        this.Dl = SHA384_IV[7] | 0;\n        this.Eh = SHA384_IV[8] | 0;\n        this.El = SHA384_IV[9] | 0;\n        this.Fh = SHA384_IV[10] | 0;\n        this.Fl = SHA384_IV[11] | 0;\n        this.Gh = SHA384_IV[12] | 0;\n        this.Gl = SHA384_IV[13] | 0;\n        this.Hh = SHA384_IV[14] | 0;\n        this.Hl = SHA384_IV[15] | 0;\n    }\n}\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n    0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n    0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n    0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\nexport class SHA512_224 extends SHA512 {\n    constructor() {\n        super(28);\n        this.Ah = T224_IV[0] | 0;\n        this.Al = T224_IV[1] | 0;\n        this.Bh = T224_IV[2] | 0;\n        this.Bl = T224_IV[3] | 0;\n        this.Ch = T224_IV[4] | 0;\n        this.Cl = T224_IV[5] | 0;\n        this.Dh = T224_IV[6] | 0;\n        this.Dl = T224_IV[7] | 0;\n        this.Eh = T224_IV[8] | 0;\n        this.El = T224_IV[9] | 0;\n        this.Fh = T224_IV[10] | 0;\n        this.Fl = T224_IV[11] | 0;\n        this.Gh = T224_IV[12] | 0;\n        this.Gl = T224_IV[13] | 0;\n        this.Hh = T224_IV[14] | 0;\n        this.Hl = T224_IV[15] | 0;\n    }\n}\nexport class SHA512_256 extends SHA512 {\n    constructor() {\n        super(32);\n        this.Ah = T256_IV[0] | 0;\n        this.Al = T256_IV[1] | 0;\n        this.Bh = T256_IV[2] | 0;\n        this.Bl = T256_IV[3] | 0;\n        this.Ch = T256_IV[4] | 0;\n        this.Cl = T256_IV[5] | 0;\n        this.Dh = T256_IV[6] | 0;\n        this.Dl = T256_IV[7] | 0;\n        this.Eh = T256_IV[8] | 0;\n        this.El = T256_IV[9] | 0;\n        this.Fh = T256_IV[10] | 0;\n        this.Fl = T256_IV[11] | 0;\n        this.Gh = T256_IV[12] | 0;\n        this.Gl = T256_IV[13] | 0;\n        this.Hh = T256_IV[14] | 0;\n        this.Hl = T256_IV[15] | 0;\n    }\n}\n/**\n * SHA2-256 hash function from RFC 4634.\n *\n * It is the fastest JS hash, even faster than Blake3.\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n */\nexport const sha256 = /* @__PURE__ */ createHasher(() => new SHA256());\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224 = /* @__PURE__ */ createHasher(() => new SHA224());\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512 = /* @__PURE__ */ createHasher(() => new SHA512());\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384 = /* @__PURE__ */ createHasher(() => new SHA384());\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256 = /* @__PURE__ */ createHasher(() => new SHA512_256());\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224 = /* @__PURE__ */ createHasher(() => new SHA512_224());\n//# sourceMappingURL=sha2.js.map","/**\n * SHA2-256 a.k.a. sha256. In JS, it is the fastest hash, even faster than Blake3.\n *\n * To break sha256 using birthday attack, attackers need to try 2^128 hashes.\n * BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n *\n * Check out [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n * @deprecated\n */\nimport { SHA224 as SHA224n, sha224 as sha224n, SHA256 as SHA256n, sha256 as sha256n, } from \"./sha2.js\";\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA256 = SHA256n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha256 = sha256n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const SHA224 = SHA224n;\n/** @deprecated Use import from `noble/hashes/sha2` module */\nexport const sha224 = sha224n;\n//# sourceMappingURL=sha256.js.map","'use strict';\n\n// This is free and unencumbered software released into the public domain.\n// See LICENSE.md for more information.\n\n//\n// Utilities\n//\n\n/**\n * @param {number} a The number to test.\n * @param {number} min The minimum value in the range, inclusive.\n * @param {number} max The maximum value in the range, inclusive.\n * @return {boolean} True if a >= min and a <= max.\n */\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\n/**\n * @param {*} o\n * @return {Object}\n */\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\n/**\n * @param {string} string Input string of UTF-16 code units.\n * @return {!Array.<number>} Code points.\n */\nfunction stringToCodePoints(string) {\n  // https://heycam.github.io/webidl/#dfn-obtain-unicode\n\n  // 1. Let S be the DOMString value.\n  var s = String(string);\n\n  // 2. Let n be the length of S.\n  var n = s.length;\n\n  // 3. Initialize i to 0.\n  var i = 0;\n\n  // 4. Initialize U to be an empty sequence of Unicode characters.\n  var u = [];\n\n  // 5. While i < n:\n  while (i < n) {\n\n    // 1. Let c be the code unit in S at index i.\n    var c = s.charCodeAt(i);\n\n    // 2. Depending on the value of c:\n\n    // c < 0xD800 or c > 0xDFFF\n    if (c < 0xD800 || c > 0xDFFF) {\n      // Append to U the Unicode character with code point c.\n      u.push(c);\n    }\n\n    // 0xDC00  c  0xDFFF\n    else if (0xDC00 <= c && c <= 0xDFFF) {\n      // Append to U a U+FFFD REPLACEMENT CHARACTER.\n      u.push(0xFFFD);\n    }\n\n    // 0xD800  c  0xDBFF\n    else if (0xD800 <= c && c <= 0xDBFF) {\n      // 1. If i = n1, then append to U a U+FFFD REPLACEMENT\n      // CHARACTER.\n      if (i === n - 1) {\n        u.push(0xFFFD);\n      }\n      // 2. Otherwise, i < n1:\n      else {\n        // 1. Let d be the code unit in S at index i+1.\n        var d = string.charCodeAt(i + 1);\n\n        // 2. If 0xDC00  d  0xDFFF, then:\n        if (0xDC00 <= d && d <= 0xDFFF) {\n          // 1. Let a be c & 0x3FF.\n          var a = c & 0x3FF;\n\n          // 2. Let b be d & 0x3FF.\n          var b = d & 0x3FF;\n\n          // 3. Append to U the Unicode character with code point\n          // 2^16+2^10*a+b.\n          u.push(0x10000 + (a << 10) + b);\n\n          // 4. Set i to i+1.\n          i += 1;\n        }\n\n        // 3. Otherwise, d < 0xDC00 or d > 0xDFFF. Append to U a\n        // U+FFFD REPLACEMENT CHARACTER.\n        else  {\n          u.push(0xFFFD);\n        }\n      }\n    }\n\n    // 3. Set i to i+1.\n    i += 1;\n  }\n\n  // 6. Return U.\n  return u;\n}\n\n/**\n * @param {!Array.<number>} code_points Array of code points.\n * @return {string} string String of UTF-16 code units.\n */\nfunction codePointsToString(code_points) {\n  var s = '';\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n    if (cp <= 0xFFFF) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xD800,\n                               (cp & 0x3FF) + 0xDC00);\n    }\n  }\n  return s;\n}\n\n\n//\n// Implementation of Encoding specification\n// https://encoding.spec.whatwg.org/\n//\n\n//\n// 3. Terminology\n//\n\n/**\n * End-of-stream is a special token that signifies no more tokens\n * are in the stream.\n * @const\n */ var end_of_stream = -1;\n\n/**\n * A stream represents an ordered sequence of tokens.\n *\n * @constructor\n * @param {!(Array.<number>|Uint8Array)} tokens Array of tokens that provide the\n * stream.\n */\nfunction Stream(tokens) {\n  /** @type {!Array.<number>} */\n  this.tokens = [].slice.call(tokens);\n}\n\nStream.prototype = {\n  /**\n   * @return {boolean} True if end-of-stream has been hit.\n   */\n  endOfStream: function() {\n    return !this.tokens.length;\n  },\n\n  /**\n   * When a token is read from a stream, the first token in the\n   * stream must be returned and subsequently removed, and\n   * end-of-stream must be returned otherwise.\n   *\n   * @return {number} Get the next token from the stream, or\n   * end_of_stream.\n   */\n   read: function() {\n    if (!this.tokens.length)\n      return end_of_stream;\n     return this.tokens.shift();\n   },\n\n  /**\n   * When one or more tokens are prepended to a stream, those tokens\n   * must be inserted, in given order, before the first token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The token(s) to prepend to the stream.\n   */\n  prepend: function(token) {\n    if (Array.isArray(token)) {\n      var tokens = /**@type {!Array.<number>}*/(token);\n      while (tokens.length)\n        this.tokens.unshift(tokens.pop());\n    } else {\n      this.tokens.unshift(token);\n    }\n  },\n\n  /**\n   * When one or more tokens are pushed to a stream, those tokens\n   * must be inserted, in given order, after the last token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The tokens(s) to prepend to the stream.\n   */\n  push: function(token) {\n    if (Array.isArray(token)) {\n      var tokens = /**@type {!Array.<number>}*/(token);\n      while (tokens.length)\n        this.tokens.push(tokens.shift());\n    } else {\n      this.tokens.push(token);\n    }\n  }\n};\n\n//\n// 4. Encodings\n//\n\n// 4.1 Encoders and decoders\n\n/** @const */\nvar finished = -1;\n\n/**\n * @param {boolean} fatal If true, decoding errors raise an exception.\n * @param {number=} opt_code_point Override the standard fallback code point.\n * @return {number} The code point to insert on a decoding error.\n */\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal)\n    throw TypeError('Decoder error');\n  return opt_code_point || 0xFFFD;\n}\n\n/** @interface */\nfunction Decoder() {}\nDecoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point, or |finished|.\n   */\n  handler: function(stream, bite) {}\n};\n\n/** @interface */\nfunction Encoder() {}\nEncoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of code points being encoded.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit, or |finished|.\n   */\n  handler: function(stream, code_point) {}\n};\n\n//\n// 7. API\n//\n\n/** @const */ var DEFAULT_ENCODING = 'utf-8';\n\n// 7.1 Interface TextDecoder\n\n/**\n * @constructor\n * @param {string=} encoding The label of the encoding;\n *     defaults to 'utf-8'.\n * @param {Object=} options\n */\nfunction TextDecoder(encoding, options) {\n  if (!(this instanceof TextDecoder)) {\n    return new TextDecoder(encoding, options);\n  }\n  encoding = encoding !== undefined ? String(encoding).toLowerCase() : DEFAULT_ENCODING;\n  if (encoding !== DEFAULT_ENCODING) {\n    throw new Error('Encoding not supported. Only utf-8 is supported');\n  }\n  options = ToDictionary(options);\n\n  /** @private @type {boolean} */\n  this._streaming = false;\n  /** @private @type {boolean} */\n  this._BOMseen = false;\n  /** @private @type {?Decoder} */\n  this._decoder = null;\n  /** @private @type {boolean} */\n  this._fatal = Boolean(options['fatal']);\n  /** @private @type {boolean} */\n  this._ignoreBOM = Boolean(options['ignoreBOM']);\n\n  Object.defineProperty(this, 'encoding', {value: 'utf-8'});\n  Object.defineProperty(this, 'fatal', {value: this._fatal});\n  Object.defineProperty(this, 'ignoreBOM', {value: this._ignoreBOM});\n}\n\nTextDecoder.prototype = {\n  /**\n   * @param {ArrayBufferView=} input The buffer of bytes to decode.\n   * @param {Object=} options\n   * @return {string} The decoded string.\n   */\n  decode: function decode(input, options) {\n    var bytes;\n    if (typeof input === 'object' && input instanceof ArrayBuffer) {\n      bytes = new Uint8Array(input);\n    } else if (typeof input === 'object' && 'buffer' in input &&\n               input.buffer instanceof ArrayBuffer) {\n      bytes = new Uint8Array(input.buffer,\n                             input.byteOffset,\n                             input.byteLength);\n    } else {\n      bytes = new Uint8Array(0);\n    }\n\n    options = ToDictionary(options);\n\n    if (!this._streaming) {\n      this._decoder = new UTF8Decoder({fatal: this._fatal});\n      this._BOMseen = false;\n    }\n    this._streaming = Boolean(options['stream']);\n\n    var input_stream = new Stream(bytes);\n\n    var code_points = [];\n\n    /** @type {?(number|!Array.<number>)} */\n    var result;\n\n    while (!input_stream.endOfStream()) {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished)\n        break;\n      if (result === null)\n        continue;\n      if (Array.isArray(result))\n        code_points.push.apply(code_points, /**@type {!Array.<number>}*/(result));\n      else\n        code_points.push(result);\n    }\n    if (!this._streaming) {\n      do {\n        result = this._decoder.handler(input_stream, input_stream.read());\n        if (result === finished)\n          break;\n        if (result === null)\n          continue;\n        if (Array.isArray(result))\n          code_points.push.apply(code_points, /**@type {!Array.<number>}*/(result));\n        else\n          code_points.push(result);\n      } while (!input_stream.endOfStream());\n      this._decoder = null;\n    }\n\n    if (code_points.length) {\n      // If encoding is one of utf-8, utf-16be, and utf-16le, and\n      // ignore BOM flag and BOM seen flag are unset, run these\n      // subsubsteps:\n      if (['utf-8'].indexOf(this.encoding) !== -1 &&\n          !this._ignoreBOM && !this._BOMseen) {\n        // If token is U+FEFF, set BOM seen flag.\n        if (code_points[0] === 0xFEFF) {\n          this._BOMseen = true;\n          code_points.shift();\n        } else {\n          // Otherwise, if token is not end-of-stream, set BOM seen\n          // flag and append token to output.\n          this._BOMseen = true;\n        }\n      }\n    }\n\n    return codePointsToString(code_points);\n  }\n};\n\n// 7.2 Interface TextEncoder\n\n/**\n * @constructor\n * @param {string=} encoding The label of the encoding;\n *     defaults to 'utf-8'.\n * @param {Object=} options\n */\nfunction TextEncoder(encoding, options) {\n  if (!(this instanceof TextEncoder))\n    return new TextEncoder(encoding, options);\n  encoding = encoding !== undefined ? String(encoding).toLowerCase() : DEFAULT_ENCODING;\n  if (encoding !== DEFAULT_ENCODING) {\n    throw new Error('Encoding not supported. Only utf-8 is supported');\n  }\n  options = ToDictionary(options);\n\n  /** @private @type {boolean} */\n  this._streaming = false;\n  /** @private @type {?Encoder} */\n  this._encoder = null;\n  /** @private @type {{fatal: boolean}} */\n  this._options = {fatal: Boolean(options['fatal'])};\n\n  Object.defineProperty(this, 'encoding', {value: 'utf-8'});\n}\n\nTextEncoder.prototype = {\n  /**\n   * @param {string=} opt_string The string to encode.\n   * @param {Object=} options\n   * @return {Uint8Array} Encoded bytes, as a Uint8Array.\n   */\n  encode: function encode(opt_string, options) {\n    opt_string = opt_string ? String(opt_string) : '';\n    options = ToDictionary(options);\n\n    // NOTE: This option is nonstandard. None of the encodings\n    // permitted for encoding (i.e. UTF-8, UTF-16) are stateful,\n    // so streaming is not necessary.\n    if (!this._streaming)\n      this._encoder = new UTF8Encoder(this._options);\n    this._streaming = Boolean(options['stream']);\n\n    var bytes = [];\n    var input_stream = new Stream(stringToCodePoints(opt_string));\n    /** @type {?(number|!Array.<number>)} */\n    var result;\n    while (!input_stream.endOfStream()) {\n      result = this._encoder.handler(input_stream, input_stream.read());\n      if (result === finished)\n        break;\n      if (Array.isArray(result))\n        bytes.push.apply(bytes, /**@type {!Array.<number>}*/(result));\n      else\n        bytes.push(result);\n    }\n    if (!this._streaming) {\n      while (true) {\n        result = this._encoder.handler(input_stream, input_stream.read());\n        if (result === finished)\n          break;\n        if (Array.isArray(result))\n          bytes.push.apply(bytes, /**@type {!Array.<number>}*/(result));\n        else\n          bytes.push(result);\n      }\n      this._encoder = null;\n    }\n    return new Uint8Array(bytes);\n  }\n};\n\n//\n// 8. The encoding\n//\n\n// 8.1 utf-8\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n\n  // utf-8's decoder's has an associated utf-8 code point, utf-8\n  // bytes seen, and utf-8 bytes needed (all initially 0), a utf-8\n  // lower boundary (initially 0x80), and a utf-8 upper boundary\n  // (initially 0xBF).\n  var /** @type {number} */ utf8_code_point = 0,\n      /** @type {number} */ utf8_bytes_seen = 0,\n      /** @type {number} */ utf8_bytes_needed = 0,\n      /** @type {number} */ utf8_lower_boundary = 0x80,\n      /** @type {number} */ utf8_upper_boundary = 0xBF;\n\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n  this.handler = function(stream, bite) {\n    // 1. If byte is end-of-stream and utf-8 bytes needed is not 0,\n    // set utf-8 bytes needed to 0 and return error.\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    // 2. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream)\n      return finished;\n\n    // 3. If utf-8 bytes needed is 0, based on byte:\n    if (utf8_bytes_needed === 0) {\n\n      // 0x00 to 0x7F\n      if (inRange(bite, 0x00, 0x7F)) {\n        // Return a code point whose value is byte.\n        return bite;\n      }\n\n      // 0xC2 to 0xDF\n      if (inRange(bite, 0xC2, 0xDF)) {\n        // Set utf-8 bytes needed to 1 and utf-8 code point to byte\n        //  0xC0.\n        utf8_bytes_needed = 1;\n        utf8_code_point = bite - 0xC0;\n      }\n\n      // 0xE0 to 0xEF\n      else if (inRange(bite, 0xE0, 0xEF)) {\n        // 1. If byte is 0xE0, set utf-8 lower boundary to 0xA0.\n        if (bite === 0xE0)\n          utf8_lower_boundary = 0xA0;\n        // 2. If byte is 0xED, set utf-8 upper boundary to 0x9F.\n        if (bite === 0xED)\n          utf8_upper_boundary = 0x9F;\n        // 3. Set utf-8 bytes needed to 2 and utf-8 code point to\n        // byte  0xE0.\n        utf8_bytes_needed = 2;\n        utf8_code_point = bite - 0xE0;\n      }\n\n      // 0xF0 to 0xF4\n      else if (inRange(bite, 0xF0, 0xF4)) {\n        // 1. If byte is 0xF0, set utf-8 lower boundary to 0x90.\n        if (bite === 0xF0)\n          utf8_lower_boundary = 0x90;\n        // 2. If byte is 0xF4, set utf-8 upper boundary to 0x8F.\n        if (bite === 0xF4)\n          utf8_upper_boundary = 0x8F;\n        // 3. Set utf-8 bytes needed to 3 and utf-8 code point to\n        // byte  0xF0.\n        utf8_bytes_needed = 3;\n        utf8_code_point = bite - 0xF0;\n      }\n\n      // Otherwise\n      else {\n        // Return error.\n        return decoderError(fatal);\n      }\n\n      // Then (byte is in the range 0xC2 to 0xF4) set utf-8 code\n      // point to utf-8 code point << (6  utf-8 bytes needed) and\n      // return continue.\n      utf8_code_point = utf8_code_point << (6 * utf8_bytes_needed);\n      return null;\n    }\n\n    // 4. If byte is not in the range utf-8 lower boundary to utf-8\n    // upper boundary, run these substeps:\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n\n      // 1. Set utf-8 code point, utf-8 bytes needed, and utf-8\n      // bytes seen to 0, set utf-8 lower boundary to 0x80, and set\n      // utf-8 upper boundary to 0xBF.\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xBF;\n\n      // 2. Prepend byte to stream.\n      stream.prepend(bite);\n\n      // 3. Return error.\n      return decoderError(fatal);\n    }\n\n    // 5. Set utf-8 lower boundary to 0x80 and utf-8 upper boundary\n    // to 0xBF.\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xBF;\n\n    // 6. Increase utf-8 bytes seen by one and set utf-8 code point\n    // to utf-8 code point + (byte  0x80) << (6  (utf-8 bytes\n    // needed  utf-8 bytes seen)).\n    utf8_bytes_seen += 1;\n    utf8_code_point += (bite - 0x80) << (6 * (utf8_bytes_needed - utf8_bytes_seen));\n\n    // 7. If utf-8 bytes seen is not equal to utf-8 bytes needed,\n    // continue.\n    if (utf8_bytes_seen !== utf8_bytes_needed)\n      return null;\n\n    // 8. Let code point be utf-8 code point.\n    var code_point = utf8_code_point;\n\n    // 9. Set utf-8 code point, utf-8 bytes needed, and utf-8 bytes\n    // seen to 0.\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n\n    // 10. Return a code point whose value is code point.\n    return code_point;\n  };\n}\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n  this.handler = function(stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream)\n      return finished;\n\n    // 2. If code point is in the range U+0000 to U+007F, return a\n    // byte whose value is code point.\n    if (inRange(code_point, 0x0000, 0x007f))\n      return code_point;\n\n    // 3. Set count and offset based on the range code point is in:\n    var count, offset;\n    // U+0080 to U+07FF:    1 and 0xC0\n    if (inRange(code_point, 0x0080, 0x07FF)) {\n      count = 1;\n      offset = 0xC0;\n    }\n    // U+0800 to U+FFFF:    2 and 0xE0\n    else if (inRange(code_point, 0x0800, 0xFFFF)) {\n      count = 2;\n      offset = 0xE0;\n    }\n    // U+10000 to U+10FFFF: 3 and 0xF0\n    else if (inRange(code_point, 0x10000, 0x10FFFF)) {\n      count = 3;\n      offset = 0xF0;\n    }\n\n    // 4.Let bytes be a byte sequence whose first byte is (code\n    // point >> (6  count)) + offset.\n    var bytes = [(code_point >> (6 * count)) + offset];\n\n    // 5. Run these substeps while count is greater than 0:\n    while (count > 0) {\n\n      // 1. Set temp to code point >> (6  (count  1)).\n      var temp = code_point >> (6 * (count - 1));\n\n      // 2. Append to bytes 0x80 | (temp & 0x3F).\n      bytes.push(0x80 | (temp & 0x3F));\n\n      // 3. Decrease count by one.\n      count -= 1;\n    }\n\n    // 6. Return bytes bytes, in order.\n    return bytes;\n  };\n}\n\nexport {TextEncoder, TextDecoder};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deserializeUnchecked = exports.deserialize = exports.serialize = exports.BinaryReader = exports.BinaryWriter = exports.BorshError = exports.baseDecode = exports.baseEncode = void 0;\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst bs58_1 = __importDefault(require(\"bs58\"));\n// TODO: Make sure this polyfill not included when not required\nconst encoding = __importStar(require(\"text-encoding-utf-8\"));\nconst ResolvedTextDecoder = typeof TextDecoder !== \"function\" ? encoding.TextDecoder : TextDecoder;\nconst textDecoder = new ResolvedTextDecoder(\"utf-8\", { fatal: true });\nfunction baseEncode(value) {\n    if (typeof value === \"string\") {\n        value = Buffer.from(value, \"utf8\");\n    }\n    return bs58_1.default.encode(Buffer.from(value));\n}\nexports.baseEncode = baseEncode;\nfunction baseDecode(value) {\n    return Buffer.from(bs58_1.default.decode(value));\n}\nexports.baseDecode = baseDecode;\nconst INITIAL_LENGTH = 1024;\nclass BorshError extends Error {\n    constructor(message) {\n        super(message);\n        this.fieldPath = [];\n        this.originalMessage = message;\n    }\n    addToFieldPath(fieldName) {\n        this.fieldPath.splice(0, 0, fieldName);\n        // NOTE: Modifying message directly as jest doesn't use .toString()\n        this.message = this.originalMessage + \": \" + this.fieldPath.join(\".\");\n    }\n}\nexports.BorshError = BorshError;\n/// Binary encoder.\nclass BinaryWriter {\n    constructor() {\n        this.buf = Buffer.alloc(INITIAL_LENGTH);\n        this.length = 0;\n    }\n    maybeResize() {\n        if (this.buf.length < 16 + this.length) {\n            this.buf = Buffer.concat([this.buf, Buffer.alloc(INITIAL_LENGTH)]);\n        }\n    }\n    writeU8(value) {\n        this.maybeResize();\n        this.buf.writeUInt8(value, this.length);\n        this.length += 1;\n    }\n    writeU16(value) {\n        this.maybeResize();\n        this.buf.writeUInt16LE(value, this.length);\n        this.length += 2;\n    }\n    writeU32(value) {\n        this.maybeResize();\n        this.buf.writeUInt32LE(value, this.length);\n        this.length += 4;\n    }\n    writeU64(value) {\n        this.maybeResize();\n        this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray(\"le\", 8)));\n    }\n    writeU128(value) {\n        this.maybeResize();\n        this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray(\"le\", 16)));\n    }\n    writeU256(value) {\n        this.maybeResize();\n        this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray(\"le\", 32)));\n    }\n    writeU512(value) {\n        this.maybeResize();\n        this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray(\"le\", 64)));\n    }\n    writeBuffer(buffer) {\n        // Buffer.from is needed as this.buf.subarray can return plain Uint8Array in browser\n        this.buf = Buffer.concat([\n            Buffer.from(this.buf.subarray(0, this.length)),\n            buffer,\n            Buffer.alloc(INITIAL_LENGTH),\n        ]);\n        this.length += buffer.length;\n    }\n    writeString(str) {\n        this.maybeResize();\n        const b = Buffer.from(str, \"utf8\");\n        this.writeU32(b.length);\n        this.writeBuffer(b);\n    }\n    writeFixedArray(array) {\n        this.writeBuffer(Buffer.from(array));\n    }\n    writeArray(array, fn) {\n        this.maybeResize();\n        this.writeU32(array.length);\n        for (const elem of array) {\n            this.maybeResize();\n            fn(elem);\n        }\n    }\n    toArray() {\n        return this.buf.subarray(0, this.length);\n    }\n}\nexports.BinaryWriter = BinaryWriter;\nfunction handlingRangeError(target, propertyKey, propertyDescriptor) {\n    const originalMethod = propertyDescriptor.value;\n    propertyDescriptor.value = function (...args) {\n        try {\n            return originalMethod.apply(this, args);\n        }\n        catch (e) {\n            if (e instanceof RangeError) {\n                const code = e.code;\n                if ([\"ERR_BUFFER_OUT_OF_BOUNDS\", \"ERR_OUT_OF_RANGE\"].indexOf(code) >= 0) {\n                    throw new BorshError(\"Reached the end of buffer when deserializing\");\n                }\n            }\n            throw e;\n        }\n    };\n}\nclass BinaryReader {\n    constructor(buf) {\n        this.buf = buf;\n        this.offset = 0;\n    }\n    readU8() {\n        const value = this.buf.readUInt8(this.offset);\n        this.offset += 1;\n        return value;\n    }\n    readU16() {\n        const value = this.buf.readUInt16LE(this.offset);\n        this.offset += 2;\n        return value;\n    }\n    readU32() {\n        const value = this.buf.readUInt32LE(this.offset);\n        this.offset += 4;\n        return value;\n    }\n    readU64() {\n        const buf = this.readBuffer(8);\n        return new bn_js_1.default(buf, \"le\");\n    }\n    readU128() {\n        const buf = this.readBuffer(16);\n        return new bn_js_1.default(buf, \"le\");\n    }\n    readU256() {\n        const buf = this.readBuffer(32);\n        return new bn_js_1.default(buf, \"le\");\n    }\n    readU512() {\n        const buf = this.readBuffer(64);\n        return new bn_js_1.default(buf, \"le\");\n    }\n    readBuffer(len) {\n        if (this.offset + len > this.buf.length) {\n            throw new BorshError(`Expected buffer length ${len} isn't within bounds`);\n        }\n        const result = this.buf.slice(this.offset, this.offset + len);\n        this.offset += len;\n        return result;\n    }\n    readString() {\n        const len = this.readU32();\n        const buf = this.readBuffer(len);\n        try {\n            // NOTE: Using TextDecoder to fail on invalid UTF-8\n            return textDecoder.decode(buf);\n        }\n        catch (e) {\n            throw new BorshError(`Error decoding UTF-8 string: ${e}`);\n        }\n    }\n    readFixedArray(len) {\n        return new Uint8Array(this.readBuffer(len));\n    }\n    readArray(fn) {\n        const len = this.readU32();\n        const result = Array();\n        for (let i = 0; i < len; ++i) {\n            result.push(fn());\n        }\n        return result;\n    }\n}\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU8\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU16\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU32\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU64\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU128\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU256\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readU512\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readString\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readFixedArray\", null);\n__decorate([\n    handlingRangeError\n], BinaryReader.prototype, \"readArray\", null);\nexports.BinaryReader = BinaryReader;\nfunction capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\nfunction serializeField(schema, fieldName, value, fieldType, writer) {\n    try {\n        // TODO: Handle missing values properly (make sure they never result in just skipped write)\n        if (typeof fieldType === \"string\") {\n            writer[`write${capitalizeFirstLetter(fieldType)}`](value);\n        }\n        else if (fieldType instanceof Array) {\n            if (typeof fieldType[0] === \"number\") {\n                if (value.length !== fieldType[0]) {\n                    throw new BorshError(`Expecting byte array of length ${fieldType[0]}, but got ${value.length} bytes`);\n                }\n                writer.writeFixedArray(value);\n            }\n            else if (fieldType.length === 2 && typeof fieldType[1] === \"number\") {\n                if (value.length !== fieldType[1]) {\n                    throw new BorshError(`Expecting byte array of length ${fieldType[1]}, but got ${value.length} bytes`);\n                }\n                for (let i = 0; i < fieldType[1]; i++) {\n                    serializeField(schema, null, value[i], fieldType[0], writer);\n                }\n            }\n            else {\n                writer.writeArray(value, (item) => {\n                    serializeField(schema, fieldName, item, fieldType[0], writer);\n                });\n            }\n        }\n        else if (fieldType.kind !== undefined) {\n            switch (fieldType.kind) {\n                case \"option\": {\n                    if (value === null || value === undefined) {\n                        writer.writeU8(0);\n                    }\n                    else {\n                        writer.writeU8(1);\n                        serializeField(schema, fieldName, value, fieldType.type, writer);\n                    }\n                    break;\n                }\n                case \"map\": {\n                    writer.writeU32(value.size);\n                    value.forEach((val, key) => {\n                        serializeField(schema, fieldName, key, fieldType.key, writer);\n                        serializeField(schema, fieldName, val, fieldType.value, writer);\n                    });\n                    break;\n                }\n                default:\n                    throw new BorshError(`FieldType ${fieldType} unrecognized`);\n            }\n        }\n        else {\n            serializeStruct(schema, value, writer);\n        }\n    }\n    catch (error) {\n        if (error instanceof BorshError) {\n            error.addToFieldPath(fieldName);\n        }\n        throw error;\n    }\n}\nfunction serializeStruct(schema, obj, writer) {\n    if (typeof obj.borshSerialize === \"function\") {\n        obj.borshSerialize(writer);\n        return;\n    }\n    const structSchema = schema.get(obj.constructor);\n    if (!structSchema) {\n        throw new BorshError(`Class ${obj.constructor.name} is missing in schema`);\n    }\n    if (structSchema.kind === \"struct\") {\n        structSchema.fields.map(([fieldName, fieldType]) => {\n            serializeField(schema, fieldName, obj[fieldName], fieldType, writer);\n        });\n    }\n    else if (structSchema.kind === \"enum\") {\n        const name = obj[structSchema.field];\n        for (let idx = 0; idx < structSchema.values.length; ++idx) {\n            const [fieldName, fieldType] = structSchema.values[idx];\n            if (fieldName === name) {\n                writer.writeU8(idx);\n                serializeField(schema, fieldName, obj[fieldName], fieldType, writer);\n                break;\n            }\n        }\n    }\n    else {\n        throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${obj.constructor.name}`);\n    }\n}\n/// Serialize given object using schema of the form:\n/// { class_name -> [ [field_name, field_type], .. ], .. }\nfunction serialize(schema, obj, Writer = BinaryWriter) {\n    const writer = new Writer();\n    serializeStruct(schema, obj, writer);\n    return writer.toArray();\n}\nexports.serialize = serialize;\nfunction deserializeField(schema, fieldName, fieldType, reader) {\n    try {\n        if (typeof fieldType === \"string\") {\n            return reader[`read${capitalizeFirstLetter(fieldType)}`]();\n        }\n        if (fieldType instanceof Array) {\n            if (typeof fieldType[0] === \"number\") {\n                return reader.readFixedArray(fieldType[0]);\n            }\n            else if (typeof fieldType[1] === \"number\") {\n                const arr = [];\n                for (let i = 0; i < fieldType[1]; i++) {\n                    arr.push(deserializeField(schema, null, fieldType[0], reader));\n                }\n                return arr;\n            }\n            else {\n                return reader.readArray(() => deserializeField(schema, fieldName, fieldType[0], reader));\n            }\n        }\n        if (fieldType.kind === \"option\") {\n            const option = reader.readU8();\n            if (option) {\n                return deserializeField(schema, fieldName, fieldType.type, reader);\n            }\n            return undefined;\n        }\n        if (fieldType.kind === \"map\") {\n            let map = new Map();\n            const length = reader.readU32();\n            for (let i = 0; i < length; i++) {\n                const key = deserializeField(schema, fieldName, fieldType.key, reader);\n                const val = deserializeField(schema, fieldName, fieldType.value, reader);\n                map.set(key, val);\n            }\n            return map;\n        }\n        return deserializeStruct(schema, fieldType, reader);\n    }\n    catch (error) {\n        if (error instanceof BorshError) {\n            error.addToFieldPath(fieldName);\n        }\n        throw error;\n    }\n}\nfunction deserializeStruct(schema, classType, reader) {\n    if (typeof classType.borshDeserialize === \"function\") {\n        return classType.borshDeserialize(reader);\n    }\n    const structSchema = schema.get(classType);\n    if (!structSchema) {\n        throw new BorshError(`Class ${classType.name} is missing in schema`);\n    }\n    if (structSchema.kind === \"struct\") {\n        const result = {};\n        for (const [fieldName, fieldType] of schema.get(classType).fields) {\n            result[fieldName] = deserializeField(schema, fieldName, fieldType, reader);\n        }\n        return new classType(result);\n    }\n    if (structSchema.kind === \"enum\") {\n        const idx = reader.readU8();\n        if (idx >= structSchema.values.length) {\n            throw new BorshError(`Enum index: ${idx} is out of range`);\n        }\n        const [fieldName, fieldType] = structSchema.values[idx];\n        const fieldValue = deserializeField(schema, fieldName, fieldType, reader);\n        return new classType({ [fieldName]: fieldValue });\n    }\n    throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${classType.constructor.name}`);\n}\n/// Deserializes object from bytes using schema.\nfunction deserialize(schema, classType, buffer, Reader = BinaryReader) {\n    const reader = new Reader(buffer);\n    const result = deserializeStruct(schema, classType, reader);\n    if (reader.offset < buffer.length) {\n        throw new BorshError(`Unexpected ${buffer.length - reader.offset} bytes after deserialized data`);\n    }\n    return result;\n}\nexports.deserialize = deserialize;\n/// Deserializes object from bytes using schema, without checking the length read\nfunction deserializeUnchecked(schema, classType, buffer, Reader = BinaryReader) {\n    const reader = new Reader(buffer);\n    return deserializeStruct(schema, classType, reader);\n}\nexports.deserializeUnchecked = deserializeUnchecked;\n","/* The MIT License (MIT)\n *\n * Copyright 2015-2018 Peter A. Bigot\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * Support for translating between Uint8Array instances and JavaScript\n * native types.\n *\n * {@link module:Layout~Layout|Layout} is the basis of a class\n * hierarchy that associates property names with sequences of encoded\n * bytes.\n *\n * Layouts are supported for these scalar (numeric) types:\n * * {@link module:Layout~UInt|Unsigned integers in little-endian\n *   format} with {@link module:Layout.u8|8-bit}, {@link\n *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},\n *   {@link module:Layout.u32|32-bit}, {@link\n *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~UIntBE|Unsigned integers in big-endian\n *   format} with {@link module:Layout.u16be|16-bit}, {@link\n *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},\n *   {@link module:Layout.u40be|40-bit}, and {@link\n *   module:Layout.u48be|48-bit} representation ranges;\n * * {@link module:Layout~Int|Signed integers in little-endian\n *   format} with {@link module:Layout.s8|8-bit}, {@link\n *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},\n *   {@link module:Layout.s32|32-bit}, {@link\n *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~IntBE|Signed integers in big-endian format}\n *   with {@link module:Layout.s16be|16-bit}, {@link\n *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},\n *   {@link module:Layout.s40be|40-bit}, and {@link\n *   module:Layout.s48be|48-bit} representation ranges;\n * * 64-bit integral values that decode to an exact (if magnitude is\n *   less than 2^53) or nearby integral Number in {@link\n *   module:Layout.nu64|unsigned little-endian}, {@link\n *   module:Layout.nu64be|unsigned big-endian}, {@link\n *   module:Layout.ns64|signed little-endian}, and {@link\n *   module:Layout.ns64be|unsigned big-endian} encodings;\n * * 32-bit floating point values with {@link\n *   module:Layout.f32|little-endian} and {@link\n *   module:Layout.f32be|big-endian} representations;\n * * 64-bit floating point values with {@link\n *   module:Layout.f64|little-endian} and {@link\n *   module:Layout.f64be|big-endian} representations;\n * * {@link module:Layout.const|Constants} that take no space in the\n *   encoded expression.\n *\n * and for these aggregate types:\n * * {@link module:Layout.seq|Sequence}s of instances of a {@link\n *   module:Layout~Layout|Layout}, with JavaScript representation as\n *   an Array and constant or data-dependent {@link\n *   module:Layout~Sequence#count|length};\n * * {@link module:Layout.struct|Structure}s that aggregate a\n *   heterogeneous sequence of {@link module:Layout~Layout|Layout}\n *   instances, with JavaScript representation as an Object;\n * * {@link module:Layout.union|Union}s that support multiple {@link\n *   module:Layout~VariantLayout|variant layouts} over a fixed\n *   (padded) or variable (not padded) span of bytes, using an\n *   unsigned integer at the start of the data or a separate {@link\n *   module:Layout.unionLayoutDiscriminator|layout element} to\n *   determine which layout to use when interpreting the buffer\n *   contents;\n * * {@link module:Layout.bits|BitStructure}s that contain a sequence\n *   of individual {@link\n *   module:Layout~BitStructure#addField|BitField}s packed into an 8,\n *   16, 24, or 32-bit unsigned integer starting at the least- or\n *   most-significant bit;\n * * {@link module:Layout.cstr|C strings} of varying length;\n * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link\n *   module:Layout~Blob#length|length} raw data.\n *\n * All {@link module:Layout~Layout|Layout} instances are immutable\n * after construction, to prevent internal state from becoming\n * inconsistent.\n *\n * @local Layout\n * @local ExternalLayout\n * @local GreedyCount\n * @local OffsetLayout\n * @local UInt\n * @local UIntBE\n * @local Int\n * @local IntBE\n * @local NearUInt64\n * @local NearUInt64BE\n * @local NearInt64\n * @local NearInt64BE\n * @local Float\n * @local FloatBE\n * @local Double\n * @local DoubleBE\n * @local Sequence\n * @local Structure\n * @local UnionDiscriminator\n * @local UnionLayoutDiscriminator\n * @local Union\n * @local VariantLayout\n * @local BitStructure\n * @local BitField\n * @local Boolean\n * @local Blob\n * @local CString\n * @local Constant\n * @local bindConstructorLayout\n * @module Layout\n * @license MIT\n * @author Peter A. Bigot\n * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}\n */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.s16 = exports.s8 = exports.nu64be = exports.u48be = exports.u40be = exports.u32be = exports.u24be = exports.u16be = exports.nu64 = exports.u48 = exports.u40 = exports.u32 = exports.u24 = exports.u16 = exports.u8 = exports.offset = exports.greedy = exports.Constant = exports.UTF8 = exports.CString = exports.Blob = exports.Boolean = exports.BitField = exports.BitStructure = exports.VariantLayout = exports.Union = exports.UnionLayoutDiscriminator = exports.UnionDiscriminator = exports.Structure = exports.Sequence = exports.DoubleBE = exports.Double = exports.FloatBE = exports.Float = exports.NearInt64BE = exports.NearInt64 = exports.NearUInt64BE = exports.NearUInt64 = exports.IntBE = exports.Int = exports.UIntBE = exports.UInt = exports.OffsetLayout = exports.GreedyCount = exports.ExternalLayout = exports.bindConstructorLayout = exports.nameWithProperty = exports.Layout = exports.uint8ArrayToBuffer = exports.checkUint8Array = void 0;\nexports.constant = exports.utf8 = exports.cstr = exports.blob = exports.unionLayoutDiscriminator = exports.union = exports.seq = exports.bits = exports.struct = exports.f64be = exports.f64 = exports.f32be = exports.f32 = exports.ns64be = exports.s48be = exports.s40be = exports.s32be = exports.s24be = exports.s16be = exports.ns64 = exports.s48 = exports.s40 = exports.s32 = exports.s24 = void 0;\nconst buffer_1 = require(\"buffer\");\n/* Check if a value is a Uint8Array.\n *\n * @ignore */\nfunction checkUint8Array(b) {\n    if (!(b instanceof Uint8Array)) {\n        throw new TypeError('b must be a Uint8Array');\n    }\n}\nexports.checkUint8Array = checkUint8Array;\n/* Create a Buffer instance from a Uint8Array.\n *\n * @ignore */\nfunction uint8ArrayToBuffer(b) {\n    checkUint8Array(b);\n    return buffer_1.Buffer.from(b.buffer, b.byteOffset, b.length);\n}\nexports.uint8ArrayToBuffer = uint8ArrayToBuffer;\n/**\n * Base class for layout objects.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * Layout#encode|encode} or {@link Layout#decode|decode} functions.\n *\n * @param {Number} span - Initializer for {@link Layout#span|span}.  The\n * parameter must be an integer; a negative value signifies that the\n * span is {@link Layout#getSpan|value-specific}.\n *\n * @param {string} [property] - Initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n */\nclass Layout {\n    constructor(span, property) {\n        if (!Number.isInteger(span)) {\n            throw new TypeError('span must be an integer');\n        }\n        /** The span of the layout in bytes.\n         *\n         * Positive values are generally expected.\n         *\n         * Zero will only appear in {@link Constant}s and in {@link\n         * Sequence}s where the {@link Sequence#count|count} is zero.\n         *\n         * A negative value indicates that the span is value-specific, and\n         * must be obtained using {@link Layout#getSpan|getSpan}. */\n        this.span = span;\n        /** The property name used when this layout is represented in an\n         * Object.\n         *\n         * Used only for layouts that {@link Layout#decode|decode} to Object\n         * instances.  If left undefined the span of the unnamed layout will\n         * be treated as padding: it will not be mutated by {@link\n         * Layout#encode|encode} nor represented as a property in the\n         * decoded Object. */\n        this.property = property;\n    }\n    /** Function to create an Object into which decoded properties will\n     * be written.\n     *\n     * Used only for layouts that {@link Layout#decode|decode} to Object\n     * instances, which means:\n     * * {@link Structure}\n     * * {@link Union}\n     * * {@link VariantLayout}\n     * * {@link BitStructure}\n     *\n     * If left undefined the JavaScript representation of these layouts\n     * will be Object instances.\n     *\n     * See {@link bindConstructorLayout}.\n     */\n    makeDestinationObject() {\n        return {};\n    }\n    /**\n     * Calculate the span of a specific instance of a layout.\n     *\n     * @param {Uint8Array} b - the buffer that contains an encoded instance.\n     *\n     * @param {Number} [offset] - the offset at which the encoded instance\n     * starts.  If absent a zero offset is inferred.\n     *\n     * @return {Number} - the number of bytes covered by the layout\n     * instance.  If this method is not overridden in a subclass the\n     * definition-time constant {@link Layout#span|span} will be\n     * returned.\n     *\n     * @throws {RangeError} - if the length of the value cannot be\n     * determined.\n     */\n    getSpan(b, offset) {\n        if (0 > this.span) {\n            throw new RangeError('indeterminate span');\n        }\n        return this.span;\n    }\n    /**\n     * Replicate the layout using a new property.\n     *\n     * This function must be used to get a structurally-equivalent layout\n     * with a different name since all {@link Layout} instances are\n     * immutable.\n     *\n     * **NOTE** This is a shallow copy.  All fields except {@link\n     * Layout#property|property} are strictly equal to the origin layout.\n     *\n     * @param {String} property - the value for {@link\n     * Layout#property|property} in the replica.\n     *\n     * @returns {Layout} - the copy with {@link Layout#property|property}\n     * set to `property`.\n     */\n    replicate(property) {\n        const rv = Object.create(this.constructor.prototype);\n        Object.assign(rv, this);\n        rv.property = property;\n        return rv;\n    }\n    /**\n     * Create an object from layout properties and an array of values.\n     *\n     * **NOTE** This function returns `undefined` if invoked on a layout\n     * that does not return its value as an Object.  Objects are\n     * returned for things that are a {@link Structure}, which includes\n     * {@link VariantLayout|variant layouts} if they are structures, and\n     * excludes {@link Union}s.  If you want this feature for a union\n     * you must use {@link Union.getVariant|getVariant} to select the\n     * desired layout.\n     *\n     * @param {Array} values - an array of values that correspond to the\n     * default order for properties.  As with {@link Layout#decode|decode}\n     * layout elements that have no property name are skipped when\n     * iterating over the array values.  Only the top-level properties are\n     * assigned; arguments are not assigned to properties of contained\n     * layouts.  Any unused values are ignored.\n     *\n     * @return {(Object|undefined)}\n     */\n    fromArray(values) {\n        return undefined;\n    }\n}\nexports.Layout = Layout;\n/* Provide text that carries a name (such as for a function that will\n * be throwing an error) annotated with the property of a given layout\n * (such as one for which the value was unacceptable).\n *\n * @ignore */\nfunction nameWithProperty(name, lo) {\n    if (lo.property) {\n        return name + '[' + lo.property + ']';\n    }\n    return name;\n}\nexports.nameWithProperty = nameWithProperty;\n/**\n * Augment a class so that instances can be encoded/decoded using a\n * given layout.\n *\n * Calling this function couples `Class` with `layout` in several ways:\n *\n * * `Class.layout_` becomes a static member property equal to `layout`;\n * * `layout.boundConstructor_` becomes a static member property equal\n *    to `Class`;\n * * The {@link Layout#makeDestinationObject|makeDestinationObject()}\n *   property of `layout` is set to a function that returns a `new\n *   Class()`;\n * * `Class.decode(b, offset)` becomes a static member function that\n *   delegates to {@link Layout#decode|layout.decode}.  The\n *   synthesized function may be captured and extended.\n * * `Class.prototype.encode(b, offset)` provides an instance member\n *   function that delegates to {@link Layout#encode|layout.encode}\n *   with `src` set to `this`.  The synthesized function may be\n *   captured and extended, but when the extension is invoked `this`\n *   must be explicitly bound to the instance.\n *\n * @param {class} Class - a JavaScript class with a nullary\n * constructor.\n *\n * @param {Layout} layout - the {@link Layout} instance used to encode\n * instances of `Class`.\n */\n// `Class` must be a constructor Function, but the assignment of a `layout_` property to it makes it difficult to type\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction bindConstructorLayout(Class, layout) {\n    if ('function' !== typeof Class) {\n        throw new TypeError('Class must be constructor');\n    }\n    if (Object.prototype.hasOwnProperty.call(Class, 'layout_')) {\n        throw new Error('Class is already bound to a layout');\n    }\n    if (!(layout && (layout instanceof Layout))) {\n        throw new TypeError('layout must be a Layout');\n    }\n    if (Object.prototype.hasOwnProperty.call(layout, 'boundConstructor_')) {\n        throw new Error('layout is already bound to a constructor');\n    }\n    Class.layout_ = layout;\n    layout.boundConstructor_ = Class;\n    layout.makeDestinationObject = (() => new Class());\n    Object.defineProperty(Class.prototype, 'encode', {\n        value(b, offset) {\n            return layout.encode(this, b, offset);\n        },\n        writable: true,\n    });\n    Object.defineProperty(Class, 'decode', {\n        value(b, offset) {\n            return layout.decode(b, offset);\n        },\n        writable: true,\n    });\n}\nexports.bindConstructorLayout = bindConstructorLayout;\n/**\n * An object that behaves like a layout but does not consume space\n * within its containing layout.\n *\n * This is primarily used to obtain metadata about a member, such as a\n * {@link OffsetLayout} that can provide data about a {@link\n * Layout#getSpan|value-specific span}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support {@link\n * ExternalLayout#isCount|isCount} or other {@link Layout} functions.\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n * @augments {Layout}\n */\nclass ExternalLayout extends Layout {\n    /**\n     * Return `true` iff the external layout decodes to an unsigned\n     * integer layout.\n     *\n     * In that case it can be used as the source of {@link\n     * Sequence#count|Sequence counts}, {@link Blob#length|Blob lengths},\n     * or as {@link UnionLayoutDiscriminator#layout|external union\n     * discriminators}.\n     *\n     * @abstract\n     */\n    isCount() {\n        throw new Error('ExternalLayout is abstract');\n    }\n}\nexports.ExternalLayout = ExternalLayout;\n/**\n * An {@link ExternalLayout} that determines its {@link\n * Layout#decode|value} based on offset into and length of the buffer\n * on which it is invoked.\n *\n * *Factory*: {@link module:Layout.greedy|greedy}\n *\n * @param {Number} [elementSpan] - initializer for {@link\n * GreedyCount#elementSpan|elementSpan}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {ExternalLayout}\n */\nclass GreedyCount extends ExternalLayout {\n    constructor(elementSpan = 1, property) {\n        if ((!Number.isInteger(elementSpan)) || (0 >= elementSpan)) {\n            throw new TypeError('elementSpan must be a (positive) integer');\n        }\n        super(-1, property);\n        /** The layout for individual elements of the sequence.  The value\n         * must be a positive integer.  If not provided, the value will be\n         * 1. */\n        this.elementSpan = elementSpan;\n    }\n    /** @override */\n    isCount() {\n        return true;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        checkUint8Array(b);\n        const rem = b.length - offset;\n        return Math.floor(rem / this.elementSpan);\n    }\n    /** @override */\n    encode(src, b, offset) {\n        return 0;\n    }\n}\nexports.GreedyCount = GreedyCount;\n/**\n * An {@link ExternalLayout} that supports accessing a {@link Layout}\n * at a fixed offset from the start of another Layout.  The offset may\n * be before, within, or after the base layout.\n *\n * *Factory*: {@link module:Layout.offset|offset}\n *\n * @param {Layout} layout - initializer for {@link\n * OffsetLayout#layout|layout}, modulo `property`.\n *\n * @param {Number} [offset] - Initializes {@link\n * OffsetLayout#offset|offset}.  Defaults to zero.\n *\n * @param {string} [property] - Optional new property name for a\n * {@link Layout#replicate| replica} of `layout` to be used as {@link\n * OffsetLayout#layout|layout}.  If not provided the `layout` is used\n * unchanged.\n *\n * @augments {Layout}\n */\nclass OffsetLayout extends ExternalLayout {\n    constructor(layout, offset = 0, property) {\n        if (!(layout instanceof Layout)) {\n            throw new TypeError('layout must be a Layout');\n        }\n        if (!Number.isInteger(offset)) {\n            throw new TypeError('offset must be integer or undefined');\n        }\n        super(layout.span, property || layout.property);\n        /** The subordinated layout. */\n        this.layout = layout;\n        /** The location of {@link OffsetLayout#layout} relative to the\n         * start of another layout.\n         *\n         * The value may be positive or negative, but an error will thrown\n         * if at the point of use it goes outside the span of the Uint8Array\n         * being accessed.  */\n        this.offset = offset;\n    }\n    /** @override */\n    isCount() {\n        return ((this.layout instanceof UInt)\n            || (this.layout instanceof UIntBE));\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return this.layout.decode(b, offset + this.offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        return this.layout.encode(src, b, offset + this.offset);\n    }\n}\nexports.OffsetLayout = OffsetLayout;\n/**\n * Represent an unsigned integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.u8|u8}, {@link\n *  module:Layout.u16|u16}, {@link module:Layout.u24|u24}, {@link\n *  module:Layout.u32|u32}, {@link module:Layout.u40|u40}, {@link\n *  module:Layout.u48|u48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UInt extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readUIntLE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeUIntLE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.UInt = UInt;\n/**\n * Represent an unsigned integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.u8be|u8be}, {@link\n * module:Layout.u16be|u16be}, {@link module:Layout.u24be|u24be},\n * {@link module:Layout.u32be|u32be}, {@link\n * module:Layout.u40be|u40be}, {@link module:Layout.u48be|u48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UIntBE extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readUIntBE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeUIntBE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.UIntBE = UIntBE;\n/**\n * Represent a signed integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.s8|s8}, {@link\n *  module:Layout.s16|s16}, {@link module:Layout.s24|s24}, {@link\n *  module:Layout.s32|s32}, {@link module:Layout.s40|s40}, {@link\n *  module:Layout.s48|s48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Int extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readIntLE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeIntLE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.Int = Int;\n/**\n * Represent a signed integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.s8be|s8be}, {@link\n * module:Layout.s16be|s16be}, {@link module:Layout.s24be|s24be},\n * {@link module:Layout.s32be|s32be}, {@link\n * module:Layout.s40be|s40be}, {@link module:Layout.s48be|s48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass IntBE extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readIntBE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeIntBE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.IntBE = IntBE;\nconst V2E32 = Math.pow(2, 32);\n/* True modulus high and low 32-bit words, where low word is always\n * non-negative. */\nfunction divmodInt64(src) {\n    const hi32 = Math.floor(src / V2E32);\n    const lo32 = src - (hi32 * V2E32);\n    return { hi32, lo32 };\n}\n/* Reconstruct Number from quotient and non-negative remainder */\nfunction roundedInt64(hi32, lo32) {\n    return hi32 * V2E32 + lo32;\n}\n/**\n * Represent an unsigned 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64|nu64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64 extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const lo32 = buffer.readUInt32LE(offset);\n        const hi32 = buffer.readUInt32LE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32LE(split.lo32, offset);\n        buffer.writeUInt32LE(split.hi32, offset + 4);\n        return 8;\n    }\n}\nexports.NearUInt64 = NearUInt64;\n/**\n * Represent an unsigned 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64be|nu64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64BE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const hi32 = buffer.readUInt32BE(offset);\n        const lo32 = buffer.readUInt32BE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32BE(split.hi32, offset);\n        buffer.writeUInt32BE(split.lo32, offset + 4);\n        return 8;\n    }\n}\nexports.NearUInt64BE = NearUInt64BE;\n/**\n * Represent a signed 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64|ns64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64 extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const lo32 = buffer.readUInt32LE(offset);\n        const hi32 = buffer.readInt32LE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32LE(split.lo32, offset);\n        buffer.writeInt32LE(split.hi32, offset + 4);\n        return 8;\n    }\n}\nexports.NearInt64 = NearInt64;\n/**\n * Represent a signed 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64be|ns64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64BE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const hi32 = buffer.readInt32BE(offset);\n        const lo32 = buffer.readUInt32BE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeInt32BE(split.hi32, offset);\n        buffer.writeUInt32BE(split.lo32, offset + 4);\n        return 8;\n    }\n}\nexports.NearInt64BE = NearInt64BE;\n/**\n * Represent a 32-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f32|f32}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Float extends Layout {\n    constructor(property) {\n        super(4, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readFloatLE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeFloatLE(src, offset);\n        return 4;\n    }\n}\nexports.Float = Float;\n/**\n * Represent a 32-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f32be|f32be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass FloatBE extends Layout {\n    constructor(property) {\n        super(4, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readFloatBE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeFloatBE(src, offset);\n        return 4;\n    }\n}\nexports.FloatBE = FloatBE;\n/**\n * Represent a 64-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f64|f64}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Double extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readDoubleLE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeDoubleLE(src, offset);\n        return 8;\n    }\n}\nexports.Double = Double;\n/**\n * Represent a 64-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f64be|f64be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass DoubleBE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readDoubleBE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeDoubleBE(src, offset);\n        return 8;\n    }\n}\nexports.DoubleBE = DoubleBE;\n/**\n * Represent a contiguous sequence of a specific layout as an Array.\n *\n * *Factory*: {@link module:Layout.seq|seq}\n *\n * @param {Layout} elementLayout - initializer for {@link\n * Sequence#elementLayout|elementLayout}.\n *\n * @param {(Number|ExternalLayout)} count - initializer for {@link\n * Sequence#count|count}.  The parameter must be either a positive\n * integer or an instance of {@link ExternalLayout}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Sequence extends Layout {\n    constructor(elementLayout, count, property) {\n        if (!(elementLayout instanceof Layout)) {\n            throw new TypeError('elementLayout must be a Layout');\n        }\n        if (!(((count instanceof ExternalLayout) && count.isCount())\n            || (Number.isInteger(count) && (0 <= count)))) {\n            throw new TypeError('count must be non-negative integer '\n                + 'or an unsigned integer ExternalLayout');\n        }\n        let span = -1;\n        if ((!(count instanceof ExternalLayout))\n            && (0 < elementLayout.span)) {\n            span = count * elementLayout.span;\n        }\n        super(span, property);\n        /** The layout for individual elements of the sequence. */\n        this.elementLayout = elementLayout;\n        /** The number of elements in the sequence.\n         *\n         * This will be either a non-negative integer or an instance of\n         * {@link ExternalLayout} for which {@link\n         * ExternalLayout#isCount|isCount()} is `true`. */\n        this.count = count;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        let span = 0;\n        let count = this.count;\n        if (count instanceof ExternalLayout) {\n            count = count.decode(b, offset);\n        }\n        if (0 < this.elementLayout.span) {\n            span = count * this.elementLayout.span;\n        }\n        else {\n            let idx = 0;\n            while (idx < count) {\n                span += this.elementLayout.getSpan(b, offset + span);\n                ++idx;\n            }\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const rv = [];\n        let i = 0;\n        let count = this.count;\n        if (count instanceof ExternalLayout) {\n            count = count.decode(b, offset);\n        }\n        while (i < count) {\n            rv.push(this.elementLayout.decode(b, offset));\n            offset += this.elementLayout.getSpan(b, offset);\n            i += 1;\n        }\n        return rv;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Sequence}.\n     *\n     * **NOTE** If `src` is shorter than {@link Sequence#count|count} then\n     * the unused space in the buffer is left unchanged.  If `src` is\n     * longer than {@link Sequence#count|count} the unneeded elements are\n     * ignored.\n     *\n     * **NOTE** If {@link Layout#count|count} is an instance of {@link\n     * ExternalLayout} then the length of `src` will be encoded as the\n     * count after `src` is encoded. */\n    encode(src, b, offset = 0) {\n        const elo = this.elementLayout;\n        const span = src.reduce((span, v) => {\n            return span + elo.encode(v, b, offset + span);\n        }, 0);\n        if (this.count instanceof ExternalLayout) {\n            this.count.encode(src.length, b, offset);\n        }\n        return span;\n    }\n}\nexports.Sequence = Sequence;\n/**\n * Represent a contiguous sequence of arbitrary layout elements as an\n * Object.\n *\n * *Factory*: {@link module:Layout.struct|struct}\n *\n * **NOTE** The {@link Layout#span|span} of the structure is variable\n * if any layout in {@link Structure#fields|fields} has a variable\n * span.  When {@link Layout#encode|encoding} we must have a value for\n * all variable-length fields, or we wouldn't be able to figure out\n * how much space to use for storage.  We can only identify the value\n * for a field when it has a {@link Layout#property|property}.  As\n * such, although a structure may contain both unnamed fields and\n * variable-length fields, it cannot contain an unnamed\n * variable-length field.\n *\n * @param {Layout[]} fields - initializer for {@link\n * Structure#fields|fields}.  An error is raised if this contains a\n * variable-length field for which a {@link Layout#property|property}\n * is not defined.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @param {Boolean} [decodePrefixes] - initializer for {@link\n * Structure#decodePrefixes|property}.\n *\n * @throws {Error} - if `fields` contains an unnamed variable-length\n * layout.\n *\n * @augments {Layout}\n */\nclass Structure extends Layout {\n    constructor(fields, property, decodePrefixes) {\n        if (!(Array.isArray(fields)\n            && fields.reduce((acc, v) => acc && (v instanceof Layout), true))) {\n            throw new TypeError('fields must be array of Layout instances');\n        }\n        if (('boolean' === typeof property)\n            && (undefined === decodePrefixes)) {\n            decodePrefixes = property;\n            property = undefined;\n        }\n        /* Verify absence of unnamed variable-length fields. */\n        for (const fd of fields) {\n            if ((0 > fd.span)\n                && (undefined === fd.property)) {\n                throw new Error('fields cannot contain unnamed variable-length layout');\n            }\n        }\n        let span = -1;\n        try {\n            span = fields.reduce((span, fd) => span + fd.getSpan(), 0);\n        }\n        catch (e) {\n            // ignore error\n        }\n        super(span, property);\n        /** The sequence of {@link Layout} values that comprise the\n         * structure.\n         *\n         * The individual elements need not be the same type, and may be\n         * either scalar or aggregate layouts.  If a member layout leaves\n         * its {@link Layout#property|property} undefined the\n         * corresponding region of the buffer associated with the element\n         * will not be mutated.\n         *\n         * @type {Layout[]} */\n        this.fields = fields;\n        /** Control behavior of {@link Layout#decode|decode()} given short\n         * buffers.\n         *\n         * In some situations a structure many be extended with additional\n         * fields over time, with older installations providing only a\n         * prefix of the full structure.  If this property is `true`\n         * decoding will accept those buffers and leave subsequent fields\n         * undefined, as long as the buffer ends at a field boundary.\n         * Defaults to `false`. */\n        this.decodePrefixes = !!decodePrefixes;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        let span = 0;\n        try {\n            span = this.fields.reduce((span, fd) => {\n                const fsp = fd.getSpan(b, offset);\n                offset += fsp;\n                return span + fsp;\n            }, 0);\n        }\n        catch (e) {\n            throw new RangeError('indeterminate span');\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        checkUint8Array(b);\n        const dest = this.makeDestinationObject();\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                dest[fd.property] = fd.decode(b, offset);\n            }\n            offset += fd.getSpan(b, offset);\n            if (this.decodePrefixes\n                && (b.length === offset)) {\n                break;\n            }\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Structure}.\n     *\n     * If `src` is missing a property for a member with a defined {@link\n     * Layout#property|property} the corresponding region of the buffer is\n     * left unmodified. */\n    encode(src, b, offset = 0) {\n        const firstOffset = offset;\n        let lastOffset = 0;\n        let lastWrote = 0;\n        for (const fd of this.fields) {\n            let span = fd.span;\n            lastWrote = (0 < span) ? span : 0;\n            if (undefined !== fd.property) {\n                const fv = src[fd.property];\n                if (undefined !== fv) {\n                    lastWrote = fd.encode(fv, b, offset);\n                    if (0 > span) {\n                        /* Read the as-encoded span, which is not necessarily the\n                         * same as what we wrote. */\n                        span = fd.getSpan(b, offset);\n                    }\n                }\n            }\n            lastOffset = offset;\n            offset += span;\n        }\n        /* Use (lastOffset + lastWrote) instead of offset because the last\n         * item may have had a dynamic length and we don't want to include\n         * the padding between it and the end of the space reserved for\n         * it. */\n        return (lastOffset + lastWrote) - firstOffset;\n    }\n    /** @override */\n    fromArray(values) {\n        const dest = this.makeDestinationObject();\n        for (const fd of this.fields) {\n            if ((undefined !== fd.property)\n                && (0 < values.length)) {\n                dest[fd.property] = values.shift();\n            }\n        }\n        return dest;\n    }\n    /**\n     * Get access to the layout of a given property.\n     *\n     * @param {String} property - the structure member of interest.\n     *\n     * @return {Layout} - the layout associated with `property`, or\n     * undefined if there is no such property.\n     */\n    layoutFor(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return fd;\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Get the offset of a structure member.\n     *\n     * @param {String} property - the structure member of interest.\n     *\n     * @return {Number} - the offset in bytes to the start of `property`\n     * within the structure, or undefined if `property` is not a field\n     * within the structure.  If the property is a member but follows a\n     * variable-length structure member a negative number will be\n     * returned.\n     */\n    offsetOf(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        let offset = 0;\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return offset;\n            }\n            if (0 > fd.span) {\n                offset = -1;\n            }\n            else if (0 <= offset) {\n                offset += fd.span;\n            }\n        }\n        return undefined;\n    }\n}\nexports.Structure = Structure;\n/**\n * An object that can provide a {@link\n * Union#discriminator|discriminator} API for {@link Union}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * UnionDiscriminator#encode|encode} or {@link\n * UnionDiscriminator#decode|decode} functions.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}.\n *\n * @abstract\n */\nclass UnionDiscriminator {\n    constructor(property) {\n        /** The {@link Layout#property|property} to be used when the\n         * discriminator is referenced in isolation (generally when {@link\n         * Union#decode|Union decode} cannot delegate to a specific\n         * variant). */\n        this.property = property;\n    }\n    /** Analog to {@link Layout#decode|Layout decode} for union discriminators.\n     *\n     * The implementation of this method need not reference the buffer if\n     * variant information is available through other means. */\n    decode(b, offset) {\n        throw new Error('UnionDiscriminator is abstract');\n    }\n    /** Analog to {@link Layout#decode|Layout encode} for union discriminators.\n     *\n     * The implementation of this method need not store the value if\n     * variant information is maintained through other means. */\n    encode(src, b, offset) {\n        throw new Error('UnionDiscriminator is abstract');\n    }\n}\nexports.UnionDiscriminator = UnionDiscriminator;\n/**\n * An object that can provide a {@link\n * UnionDiscriminator|discriminator API} for {@link Union} using an\n * unsigned integral {@link Layout} instance located either inside or\n * outside the union.\n *\n * @param {ExternalLayout} layout - initializes {@link\n * UnionLayoutDiscriminator#layout|layout}.  Must satisfy {@link\n * ExternalLayout#isCount|isCount()}.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}, superseding the property\n * from `layout`, but defaulting to `variant` if neither `property`\n * nor layout provide a property name.\n *\n * @augments {UnionDiscriminator}\n */\nclass UnionLayoutDiscriminator extends UnionDiscriminator {\n    constructor(layout, property) {\n        if (!((layout instanceof ExternalLayout)\n            && layout.isCount())) {\n            throw new TypeError('layout must be an unsigned integer ExternalLayout');\n        }\n        super(property || layout.property || 'variant');\n        /** The {@link ExternalLayout} used to access the discriminator\n         * value. */\n        this.layout = layout;\n    }\n    /** Delegate decoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n    decode(b, offset) {\n        return this.layout.decode(b, offset);\n    }\n    /** Delegate encoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n    encode(src, b, offset) {\n        return this.layout.encode(src, b, offset);\n    }\n}\nexports.UnionLayoutDiscriminator = UnionLayoutDiscriminator;\n/**\n * Represent any number of span-compatible layouts.\n *\n * *Factory*: {@link module:Layout.union|union}\n *\n * If the union has a {@link Union#defaultLayout|default layout} that\n * layout must have a non-negative {@link Layout#span|span}.  The span\n * of a fixed-span union includes its {@link\n * Union#discriminator|discriminator} if the variant is a {@link\n * Union#usesPrefixDiscriminator|prefix of the union}, plus the span\n * of its {@link Union#defaultLayout|default layout}.\n *\n * If the union does not have a default layout then the encoded span\n * of the union depends on the encoded span of its variant (which may\n * be fixed or variable).\n *\n * {@link VariantLayout#layout|Variant layout}s are added through\n * {@link Union#addVariant|addVariant}.  If the union has a default\n * layout, the span of the {@link VariantLayout#layout|layout\n * contained by the variant} must not exceed the span of the {@link\n * Union#defaultLayout|default layout} (minus the span of a {@link\n * Union#usesPrefixDiscriminator|prefix disriminator}, if used).  The\n * span of the variant will equal the span of the union itself.\n *\n * The variant for a buffer can only be identified from the {@link\n * Union#discriminator|discriminator} {@link\n * UnionDiscriminator#property|property} (in the case of the {@link\n * Union#defaultLayout|default layout}), or by using {@link\n * Union#getVariant|getVariant} and examining the resulting {@link\n * VariantLayout} instance.\n *\n * A variant compatible with a JavaScript object can be identified\n * using {@link Union#getSourceVariant|getSourceVariant}.\n *\n * @param {(UnionDiscriminator|ExternalLayout|Layout)} discr - How to\n * identify the layout used to interpret the union contents.  The\n * parameter must be an instance of {@link UnionDiscriminator}, an\n * {@link ExternalLayout} that satisfies {@link\n * ExternalLayout#isCount|isCount()}, or {@link UInt} (or {@link\n * UIntBE}).  When a non-external layout element is passed the layout\n * appears at the start of the union.  In all cases the (synthesized)\n * {@link UnionDiscriminator} instance is recorded as {@link\n * Union#discriminator|discriminator}.\n *\n * @param {(Layout|null)} defaultLayout - initializer for {@link\n * Union#defaultLayout|defaultLayout}.  If absent defaults to `null`.\n * If `null` there is no default layout: the union has data-dependent\n * length and attempts to decode or encode unrecognized variants will\n * throw an exception.  A {@link Layout} instance must have a\n * non-negative {@link Layout#span|span}, and if it lacks a {@link\n * Layout#property|property} the {@link\n * Union#defaultLayout|defaultLayout} will be a {@link\n * Layout#replicate|replica} with property `content`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Union extends Layout {\n    constructor(discr, defaultLayout, property) {\n        let discriminator;\n        if ((discr instanceof UInt)\n            || (discr instanceof UIntBE)) {\n            discriminator = new UnionLayoutDiscriminator(new OffsetLayout(discr));\n        }\n        else if ((discr instanceof ExternalLayout)\n            && discr.isCount()) {\n            discriminator = new UnionLayoutDiscriminator(discr);\n        }\n        else if (!(discr instanceof UnionDiscriminator)) {\n            throw new TypeError('discr must be a UnionDiscriminator '\n                + 'or an unsigned integer layout');\n        }\n        else {\n            discriminator = discr;\n        }\n        if (undefined === defaultLayout) {\n            defaultLayout = null;\n        }\n        if (!((null === defaultLayout)\n            || (defaultLayout instanceof Layout))) {\n            throw new TypeError('defaultLayout must be null or a Layout');\n        }\n        if (null !== defaultLayout) {\n            if (0 > defaultLayout.span) {\n                throw new Error('defaultLayout must have constant span');\n            }\n            if (undefined === defaultLayout.property) {\n                defaultLayout = defaultLayout.replicate('content');\n            }\n        }\n        /* The union span can be estimated only if there's a default\n         * layout.  The union spans its default layout, plus any prefix\n         * variant layout.  By construction both layouts, if present, have\n         * non-negative span. */\n        let span = -1;\n        if (defaultLayout) {\n            span = defaultLayout.span;\n            if ((0 <= span) && ((discr instanceof UInt)\n                || (discr instanceof UIntBE))) {\n                span += discriminator.layout.span;\n            }\n        }\n        super(span, property);\n        /** The interface for the discriminator value in isolation.\n         *\n         * This a {@link UnionDiscriminator} either passed to the\n         * constructor or synthesized from the `discr` constructor\n         * argument.  {@link\n         * Union#usesPrefixDiscriminator|usesPrefixDiscriminator} will be\n         * `true` iff the `discr` parameter was a non-offset {@link\n         * Layout} instance. */\n        this.discriminator = discriminator;\n        /** `true` if the {@link Union#discriminator|discriminator} is the\n         * first field in the union.\n         *\n         * If `false` the discriminator is obtained from somewhere\n         * else. */\n        this.usesPrefixDiscriminator = (discr instanceof UInt)\n            || (discr instanceof UIntBE);\n        /** The layout for non-discriminator content when the value of the\n         * discriminator is not recognized.\n         *\n         * This is the value passed to the constructor.  It is\n         * structurally equivalent to the second component of {@link\n         * Union#layout|layout} but may have a different property\n         * name. */\n        this.defaultLayout = defaultLayout;\n        /** A registry of allowed variants.\n         *\n         * The keys are unsigned integers which should be compatible with\n         * {@link Union.discriminator|discriminator}.  The property value\n         * is the corresponding {@link VariantLayout} instances assigned\n         * to this union by {@link Union#addVariant|addVariant}.\n         *\n         * **NOTE** The registry remains mutable so that variants can be\n         * {@link Union#addVariant|added} at any time.  Users should not\n         * manipulate the content of this property. */\n        this.registry = {};\n        /* Private variable used when invoking getSourceVariant */\n        let boundGetSourceVariant = this.defaultGetSourceVariant.bind(this);\n        /** Function to infer the variant selected by a source object.\n         *\n         * Defaults to {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant} but may\n         * be overridden using {@link\n         * Union#configGetSourceVariant|configGetSourceVariant}.\n         *\n         * @param {Object} src - as with {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n         *\n         * @returns {(undefined|VariantLayout)} The default variant\n         * (`undefined`) or first registered variant that uses a property\n         * available in `src`. */\n        this.getSourceVariant = function (src) {\n            return boundGetSourceVariant(src);\n        };\n        /** Function to override the implementation of {@link\n         * Union#getSourceVariant|getSourceVariant}.\n         *\n         * Use this if the desired variant cannot be identified using the\n         * algorithm of {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n         *\n         * **NOTE** The provided function will be invoked bound to this\n         * Union instance, providing local access to {@link\n         * Union#registry|registry}.\n         *\n         * @param {Function} gsv - a function that follows the API of\n         * {@link Union#defaultGetSourceVariant|defaultGetSourceVariant}. */\n        this.configGetSourceVariant = function (gsv) {\n            boundGetSourceVariant = gsv.bind(this);\n        };\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        /* Default layouts always have non-negative span, so we don't have\n         * one and we have to recognize the variant which will in turn\n         * determine the span. */\n        const vlo = this.getVariant(b, offset);\n        if (!vlo) {\n            throw new Error('unable to determine span for unrecognized variant');\n        }\n        return vlo.getSpan(b, offset);\n    }\n    /**\n     * Method to infer a registered Union variant compatible with `src`.\n     *\n     * The first satisfied rule in the following sequence defines the\n     * return value:\n     * * If `src` has properties matching the Union discriminator and\n     *   the default layout, `undefined` is returned regardless of the\n     *   value of the discriminator property (this ensures the default\n     *   layout will be used);\n     * * If `src` has a property matching the Union discriminator, the\n     *   value of the discriminator identifies a registered variant, and\n     *   either (a) the variant has no layout, or (b) `src` has the\n     *   variant's property, then the variant is returned (because the\n     *   source satisfies the constraints of the variant it identifies);\n     * * If `src` does not have a property matching the Union\n     *   discriminator, but does have a property matching a registered\n     *   variant, then the variant is returned (because the source\n     *   matches a variant without an explicit conflict);\n     * * An error is thrown (because we either can't identify a variant,\n     *   or we were explicitly told the variant but can't satisfy it).\n     *\n     * @param {Object} src - an object presumed to be compatible with\n     * the content of the Union.\n     *\n     * @return {(undefined|VariantLayout)} - as described above.\n     *\n     * @throws {Error} - if `src` cannot be associated with a default or\n     * registered variant.\n     */\n    defaultGetSourceVariant(src) {\n        if (Object.prototype.hasOwnProperty.call(src, this.discriminator.property)) {\n            if (this.defaultLayout && this.defaultLayout.property\n                && Object.prototype.hasOwnProperty.call(src, this.defaultLayout.property)) {\n                return undefined;\n            }\n            const vlo = this.registry[src[this.discriminator.property]];\n            if (vlo\n                && ((!vlo.layout)\n                    || (vlo.property && Object.prototype.hasOwnProperty.call(src, vlo.property)))) {\n                return vlo;\n            }\n        }\n        else {\n            for (const tag in this.registry) {\n                const vlo = this.registry[tag];\n                if (vlo.property && Object.prototype.hasOwnProperty.call(src, vlo.property)) {\n                    return vlo;\n                }\n            }\n        }\n        throw new Error('unable to infer src variant');\n    }\n    /** Implement {@link Layout#decode|decode} for {@link Union}.\n     *\n     * If the variant is {@link Union#addVariant|registered} the return\n     * value is an instance of that variant, with no explicit\n     * discriminator.  Otherwise the {@link Union#defaultLayout|default\n     * layout} is used to decode the content. */\n    decode(b, offset = 0) {\n        let dest;\n        const dlo = this.discriminator;\n        const discr = dlo.decode(b, offset);\n        const clo = this.registry[discr];\n        if (undefined === clo) {\n            const defaultLayout = this.defaultLayout;\n            let contentOffset = 0;\n            if (this.usesPrefixDiscriminator) {\n                contentOffset = dlo.layout.span;\n            }\n            dest = this.makeDestinationObject();\n            dest[dlo.property] = discr;\n            // defaultLayout.property can be undefined, but this is allowed by buffer-layout\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            dest[defaultLayout.property] = defaultLayout.decode(b, offset + contentOffset);\n        }\n        else {\n            dest = clo.decode(b, offset);\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Union}.\n     *\n     * This API assumes the `src` object is consistent with the union's\n     * {@link Union#defaultLayout|default layout}.  To encode variants\n     * use the appropriate variant-specific {@link VariantLayout#encode}\n     * method. */\n    encode(src, b, offset = 0) {\n        const vlo = this.getSourceVariant(src);\n        if (undefined === vlo) {\n            const dlo = this.discriminator;\n            // this.defaultLayout is not undefined when vlo is undefined\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const clo = this.defaultLayout;\n            let contentOffset = 0;\n            if (this.usesPrefixDiscriminator) {\n                contentOffset = dlo.layout.span;\n            }\n            dlo.encode(src[dlo.property], b, offset);\n            // clo.property is not undefined when vlo is undefined\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return contentOffset + clo.encode(src[clo.property], b, offset + contentOffset);\n        }\n        return vlo.encode(src, b, offset);\n    }\n    /** Register a new variant structure within a union.  The newly\n     * created variant is returned.\n     *\n     * @param {Number} variant - initializer for {@link\n     * VariantLayout#variant|variant}.\n     *\n     * @param {Layout} layout - initializer for {@link\n     * VariantLayout#layout|layout}.\n     *\n     * @param {String} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {VariantLayout} */\n    addVariant(variant, layout, property) {\n        const rv = new VariantLayout(this, variant, layout, property);\n        this.registry[variant] = rv;\n        return rv;\n    }\n    /**\n     * Get the layout associated with a registered variant.\n     *\n     * If `vb` does not produce a registered variant the function returns\n     * `undefined`.\n     *\n     * @param {(Number|Uint8Array)} vb - either the variant number, or a\n     * buffer from which the discriminator is to be read.\n     *\n     * @param {Number} offset - offset into `vb` for the start of the\n     * union.  Used only when `vb` is an instance of {Uint8Array}.\n     *\n     * @return {({VariantLayout}|undefined)}\n     */\n    getVariant(vb, offset = 0) {\n        let variant;\n        if (vb instanceof Uint8Array) {\n            variant = this.discriminator.decode(vb, offset);\n        }\n        else {\n            variant = vb;\n        }\n        return this.registry[variant];\n    }\n}\nexports.Union = Union;\n/**\n * Represent a specific variant within a containing union.\n *\n * **NOTE** The {@link Layout#span|span} of the variant may include\n * the span of the {@link Union#discriminator|discriminator} used to\n * identify it, but values read and written using the variant strictly\n * conform to the content of {@link VariantLayout#layout|layout}.\n *\n * **NOTE** User code should not invoke this constructor directly.  Use\n * the union {@link Union#addVariant|addVariant} helper method.\n *\n * @param {Union} union - initializer for {@link\n * VariantLayout#union|union}.\n *\n * @param {Number} variant - initializer for {@link\n * VariantLayout#variant|variant}.\n *\n * @param {Layout} [layout] - initializer for {@link\n * VariantLayout#layout|layout}.  If absent the variant carries no\n * data.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.  Unlike many other layouts, variant\n * layouts normally include a property name so they can be identified\n * within their containing {@link Union}.  The property identifier may\n * be absent only if `layout` is is absent.\n *\n * @augments {Layout}\n */\nclass VariantLayout extends Layout {\n    constructor(union, variant, layout, property) {\n        if (!(union instanceof Union)) {\n            throw new TypeError('union must be a Union');\n        }\n        if ((!Number.isInteger(variant)) || (0 > variant)) {\n            throw new TypeError('variant must be a (non-negative) integer');\n        }\n        if (('string' === typeof layout)\n            && (undefined === property)) {\n            property = layout;\n            layout = null;\n        }\n        if (layout) {\n            if (!(layout instanceof Layout)) {\n                throw new TypeError('layout must be a Layout');\n            }\n            if ((null !== union.defaultLayout)\n                && (0 <= layout.span)\n                && (layout.span > union.defaultLayout.span)) {\n                throw new Error('variant span exceeds span of containing union');\n            }\n            if ('string' !== typeof property) {\n                throw new TypeError('variant must have a String property');\n            }\n        }\n        let span = union.span;\n        if (0 > union.span) {\n            span = layout ? layout.span : 0;\n            if ((0 <= span) && union.usesPrefixDiscriminator) {\n                span += union.discriminator.layout.span;\n            }\n        }\n        super(span, property);\n        /** The {@link Union} to which this variant belongs. */\n        this.union = union;\n        /** The unsigned integral value identifying this variant within\n         * the {@link Union#discriminator|discriminator} of the containing\n         * union. */\n        this.variant = variant;\n        /** The {@link Layout} to be used when reading/writing the\n         * non-discriminator part of the {@link\n         * VariantLayout#union|union}.  If `null` the variant carries no\n         * data. */\n        this.layout = layout || null;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            /* Will be equal to the containing union span if that is not\n             * variable. */\n            return this.span;\n        }\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        /* Span is defined solely by the variant (and prefix discriminator) */\n        let span = 0;\n        if (this.layout) {\n            span = this.layout.getSpan(b, offset + contentOffset);\n        }\n        return contentOffset + span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const dest = this.makeDestinationObject();\n        if (this !== this.union.getVariant(b, offset)) {\n            throw new Error('variant mismatch');\n        }\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        if (this.layout) {\n            dest[this.property] = this.layout.decode(b, offset + contentOffset);\n        }\n        else if (this.property) {\n            dest[this.property] = true;\n        }\n        else if (this.union.usesPrefixDiscriminator) {\n            dest[this.union.discriminator.property] = this.variant;\n        }\n        return dest;\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        if (this.layout\n            && (!Object.prototype.hasOwnProperty.call(src, this.property))) {\n            throw new TypeError('variant lacks property ' + this.property);\n        }\n        this.union.discriminator.encode(this.variant, b, offset);\n        let span = contentOffset;\n        if (this.layout) {\n            this.layout.encode(src[this.property], b, offset + contentOffset);\n            span += this.layout.getSpan(b, offset + contentOffset);\n            if ((0 <= this.union.span)\n                && (span > this.union.span)) {\n                throw new Error('encoded variant overruns containing union');\n            }\n        }\n        return span;\n    }\n    /** Delegate {@link Layout#fromArray|fromArray} to {@link\n     * VariantLayout#layout|layout}. */\n    fromArray(values) {\n        if (this.layout) {\n            return this.layout.fromArray(values);\n        }\n        return undefined;\n    }\n}\nexports.VariantLayout = VariantLayout;\n/** JavaScript chose to define bitwise operations as operating on\n * signed 32-bit values in 2's complement form, meaning any integer\n * with bit 31 set is going to look negative.  For right shifts that's\n * not a problem, because `>>>` is a logical shift, but for every\n * other bitwise operator we have to compensate for possible negative\n * results. */\nfunction fixBitwiseResult(v) {\n    if (0 > v) {\n        v += 0x100000000;\n    }\n    return v;\n}\n/**\n * Contain a sequence of bit fields as an unsigned integer.\n *\n * *Factory*: {@link module:Layout.bits|bits}\n *\n * This is a container element; within it there are {@link BitField}\n * instances that provide the extracted properties.  The container\n * simply defines the aggregate representation and its bit ordering.\n * The representation is an object containing properties with numeric\n * or {@link Boolean} values.\n *\n * {@link BitField}s are added with the {@link\n * BitStructure#addField|addField} and {@link\n * BitStructure#addBoolean|addBoolean} methods.\n\n * @param {Layout} word - initializer for {@link\n * BitStructure#word|word}.  The parameter must be an instance of\n * {@link UInt} (or {@link UIntBE}) that is no more than 4 bytes wide.\n *\n * @param {bool} [msb] - `true` if the bit numbering starts at the\n * most significant bit of the containing word; `false` (default) if\n * it starts at the least significant bit of the containing word.  If\n * the parameter at this position is a string and `property` is\n * `undefined` the value of this argument will instead be used as the\n * value of `property`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass BitStructure extends Layout {\n    constructor(word, msb, property) {\n        if (!((word instanceof UInt)\n            || (word instanceof UIntBE))) {\n            throw new TypeError('word must be a UInt or UIntBE layout');\n        }\n        if (('string' === typeof msb)\n            && (undefined === property)) {\n            property = msb;\n            msb = false;\n        }\n        if (4 < word.span) {\n            throw new RangeError('word cannot exceed 32 bits');\n        }\n        super(word.span, property);\n        /** The layout used for the packed value.  {@link BitField}\n         * instances are packed sequentially depending on {@link\n         * BitStructure#msb|msb}. */\n        this.word = word;\n        /** Whether the bit sequences are packed starting at the most\n         * significant bit growing down (`true`), or the least significant\n         * bit growing up (`false`).\n         *\n         * **NOTE** Regardless of this value, the least significant bit of\n         * any {@link BitField} value is the least significant bit of the\n         * corresponding section of the packed value. */\n        this.msb = !!msb;\n        /** The sequence of {@link BitField} layouts that comprise the\n         * packed structure.\n         *\n         * **NOTE** The array remains mutable to allow fields to be {@link\n         * BitStructure#addField|added} after construction.  Users should\n         * not manipulate the content of this property.*/\n        this.fields = [];\n        /* Storage for the value.  Capture a variable instead of using an\n         * instance property because we don't want anything to change the\n         * value without going through the mutator. */\n        let value = 0;\n        this._packedSetValue = function (v) {\n            value = fixBitwiseResult(v);\n            return this;\n        };\n        this._packedGetValue = function () {\n            return value;\n        };\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const dest = this.makeDestinationObject();\n        const value = this.word.decode(b, offset);\n        this._packedSetValue(value);\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                dest[fd.property] = fd.decode(b);\n            }\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link BitStructure}.\n     *\n     * If `src` is missing a property for a member with a defined {@link\n     * Layout#property|property} the corresponding region of the packed\n     * value is left unmodified.  Unused bits are also left unmodified. */\n    encode(src, b, offset = 0) {\n        const value = this.word.decode(b, offset);\n        this._packedSetValue(value);\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                const fv = src[fd.property];\n                if (undefined !== fv) {\n                    fd.encode(fv);\n                }\n            }\n        }\n        return this.word.encode(this._packedGetValue(), b, offset);\n    }\n    /** Register a new bitfield with a containing bit structure.  The\n     * resulting bitfield is returned.\n     *\n     * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n     *\n     * @param {string} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {BitField} */\n    addField(bits, property) {\n        const bf = new BitField(this, bits, property);\n        this.fields.push(bf);\n        return bf;\n    }\n    /** As with {@link BitStructure#addField|addField} for single-bit\n     * fields with `boolean` value representation.\n     *\n     * @param {string} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {Boolean} */\n    // `Boolean` conflicts with the native primitive type\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    addBoolean(property) {\n        // This is my Boolean, not the Javascript one.\n        const bf = new Boolean(this, property);\n        this.fields.push(bf);\n        return bf;\n    }\n    /**\n     * Get access to the bit field for a given property.\n     *\n     * @param {String} property - the bit field of interest.\n     *\n     * @return {BitField} - the field associated with `property`, or\n     * undefined if there is no such property.\n     */\n    fieldFor(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return fd;\n            }\n        }\n        return undefined;\n    }\n}\nexports.BitStructure = BitStructure;\n/**\n * Represent a sequence of bits within a {@link BitStructure}.\n *\n * All bit field values are represented as unsigned integers.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addField|addField} helper\n * method.\n *\n * **NOTE** BitField instances are not instances of {@link Layout}\n * since {@link Layout#span|span} measures 8-bit units.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n */\nclass BitField {\n    constructor(container, bits, property) {\n        if (!(container instanceof BitStructure)) {\n            throw new TypeError('container must be a BitStructure');\n        }\n        if ((!Number.isInteger(bits)) || (0 >= bits)) {\n            throw new TypeError('bits must be positive integer');\n        }\n        const totalBits = 8 * container.span;\n        const usedBits = container.fields.reduce((sum, fd) => sum + fd.bits, 0);\n        if ((bits + usedBits) > totalBits) {\n            throw new Error('bits too long for span remainder ('\n                + (totalBits - usedBits) + ' of '\n                + totalBits + ' remain)');\n        }\n        /** The {@link BitStructure} instance to which this bit field\n         * belongs. */\n        this.container = container;\n        /** The span of this value in bits. */\n        this.bits = bits;\n        /** A mask of {@link BitField#bits|bits} bits isolating value bits\n         * that fit within the field.\n         *\n         * That is, it masks a value that has not yet been shifted into\n         * position within its containing packed integer. */\n        this.valueMask = (1 << bits) - 1;\n        if (32 === bits) { // shifted value out of range\n            this.valueMask = 0xFFFFFFFF;\n        }\n        /** The offset of the value within the containing packed unsigned\n         * integer.  The least significant bit of the packed value is at\n         * offset zero, regardless of bit ordering used. */\n        this.start = usedBits;\n        if (this.container.msb) {\n            this.start = totalBits - usedBits - bits;\n        }\n        /** A mask of {@link BitField#bits|bits} isolating the field value\n         * within the containing packed unsigned integer. */\n        this.wordMask = fixBitwiseResult(this.valueMask << this.start);\n        /** The property name used when this bitfield is represented in an\n         * Object.\n         *\n         * Intended to be functionally equivalent to {@link\n         * Layout#property}.\n         *\n         * If left undefined the corresponding span of bits will be\n         * treated as padding: it will not be mutated by {@link\n         * Layout#encode|encode} nor represented as a property in the\n         * decoded Object. */\n        this.property = property;\n    }\n    /** Store a value into the corresponding subsequence of the containing\n     * bit field. */\n    decode(b, offset) {\n        const word = this.container._packedGetValue();\n        const wordValue = fixBitwiseResult(word & this.wordMask);\n        const value = wordValue >>> this.start;\n        return value;\n    }\n    /** Store a value into the corresponding subsequence of the containing\n     * bit field.\n     *\n     * **NOTE** This is not a specialization of {@link\n     * Layout#encode|Layout.encode} and there is no return value. */\n    encode(value) {\n        if ('number' !== typeof value\n            || !Number.isInteger(value)\n            || (value !== fixBitwiseResult(value & this.valueMask))) {\n            throw new TypeError(nameWithProperty('BitField.encode', this)\n                + ' value must be integer not exceeding ' + this.valueMask);\n        }\n        const word = this.container._packedGetValue();\n        const wordValue = fixBitwiseResult(value << this.start);\n        this.container._packedSetValue(fixBitwiseResult(word & ~this.wordMask)\n            | wordValue);\n    }\n}\nexports.BitField = BitField;\n/**\n * Represent a single bit within a {@link BitStructure} as a\n * JavaScript boolean.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addBoolean|addBoolean} helper\n * method.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {BitField}\n */\n/* eslint-disable no-extend-native */\nclass Boolean extends BitField {\n    constructor(container, property) {\n        super(container, 1, property);\n    }\n    /** Override {@link BitField#decode|decode} for {@link Boolean|Boolean}.\n     *\n     * @returns {boolean} */\n    decode(b, offset) {\n        return !!super.decode(b, offset);\n    }\n    /** @override */\n    encode(value) {\n        if ('boolean' === typeof value) {\n            // BitField requires integer values\n            value = +value;\n        }\n        super.encode(value);\n    }\n}\nexports.Boolean = Boolean;\n/* eslint-enable no-extend-native */\n/**\n * Contain a fixed-length block of arbitrary data, represented as a\n * Uint8Array.\n *\n * *Factory*: {@link module:Layout.blob|blob}\n *\n * @param {(Number|ExternalLayout)} length - initializes {@link\n * Blob#length|length}.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Blob extends Layout {\n    constructor(length, property) {\n        if (!(((length instanceof ExternalLayout) && length.isCount())\n            || (Number.isInteger(length) && (0 <= length)))) {\n            throw new TypeError('length must be positive integer '\n                + 'or an unsigned integer ExternalLayout');\n        }\n        let span = -1;\n        if (!(length instanceof ExternalLayout)) {\n            span = length;\n        }\n        super(span, property);\n        /** The number of bytes in the blob.\n         *\n         * This may be a non-negative integer, or an instance of {@link\n         * ExternalLayout} that satisfies {@link\n         * ExternalLayout#isCount|isCount()}. */\n        this.length = length;\n    }\n    /** @override */\n    getSpan(b, offset) {\n        let span = this.span;\n        if (0 > span) {\n            span = this.length.decode(b, offset);\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        let span = this.span;\n        if (0 > span) {\n            span = this.length.decode(b, offset);\n        }\n        return uint8ArrayToBuffer(b).slice(offset, offset + span);\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Blob}.\n     *\n     * **NOTE** If {@link Layout#count|count} is an instance of {@link\n     * ExternalLayout} then the length of `src` will be encoded as the\n     * count after `src` is encoded. */\n    encode(src, b, offset) {\n        let span = this.length;\n        if (this.length instanceof ExternalLayout) {\n            span = src.length;\n        }\n        if (!(src instanceof Uint8Array && span === src.length)) {\n            throw new TypeError(nameWithProperty('Blob.encode', this)\n                + ' requires (length ' + span + ') Uint8Array as src');\n        }\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Uint8Array');\n        }\n        const srcBuffer = uint8ArrayToBuffer(src);\n        uint8ArrayToBuffer(b).write(srcBuffer.toString('hex'), offset, span, 'hex');\n        if (this.length instanceof ExternalLayout) {\n            this.length.encode(span, b, offset);\n        }\n        return span;\n    }\n}\nexports.Blob = Blob;\n/**\n * Contain a `NUL`-terminated UTF8 string.\n *\n * *Factory*: {@link module:Layout.cstr|cstr}\n *\n * **NOTE** Any UTF8 string that incorporates a zero-valued byte will\n * not be correctly decoded by this layout.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass CString extends Layout {\n    constructor(property) {\n        super(-1, property);\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        checkUint8Array(b);\n        let idx = offset;\n        while ((idx < b.length) && (0 !== b[idx])) {\n            idx += 1;\n        }\n        return 1 + idx - offset;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const span = this.getSpan(b, offset);\n        return uint8ArrayToBuffer(b).slice(offset, offset + span - 1).toString('utf-8');\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        /* Must force this to a string, lest it be a number and the\n         * \"utf8-encoding\" below actually allocate a buffer of length\n         * src */\n        if ('string' !== typeof src) {\n            src = String(src);\n        }\n        const srcb = buffer_1.Buffer.from(src, 'utf8');\n        const span = srcb.length;\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Buffer');\n        }\n        const buffer = uint8ArrayToBuffer(b);\n        srcb.copy(buffer, offset);\n        buffer[offset + span] = 0;\n        return span + 1;\n    }\n}\nexports.CString = CString;\n/**\n * Contain a UTF8 string with implicit length.\n *\n * *Factory*: {@link module:Layout.utf8|utf8}\n *\n * **NOTE** Because the length is implicit in the size of the buffer\n * this layout should be used only in isolation, or in a situation\n * where the length can be expressed by operating on a slice of the\n * containing buffer.\n *\n * @param {Number} [maxSpan] - the maximum length allowed for encoded\n * string content.  If not provided there is no bound on the allowed\n * content.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UTF8 extends Layout {\n    constructor(maxSpan, property) {\n        if (('string' === typeof maxSpan) && (undefined === property)) {\n            property = maxSpan;\n            maxSpan = undefined;\n        }\n        if (undefined === maxSpan) {\n            maxSpan = -1;\n        }\n        else if (!Number.isInteger(maxSpan)) {\n            throw new TypeError('maxSpan must be an integer');\n        }\n        super(-1, property);\n        /** The maximum span of the layout in bytes.\n         *\n         * Positive values are generally expected.  Zero is abnormal.\n         * Attempts to encode or decode a value that exceeds this length\n         * will throw a `RangeError`.\n         *\n         * A negative value indicates that there is no bound on the length\n         * of the content. */\n        this.maxSpan = maxSpan;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        checkUint8Array(b);\n        return b.length - offset;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const span = this.getSpan(b, offset);\n        if ((0 <= this.maxSpan)\n            && (this.maxSpan < span)) {\n            throw new RangeError('text length exceeds maxSpan');\n        }\n        return uint8ArrayToBuffer(b).slice(offset, offset + span).toString('utf-8');\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        /* Must force this to a string, lest it be a number and the\n         * \"utf8-encoding\" below actually allocate a buffer of length\n         * src */\n        if ('string' !== typeof src) {\n            src = String(src);\n        }\n        const srcb = buffer_1.Buffer.from(src, 'utf8');\n        const span = srcb.length;\n        if ((0 <= this.maxSpan)\n            && (this.maxSpan < span)) {\n            throw new RangeError('text length exceeds maxSpan');\n        }\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Buffer');\n        }\n        srcb.copy(uint8ArrayToBuffer(b), offset);\n        return span;\n    }\n}\nexports.UTF8 = UTF8;\n/**\n * Contain a constant value.\n *\n * This layout may be used in cases where a JavaScript value can be\n * inferred without an expression in the binary encoding.  An example\n * would be a {@link VariantLayout|variant layout} where the content\n * is implied by the union {@link Union#discriminator|discriminator}.\n *\n * @param {Object|Number|String} value - initializer for {@link\n * Constant#value|value}.  If the value is an object (or array) and\n * the application intends the object to remain unchanged regardless\n * of what is done to values decoded by this layout, the value should\n * be frozen prior passing it to this constructor.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Constant extends Layout {\n    constructor(value, property) {\n        super(0, property);\n        /** The value produced by this constant when the layout is {@link\n         * Constant#decode|decoded}.\n         *\n         * Any JavaScript value including `null` and `undefined` is\n         * permitted.\n         *\n         * **WARNING** If `value` passed in the constructor was not\n         * frozen, it is possible for users of decoded values to change\n         * the content of the value. */\n        this.value = value;\n    }\n    /** @override */\n    decode(b, offset) {\n        return this.value;\n    }\n    /** @override */\n    encode(src, b, offset) {\n        /* Constants take no space */\n        return 0;\n    }\n}\nexports.Constant = Constant;\n/** Factory for {@link GreedyCount}. */\nexports.greedy = ((elementSpan, property) => new GreedyCount(elementSpan, property));\n/** Factory for {@link OffsetLayout}. */\nexports.offset = ((layout, offset, property) => new OffsetLayout(layout, offset, property));\n/** Factory for {@link UInt|unsigned int layouts} spanning one\n * byte. */\nexports.u8 = ((property) => new UInt(1, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16 = ((property) => new UInt(2, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24 = ((property) => new UInt(3, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32 = ((property) => new UInt(4, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40 = ((property) => new UInt(5, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48 = ((property) => new UInt(6, property));\n/** Factory for {@link NearUInt64|little-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64 = ((property) => new NearUInt64(property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16be = ((property) => new UIntBE(2, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24be = ((property) => new UIntBE(3, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32be = ((property) => new UIntBE(4, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40be = ((property) => new UIntBE(5, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48be = ((property) => new UIntBE(6, property));\n/** Factory for {@link NearUInt64BE|big-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64be = ((property) => new NearUInt64BE(property));\n/** Factory for {@link Int|signed int layouts} spanning one\n * byte. */\nexports.s8 = ((property) => new Int(1, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning two bytes. */\nexports.s16 = ((property) => new Int(2, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning three bytes. */\nexports.s24 = ((property) => new Int(3, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning four bytes. */\nexports.s32 = ((property) => new Int(4, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning five bytes. */\nexports.s40 = ((property) => new Int(5, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning six bytes. */\nexports.s48 = ((property) => new Int(6, property));\n/** Factory for {@link NearInt64|little-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64 = ((property) => new NearInt64(property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning two bytes. */\nexports.s16be = ((property) => new IntBE(2, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning three bytes. */\nexports.s24be = ((property) => new IntBE(3, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning four bytes. */\nexports.s32be = ((property) => new IntBE(4, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning five bytes. */\nexports.s40be = ((property) => new IntBE(5, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning six bytes. */\nexports.s48be = ((property) => new IntBE(6, property));\n/** Factory for {@link NearInt64BE|big-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64be = ((property) => new NearInt64BE(property));\n/** Factory for {@link Float|little-endian 32-bit floating point} values. */\nexports.f32 = ((property) => new Float(property));\n/** Factory for {@link FloatBE|big-endian 32-bit floating point} values. */\nexports.f32be = ((property) => new FloatBE(property));\n/** Factory for {@link Double|little-endian 64-bit floating point} values. */\nexports.f64 = ((property) => new Double(property));\n/** Factory for {@link DoubleBE|big-endian 64-bit floating point} values. */\nexports.f64be = ((property) => new DoubleBE(property));\n/** Factory for {@link Structure} values. */\nexports.struct = ((fields, property, decodePrefixes) => new Structure(fields, property, decodePrefixes));\n/** Factory for {@link BitStructure} values. */\nexports.bits = ((word, msb, property) => new BitStructure(word, msb, property));\n/** Factory for {@link Sequence} values. */\nexports.seq = ((elementLayout, count, property) => new Sequence(elementLayout, count, property));\n/** Factory for {@link Union} values. */\nexports.union = ((discr, defaultLayout, property) => new Union(discr, defaultLayout, property));\n/** Factory for {@link UnionLayoutDiscriminator} values. */\nexports.unionLayoutDiscriminator = ((layout, property) => new UnionLayoutDiscriminator(layout, property));\n/** Factory for {@link Blob} values. */\nexports.blob = ((length, property) => new Blob(length, property));\n/** Factory for {@link CString} values. */\nexports.cstr = ((property) => new CString(property));\n/** Factory for {@link UTF8} values. */\nexports.utf8 = ((maxSpan, property) => new UTF8(maxSpan, property));\n/** Factory for {@link Constant} values. */\nexports.constant = ((value, property) => new Constant(value, property));\n//# sourceMappingURL=Layout.js.map","// src/codes.ts\nvar SOLANA_ERROR__BLOCK_HEIGHT_EXCEEDED = 1;\nvar SOLANA_ERROR__INVALID_NONCE = 2;\nvar SOLANA_ERROR__NONCE_ACCOUNT_NOT_FOUND = 3;\nvar SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE = 4;\nvar SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH = 5;\nvar SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE = 6;\nvar SOLANA_ERROR__MALFORMED_BIGINT_STRING = 7;\nvar SOLANA_ERROR__MALFORMED_NUMBER_STRING = 8;\nvar SOLANA_ERROR__TIMESTAMP_OUT_OF_RANGE = 9;\nvar SOLANA_ERROR__MALFORMED_JSON_RPC_ERROR = 10;\nvar SOLANA_ERROR__JSON_RPC__PARSE_ERROR = -32700;\nvar SOLANA_ERROR__JSON_RPC__INTERNAL_ERROR = -32603;\nvar SOLANA_ERROR__JSON_RPC__INVALID_PARAMS = -32602;\nvar SOLANA_ERROR__JSON_RPC__METHOD_NOT_FOUND = -32601;\nvar SOLANA_ERROR__JSON_RPC__INVALID_REQUEST = -32600;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED = -32016;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION = -32015;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET = -32014;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH = -32013;\nvar SOLANA_ERROR__JSON_RPC__SCAN_ERROR = -32012;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE = -32011;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX = -32010;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED = -32009;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NO_SNAPSHOT = -32008;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SLOT_SKIPPED = -32007;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE = -32006;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NODE_UNHEALTHY = -32005;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_NOT_AVAILABLE = -32004;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE = -32003;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE = -32002;\nvar SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_CLEANED_UP = -32001;\nvar SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH = 28e5;\nvar SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE = 2800001;\nvar SOLANA_ERROR__ADDRESSES__INVALID_BASE58_ENCODED_ADDRESS = 2800002;\nvar SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY = 2800003;\nvar SOLANA_ERROR__ADDRESSES__MALFORMED_PDA = 2800004;\nvar SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE = 2800005;\nvar SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED = 2800006;\nvar SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED = 2800007;\nvar SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE = 2800008;\nvar SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED = 2800009;\nvar SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER = 2800010;\nvar SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND = 323e4;\nvar SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND = 32300001;\nvar SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT = 3230002;\nvar SOLANA_ERROR__ACCOUNTS__EXPECTED_DECODED_ACCOUNT = 3230003;\nvar SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED = 3230004;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT = 361e4;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED = 3610001;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED = 3610002;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED = 3610003;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED = 3610004;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED = 3610005;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED = 3610006;\nvar SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY = 3610007;\nvar SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED = 3611e3;\nvar SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH = 3704e3;\nvar SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH = 3704001;\nvar SOLANA_ERROR__KEYS__INVALID_SIGNATURE_BYTE_LENGTH = 3704002;\nvar SOLANA_ERROR__KEYS__SIGNATURE_STRING_LENGTH_OUT_OF_RANGE = 3704003;\nvar SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY = 3704004;\nvar SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_ACCOUNTS = 4128e3;\nvar SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_DATA = 4128001;\nvar SOLANA_ERROR__INSTRUCTION__PROGRAM_ID_MISMATCH = 4128002;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__UNKNOWN = 4615e3;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__GENERIC_ERROR = 4615001;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ARGUMENT = 4615002;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_INSTRUCTION_DATA = 4615003;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_DATA = 4615004;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_TOO_SMALL = 4615005;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INSUFFICIENT_FUNDS = 4615006;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_PROGRAM_ID = 4615007;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_REQUIRED_SIGNATURE = 4615008;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_ALREADY_INITIALIZED = 4615009;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__UNINITIALIZED_ACCOUNT = 4615010;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__UNBALANCED_INSTRUCTION = 4615011;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MODIFIED_PROGRAM_ID = 4615012;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_LAMPORT_SPEND = 4615013;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_DATA_MODIFIED = 4615014;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_LAMPORT_CHANGE = 4615015;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_DATA_MODIFIED = 4615016;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_INDEX = 4615017;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_MODIFIED = 4615018;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__RENT_EPOCH_MODIFIED = 4615019;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__NOT_ENOUGH_ACCOUNT_KEYS = 4615020;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_SIZE_CHANGED = 4615021;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_EXECUTABLE = 4615022;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_FAILED = 4615023;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_OUTSTANDING = 4615024;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_OUT_OF_SYNC = 4615025;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM = 4615026;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ERROR = 4615027;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_DATA_MODIFIED = 4615028;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_LAMPORT_CHANGE = 4615029;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_ACCOUNT_NOT_RENT_EXEMPT = 4615030;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_PROGRAM_ID = 4615031;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__CALL_DEPTH = 4615032;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_ACCOUNT = 4615033;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__REENTRANCY_NOT_ALLOWED = 4615034;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MAX_SEED_LENGTH_EXCEEDED = 4615035;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_SEEDS = 4615036;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_REALLOC = 4615037;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__COMPUTATIONAL_BUDGET_EXCEEDED = 4615038;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__PRIVILEGE_ESCALATION = 4615039;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_ENVIRONMENT_SETUP_FAILURE = 4615040;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPLETE = 4615041;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPILE = 4615042;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__IMMUTABLE = 4615043;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_AUTHORITY = 4615044;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__BORSH_IO_ERROR = 4615045;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_RENT_EXEMPT = 4615046;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_OWNER = 4615047;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ARITHMETIC_OVERFLOW = 4615048;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_SYSVAR = 4615049;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__ILLEGAL_OWNER = 4615050;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_DATA_ALLOCATIONS_EXCEEDED = 4615051;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_EXCEEDED = 4615052;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__MAX_INSTRUCTION_TRACE_LENGTH_EXCEEDED = 4615053;\nvar SOLANA_ERROR__INSTRUCTION_ERROR__BUILTIN_PROGRAMS_MUST_CONSUME_COMPUTE_UNITS = 4615054;\nvar SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS = 5508e3;\nvar SOLANA_ERROR__SIGNER__EXPECTED_KEY_PAIR_SIGNER = 5508001;\nvar SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_SIGNER = 5508002;\nvar SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_MODIFYING_SIGNER = 5508003;\nvar SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_PARTIAL_SIGNER = 5508004;\nvar SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SIGNER = 5508005;\nvar SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_MODIFYING_SIGNER = 5508006;\nvar SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_PARTIAL_SIGNER = 5508007;\nvar SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SENDING_SIGNER = 5508008;\nvar SOLANA_ERROR__SIGNER__TRANSACTION_CANNOT_HAVE_MULTIPLE_SENDING_SIGNERS = 5508009;\nvar SOLANA_ERROR__SIGNER__TRANSACTION_SENDING_SIGNER_MISSING = 5508010;\nvar SOLANA_ERROR__SIGNER__WALLET_MULTISIGN_UNIMPLEMENTED = 5508011;\nvar SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES = 5663e3;\nvar SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE = 5663001;\nvar SOLANA_ERROR__TRANSACTION__EXPECTED_BLOCKHASH_LIFETIME = 5663002;\nvar SOLANA_ERROR__TRANSACTION__EXPECTED_NONCE_LIFETIME = 5663003;\nvar SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE = 5663004;\nvar SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING = 5663005;\nvar SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE = 5663006;\nvar SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND = 5663007;\nvar SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING = 5663008;\nvar SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING = 5663009;\nvar SOLANA_ERROR__TRANSACTION__ADDRESS_MISSING = 5663010;\nvar SOLANA_ERROR__TRANSACTION__FEE_PAYER_MISSING = 5663011;\nvar SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING = 5663012;\nvar SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_INSTRUCTIONS_MISSING = 5663013;\nvar SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_FIRST_INSTRUCTION_MUST_BE_ADVANCE_NONCE = 5663014;\nvar SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION = 5663015;\nvar SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES = 5663016;\nvar SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH = 5663017;\nvar SOLANA_ERROR__TRANSACTION__FAILED_TO_ESTIMATE_COMPUTE_LIMIT = 5663018;\nvar SOLANA_ERROR__TRANSACTION__FAILED_WHEN_SIMULATING_TO_ESTIMATE_COMPUTE_LIMIT = 5663019;\nvar SOLANA_ERROR__TRANSACTION_ERROR__UNKNOWN = 705e4;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_IN_USE = 7050001;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_LOADED_TWICE = 7050002;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_NOT_FOUND = 7050003;\nvar SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_ACCOUNT_NOT_FOUND = 7050004;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_FEE = 7050005;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_FOR_FEE = 7050006;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ALREADY_PROCESSED = 7050007;\nvar SOLANA_ERROR__TRANSACTION_ERROR__BLOCKHASH_NOT_FOUND = 7050008;\nvar SOLANA_ERROR__TRANSACTION_ERROR__CALL_CHAIN_TOO_DEEP = 7050009;\nvar SOLANA_ERROR__TRANSACTION_ERROR__MISSING_SIGNATURE_FOR_FEE = 7050010;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_INDEX = 7050011;\nvar SOLANA_ERROR__TRANSACTION_ERROR__SIGNATURE_FAILURE = 7050012;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_PROGRAM_FOR_EXECUTION = 7050013;\nvar SOLANA_ERROR__TRANSACTION_ERROR__SANITIZE_FAILURE = 7050014;\nvar SOLANA_ERROR__TRANSACTION_ERROR__CLUSTER_MAINTENANCE = 7050015;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_BORROW_OUTSTANDING = 7050016;\nvar SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_BLOCK_COST_LIMIT = 7050017;\nvar SOLANA_ERROR__TRANSACTION_ERROR__UNSUPPORTED_VERSION = 7050018;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_WRITABLE_ACCOUNT = 7050019;\nvar SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_ACCOUNT_COST_LIMIT = 7050020;\nvar SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_BLOCK_LIMIT = 7050021;\nvar SOLANA_ERROR__TRANSACTION_ERROR__TOO_MANY_ACCOUNT_LOCKS = 7050022;\nvar SOLANA_ERROR__TRANSACTION_ERROR__ADDRESS_LOOKUP_TABLE_NOT_FOUND = 7050023;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_OWNER = 7050024;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_DATA = 7050025;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_INDEX = 7050026;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_RENT_PAYING_ACCOUNT = 7050027;\nvar SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_VOTE_COST_LIMIT = 7050028;\nvar SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_TOTAL_LIMIT = 7050029;\nvar SOLANA_ERROR__TRANSACTION_ERROR__DUPLICATE_INSTRUCTION = 7050030;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_RENT = 7050031;\nvar SOLANA_ERROR__TRANSACTION_ERROR__MAX_LOADED_ACCOUNTS_DATA_SIZE_EXCEEDED = 7050032;\nvar SOLANA_ERROR__TRANSACTION_ERROR__INVALID_LOADED_ACCOUNTS_DATA_SIZE_LIMIT = 7050033;\nvar SOLANA_ERROR__TRANSACTION_ERROR__RESANITIZATION_NEEDED = 7050034;\nvar SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_EXECUTION_TEMPORARILY_RESTRICTED = 7050035;\nvar SOLANA_ERROR__TRANSACTION_ERROR__UNBALANCED_TRANSACTION = 7050036;\nvar SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY = 8078e3;\nvar SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH = 8078001;\nvar SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH = 8078002;\nvar SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH = 8078003;\nvar SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH = 8078004;\nvar SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH = 8078005;\nvar SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH = 8078006;\nvar SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS = 8078007;\nvar SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE = 8078008;\nvar SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT = 8078009;\nvar SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT = 8078010;\nvar SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE = 8078011;\nvar SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE = 8078012;\nvar SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH = 8078013;\nvar SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE = 8078014;\nvar SOLANA_ERROR__CODECS__INVALID_LITERAL_UNION_VARIANT = 8078015;\nvar SOLANA_ERROR__CODECS__LITERAL_UNION_DISCRIMINATOR_OUT_OF_RANGE = 8078016;\nvar SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE = 8078017;\nvar SOLANA_ERROR__CODECS__INVALID_CONSTANT = 8078018;\nvar SOLANA_ERROR__CODECS__EXPECTED_ZERO_VALUE_TO_MATCH_ITEM_FIXED_SIZE = 8078019;\nvar SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL = 8078020;\nvar SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES = 8078021;\nvar SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS = 8078022;\nvar SOLANA_ERROR__RPC__INTEGER_OVERFLOW = 81e5;\nvar SOLANA_ERROR__RPC__TRANSPORT_HTTP_HEADER_FORBIDDEN = 8100001;\nvar SOLANA_ERROR__RPC__TRANSPORT_HTTP_ERROR = 8100002;\nvar SOLANA_ERROR__RPC__API_PLAN_MISSING_FOR_RPC_METHOD = 8100003;\nvar SOLANA_ERROR__RPC_SUBSCRIPTIONS__CANNOT_CREATE_SUBSCRIPTION_PLAN = 819e4;\nvar SOLANA_ERROR__RPC_SUBSCRIPTIONS__EXPECTED_SERVER_SUBSCRIPTION_ID = 8190001;\nvar SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CLOSED_BEFORE_MESSAGE_BUFFERED = 8190002;\nvar SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CONNECTION_CLOSED = 8190003;\nvar SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_FAILED_TO_CONNECT = 8190004;\nvar SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_STATE_MISSING = 99e5;\nvar SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_MUST_NOT_POLL_BEFORE_RESOLVING_EXISTING_MESSAGE_PROMISE = 9900001;\nvar SOLANA_ERROR__INVARIANT_VIOLATION__CACHED_ABORTABLE_ITERABLE_CACHE_ENTRY_MISSING = 9900002;\nvar SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE = 9900003;\nvar SOLANA_ERROR__INVARIANT_VIOLATION__DATA_PUBLISHER_CHANNEL_UNIMPLEMENTED = 9900004;\n\n// src/context.ts\nfunction encodeValue(value) {\n  if (Array.isArray(value)) {\n    const commaSeparatedValues = value.map(encodeValue).join(\n      \"%2C%20\"\n      /* \", \" */\n    );\n    return \"%5B\" + commaSeparatedValues + /* \"]\" */\n    \"%5D\";\n  } else if (typeof value === \"bigint\") {\n    return `${value}n`;\n  } else {\n    return encodeURIComponent(\n      String(\n        value != null && Object.getPrototypeOf(value) === null ? (\n          // Plain objects with no prototype don't have a `toString` method.\n          // Convert them before stringifying them.\n          { ...value }\n        ) : value\n      )\n    );\n  }\n}\nfunction encodeObjectContextEntry([key, value]) {\n  return `${key}=${encodeValue(value)}`;\n}\nfunction encodeContextObject(context) {\n  const searchParamsString = Object.entries(context).map(encodeObjectContextEntry).join(\"&\");\n  return btoa(searchParamsString);\n}\n\n// src/messages.ts\nvar SolanaErrorMessages = {\n  [SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND]: \"Account not found at address: $address\",\n  [SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED]: \"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.\",\n  [SOLANA_ERROR__ACCOUNTS__EXPECTED_DECODED_ACCOUNT]: \"Expected decoded account at address: $address\",\n  [SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT]: \"Failed to decode account data at address: $address\",\n  [SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND]: \"Accounts not found at addresses: $addresses\",\n  [SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED]: \"Unable to find a viable program address bump seed.\",\n  [SOLANA_ERROR__ADDRESSES__INVALID_BASE58_ENCODED_ADDRESS]: \"$putativeAddress is not a base58-encoded address.\",\n  [SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH]: \"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.\",\n  [SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY]: \"The `CryptoKey` must be an `Ed25519` public key.\",\n  [SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE]: \"Invalid seeds; point must fall off the Ed25519 curve.\",\n  [SOLANA_ERROR__ADDRESSES__MALFORMED_PDA]: \"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].\",\n  [SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED]: \"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.\",\n  [SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED]: \"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.\",\n  [SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE]: \"Expected program derived address bump to be in the range [0, 255], got: $bump.\",\n  [SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER]: \"Program address cannot end with PDA marker.\",\n  [SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE]: \"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.\",\n  [SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE]: \"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.\",\n  [SOLANA_ERROR__BLOCK_HEIGHT_EXCEEDED]: \"The network has progressed past the last block for which this transaction could have been committed.\",\n  [SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY]: \"Codec [$codecDescription] cannot decode empty byte arrays.\",\n  [SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS]: \"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.\",\n  [SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL]: \"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].\",\n  [SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH]: \"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].\",\n  [SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH]: \"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].\",\n  [SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH]: \"Encoder and decoder must either both be fixed-size or variable-size.\",\n  [SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE]: \"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.\",\n  [SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH]: \"Expected a fixed-size codec, got a variable-size one.\",\n  [SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH]: \"Codec [$codecDescription] expected a positive byte length, got $bytesLength.\",\n  [SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH]: \"Expected a variable-size codec, got a fixed-size one.\",\n  [SOLANA_ERROR__CODECS__EXPECTED_ZERO_VALUE_TO_MATCH_ITEM_FIXED_SIZE]: \"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].\",\n  [SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH]: \"Codec [$codecDescription] expected $expected bytes, got $bytesLength.\",\n  [SOLANA_ERROR__CODECS__INVALID_CONSTANT]: \"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].\",\n  [SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT]: \"Invalid discriminated union variant. Expected one of [$variants], got $value.\",\n  [SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT]: \"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.\",\n  [SOLANA_ERROR__CODECS__INVALID_LITERAL_UNION_VARIANT]: \"Invalid literal union variant. Expected one of [$variants], got $value.\",\n  [SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS]: \"Expected [$codecDescription] to have $expected items, got $actual.\",\n  [SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE]: \"Invalid value $value for base $base with alphabet $alphabet.\",\n  [SOLANA_ERROR__CODECS__LITERAL_UNION_DISCRIMINATOR_OUT_OF_RANGE]: \"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.\",\n  [SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE]: \"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.\",\n  [SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE]: \"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.\",\n  [SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES]: \"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].\",\n  [SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE]: \"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.\",\n  [SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED]: \"No random values implementation could be found.\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_ALREADY_INITIALIZED]: \"instruction requires an uninitialized account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_FAILED]: \"instruction tries to borrow reference for an account which is already borrowed\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_OUTSTANDING]: \"instruction left account with an outstanding borrowed reference\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_SIZE_CHANGED]: \"program other than the account's owner changed the size of the account data\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_TOO_SMALL]: \"account data too small for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_EXECUTABLE]: \"instruction expected an executable account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_RENT_EXEMPT]: \"An account does not have enough lamports to be rent-exempt\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ARITHMETIC_OVERFLOW]: \"Program arithmetic overflowed\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__BORSH_IO_ERROR]: \"Failed to serialize or deserialize account data: $encodedData\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__BUILTIN_PROGRAMS_MUST_CONSUME_COMPUTE_UNITS]: \"Builtin programs must consume compute units\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__CALL_DEPTH]: \"Cross-program invocation call depth too deep\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__COMPUTATIONAL_BUDGET_EXCEEDED]: \"Computational budget exceeded\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM]: \"custom program error: #$code\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_INDEX]: \"instruction contains duplicate accounts\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_OUT_OF_SYNC]: \"instruction modifications of multiply-passed account differ\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_ACCOUNT_NOT_RENT_EXEMPT]: \"executable accounts must be rent exempt\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_DATA_MODIFIED]: \"instruction changed executable accounts data\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_LAMPORT_CHANGE]: \"instruction changed the balance of an executable account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_MODIFIED]: \"instruction changed executable bit of an account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_DATA_MODIFIED]: \"instruction modified data of an account it does not own\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_LAMPORT_SPEND]: \"instruction spent from the balance of an account it does not own\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__GENERIC_ERROR]: \"generic instruction error\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__ILLEGAL_OWNER]: \"Provided owner is not allowed\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__IMMUTABLE]: \"Account is immutable\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_AUTHORITY]: \"Incorrect authority provided\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_PROGRAM_ID]: \"incorrect program id for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INSUFFICIENT_FUNDS]: \"insufficient funds for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_DATA]: \"invalid account data for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_OWNER]: \"Invalid account owner\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ARGUMENT]: \"invalid program argument\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ERROR]: \"program returned invalid error code\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_INSTRUCTION_DATA]: \"invalid instruction data\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_REALLOC]: \"Failed to reallocate account data\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_SEEDS]: \"Provided seeds do not result in a valid address\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_DATA_ALLOCATIONS_EXCEEDED]: \"Accounts data allocations exceeded the maximum allowed per transaction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_EXCEEDED]: \"Max accounts exceeded\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MAX_INSTRUCTION_TRACE_LENGTH_EXCEEDED]: \"Max instruction trace length exceeded\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MAX_SEED_LENGTH_EXCEEDED]: \"Length of the seed is too long for address generation\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_ACCOUNT]: \"An account required by the instruction is missing\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_REQUIRED_SIGNATURE]: \"missing required signature for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__MODIFIED_PROGRAM_ID]: \"instruction illegally modified the program id of an account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__NOT_ENOUGH_ACCOUNT_KEYS]: \"insufficient account keys for instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__PRIVILEGE_ESCALATION]: \"Cross-program invocation with unauthorized signer or writable account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_ENVIRONMENT_SETUP_FAILURE]: \"Failed to create program execution environment\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPILE]: \"Program failed to compile\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPLETE]: \"Program failed to complete\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_DATA_MODIFIED]: \"instruction modified data of a read-only account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_LAMPORT_CHANGE]: \"instruction changed the balance of a read-only account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__REENTRANCY_NOT_ALLOWED]: \"Cross-program invocation reentrancy not allowed for this instruction\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__RENT_EPOCH_MODIFIED]: \"instruction modified rent epoch of an account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__UNBALANCED_INSTRUCTION]: \"sum of account balances before and after instruction do not match\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__UNINITIALIZED_ACCOUNT]: \"instruction requires an initialized account\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__UNKNOWN]: \"\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_PROGRAM_ID]: \"Unsupported program id\",\n  [SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_SYSVAR]: \"Unsupported sysvar\",\n  [SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_ACCOUNTS]: \"The instruction does not have any accounts.\",\n  [SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_DATA]: \"The instruction does not have any data.\",\n  [SOLANA_ERROR__INSTRUCTION__PROGRAM_ID_MISMATCH]: \"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.\",\n  [SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH]: \"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.\",\n  [SOLANA_ERROR__INVALID_NONCE]: \"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`\",\n  [SOLANA_ERROR__INVARIANT_VIOLATION__CACHED_ABORTABLE_ITERABLE_CACHE_ENTRY_MISSING]: \"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant\",\n  [SOLANA_ERROR__INVARIANT_VIOLATION__DATA_PUBLISHER_CHANNEL_UNIMPLEMENTED]: \"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.\",\n  [SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_MUST_NOT_POLL_BEFORE_RESOLVING_EXISTING_MESSAGE_PROMISE]: \"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant\",\n  [SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_STATE_MISSING]: \"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant\",\n  [SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE]: \"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant\",\n  [SOLANA_ERROR__JSON_RPC__INTERNAL_ERROR]: \"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)\",\n  [SOLANA_ERROR__JSON_RPC__INVALID_PARAMS]: \"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)\",\n  [SOLANA_ERROR__JSON_RPC__INVALID_REQUEST]: \"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)\",\n  [SOLANA_ERROR__JSON_RPC__METHOD_NOT_FOUND]: \"JSON-RPC error: The method does not exist / is not available ($__serverMessage)\",\n  [SOLANA_ERROR__JSON_RPC__PARSE_ERROR]: \"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)\",\n  [SOLANA_ERROR__JSON_RPC__SCAN_ERROR]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_CLEANED_UP]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_NOT_AVAILABLE]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED]: \"Minimum context slot has not been reached\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NODE_UNHEALTHY]: \"Node is unhealthy; behind by $numSlotsBehind slots\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NO_SNAPSHOT]: \"No snapshot\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE]: \"Transaction simulation failed\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SLOT_SKIPPED]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE]: \"Transaction history is not available from this node\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE]: \"$__serverMessage\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH]: \"Transaction signature length mismatch\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE]: \"Transaction signature verification failure\",\n  [SOLANA_ERROR__JSON_RPC__SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION]: \"$__serverMessage\",\n  [SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH]: \"Key pair bytes must be of length 64, got $byteLength.\",\n  [SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH]: \"Expected private key bytes with length 32. Actual length: $actualLength.\",\n  [SOLANA_ERROR__KEYS__INVALID_SIGNATURE_BYTE_LENGTH]: \"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.\",\n  [SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY]: \"The provided private key does not match the provided public key.\",\n  [SOLANA_ERROR__KEYS__SIGNATURE_STRING_LENGTH_OUT_OF_RANGE]: \"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.\",\n  [SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE]: \"Lamports value must be in the range [0, 2e64-1]\",\n  [SOLANA_ERROR__MALFORMED_BIGINT_STRING]: \"`$value` cannot be parsed as a `BigInt`\",\n  [SOLANA_ERROR__MALFORMED_JSON_RPC_ERROR]: \"$message\",\n  [SOLANA_ERROR__MALFORMED_NUMBER_STRING]: \"`$value` cannot be parsed as a `Number`\",\n  [SOLANA_ERROR__NONCE_ACCOUNT_NOT_FOUND]: \"No nonce account could be found at address `$nonceAccountAddress`\",\n  [SOLANA_ERROR__RPC_SUBSCRIPTIONS__CANNOT_CREATE_SUBSCRIPTION_PLAN]: \"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.\",\n  [SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CLOSED_BEFORE_MESSAGE_BUFFERED]: \"WebSocket was closed before payload could be added to the send buffer\",\n  [SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CONNECTION_CLOSED]: \"WebSocket connection closed\",\n  [SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_FAILED_TO_CONNECT]: \"WebSocket failed to connect\",\n  [SOLANA_ERROR__RPC_SUBSCRIPTIONS__EXPECTED_SERVER_SUBSCRIPTION_ID]: \"Failed to obtain a subscription id from the server\",\n  [SOLANA_ERROR__RPC__API_PLAN_MISSING_FOR_RPC_METHOD]: \"Could not find an API plan for RPC method: `$method`\",\n  [SOLANA_ERROR__RPC__INTEGER_OVERFLOW]: \"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.\",\n  [SOLANA_ERROR__RPC__TRANSPORT_HTTP_ERROR]: \"HTTP error ($statusCode): $message\",\n  [SOLANA_ERROR__RPC__TRANSPORT_HTTP_HEADER_FORBIDDEN]: \"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.\",\n  [SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS]: \"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_KEY_PAIR_SIGNER]: \"The provided value does not implement the `KeyPairSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_MODIFYING_SIGNER]: \"The provided value does not implement the `MessageModifyingSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_PARTIAL_SIGNER]: \"The provided value does not implement the `MessagePartialSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_SIGNER]: \"The provided value does not implement any of the `MessageSigner` interfaces\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_MODIFYING_SIGNER]: \"The provided value does not implement the `TransactionModifyingSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_PARTIAL_SIGNER]: \"The provided value does not implement the `TransactionPartialSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SENDING_SIGNER]: \"The provided value does not implement the `TransactionSendingSigner` interface\",\n  [SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SIGNER]: \"The provided value does not implement any of the `TransactionSigner` interfaces\",\n  [SOLANA_ERROR__SIGNER__TRANSACTION_CANNOT_HAVE_MULTIPLE_SENDING_SIGNERS]: \"More than one `TransactionSendingSigner` was identified.\",\n  [SOLANA_ERROR__SIGNER__TRANSACTION_SENDING_SIGNER_MISSING]: \"No `TransactionSendingSigner` was identified. Please provide a valid `ITransactionWithSingleSendingSigner` transaction.\",\n  [SOLANA_ERROR__SIGNER__WALLET_MULTISIGN_UNIMPLEMENTED]: \"Wallet account signers do not support signing multiple messages/transactions in a single operation\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY]: \"Cannot export a non-extractable key.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED]: \"No digest implementation could be found.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT]: \"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED]: \"This runtime does not support the generation of Ed25519 key pairs.\\n\\nInstall @solana/webcrypto-ed25519-polyfill and call its `install` function before generating keys in environments that do not support Ed25519.\\n\\nFor a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED]: \"No signature verification implementation could be found.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED]: \"No key generation implementation could be found.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED]: \"No signing implementation could be found.\",\n  [SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED]: \"No key export implementation could be found.\",\n  [SOLANA_ERROR__TIMESTAMP_OUT_OF_RANGE]: \"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_BORROW_OUTSTANDING]: \"Transaction processing left an account with an outstanding borrowed reference\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_IN_USE]: \"Account in use\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_LOADED_TWICE]: \"Account loaded twice\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_NOT_FOUND]: \"Attempt to debit an account but found no record of a prior credit.\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ADDRESS_LOOKUP_TABLE_NOT_FOUND]: \"Transaction loads an address table account that doesn't exist\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__ALREADY_PROCESSED]: \"This transaction has already been processed\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__BLOCKHASH_NOT_FOUND]: \"Blockhash not found\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__CALL_CHAIN_TOO_DEEP]: \"Loader call chain is too deep\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__CLUSTER_MAINTENANCE]: \"Transactions are currently disabled due to cluster maintenance\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__DUPLICATE_INSTRUCTION]: \"Transaction contains a duplicate instruction ($index) that is not allowed\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_FEE]: \"Insufficient funds for fee\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_RENT]: \"Transaction results in an account ($accountIndex) with insufficient funds for rent\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_FOR_FEE]: \"This account may not be used to pay transaction fees\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_INDEX]: \"Transaction contains an invalid account reference\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_DATA]: \"Transaction loads an address table account with invalid data\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_INDEX]: \"Transaction address table lookup uses an invalid index\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_OWNER]: \"Transaction loads an address table account with an invalid owner\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_LOADED_ACCOUNTS_DATA_SIZE_LIMIT]: \"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_PROGRAM_FOR_EXECUTION]: \"This program may not be used for executing instructions\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_RENT_PAYING_ACCOUNT]: \"Transaction leaves an account with a lower balance than rent-exempt minimum\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__INVALID_WRITABLE_ACCOUNT]: \"Transaction loads a writable account that cannot be written\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__MAX_LOADED_ACCOUNTS_DATA_SIZE_EXCEEDED]: \"Transaction exceeded max loaded accounts data size cap\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__MISSING_SIGNATURE_FOR_FEE]: \"Transaction requires a fee but has no signature present\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_ACCOUNT_NOT_FOUND]: \"Attempt to load a program that does not exist\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_EXECUTION_TEMPORARILY_RESTRICTED]: \"Execution of the program referenced by account at index $accountIndex is temporarily restricted.\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__RESANITIZATION_NEEDED]: \"ResanitizationNeeded\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__SANITIZE_FAILURE]: \"Transaction failed to sanitize accounts offsets correctly\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__SIGNATURE_FAILURE]: \"Transaction did not pass signature verification\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__TOO_MANY_ACCOUNT_LOCKS]: \"Transaction locked too many accounts\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__UNBALANCED_TRANSACTION]: \"Sum of account balances before and after transaction do not match\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__UNKNOWN]: \"The transaction failed with the error `$errorName`\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__UNSUPPORTED_VERSION]: \"Transaction version is unsupported\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_BLOCK_LIMIT]: \"Transaction would exceed account data limit within the block\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_TOTAL_LIMIT]: \"Transaction would exceed total account data limit\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_ACCOUNT_COST_LIMIT]: \"Transaction would exceed max account limit within the block\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_BLOCK_COST_LIMIT]: \"Transaction would exceed max Block Cost Limit\",\n  [SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_VOTE_COST_LIMIT]: \"Transaction would exceed max Vote Cost Limit\",\n  [SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION]: \"Attempted to sign a transaction with an address that is not a signer for it\",\n  [SOLANA_ERROR__TRANSACTION__ADDRESS_MISSING]: \"Transaction is missing an address at index: $index.\",\n  [SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES]: \"Transaction has no expected signers therefore it cannot be encoded\",\n  [SOLANA_ERROR__TRANSACTION__EXPECTED_BLOCKHASH_LIFETIME]: \"Transaction does not have a blockhash lifetime\",\n  [SOLANA_ERROR__TRANSACTION__EXPECTED_NONCE_LIFETIME]: \"Transaction is not a durable nonce transaction\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING]: \"Contents of these address lookup tables unknown: $lookupTableAddresses\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE]: \"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING]: \"No fee payer set in CompiledTransaction\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND]: \"Could not find program address at index $index\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_TO_ESTIMATE_COMPUTE_LIMIT]: \"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more\",\n  [SOLANA_ERROR__TRANSACTION__FAILED_WHEN_SIMULATING_TO_ESTIMATE_COMPUTE_LIMIT]: \"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more\",\n  [SOLANA_ERROR__TRANSACTION__FEE_PAYER_MISSING]: \"Transaction is missing a fee payer.\",\n  [SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING]: \"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.\",\n  [SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_FIRST_INSTRUCTION_MUST_BE_ADVANCE_NONCE]: \"Transaction first instruction is not advance nonce account instruction.\",\n  [SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_INSTRUCTIONS_MISSING]: \"Transaction with no instructions cannot be durable nonce transaction.\",\n  [SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES]: \"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees\",\n  [SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE]: \"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable\",\n  [SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH]: \"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.\",\n  [SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING]: \"Transaction is missing signatures for addresses: $addresses.\",\n  [SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE]: \"Transaction version must be in the range [0, 127]. `$actualVersion` given\"\n};\n\n// src/message-formatter.ts\nvar START_INDEX = \"i\";\nvar TYPE = \"t\";\nfunction getHumanReadableErrorMessage(code, context = {}) {\n  const messageFormatString = SolanaErrorMessages[code];\n  if (messageFormatString.length === 0) {\n    return \"\";\n  }\n  let state;\n  function commitStateUpTo(endIndex) {\n    if (state[TYPE] === 2 /* Variable */) {\n      const variableName = messageFormatString.slice(state[START_INDEX] + 1, endIndex);\n      fragments.push(\n        variableName in context ? (\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          `${context[variableName]}`\n        ) : `$${variableName}`\n      );\n    } else if (state[TYPE] === 1 /* Text */) {\n      fragments.push(messageFormatString.slice(state[START_INDEX], endIndex));\n    }\n  }\n  const fragments = [];\n  messageFormatString.split(\"\").forEach((char, ii) => {\n    if (ii === 0) {\n      state = {\n        [START_INDEX]: 0,\n        [TYPE]: messageFormatString[0] === \"\\\\\" ? 0 /* EscapeSequence */ : messageFormatString[0] === \"$\" ? 2 /* Variable */ : 1 /* Text */\n      };\n      return;\n    }\n    let nextState;\n    switch (state[TYPE]) {\n      case 0 /* EscapeSequence */:\n        nextState = { [START_INDEX]: ii, [TYPE]: 1 /* Text */ };\n        break;\n      case 1 /* Text */:\n        if (char === \"\\\\\") {\n          nextState = { [START_INDEX]: ii, [TYPE]: 0 /* EscapeSequence */ };\n        } else if (char === \"$\") {\n          nextState = { [START_INDEX]: ii, [TYPE]: 2 /* Variable */ };\n        }\n        break;\n      case 2 /* Variable */:\n        if (char === \"\\\\\") {\n          nextState = { [START_INDEX]: ii, [TYPE]: 0 /* EscapeSequence */ };\n        } else if (char === \"$\") {\n          nextState = { [START_INDEX]: ii, [TYPE]: 2 /* Variable */ };\n        } else if (!char.match(/\\w/)) {\n          nextState = { [START_INDEX]: ii, [TYPE]: 1 /* Text */ };\n        }\n        break;\n    }\n    if (nextState) {\n      if (state !== nextState) {\n        commitStateUpTo(ii);\n      }\n      state = nextState;\n    }\n  });\n  commitStateUpTo();\n  return fragments.join(\"\");\n}\nfunction getErrorMessage(code, context = {}) {\n  if (process.env.NODE_ENV !== \"production\") {\n    return getHumanReadableErrorMessage(code, context);\n  } else {\n    let decodingAdviceMessage = `Solana error #${code}; Decode this error by running \\`npx @solana/errors decode -- ${code}`;\n    if (Object.keys(context).length) {\n      decodingAdviceMessage += ` '${encodeContextObject(context)}'`;\n    }\n    return `${decodingAdviceMessage}\\``;\n  }\n}\n\n// src/error.ts\nfunction isSolanaError(e, code) {\n  const isSolanaError2 = e instanceof Error && e.name === \"SolanaError\";\n  if (isSolanaError2) {\n    if (code !== undefined) {\n      return e.context.__code === code;\n    }\n    return true;\n  }\n  return false;\n}\nvar SolanaError = class extends Error {\n  /**\n   * Indicates the root cause of this {@link SolanaError}, if any.\n   *\n   * For example, a transaction error might have an instruction error as its root cause. In this\n   * case, you will be able to access the instruction error on the transaction error as `cause`.\n   */\n  cause = this.cause;\n  /**\n   * Contains context that can assist in understanding or recovering from a {@link SolanaError}.\n   */\n  context;\n  constructor(...[code, contextAndErrorOptions]) {\n    let context;\n    let errorOptions;\n    if (contextAndErrorOptions) {\n      const { cause, ...contextRest } = contextAndErrorOptions;\n      if (cause) {\n        errorOptions = { cause };\n      }\n      if (Object.keys(contextRest).length > 0) {\n        context = contextRest;\n      }\n    }\n    const message = getErrorMessage(code, context);\n    super(message, errorOptions);\n    this.context = {\n      __code: code,\n      ...context\n    };\n    this.name = \"SolanaError\";\n  }\n};\n\n// src/stack-trace.ts\nfunction safeCaptureStackTrace(...args) {\n  if (\"captureStackTrace\" in Error && typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(...args);\n  }\n}\n\n// src/rpc-enum-errors.ts\nfunction getSolanaErrorFromRpcError({ errorCodeBaseOffset, getErrorContext, orderedErrorNames, rpcEnumError }, constructorOpt) {\n  let rpcErrorName;\n  let rpcErrorContext;\n  if (typeof rpcEnumError === \"string\") {\n    rpcErrorName = rpcEnumError;\n  } else {\n    rpcErrorName = Object.keys(rpcEnumError)[0];\n    rpcErrorContext = rpcEnumError[rpcErrorName];\n  }\n  const codeOffset = orderedErrorNames.indexOf(rpcErrorName);\n  const errorCode = errorCodeBaseOffset + codeOffset;\n  const errorContext = getErrorContext(errorCode, rpcErrorName, rpcErrorContext);\n  const err = new SolanaError(errorCode, errorContext);\n  safeCaptureStackTrace(err, constructorOpt);\n  return err;\n}\n\n// src/instruction-error.ts\nvar ORDERED_ERROR_NAMES = [\n  // Keep synced with RPC source: https://github.com/anza-xyz/agave/blob/master/sdk/program/src/instruction.rs\n  // If this list ever gets too large, consider implementing a compression strategy like this:\n  // https://gist.github.com/steveluscher/aaa7cbbb5433b1197983908a40860c47\n  \"GenericError\",\n  \"InvalidArgument\",\n  \"InvalidInstructionData\",\n  \"InvalidAccountData\",\n  \"AccountDataTooSmall\",\n  \"InsufficientFunds\",\n  \"IncorrectProgramId\",\n  \"MissingRequiredSignature\",\n  \"AccountAlreadyInitialized\",\n  \"UninitializedAccount\",\n  \"UnbalancedInstruction\",\n  \"ModifiedProgramId\",\n  \"ExternalAccountLamportSpend\",\n  \"ExternalAccountDataModified\",\n  \"ReadonlyLamportChange\",\n  \"ReadonlyDataModified\",\n  \"DuplicateAccountIndex\",\n  \"ExecutableModified\",\n  \"RentEpochModified\",\n  \"NotEnoughAccountKeys\",\n  \"AccountDataSizeChanged\",\n  \"AccountNotExecutable\",\n  \"AccountBorrowFailed\",\n  \"AccountBorrowOutstanding\",\n  \"DuplicateAccountOutOfSync\",\n  \"Custom\",\n  \"InvalidError\",\n  \"ExecutableDataModified\",\n  \"ExecutableLamportChange\",\n  \"ExecutableAccountNotRentExempt\",\n  \"UnsupportedProgramId\",\n  \"CallDepth\",\n  \"MissingAccount\",\n  \"ReentrancyNotAllowed\",\n  \"MaxSeedLengthExceeded\",\n  \"InvalidSeeds\",\n  \"InvalidRealloc\",\n  \"ComputationalBudgetExceeded\",\n  \"PrivilegeEscalation\",\n  \"ProgramEnvironmentSetupFailure\",\n  \"ProgramFailedToComplete\",\n  \"ProgramFailedToCompile\",\n  \"Immutable\",\n  \"IncorrectAuthority\",\n  \"BorshIoError\",\n  \"AccountNotRentExempt\",\n  \"InvalidAccountOwner\",\n  \"ArithmeticOverflow\",\n  \"UnsupportedSysvar\",\n  \"IllegalOwner\",\n  \"MaxAccountsDataAllocationsExceeded\",\n  \"MaxAccountsExceeded\",\n  \"MaxInstructionTraceLengthExceeded\",\n  \"BuiltinProgramsMustConsumeComputeUnits\"\n];\nfunction getSolanaErrorFromInstructionError(index, instructionError) {\n  const numberIndex = Number(index);\n  return getSolanaErrorFromRpcError(\n    {\n      errorCodeBaseOffset: 4615001,\n      getErrorContext(errorCode, rpcErrorName, rpcErrorContext) {\n        if (errorCode === SOLANA_ERROR__INSTRUCTION_ERROR__UNKNOWN) {\n          return {\n            errorName: rpcErrorName,\n            index: numberIndex,\n            ...rpcErrorContext !== undefined ? { instructionErrorContext: rpcErrorContext } : null\n          };\n        } else if (errorCode === SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM) {\n          return {\n            code: Number(rpcErrorContext),\n            index: numberIndex\n          };\n        } else if (errorCode === SOLANA_ERROR__INSTRUCTION_ERROR__BORSH_IO_ERROR) {\n          return {\n            encodedData: rpcErrorContext,\n            index: numberIndex\n          };\n        }\n        return { index: numberIndex };\n      },\n      orderedErrorNames: ORDERED_ERROR_NAMES,\n      rpcEnumError: instructionError\n    },\n    getSolanaErrorFromInstructionError\n  );\n}\n\n// src/transaction-error.ts\nvar ORDERED_ERROR_NAMES2 = [\n  // Keep synced with RPC source: https://github.com/anza-xyz/agave/blob/master/sdk/src/transaction/error.rs\n  // If this list ever gets too large, consider implementing a compression strategy like this:\n  // https://gist.github.com/steveluscher/aaa7cbbb5433b1197983908a40860c47\n  \"AccountInUse\",\n  \"AccountLoadedTwice\",\n  \"AccountNotFound\",\n  \"ProgramAccountNotFound\",\n  \"InsufficientFundsForFee\",\n  \"InvalidAccountForFee\",\n  \"AlreadyProcessed\",\n  \"BlockhashNotFound\",\n  // `InstructionError` intentionally omitted; delegated to `getSolanaErrorFromInstructionError`\n  \"CallChainTooDeep\",\n  \"MissingSignatureForFee\",\n  \"InvalidAccountIndex\",\n  \"SignatureFailure\",\n  \"InvalidProgramForExecution\",\n  \"SanitizeFailure\",\n  \"ClusterMaintenance\",\n  \"AccountBorrowOutstanding\",\n  \"WouldExceedMaxBlockCostLimit\",\n  \"UnsupportedVersion\",\n  \"InvalidWritableAccount\",\n  \"WouldExceedMaxAccountCostLimit\",\n  \"WouldExceedAccountDataBlockLimit\",\n  \"TooManyAccountLocks\",\n  \"AddressLookupTableNotFound\",\n  \"InvalidAddressLookupTableOwner\",\n  \"InvalidAddressLookupTableData\",\n  \"InvalidAddressLookupTableIndex\",\n  \"InvalidRentPayingAccount\",\n  \"WouldExceedMaxVoteCostLimit\",\n  \"WouldExceedAccountDataTotalLimit\",\n  \"DuplicateInstruction\",\n  \"InsufficientFundsForRent\",\n  \"MaxLoadedAccountsDataSizeExceeded\",\n  \"InvalidLoadedAccountsDataSizeLimit\",\n  \"ResanitizationNeeded\",\n  \"ProgramExecutionTemporarilyRestricted\",\n  \"UnbalancedTransaction\"\n];\nfunction getSolanaErrorFromTransactionError(transactionError) {\n  if (typeof transactionError === \"object\" && \"InstructionError\" in transactionError) {\n    return getSolanaErrorFromInstructionError(\n      ...transactionError.InstructionError\n    );\n  }\n  return getSolanaErrorFromRpcError(\n    {\n      errorCodeBaseOffset: 7050001,\n      getErrorContext(errorCode, rpcErrorName, rpcErrorContext) {\n        if (errorCode === SOLANA_ERROR__TRANSACTION_ERROR__UNKNOWN) {\n          return {\n            errorName: rpcErrorName,\n            ...rpcErrorContext !== undefined ? { transactionErrorContext: rpcErrorContext } : null\n          };\n        } else if (errorCode === SOLANA_ERROR__TRANSACTION_ERROR__DUPLICATE_INSTRUCTION) {\n          return {\n            index: Number(rpcErrorContext)\n          };\n        } else if (errorCode === SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_RENT || errorCode === SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_EXECUTION_TEMPORARILY_RESTRICTED) {\n          return {\n            accountIndex: Number(rpcErrorContext.account_index)\n          };\n        }\n      },\n      orderedErrorNames: ORDERED_ERROR_NAMES2,\n      rpcEnumError: transactionError\n    },\n    getSolanaErrorFromTransactionError\n  );\n}\n\n// src/json-rpc-error.ts\nfunction getSolanaErrorFromJsonRpcError(putativeErrorResponse) {\n  let out;\n  if (isRpcErrorResponse(putativeErrorResponse)) {\n    const { code: rawCode, data, message } = putativeErrorResponse;\n    const code = Number(rawCode);\n    if (code === SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE) {\n      const { err, ...preflightErrorContext } = data;\n      const causeObject = err ? { cause: getSolanaErrorFromTransactionError(err) } : null;\n      out = new SolanaError(SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE, {\n        ...preflightErrorContext,\n        ...causeObject\n      });\n    } else {\n      let errorContext;\n      switch (code) {\n        case SOLANA_ERROR__JSON_RPC__INTERNAL_ERROR:\n        case SOLANA_ERROR__JSON_RPC__INVALID_PARAMS:\n        case SOLANA_ERROR__JSON_RPC__INVALID_REQUEST:\n        case SOLANA_ERROR__JSON_RPC__METHOD_NOT_FOUND:\n        case SOLANA_ERROR__JSON_RPC__PARSE_ERROR:\n        case SOLANA_ERROR__JSON_RPC__SCAN_ERROR:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_CLEANED_UP:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_NOT_AVAILABLE:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SLOT_SKIPPED:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:\n        case SOLANA_ERROR__JSON_RPC__SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:\n          errorContext = { __serverMessage: message };\n          break;\n        default:\n          if (typeof data === \"object\" && !Array.isArray(data)) {\n            errorContext = data;\n          }\n      }\n      out = new SolanaError(code, errorContext);\n    }\n  } else {\n    const message = typeof putativeErrorResponse === \"object\" && putativeErrorResponse !== null && \"message\" in putativeErrorResponse && typeof putativeErrorResponse.message === \"string\" ? putativeErrorResponse.message : \"Malformed JSON-RPC error with no message attribute\";\n    out = new SolanaError(SOLANA_ERROR__MALFORMED_JSON_RPC_ERROR, { error: putativeErrorResponse, message });\n  }\n  safeCaptureStackTrace(out, getSolanaErrorFromJsonRpcError);\n  return out;\n}\nfunction isRpcErrorResponse(value) {\n  return typeof value === \"object\" && value !== null && \"code\" in value && \"message\" in value && (typeof value.code === \"number\" || typeof value.code === \"bigint\") && typeof value.message === \"string\";\n}\n\nexport { SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND, SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED, SOLANA_ERROR__ACCOUNTS__EXPECTED_DECODED_ACCOUNT, SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT, SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND, SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED, SOLANA_ERROR__ADDRESSES__INVALID_BASE58_ENCODED_ADDRESS, SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH, SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY, SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE, SOLANA_ERROR__ADDRESSES__MALFORMED_PDA, SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED, SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED, SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE, SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER, SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE, SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE, SOLANA_ERROR__BLOCK_HEIGHT_EXCEEDED, SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY, SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS, SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL, SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH, SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH, SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH, SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE, SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH, SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH, SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH, SOLANA_ERROR__CODECS__EXPECTED_ZERO_VALUE_TO_MATCH_ITEM_FIXED_SIZE, SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH, SOLANA_ERROR__CODECS__INVALID_CONSTANT, SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT, SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT, SOLANA_ERROR__CODECS__INVALID_LITERAL_UNION_VARIANT, SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS, SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE, SOLANA_ERROR__CODECS__LITERAL_UNION_DISCRIMINATOR_OUT_OF_RANGE, SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE, SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE, SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES, SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE, SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_ALREADY_INITIALIZED, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_FAILED, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_BORROW_OUTSTANDING, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_SIZE_CHANGED, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_DATA_TOO_SMALL, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_EXECUTABLE, SOLANA_ERROR__INSTRUCTION_ERROR__ACCOUNT_NOT_RENT_EXEMPT, SOLANA_ERROR__INSTRUCTION_ERROR__ARITHMETIC_OVERFLOW, SOLANA_ERROR__INSTRUCTION_ERROR__BORSH_IO_ERROR, SOLANA_ERROR__INSTRUCTION_ERROR__BUILTIN_PROGRAMS_MUST_CONSUME_COMPUTE_UNITS, SOLANA_ERROR__INSTRUCTION_ERROR__CALL_DEPTH, SOLANA_ERROR__INSTRUCTION_ERROR__COMPUTATIONAL_BUDGET_EXCEEDED, SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM, SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_INDEX, SOLANA_ERROR__INSTRUCTION_ERROR__DUPLICATE_ACCOUNT_OUT_OF_SYNC, SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_ACCOUNT_NOT_RENT_EXEMPT, SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_DATA_MODIFIED, SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_LAMPORT_CHANGE, SOLANA_ERROR__INSTRUCTION_ERROR__EXECUTABLE_MODIFIED, SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_DATA_MODIFIED, SOLANA_ERROR__INSTRUCTION_ERROR__EXTERNAL_ACCOUNT_LAMPORT_SPEND, SOLANA_ERROR__INSTRUCTION_ERROR__GENERIC_ERROR, SOLANA_ERROR__INSTRUCTION_ERROR__ILLEGAL_OWNER, SOLANA_ERROR__INSTRUCTION_ERROR__IMMUTABLE, SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_AUTHORITY, SOLANA_ERROR__INSTRUCTION_ERROR__INCORRECT_PROGRAM_ID, SOLANA_ERROR__INSTRUCTION_ERROR__INSUFFICIENT_FUNDS, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_DATA, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ACCOUNT_OWNER, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ARGUMENT, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_ERROR, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_INSTRUCTION_DATA, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_REALLOC, SOLANA_ERROR__INSTRUCTION_ERROR__INVALID_SEEDS, SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_DATA_ALLOCATIONS_EXCEEDED, SOLANA_ERROR__INSTRUCTION_ERROR__MAX_ACCOUNTS_EXCEEDED, SOLANA_ERROR__INSTRUCTION_ERROR__MAX_INSTRUCTION_TRACE_LENGTH_EXCEEDED, SOLANA_ERROR__INSTRUCTION_ERROR__MAX_SEED_LENGTH_EXCEEDED, SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_ACCOUNT, SOLANA_ERROR__INSTRUCTION_ERROR__MISSING_REQUIRED_SIGNATURE, SOLANA_ERROR__INSTRUCTION_ERROR__MODIFIED_PROGRAM_ID, SOLANA_ERROR__INSTRUCTION_ERROR__NOT_ENOUGH_ACCOUNT_KEYS, SOLANA_ERROR__INSTRUCTION_ERROR__PRIVILEGE_ESCALATION, SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_ENVIRONMENT_SETUP_FAILURE, SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPILE, SOLANA_ERROR__INSTRUCTION_ERROR__PROGRAM_FAILED_TO_COMPLETE, SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_DATA_MODIFIED, SOLANA_ERROR__INSTRUCTION_ERROR__READONLY_LAMPORT_CHANGE, SOLANA_ERROR__INSTRUCTION_ERROR__REENTRANCY_NOT_ALLOWED, SOLANA_ERROR__INSTRUCTION_ERROR__RENT_EPOCH_MODIFIED, SOLANA_ERROR__INSTRUCTION_ERROR__UNBALANCED_INSTRUCTION, SOLANA_ERROR__INSTRUCTION_ERROR__UNINITIALIZED_ACCOUNT, SOLANA_ERROR__INSTRUCTION_ERROR__UNKNOWN, SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_PROGRAM_ID, SOLANA_ERROR__INSTRUCTION_ERROR__UNSUPPORTED_SYSVAR, SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_ACCOUNTS, SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_DATA, SOLANA_ERROR__INSTRUCTION__PROGRAM_ID_MISMATCH, SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH, SOLANA_ERROR__INVALID_NONCE, SOLANA_ERROR__INVARIANT_VIOLATION__CACHED_ABORTABLE_ITERABLE_CACHE_ENTRY_MISSING, SOLANA_ERROR__INVARIANT_VIOLATION__DATA_PUBLISHER_CHANNEL_UNIMPLEMENTED, SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_MUST_NOT_POLL_BEFORE_RESOLVING_EXISTING_MESSAGE_PROMISE, SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_STATE_MISSING, SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE, SOLANA_ERROR__JSON_RPC__INTERNAL_ERROR, SOLANA_ERROR__JSON_RPC__INVALID_PARAMS, SOLANA_ERROR__JSON_RPC__INVALID_REQUEST, SOLANA_ERROR__JSON_RPC__METHOD_NOT_FOUND, SOLANA_ERROR__JSON_RPC__PARSE_ERROR, SOLANA_ERROR__JSON_RPC__SCAN_ERROR, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_CLEANED_UP, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_NOT_AVAILABLE, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NODE_UNHEALTHY, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_NO_SNAPSHOT, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_SLOT_SKIPPED, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE, SOLANA_ERROR__JSON_RPC__SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION, SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH, SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH, SOLANA_ERROR__KEYS__INVALID_SIGNATURE_BYTE_LENGTH, SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY, SOLANA_ERROR__KEYS__SIGNATURE_STRING_LENGTH_OUT_OF_RANGE, SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE, SOLANA_ERROR__MALFORMED_BIGINT_STRING, SOLANA_ERROR__MALFORMED_JSON_RPC_ERROR, SOLANA_ERROR__MALFORMED_NUMBER_STRING, SOLANA_ERROR__NONCE_ACCOUNT_NOT_FOUND, SOLANA_ERROR__RPC_SUBSCRIPTIONS__CANNOT_CREATE_SUBSCRIPTION_PLAN, SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CLOSED_BEFORE_MESSAGE_BUFFERED, SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CONNECTION_CLOSED, SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_FAILED_TO_CONNECT, SOLANA_ERROR__RPC_SUBSCRIPTIONS__EXPECTED_SERVER_SUBSCRIPTION_ID, SOLANA_ERROR__RPC__API_PLAN_MISSING_FOR_RPC_METHOD, SOLANA_ERROR__RPC__INTEGER_OVERFLOW, SOLANA_ERROR__RPC__TRANSPORT_HTTP_ERROR, SOLANA_ERROR__RPC__TRANSPORT_HTTP_HEADER_FORBIDDEN, SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS, SOLANA_ERROR__SIGNER__EXPECTED_KEY_PAIR_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_MODIFYING_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_PARTIAL_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_MODIFYING_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_PARTIAL_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SENDING_SIGNER, SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SIGNER, SOLANA_ERROR__SIGNER__TRANSACTION_CANNOT_HAVE_MULTIPLE_SENDING_SIGNERS, SOLANA_ERROR__SIGNER__TRANSACTION_SENDING_SIGNER_MISSING, SOLANA_ERROR__SIGNER__WALLET_MULTISIGN_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY, SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT, SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED, SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED, SOLANA_ERROR__TIMESTAMP_OUT_OF_RANGE, SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_BORROW_OUTSTANDING, SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_IN_USE, SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_LOADED_TWICE, SOLANA_ERROR__TRANSACTION_ERROR__ACCOUNT_NOT_FOUND, SOLANA_ERROR__TRANSACTION_ERROR__ADDRESS_LOOKUP_TABLE_NOT_FOUND, SOLANA_ERROR__TRANSACTION_ERROR__ALREADY_PROCESSED, SOLANA_ERROR__TRANSACTION_ERROR__BLOCKHASH_NOT_FOUND, SOLANA_ERROR__TRANSACTION_ERROR__CALL_CHAIN_TOO_DEEP, SOLANA_ERROR__TRANSACTION_ERROR__CLUSTER_MAINTENANCE, SOLANA_ERROR__TRANSACTION_ERROR__DUPLICATE_INSTRUCTION, SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_FEE, SOLANA_ERROR__TRANSACTION_ERROR__INSUFFICIENT_FUNDS_FOR_RENT, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_FOR_FEE, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ACCOUNT_INDEX, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_DATA, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_INDEX, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_ADDRESS_LOOKUP_TABLE_OWNER, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_LOADED_ACCOUNTS_DATA_SIZE_LIMIT, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_PROGRAM_FOR_EXECUTION, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_RENT_PAYING_ACCOUNT, SOLANA_ERROR__TRANSACTION_ERROR__INVALID_WRITABLE_ACCOUNT, SOLANA_ERROR__TRANSACTION_ERROR__MAX_LOADED_ACCOUNTS_DATA_SIZE_EXCEEDED, SOLANA_ERROR__TRANSACTION_ERROR__MISSING_SIGNATURE_FOR_FEE, SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_ACCOUNT_NOT_FOUND, SOLANA_ERROR__TRANSACTION_ERROR__PROGRAM_EXECUTION_TEMPORARILY_RESTRICTED, SOLANA_ERROR__TRANSACTION_ERROR__RESANITIZATION_NEEDED, SOLANA_ERROR__TRANSACTION_ERROR__SANITIZE_FAILURE, SOLANA_ERROR__TRANSACTION_ERROR__SIGNATURE_FAILURE, SOLANA_ERROR__TRANSACTION_ERROR__TOO_MANY_ACCOUNT_LOCKS, SOLANA_ERROR__TRANSACTION_ERROR__UNBALANCED_TRANSACTION, SOLANA_ERROR__TRANSACTION_ERROR__UNKNOWN, SOLANA_ERROR__TRANSACTION_ERROR__UNSUPPORTED_VERSION, SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_BLOCK_LIMIT, SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_ACCOUNT_DATA_TOTAL_LIMIT, SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_ACCOUNT_COST_LIMIT, SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_BLOCK_COST_LIMIT, SOLANA_ERROR__TRANSACTION_ERROR__WOULD_EXCEED_MAX_VOTE_COST_LIMIT, SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION, SOLANA_ERROR__TRANSACTION__ADDRESS_MISSING, SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES, SOLANA_ERROR__TRANSACTION__EXPECTED_BLOCKHASH_LIFETIME, SOLANA_ERROR__TRANSACTION__EXPECTED_NONCE_LIFETIME, SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING, SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE, SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING, SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND, SOLANA_ERROR__TRANSACTION__FAILED_TO_ESTIMATE_COMPUTE_LIMIT, SOLANA_ERROR__TRANSACTION__FAILED_WHEN_SIMULATING_TO_ESTIMATE_COMPUTE_LIMIT, SOLANA_ERROR__TRANSACTION__FEE_PAYER_MISSING, SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING, SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_FIRST_INSTRUCTION_MUST_BE_ADVANCE_NONCE, SOLANA_ERROR__TRANSACTION__INVALID_NONCE_TRANSACTION_INSTRUCTIONS_MISSING, SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES, SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE, SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH, SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING, SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE, SolanaError, getSolanaErrorFromInstructionError, getSolanaErrorFromJsonRpcError, getSolanaErrorFromTransactionError, isSolanaError, safeCaptureStackTrace };\n//# sourceMappingURL=index.browser.mjs.map\n//# sourceMappingURL=index.browser.mjs.map","import { SolanaError, SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH, SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH, SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH, SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH, SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH, SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY, SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH, SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE, SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH, SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES, SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL } from '@solana/errors';\n\n// src/add-codec-sentinel.ts\n\n// src/bytes.ts\nvar mergeBytes = (byteArrays) => {\n  const nonEmptyByteArrays = byteArrays.filter((arr) => arr.length);\n  if (nonEmptyByteArrays.length === 0) {\n    return byteArrays.length ? byteArrays[0] : new Uint8Array();\n  }\n  if (nonEmptyByteArrays.length === 1) {\n    return nonEmptyByteArrays[0];\n  }\n  const totalLength = nonEmptyByteArrays.reduce((total, arr) => total + arr.length, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  nonEmptyByteArrays.forEach((arr) => {\n    result.set(arr, offset);\n    offset += arr.length;\n  });\n  return result;\n};\nvar padBytes = (bytes, length) => {\n  if (bytes.length >= length) return bytes;\n  const paddedBytes = new Uint8Array(length).fill(0);\n  paddedBytes.set(bytes);\n  return paddedBytes;\n};\nvar fixBytes = (bytes, length) => padBytes(bytes.length <= length ? bytes : bytes.slice(0, length), length);\nfunction containsBytes(data, bytes, offset) {\n  const slice = offset === 0 && data.length === bytes.length ? data : data.slice(offset, offset + bytes.length);\n  if (slice.length !== bytes.length) return false;\n  return bytes.every((b, i) => b === slice[i]);\n}\nfunction getEncodedSize(value, encoder) {\n  return \"fixedSize\" in encoder ? encoder.fixedSize : encoder.getSizeFromValue(value);\n}\nfunction createEncoder(encoder) {\n  return Object.freeze({\n    ...encoder,\n    encode: (value) => {\n      const bytes = new Uint8Array(getEncodedSize(value, encoder));\n      encoder.write(value, bytes, 0);\n      return bytes;\n    }\n  });\n}\nfunction createDecoder(decoder) {\n  return Object.freeze({\n    ...decoder,\n    decode: (bytes, offset = 0) => decoder.read(bytes, offset)[0]\n  });\n}\nfunction createCodec(codec) {\n  return Object.freeze({\n    ...codec,\n    decode: (bytes, offset = 0) => codec.read(bytes, offset)[0],\n    encode: (value) => {\n      const bytes = new Uint8Array(getEncodedSize(value, codec));\n      codec.write(value, bytes, 0);\n      return bytes;\n    }\n  });\n}\nfunction isFixedSize(codec) {\n  return \"fixedSize\" in codec && typeof codec.fixedSize === \"number\";\n}\nfunction assertIsFixedSize(codec) {\n  if (!isFixedSize(codec)) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH);\n  }\n}\nfunction isVariableSize(codec) {\n  return !isFixedSize(codec);\n}\nfunction assertIsVariableSize(codec) {\n  if (!isVariableSize(codec)) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH);\n  }\n}\nfunction combineCodec(encoder, decoder) {\n  if (isFixedSize(encoder) !== isFixedSize(decoder)) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH);\n  }\n  if (isFixedSize(encoder) && isFixedSize(decoder) && encoder.fixedSize !== decoder.fixedSize) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH, {\n      decoderFixedSize: decoder.fixedSize,\n      encoderFixedSize: encoder.fixedSize\n    });\n  }\n  if (!isFixedSize(encoder) && !isFixedSize(decoder) && encoder.maxSize !== decoder.maxSize) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH, {\n      decoderMaxSize: decoder.maxSize,\n      encoderMaxSize: encoder.maxSize\n    });\n  }\n  return {\n    ...decoder,\n    ...encoder,\n    decode: decoder.decode,\n    encode: encoder.encode,\n    read: decoder.read,\n    write: encoder.write\n  };\n}\n\n// src/add-codec-sentinel.ts\nfunction addEncoderSentinel(encoder, sentinel) {\n  const write = (value, bytes, offset) => {\n    const encoderBytes = encoder.encode(value);\n    if (findSentinelIndex(encoderBytes, sentinel) >= 0) {\n      throw new SolanaError(SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL, {\n        encodedBytes: encoderBytes,\n        hexEncodedBytes: hexBytes(encoderBytes),\n        hexSentinel: hexBytes(sentinel),\n        sentinel\n      });\n    }\n    bytes.set(encoderBytes, offset);\n    offset += encoderBytes.length;\n    bytes.set(sentinel, offset);\n    offset += sentinel.length;\n    return offset;\n  };\n  if (isFixedSize(encoder)) {\n    return createEncoder({ ...encoder, fixedSize: encoder.fixedSize + sentinel.length, write });\n  }\n  return createEncoder({\n    ...encoder,\n    ...encoder.maxSize != null ? { maxSize: encoder.maxSize + sentinel.length } : {},\n    getSizeFromValue: (value) => encoder.getSizeFromValue(value) + sentinel.length,\n    write\n  });\n}\nfunction addDecoderSentinel(decoder, sentinel) {\n  const read = (bytes, offset) => {\n    const candidateBytes = offset === 0 ? bytes : bytes.slice(offset);\n    const sentinelIndex = findSentinelIndex(candidateBytes, sentinel);\n    if (sentinelIndex === -1) {\n      throw new SolanaError(SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES, {\n        decodedBytes: candidateBytes,\n        hexDecodedBytes: hexBytes(candidateBytes),\n        hexSentinel: hexBytes(sentinel),\n        sentinel\n      });\n    }\n    const preSentinelBytes = candidateBytes.slice(0, sentinelIndex);\n    return [decoder.decode(preSentinelBytes), offset + preSentinelBytes.length + sentinel.length];\n  };\n  if (isFixedSize(decoder)) {\n    return createDecoder({ ...decoder, fixedSize: decoder.fixedSize + sentinel.length, read });\n  }\n  return createDecoder({\n    ...decoder,\n    ...decoder.maxSize != null ? { maxSize: decoder.maxSize + sentinel.length } : {},\n    read\n  });\n}\nfunction addCodecSentinel(codec, sentinel) {\n  return combineCodec(addEncoderSentinel(codec, sentinel), addDecoderSentinel(codec, sentinel));\n}\nfunction findSentinelIndex(bytes, sentinel) {\n  return bytes.findIndex((byte, index, arr) => {\n    if (sentinel.length === 1) return byte === sentinel[0];\n    return containsBytes(arr, sentinel, index);\n  });\n}\nfunction hexBytes(bytes) {\n  return bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, \"0\"), \"\");\n}\nfunction assertByteArrayIsNotEmptyForCodec(codecDescription, bytes, offset = 0) {\n  if (bytes.length - offset <= 0) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY, {\n      codecDescription\n    });\n  }\n}\nfunction assertByteArrayHasEnoughBytesForCodec(codecDescription, expected, bytes, offset = 0) {\n  const bytesLength = bytes.length - offset;\n  if (bytesLength < expected) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH, {\n      bytesLength,\n      codecDescription,\n      expected\n    });\n  }\n}\nfunction assertByteArrayOffsetIsNotOutOfRange(codecDescription, offset, bytesLength) {\n  if (offset < 0 || offset > bytesLength) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE, {\n      bytesLength,\n      codecDescription,\n      offset\n    });\n  }\n}\n\n// src/add-codec-size-prefix.ts\nfunction addEncoderSizePrefix(encoder, prefix) {\n  const write = (value, bytes, offset) => {\n    const encoderBytes = encoder.encode(value);\n    offset = prefix.write(encoderBytes.length, bytes, offset);\n    bytes.set(encoderBytes, offset);\n    return offset + encoderBytes.length;\n  };\n  if (isFixedSize(prefix) && isFixedSize(encoder)) {\n    return createEncoder({ ...encoder, fixedSize: prefix.fixedSize + encoder.fixedSize, write });\n  }\n  const prefixMaxSize = isFixedSize(prefix) ? prefix.fixedSize : prefix.maxSize ?? null;\n  const encoderMaxSize = isFixedSize(encoder) ? encoder.fixedSize : encoder.maxSize ?? null;\n  const maxSize = prefixMaxSize !== null && encoderMaxSize !== null ? prefixMaxSize + encoderMaxSize : null;\n  return createEncoder({\n    ...encoder,\n    ...maxSize !== null ? { maxSize } : {},\n    getSizeFromValue: (value) => {\n      const encoderSize = getEncodedSize(value, encoder);\n      return getEncodedSize(encoderSize, prefix) + encoderSize;\n    },\n    write\n  });\n}\nfunction addDecoderSizePrefix(decoder, prefix) {\n  const read = (bytes, offset) => {\n    const [bigintSize, decoderOffset] = prefix.read(bytes, offset);\n    const size = Number(bigintSize);\n    offset = decoderOffset;\n    if (offset > 0 || bytes.length > size) {\n      bytes = bytes.slice(offset, offset + size);\n    }\n    assertByteArrayHasEnoughBytesForCodec(\"addDecoderSizePrefix\", size, bytes);\n    return [decoder.decode(bytes), offset + size];\n  };\n  if (isFixedSize(prefix) && isFixedSize(decoder)) {\n    return createDecoder({ ...decoder, fixedSize: prefix.fixedSize + decoder.fixedSize, read });\n  }\n  const prefixMaxSize = isFixedSize(prefix) ? prefix.fixedSize : prefix.maxSize ?? null;\n  const decoderMaxSize = isFixedSize(decoder) ? decoder.fixedSize : decoder.maxSize ?? null;\n  const maxSize = prefixMaxSize !== null && decoderMaxSize !== null ? prefixMaxSize + decoderMaxSize : null;\n  return createDecoder({ ...decoder, ...maxSize !== null ? { maxSize } : {}, read });\n}\nfunction addCodecSizePrefix(codec, prefix) {\n  return combineCodec(addEncoderSizePrefix(codec, prefix), addDecoderSizePrefix(codec, prefix));\n}\n\n// src/fix-codec-size.ts\nfunction fixEncoderSize(encoder, fixedBytes) {\n  return createEncoder({\n    fixedSize: fixedBytes,\n    write: (value, bytes, offset) => {\n      const variableByteArray = encoder.encode(value);\n      const fixedByteArray = variableByteArray.length > fixedBytes ? variableByteArray.slice(0, fixedBytes) : variableByteArray;\n      bytes.set(fixedByteArray, offset);\n      return offset + fixedBytes;\n    }\n  });\n}\nfunction fixDecoderSize(decoder, fixedBytes) {\n  return createDecoder({\n    fixedSize: fixedBytes,\n    read: (bytes, offset) => {\n      assertByteArrayHasEnoughBytesForCodec(\"fixCodecSize\", fixedBytes, bytes, offset);\n      if (offset > 0 || bytes.length > fixedBytes) {\n        bytes = bytes.slice(offset, offset + fixedBytes);\n      }\n      if (isFixedSize(decoder)) {\n        bytes = fixBytes(bytes, decoder.fixedSize);\n      }\n      const [value] = decoder.read(bytes, 0);\n      return [value, offset + fixedBytes];\n    }\n  });\n}\nfunction fixCodecSize(codec, fixedBytes) {\n  return combineCodec(fixEncoderSize(codec, fixedBytes), fixDecoderSize(codec, fixedBytes));\n}\n\n// src/offset-codec.ts\nfunction offsetEncoder(encoder, config) {\n  return createEncoder({\n    ...encoder,\n    write: (value, bytes, preOffset) => {\n      const wrapBytes = (offset) => modulo(offset, bytes.length);\n      const newPreOffset = config.preOffset ? config.preOffset({ bytes, preOffset, wrapBytes }) : preOffset;\n      assertByteArrayOffsetIsNotOutOfRange(\"offsetEncoder\", newPreOffset, bytes.length);\n      const postOffset = encoder.write(value, bytes, newPreOffset);\n      const newPostOffset = config.postOffset ? config.postOffset({ bytes, newPreOffset, postOffset, preOffset, wrapBytes }) : postOffset;\n      assertByteArrayOffsetIsNotOutOfRange(\"offsetEncoder\", newPostOffset, bytes.length);\n      return newPostOffset;\n    }\n  });\n}\nfunction offsetDecoder(decoder, config) {\n  return createDecoder({\n    ...decoder,\n    read: (bytes, preOffset) => {\n      const wrapBytes = (offset) => modulo(offset, bytes.length);\n      const newPreOffset = config.preOffset ? config.preOffset({ bytes, preOffset, wrapBytes }) : preOffset;\n      assertByteArrayOffsetIsNotOutOfRange(\"offsetDecoder\", newPreOffset, bytes.length);\n      const [value, postOffset] = decoder.read(bytes, newPreOffset);\n      const newPostOffset = config.postOffset ? config.postOffset({ bytes, newPreOffset, postOffset, preOffset, wrapBytes }) : postOffset;\n      assertByteArrayOffsetIsNotOutOfRange(\"offsetDecoder\", newPostOffset, bytes.length);\n      return [value, newPostOffset];\n    }\n  });\n}\nfunction offsetCodec(codec, config) {\n  return combineCodec(offsetEncoder(codec, config), offsetDecoder(codec, config));\n}\nfunction modulo(dividend, divisor) {\n  if (divisor === 0) return 0;\n  return (dividend % divisor + divisor) % divisor;\n}\nfunction resizeEncoder(encoder, resize) {\n  if (isFixedSize(encoder)) {\n    const fixedSize = resize(encoder.fixedSize);\n    if (fixedSize < 0) {\n      throw new SolanaError(SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH, {\n        bytesLength: fixedSize,\n        codecDescription: \"resizeEncoder\"\n      });\n    }\n    return createEncoder({ ...encoder, fixedSize });\n  }\n  return createEncoder({\n    ...encoder,\n    getSizeFromValue: (value) => {\n      const newSize = resize(encoder.getSizeFromValue(value));\n      if (newSize < 0) {\n        throw new SolanaError(SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH, {\n          bytesLength: newSize,\n          codecDescription: \"resizeEncoder\"\n        });\n      }\n      return newSize;\n    }\n  });\n}\nfunction resizeDecoder(decoder, resize) {\n  if (isFixedSize(decoder)) {\n    const fixedSize = resize(decoder.fixedSize);\n    if (fixedSize < 0) {\n      throw new SolanaError(SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH, {\n        bytesLength: fixedSize,\n        codecDescription: \"resizeDecoder\"\n      });\n    }\n    return createDecoder({ ...decoder, fixedSize });\n  }\n  return decoder;\n}\nfunction resizeCodec(codec, resize) {\n  return combineCodec(resizeEncoder(codec, resize), resizeDecoder(codec, resize));\n}\n\n// src/pad-codec.ts\nfunction padLeftEncoder(encoder, offset) {\n  return offsetEncoder(\n    resizeEncoder(encoder, (size) => size + offset),\n    { preOffset: ({ preOffset }) => preOffset + offset }\n  );\n}\nfunction padRightEncoder(encoder, offset) {\n  return offsetEncoder(\n    resizeEncoder(encoder, (size) => size + offset),\n    { postOffset: ({ postOffset }) => postOffset + offset }\n  );\n}\nfunction padLeftDecoder(decoder, offset) {\n  return offsetDecoder(\n    resizeDecoder(decoder, (size) => size + offset),\n    { preOffset: ({ preOffset }) => preOffset + offset }\n  );\n}\nfunction padRightDecoder(decoder, offset) {\n  return offsetDecoder(\n    resizeDecoder(decoder, (size) => size + offset),\n    { postOffset: ({ postOffset }) => postOffset + offset }\n  );\n}\nfunction padLeftCodec(codec, offset) {\n  return combineCodec(padLeftEncoder(codec, offset), padLeftDecoder(codec, offset));\n}\nfunction padRightCodec(codec, offset) {\n  return combineCodec(padRightEncoder(codec, offset), padRightDecoder(codec, offset));\n}\n\n// src/reverse-codec.ts\nfunction copySourceToTargetInReverse(source, target_WILL_MUTATE, sourceOffset, sourceLength, targetOffset = 0) {\n  while (sourceOffset < --sourceLength) {\n    const leftValue = source[sourceOffset];\n    target_WILL_MUTATE[sourceOffset + targetOffset] = source[sourceLength];\n    target_WILL_MUTATE[sourceLength + targetOffset] = leftValue;\n    sourceOffset++;\n  }\n  if (sourceOffset === sourceLength) {\n    target_WILL_MUTATE[sourceOffset + targetOffset] = source[sourceOffset];\n  }\n}\nfunction reverseEncoder(encoder) {\n  assertIsFixedSize(encoder);\n  return createEncoder({\n    ...encoder,\n    write: (value, bytes, offset) => {\n      const newOffset = encoder.write(value, bytes, offset);\n      copySourceToTargetInReverse(\n        bytes,\n        bytes,\n        offset,\n        offset + encoder.fixedSize\n      );\n      return newOffset;\n    }\n  });\n}\nfunction reverseDecoder(decoder) {\n  assertIsFixedSize(decoder);\n  return createDecoder({\n    ...decoder,\n    read: (bytes, offset) => {\n      const reversedBytes = bytes.slice();\n      copySourceToTargetInReverse(\n        bytes,\n        reversedBytes,\n        offset,\n        offset + decoder.fixedSize\n      );\n      return decoder.read(reversedBytes, offset);\n    }\n  });\n}\nfunction reverseCodec(codec) {\n  return combineCodec(reverseEncoder(codec), reverseDecoder(codec));\n}\n\n// src/transform-codec.ts\nfunction transformEncoder(encoder, unmap) {\n  return createEncoder({\n    ...isVariableSize(encoder) ? { ...encoder, getSizeFromValue: (value) => encoder.getSizeFromValue(unmap(value)) } : encoder,\n    write: (value, bytes, offset) => encoder.write(unmap(value), bytes, offset)\n  });\n}\nfunction transformDecoder(decoder, map) {\n  return createDecoder({\n    ...decoder,\n    read: (bytes, offset) => {\n      const [value, newOffset] = decoder.read(bytes, offset);\n      return [map(value, bytes, offset), newOffset];\n    }\n  });\n}\nfunction transformCodec(codec, unmap, map) {\n  return createCodec({\n    ...transformEncoder(codec, unmap),\n    read: map ? transformDecoder(codec, map).read : codec.read\n  });\n}\n\nexport { addCodecSentinel, addCodecSizePrefix, addDecoderSentinel, addDecoderSizePrefix, addEncoderSentinel, addEncoderSizePrefix, assertByteArrayHasEnoughBytesForCodec, assertByteArrayIsNotEmptyForCodec, assertByteArrayOffsetIsNotOutOfRange, assertIsFixedSize, assertIsVariableSize, combineCodec, containsBytes, createCodec, createDecoder, createEncoder, fixBytes, fixCodecSize, fixDecoderSize, fixEncoderSize, getEncodedSize, isFixedSize, isVariableSize, mergeBytes, offsetCodec, offsetDecoder, offsetEncoder, padBytes, padLeftCodec, padLeftDecoder, padLeftEncoder, padRightCodec, padRightDecoder, padRightEncoder, resizeCodec, resizeDecoder, resizeEncoder, reverseCodec, reverseDecoder, reverseEncoder, transformCodec, transformDecoder, transformEncoder };\n//# sourceMappingURL=index.browser.mjs.map\n//# sourceMappingURL=index.browser.mjs.map","import { SolanaError, SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE } from '@solana/errors';\nimport { combineCodec, createDecoder, createEncoder, assertByteArrayIsNotEmptyForCodec, assertByteArrayHasEnoughBytesForCodec } from '@solana/codecs-core';\n\n// src/assertions.ts\nfunction assertNumberIsBetweenForCodec(codecDescription, min, max, value) {\n  if (value < min || value > max) {\n    throw new SolanaError(SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE, {\n      codecDescription,\n      max,\n      min,\n      value\n    });\n  }\n}\n\n// src/common.ts\nvar Endian = /* @__PURE__ */ ((Endian2) => {\n  Endian2[Endian2[\"Little\"] = 0] = \"Little\";\n  Endian2[Endian2[\"Big\"] = 1] = \"Big\";\n  return Endian2;\n})(Endian || {});\nfunction isLittleEndian(config) {\n  return config?.endian === 1 /* Big */ ? false : true;\n}\nfunction numberEncoderFactory(input) {\n  return createEncoder({\n    fixedSize: input.size,\n    write(value, bytes, offset) {\n      if (input.range) {\n        assertNumberIsBetweenForCodec(input.name, input.range[0], input.range[1], value);\n      }\n      const arrayBuffer = new ArrayBuffer(input.size);\n      input.set(new DataView(arrayBuffer), value, isLittleEndian(input.config));\n      bytes.set(new Uint8Array(arrayBuffer), offset);\n      return offset + input.size;\n    }\n  });\n}\nfunction numberDecoderFactory(input) {\n  return createDecoder({\n    fixedSize: input.size,\n    read(bytes, offset = 0) {\n      assertByteArrayIsNotEmptyForCodec(input.name, bytes, offset);\n      assertByteArrayHasEnoughBytesForCodec(input.name, input.size, bytes, offset);\n      const view = new DataView(toArrayBuffer(bytes, offset, input.size));\n      return [input.get(view, isLittleEndian(input.config)), offset + input.size];\n    }\n  });\n}\nfunction toArrayBuffer(bytes, offset, length) {\n  const bytesOffset = bytes.byteOffset + (offset ?? 0);\n  const bytesLength = length ?? bytes.byteLength;\n  return bytes.buffer.slice(bytesOffset, bytesOffset + bytesLength);\n}\n\n// src/f32.ts\nvar getF32Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"f32\",\n  set: (view, value, le) => view.setFloat32(0, Number(value), le),\n  size: 4\n});\nvar getF32Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getFloat32(0, le),\n  name: \"f32\",\n  size: 4\n});\nvar getF32Codec = (config = {}) => combineCodec(getF32Encoder(config), getF32Decoder(config));\nvar getF64Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"f64\",\n  set: (view, value, le) => view.setFloat64(0, Number(value), le),\n  size: 8\n});\nvar getF64Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getFloat64(0, le),\n  name: \"f64\",\n  size: 8\n});\nvar getF64Codec = (config = {}) => combineCodec(getF64Encoder(config), getF64Decoder(config));\nvar getI128Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"i128\",\n  range: [-BigInt(\"0x7fffffffffffffffffffffffffffffff\") - 1n, BigInt(\"0x7fffffffffffffffffffffffffffffff\")],\n  set: (view, value, le) => {\n    const leftOffset = le ? 8 : 0;\n    const rightOffset = le ? 0 : 8;\n    const rightMask = 0xffffffffffffffffn;\n    view.setBigInt64(leftOffset, BigInt(value) >> 64n, le);\n    view.setBigUint64(rightOffset, BigInt(value) & rightMask, le);\n  },\n  size: 16\n});\nvar getI128Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => {\n    const leftOffset = le ? 8 : 0;\n    const rightOffset = le ? 0 : 8;\n    const left = view.getBigInt64(leftOffset, le);\n    const right = view.getBigUint64(rightOffset, le);\n    return (left << 64n) + right;\n  },\n  name: \"i128\",\n  size: 16\n});\nvar getI128Codec = (config = {}) => combineCodec(getI128Encoder(config), getI128Decoder(config));\nvar getI16Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"i16\",\n  range: [-Number(\"0x7fff\") - 1, Number(\"0x7fff\")],\n  set: (view, value, le) => view.setInt16(0, Number(value), le),\n  size: 2\n});\nvar getI16Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getInt16(0, le),\n  name: \"i16\",\n  size: 2\n});\nvar getI16Codec = (config = {}) => combineCodec(getI16Encoder(config), getI16Decoder(config));\nvar getI32Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"i32\",\n  range: [-Number(\"0x7fffffff\") - 1, Number(\"0x7fffffff\")],\n  set: (view, value, le) => view.setInt32(0, Number(value), le),\n  size: 4\n});\nvar getI32Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getInt32(0, le),\n  name: \"i32\",\n  size: 4\n});\nvar getI32Codec = (config = {}) => combineCodec(getI32Encoder(config), getI32Decoder(config));\nvar getI64Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"i64\",\n  range: [-BigInt(\"0x7fffffffffffffff\") - 1n, BigInt(\"0x7fffffffffffffff\")],\n  set: (view, value, le) => view.setBigInt64(0, BigInt(value), le),\n  size: 8\n});\nvar getI64Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getBigInt64(0, le),\n  name: \"i64\",\n  size: 8\n});\nvar getI64Codec = (config = {}) => combineCodec(getI64Encoder(config), getI64Decoder(config));\nvar getI8Encoder = () => numberEncoderFactory({\n  name: \"i8\",\n  range: [-Number(\"0x7f\") - 1, Number(\"0x7f\")],\n  set: (view, value) => view.setInt8(0, Number(value)),\n  size: 1\n});\nvar getI8Decoder = () => numberDecoderFactory({\n  get: (view) => view.getInt8(0),\n  name: \"i8\",\n  size: 1\n});\nvar getI8Codec = () => combineCodec(getI8Encoder(), getI8Decoder());\nvar getShortU16Encoder = () => createEncoder({\n  getSizeFromValue: (value) => {\n    if (value <= 127) return 1;\n    if (value <= 16383) return 2;\n    return 3;\n  },\n  maxSize: 3,\n  write: (value, bytes, offset) => {\n    assertNumberIsBetweenForCodec(\"shortU16\", 0, 65535, value);\n    const shortU16Bytes = [0];\n    for (let ii = 0; ; ii += 1) {\n      const alignedValue = Number(value) >> ii * 7;\n      if (alignedValue === 0) {\n        break;\n      }\n      const nextSevenBits = 127 & alignedValue;\n      shortU16Bytes[ii] = nextSevenBits;\n      if (ii > 0) {\n        shortU16Bytes[ii - 1] |= 128;\n      }\n    }\n    bytes.set(shortU16Bytes, offset);\n    return offset + shortU16Bytes.length;\n  }\n});\nvar getShortU16Decoder = () => createDecoder({\n  maxSize: 3,\n  read: (bytes, offset) => {\n    let value = 0;\n    let byteCount = 0;\n    while (++byteCount) {\n      const byteIndex = byteCount - 1;\n      const currentByte = bytes[offset + byteIndex];\n      const nextSevenBits = 127 & currentByte;\n      value |= nextSevenBits << byteIndex * 7;\n      if ((currentByte & 128) === 0) {\n        break;\n      }\n    }\n    return [value, offset + byteCount];\n  }\n});\nvar getShortU16Codec = () => combineCodec(getShortU16Encoder(), getShortU16Decoder());\nvar getU128Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"u128\",\n  range: [0n, BigInt(\"0xffffffffffffffffffffffffffffffff\")],\n  set: (view, value, le) => {\n    const leftOffset = le ? 8 : 0;\n    const rightOffset = le ? 0 : 8;\n    const rightMask = 0xffffffffffffffffn;\n    view.setBigUint64(leftOffset, BigInt(value) >> 64n, le);\n    view.setBigUint64(rightOffset, BigInt(value) & rightMask, le);\n  },\n  size: 16\n});\nvar getU128Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => {\n    const leftOffset = le ? 8 : 0;\n    const rightOffset = le ? 0 : 8;\n    const left = view.getBigUint64(leftOffset, le);\n    const right = view.getBigUint64(rightOffset, le);\n    return (left << 64n) + right;\n  },\n  name: \"u128\",\n  size: 16\n});\nvar getU128Codec = (config = {}) => combineCodec(getU128Encoder(config), getU128Decoder(config));\nvar getU16Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"u16\",\n  range: [0, Number(\"0xffff\")],\n  set: (view, value, le) => view.setUint16(0, Number(value), le),\n  size: 2\n});\nvar getU16Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getUint16(0, le),\n  name: \"u16\",\n  size: 2\n});\nvar getU16Codec = (config = {}) => combineCodec(getU16Encoder(config), getU16Decoder(config));\nvar getU32Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"u32\",\n  range: [0, Number(\"0xffffffff\")],\n  set: (view, value, le) => view.setUint32(0, Number(value), le),\n  size: 4\n});\nvar getU32Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getUint32(0, le),\n  name: \"u32\",\n  size: 4\n});\nvar getU32Codec = (config = {}) => combineCodec(getU32Encoder(config), getU32Decoder(config));\nvar getU64Encoder = (config = {}) => numberEncoderFactory({\n  config,\n  name: \"u64\",\n  range: [0n, BigInt(\"0xffffffffffffffff\")],\n  set: (view, value, le) => view.setBigUint64(0, BigInt(value), le),\n  size: 8\n});\nvar getU64Decoder = (config = {}) => numberDecoderFactory({\n  config,\n  get: (view, le) => view.getBigUint64(0, le),\n  name: \"u64\",\n  size: 8\n});\nvar getU64Codec = (config = {}) => combineCodec(getU64Encoder(config), getU64Decoder(config));\nvar getU8Encoder = () => numberEncoderFactory({\n  name: \"u8\",\n  range: [0, Number(\"0xff\")],\n  set: (view, value) => view.setUint8(0, Number(value)),\n  size: 1\n});\nvar getU8Decoder = () => numberDecoderFactory({\n  get: (view) => view.getUint8(0),\n  name: \"u8\",\n  size: 1\n});\nvar getU8Codec = () => combineCodec(getU8Encoder(), getU8Decoder());\n\nexport { Endian, assertNumberIsBetweenForCodec, getF32Codec, getF32Decoder, getF32Encoder, getF64Codec, getF64Decoder, getF64Encoder, getI128Codec, getI128Decoder, getI128Encoder, getI16Codec, getI16Decoder, getI16Encoder, getI32Codec, getI32Decoder, getI32Encoder, getI64Codec, getI64Decoder, getI64Encoder, getI8Codec, getI8Decoder, getI8Encoder, getShortU16Codec, getShortU16Decoder, getShortU16Encoder, getU128Codec, getU128Decoder, getU128Encoder, getU16Codec, getU16Decoder, getU16Encoder, getU32Codec, getU32Decoder, getU32Encoder, getU64Codec, getU64Decoder, getU64Encoder, getU8Codec, getU8Decoder, getU8Encoder };\n//# sourceMappingURL=index.browser.mjs.map\n//# sourceMappingURL=index.browser.mjs.map","/**\n * A `StructFailure` represents a single specific failure in validation.\n */\n/**\n * `StructError` objects are thrown (or returned) when validation fails.\n *\n * Validation logic is design to exit early for maximum performance. The error\n * represents the first error encountered during validation. For more detail,\n * the `error.failures` property is a generator function that can be run to\n * continue validation and receive all the failures in the data.\n */\nclass StructError extends TypeError {\n    constructor(failure, failures) {\n        let cached;\n        const { message, explanation, ...rest } = failure;\n        const { path } = failure;\n        const msg = path.length === 0 ? message : `At path: ${path.join('.')} -- ${message}`;\n        super(explanation ?? msg);\n        if (explanation != null)\n            this.cause = msg;\n        Object.assign(this, rest);\n        this.name = this.constructor.name;\n        this.failures = () => {\n            return (cached ?? (cached = [failure, ...failures()]));\n        };\n    }\n}\n\n/**\n * Check if a value is an iterator.\n */\nfunction isIterable(x) {\n    return isObject(x) && typeof x[Symbol.iterator] === 'function';\n}\n/**\n * Check if a value is a plain object.\n */\nfunction isObject(x) {\n    return typeof x === 'object' && x != null;\n}\n/**\n * Check if a value is a non-array object.\n */\nfunction isNonArrayObject(x) {\n    return isObject(x) && !Array.isArray(x);\n}\n/**\n * Check if a value is a plain object.\n */\nfunction isPlainObject(x) {\n    if (Object.prototype.toString.call(x) !== '[object Object]') {\n        return false;\n    }\n    const prototype = Object.getPrototypeOf(x);\n    return prototype === null || prototype === Object.prototype;\n}\n/**\n * Return a value as a printable string.\n */\nfunction print(value) {\n    if (typeof value === 'symbol') {\n        return value.toString();\n    }\n    return typeof value === 'string' ? JSON.stringify(value) : `${value}`;\n}\n/**\n * Shifts (removes and returns) the first value from the `input` iterator.\n * Like `Array.prototype.shift()` but for an `Iterator`.\n */\nfunction shiftIterator(input) {\n    const { done, value } = input.next();\n    return done ? undefined : value;\n}\n/**\n * Convert a single validation result to a failure.\n */\nfunction toFailure(result, context, struct, value) {\n    if (result === true) {\n        return;\n    }\n    else if (result === false) {\n        result = {};\n    }\n    else if (typeof result === 'string') {\n        result = { message: result };\n    }\n    const { path, branch } = context;\n    const { type } = struct;\n    const { refinement, message = `Expected a value of type \\`${type}\\`${refinement ? ` with refinement \\`${refinement}\\`` : ''}, but received: \\`${print(value)}\\``, } = result;\n    return {\n        value,\n        type,\n        refinement,\n        key: path[path.length - 1],\n        path,\n        branch,\n        ...result,\n        message,\n    };\n}\n/**\n * Convert a validation result to an iterable of failures.\n */\nfunction* toFailures(result, context, struct, value) {\n    if (!isIterable(result)) {\n        result = [result];\n    }\n    for (const r of result) {\n        const failure = toFailure(r, context, struct, value);\n        if (failure) {\n            yield failure;\n        }\n    }\n}\n/**\n * Check a value against a struct, traversing deeply into nested values, and\n * returning an iterator of failures or success.\n */\nfunction* run(value, struct, options = {}) {\n    const { path = [], branch = [value], coerce = false, mask = false } = options;\n    const ctx = { path, branch, mask };\n    if (coerce) {\n        value = struct.coercer(value, ctx);\n    }\n    let status = 'valid';\n    for (const failure of struct.validator(value, ctx)) {\n        failure.explanation = options.message;\n        status = 'not_valid';\n        yield [failure, undefined];\n    }\n    for (let [k, v, s] of struct.entries(value, ctx)) {\n        const ts = run(v, s, {\n            path: k === undefined ? path : [...path, k],\n            branch: k === undefined ? branch : [...branch, v],\n            coerce,\n            mask,\n            message: options.message,\n        });\n        for (const t of ts) {\n            if (t[0]) {\n                status = t[0].refinement != null ? 'not_refined' : 'not_valid';\n                yield [t[0], undefined];\n            }\n            else if (coerce) {\n                v = t[1];\n                if (k === undefined) {\n                    value = v;\n                }\n                else if (value instanceof Map) {\n                    value.set(k, v);\n                }\n                else if (value instanceof Set) {\n                    value.add(v);\n                }\n                else if (isObject(value)) {\n                    if (v !== undefined || k in value)\n                        value[k] = v;\n                }\n            }\n        }\n    }\n    if (status !== 'not_valid') {\n        for (const failure of struct.refiner(value, ctx)) {\n            failure.explanation = options.message;\n            status = 'not_refined';\n            yield [failure, undefined];\n        }\n    }\n    if (status === 'valid') {\n        yield [undefined, value];\n    }\n}\n\n/**\n * `Struct` objects encapsulate the validation logic for a specific type of\n * values. Once constructed, you use the `assert`, `is` or `validate` helpers to\n * validate unknown input data against the struct.\n */\nclass Struct {\n    constructor(props) {\n        const { type, schema, validator, refiner, coercer = (value) => value, entries = function* () { }, } = props;\n        this.type = type;\n        this.schema = schema;\n        this.entries = entries;\n        this.coercer = coercer;\n        if (validator) {\n            this.validator = (value, context) => {\n                const result = validator(value, context);\n                return toFailures(result, context, this, value);\n            };\n        }\n        else {\n            this.validator = () => [];\n        }\n        if (refiner) {\n            this.refiner = (value, context) => {\n                const result = refiner(value, context);\n                return toFailures(result, context, this, value);\n            };\n        }\n        else {\n            this.refiner = () => [];\n        }\n    }\n    /**\n     * Assert that a value passes the struct's validation, throwing if it doesn't.\n     */\n    assert(value, message) {\n        return assert(value, this, message);\n    }\n    /**\n     * Create a value with the struct's coercion logic, then validate it.\n     */\n    create(value, message) {\n        return create(value, this, message);\n    }\n    /**\n     * Check if a value passes the struct's validation.\n     */\n    is(value) {\n        return is(value, this);\n    }\n    /**\n     * Mask a value, coercing and validating it, but returning only the subset of\n     * properties defined by the struct's schema. Masking applies recursively to\n     * props of `object` structs only.\n     */\n    mask(value, message) {\n        return mask(value, this, message);\n    }\n    /**\n     * Validate a value with the struct's validation logic, returning a tuple\n     * representing the result.\n     *\n     * You may optionally pass `true` for the `coerce` argument to coerce\n     * the value before attempting to validate it. If you do, the result will\n     * contain the coerced result when successful. Also, `mask` will turn on\n     * masking of the unknown `object` props recursively if passed.\n     */\n    validate(value, options = {}) {\n        return validate(value, this, options);\n    }\n}\n/**\n * Assert that a value passes a struct, throwing if it doesn't.\n */\nfunction assert(value, struct, message) {\n    const result = validate(value, struct, { message });\n    if (result[0]) {\n        throw result[0];\n    }\n}\n/**\n * Create a value with the coercion logic of struct and validate it.\n */\nfunction create(value, struct, message) {\n    const result = validate(value, struct, { coerce: true, message });\n    if (result[0]) {\n        throw result[0];\n    }\n    else {\n        return result[1];\n    }\n}\n/**\n * Mask a value, returning only the subset of properties defined by a struct.\n */\nfunction mask(value, struct, message) {\n    const result = validate(value, struct, { coerce: true, mask: true, message });\n    if (result[0]) {\n        throw result[0];\n    }\n    else {\n        return result[1];\n    }\n}\n/**\n * Check if a value passes a struct.\n */\nfunction is(value, struct) {\n    const result = validate(value, struct);\n    return !result[0];\n}\n/**\n * Validate a value against a struct, returning an error if invalid, or the\n * value (with potential coercion) if valid.\n */\nfunction validate(value, struct, options = {}) {\n    const tuples = run(value, struct, options);\n    const tuple = shiftIterator(tuples);\n    if (tuple[0]) {\n        const error = new StructError(tuple[0], function* () {\n            for (const t of tuples) {\n                if (t[0]) {\n                    yield t[0];\n                }\n            }\n        });\n        return [error, undefined];\n    }\n    else {\n        const v = tuple[1];\n        return [undefined, v];\n    }\n}\n\nfunction assign(...Structs) {\n    const isType = Structs[0].type === 'type';\n    const schemas = Structs.map((s) => s.schema);\n    const schema = Object.assign({}, ...schemas);\n    return isType ? type(schema) : object(schema);\n}\n/**\n * Define a new struct type with a custom validation function.\n */\nfunction define(name, validator) {\n    return new Struct({ type: name, schema: null, validator });\n}\n/**\n * Create a new struct based on an existing struct, but the value is allowed to\n * be `undefined`. `log` will be called if the value is not `undefined`.\n */\nfunction deprecated(struct, log) {\n    return new Struct({\n        ...struct,\n        refiner: (value, ctx) => value === undefined || struct.refiner(value, ctx),\n        validator(value, ctx) {\n            if (value === undefined) {\n                return true;\n            }\n            else {\n                log(value, ctx);\n                return struct.validator(value, ctx);\n            }\n        },\n    });\n}\n/**\n * Create a struct with dynamic validation logic.\n *\n * The callback will receive the value currently being validated, and must\n * return a struct object to validate it with. This can be useful to model\n * validation logic that changes based on its input.\n */\nfunction dynamic(fn) {\n    return new Struct({\n        type: 'dynamic',\n        schema: null,\n        *entries(value, ctx) {\n            const struct = fn(value, ctx);\n            yield* struct.entries(value, ctx);\n        },\n        validator(value, ctx) {\n            const struct = fn(value, ctx);\n            return struct.validator(value, ctx);\n        },\n        coercer(value, ctx) {\n            const struct = fn(value, ctx);\n            return struct.coercer(value, ctx);\n        },\n        refiner(value, ctx) {\n            const struct = fn(value, ctx);\n            return struct.refiner(value, ctx);\n        },\n    });\n}\n/**\n * Create a struct with lazily evaluated validation logic.\n *\n * The first time validation is run with the struct, the callback will be called\n * and must return a struct object to use. This is useful for cases where you\n * want to have self-referential structs for nested data structures to avoid a\n * circular definition problem.\n */\nfunction lazy(fn) {\n    let struct;\n    return new Struct({\n        type: 'lazy',\n        schema: null,\n        *entries(value, ctx) {\n            struct ?? (struct = fn());\n            yield* struct.entries(value, ctx);\n        },\n        validator(value, ctx) {\n            struct ?? (struct = fn());\n            return struct.validator(value, ctx);\n        },\n        coercer(value, ctx) {\n            struct ?? (struct = fn());\n            return struct.coercer(value, ctx);\n        },\n        refiner(value, ctx) {\n            struct ?? (struct = fn());\n            return struct.refiner(value, ctx);\n        },\n    });\n}\n/**\n * Create a new struct based on an existing object struct, but excluding\n * specific properties.\n *\n * Like TypeScript's `Omit` utility.\n */\nfunction omit(struct, keys) {\n    const { schema } = struct;\n    const subschema = { ...schema };\n    for (const key of keys) {\n        delete subschema[key];\n    }\n    switch (struct.type) {\n        case 'type':\n            return type(subschema);\n        default:\n            return object(subschema);\n    }\n}\n/**\n * Create a new struct based on an existing object struct, but with all of its\n * properties allowed to be `undefined`.\n *\n * Like TypeScript's `Partial` utility.\n */\nfunction partial(struct) {\n    const isStruct = struct instanceof Struct;\n    const schema = isStruct ? { ...struct.schema } : { ...struct };\n    for (const key in schema) {\n        schema[key] = optional(schema[key]);\n    }\n    if (isStruct && struct.type === 'type') {\n        return type(schema);\n    }\n    return object(schema);\n}\n/**\n * Create a new struct based on an existing object struct, but only including\n * specific properties.\n *\n * Like TypeScript's `Pick` utility.\n */\nfunction pick(struct, keys) {\n    const { schema } = struct;\n    const subschema = {};\n    for (const key of keys) {\n        subschema[key] = schema[key];\n    }\n    switch (struct.type) {\n        case 'type':\n            return type(subschema);\n        default:\n            return object(subschema);\n    }\n}\n/**\n * Define a new struct type with a custom validation function.\n *\n * @deprecated This function has been renamed to `define`.\n */\nfunction struct(name, validator) {\n    console.warn('superstruct@0.11 - The `struct` helper has been renamed to `define`.');\n    return define(name, validator);\n}\n\n/**\n * Ensure that any value passes validation.\n */\nfunction any() {\n    return define('any', () => true);\n}\nfunction array(Element) {\n    return new Struct({\n        type: 'array',\n        schema: Element,\n        *entries(value) {\n            if (Element && Array.isArray(value)) {\n                for (const [i, v] of value.entries()) {\n                    yield [i, v, Element];\n                }\n            }\n        },\n        coercer(value) {\n            return Array.isArray(value) ? value.slice() : value;\n        },\n        validator(value) {\n            return (Array.isArray(value) ||\n                `Expected an array value, but received: ${print(value)}`);\n        },\n    });\n}\n/**\n * Ensure that a value is a bigint.\n */\nfunction bigint() {\n    return define('bigint', (value) => {\n        return typeof value === 'bigint';\n    });\n}\n/**\n * Ensure that a value is a boolean.\n */\nfunction boolean() {\n    return define('boolean', (value) => {\n        return typeof value === 'boolean';\n    });\n}\n/**\n * Ensure that a value is a valid `Date`.\n *\n * Note: this also ensures that the value is *not* an invalid `Date` object,\n * which can occur when parsing a date fails but still returns a `Date`.\n */\nfunction date() {\n    return define('date', (value) => {\n        return ((value instanceof Date && !isNaN(value.getTime())) ||\n            `Expected a valid \\`Date\\` object, but received: ${print(value)}`);\n    });\n}\nfunction enums(values) {\n    const schema = {};\n    const description = values.map((v) => print(v)).join();\n    for (const key of values) {\n        schema[key] = key;\n    }\n    return new Struct({\n        type: 'enums',\n        schema,\n        validator(value) {\n            return (values.includes(value) ||\n                `Expected one of \\`${description}\\`, but received: ${print(value)}`);\n        },\n    });\n}\n/**\n * Ensure that a value is a function.\n */\nfunction func() {\n    return define('func', (value) => {\n        return (typeof value === 'function' ||\n            `Expected a function, but received: ${print(value)}`);\n    });\n}\n/**\n * Ensure that a value is an instance of a specific class.\n */\nfunction instance(Class) {\n    return define('instance', (value) => {\n        return (value instanceof Class ||\n            `Expected a \\`${Class.name}\\` instance, but received: ${print(value)}`);\n    });\n}\n/**\n * Ensure that a value is an integer.\n */\nfunction integer() {\n    return define('integer', (value) => {\n        return ((typeof value === 'number' && !isNaN(value) && Number.isInteger(value)) ||\n            `Expected an integer, but received: ${print(value)}`);\n    });\n}\n/**\n * Ensure that a value matches all of a set of types.\n */\nfunction intersection(Structs) {\n    return new Struct({\n        type: 'intersection',\n        schema: null,\n        *entries(value, ctx) {\n            for (const S of Structs) {\n                yield* S.entries(value, ctx);\n            }\n        },\n        *validator(value, ctx) {\n            for (const S of Structs) {\n                yield* S.validator(value, ctx);\n            }\n        },\n        *refiner(value, ctx) {\n            for (const S of Structs) {\n                yield* S.refiner(value, ctx);\n            }\n        },\n    });\n}\nfunction literal(constant) {\n    const description = print(constant);\n    const t = typeof constant;\n    return new Struct({\n        type: 'literal',\n        schema: t === 'string' || t === 'number' || t === 'boolean' ? constant : null,\n        validator(value) {\n            return (value === constant ||\n                `Expected the literal \\`${description}\\`, but received: ${print(value)}`);\n        },\n    });\n}\nfunction map(Key, Value) {\n    return new Struct({\n        type: 'map',\n        schema: null,\n        *entries(value) {\n            if (Key && Value && value instanceof Map) {\n                for (const [k, v] of value.entries()) {\n                    yield [k, k, Key];\n                    yield [k, v, Value];\n                }\n            }\n        },\n        coercer(value) {\n            return value instanceof Map ? new Map(value) : value;\n        },\n        validator(value) {\n            return (value instanceof Map ||\n                `Expected a \\`Map\\` object, but received: ${print(value)}`);\n        },\n    });\n}\n/**\n * Ensure that no value ever passes validation.\n */\nfunction never() {\n    return define('never', () => false);\n}\n/**\n * Augment an existing struct to allow `null` values.\n */\nfunction nullable(struct) {\n    return new Struct({\n        ...struct,\n        validator: (value, ctx) => value === null || struct.validator(value, ctx),\n        refiner: (value, ctx) => value === null || struct.refiner(value, ctx),\n    });\n}\n/**\n * Ensure that a value is a number.\n */\nfunction number() {\n    return define('number', (value) => {\n        return ((typeof value === 'number' && !isNaN(value)) ||\n            `Expected a number, but received: ${print(value)}`);\n    });\n}\nfunction object(schema) {\n    const knowns = schema ? Object.keys(schema) : [];\n    const Never = never();\n    return new Struct({\n        type: 'object',\n        schema: schema ? schema : null,\n        *entries(value) {\n            if (schema && isObject(value)) {\n                const unknowns = new Set(Object.keys(value));\n                for (const key of knowns) {\n                    unknowns.delete(key);\n                    yield [key, value[key], schema[key]];\n                }\n                for (const key of unknowns) {\n                    yield [key, value[key], Never];\n                }\n            }\n        },\n        validator(value) {\n            return (isNonArrayObject(value) ||\n                `Expected an object, but received: ${print(value)}`);\n        },\n        coercer(value, ctx) {\n            if (!isNonArrayObject(value)) {\n                return value;\n            }\n            const coerced = { ...value };\n            // The `object` struct has special behaviour enabled by the mask flag.\n            // When masking, properties that are not in the schema are deleted from\n            // the coerced object instead of eventually failing validaiton.\n            if (ctx.mask && schema) {\n                for (const key in coerced) {\n                    if (schema[key] === undefined) {\n                        delete coerced[key];\n                    }\n                }\n            }\n            return coerced;\n        },\n    });\n}\n/**\n * Augment a struct to allow `undefined` values.\n */\nfunction optional(struct) {\n    return new Struct({\n        ...struct,\n        validator: (value, ctx) => value === undefined || struct.validator(value, ctx),\n        refiner: (value, ctx) => value === undefined || struct.refiner(value, ctx),\n    });\n}\n/**\n * Ensure that a value is an object with keys and values of specific types, but\n * without ensuring any specific shape of properties.\n *\n * Like TypeScript's `Record` utility.\n */\nfunction record(Key, Value) {\n    return new Struct({\n        type: 'record',\n        schema: null,\n        *entries(value) {\n            if (isObject(value)) {\n                for (const k in value) {\n                    const v = value[k];\n                    yield [k, k, Key];\n                    yield [k, v, Value];\n                }\n            }\n        },\n        validator(value) {\n            return (isNonArrayObject(value) ||\n                `Expected an object, but received: ${print(value)}`);\n        },\n        coercer(value) {\n            return isNonArrayObject(value) ? { ...value } : value;\n        },\n    });\n}\n/**\n * Ensure that a value is a `RegExp`.\n *\n * Note: this does not test the value against the regular expression! For that\n * you need to use the `pattern()` refinement.\n */\nfunction regexp() {\n    return define('regexp', (value) => {\n        return value instanceof RegExp;\n    });\n}\nfunction set(Element) {\n    return new Struct({\n        type: 'set',\n        schema: null,\n        *entries(value) {\n            if (Element && value instanceof Set) {\n                for (const v of value) {\n                    yield [v, v, Element];\n                }\n            }\n        },\n        coercer(value) {\n            return value instanceof Set ? new Set(value) : value;\n        },\n        validator(value) {\n            return (value instanceof Set ||\n                `Expected a \\`Set\\` object, but received: ${print(value)}`);\n        },\n    });\n}\n/**\n * Ensure that a value is a string.\n */\nfunction string() {\n    return define('string', (value) => {\n        return (typeof value === 'string' ||\n            `Expected a string, but received: ${print(value)}`);\n    });\n}\n/**\n * Ensure that a value is a tuple of a specific length, and that each of its\n * elements is of a specific type.\n */\nfunction tuple(Structs) {\n    const Never = never();\n    return new Struct({\n        type: 'tuple',\n        schema: null,\n        *entries(value) {\n            if (Array.isArray(value)) {\n                const length = Math.max(Structs.length, value.length);\n                for (let i = 0; i < length; i++) {\n                    yield [i, value[i], Structs[i] || Never];\n                }\n            }\n        },\n        validator(value) {\n            return (Array.isArray(value) ||\n                `Expected an array, but received: ${print(value)}`);\n        },\n        coercer(value) {\n            return Array.isArray(value) ? value.slice() : value;\n        },\n    });\n}\n/**\n * Ensure that a value has a set of known properties of specific types.\n *\n * Note: Unrecognized properties are allowed and untouched. This is similar to\n * how TypeScript's structural typing works.\n */\nfunction type(schema) {\n    const keys = Object.keys(schema);\n    return new Struct({\n        type: 'type',\n        schema,\n        *entries(value) {\n            if (isObject(value)) {\n                for (const k of keys) {\n                    yield [k, value[k], schema[k]];\n                }\n            }\n        },\n        validator(value) {\n            return (isNonArrayObject(value) ||\n                `Expected an object, but received: ${print(value)}`);\n        },\n        coercer(value) {\n            return isNonArrayObject(value) ? { ...value } : value;\n        },\n    });\n}\n/**\n * Ensure that a value matches one of a set of types.\n */\nfunction union(Structs) {\n    const description = Structs.map((s) => s.type).join(' | ');\n    return new Struct({\n        type: 'union',\n        schema: null,\n        coercer(value, ctx) {\n            for (const S of Structs) {\n                const [error, coerced] = S.validate(value, {\n                    coerce: true,\n                    mask: ctx.mask,\n                });\n                if (!error) {\n                    return coerced;\n                }\n            }\n            return value;\n        },\n        validator(value, ctx) {\n            const failures = [];\n            for (const S of Structs) {\n                const [...tuples] = run(value, S, ctx);\n                const [first] = tuples;\n                if (!first[0]) {\n                    return [];\n                }\n                else {\n                    for (const [failure] of tuples) {\n                        if (failure) {\n                            failures.push(failure);\n                        }\n                    }\n                }\n            }\n            return [\n                `Expected the value to satisfy a union of \\`${description}\\`, but received: ${print(value)}`,\n                ...failures,\n            ];\n        },\n    });\n}\n/**\n * Ensure that any value passes validation, without widening its type to `any`.\n */\nfunction unknown() {\n    return define('unknown', () => true);\n}\n\n/**\n * Augment a `Struct` to add an additional coercion step to its input.\n *\n * This allows you to transform input data before validating it, to increase the\n * likelihood that it passes validationfor example for default values, parsing\n * different formats, etc.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\nfunction coerce(struct, condition, coercer) {\n    return new Struct({\n        ...struct,\n        coercer: (value, ctx) => {\n            return is(value, condition)\n                ? struct.coercer(coercer(value, ctx), ctx)\n                : struct.coercer(value, ctx);\n        },\n    });\n}\n/**\n * Augment a struct to replace `undefined` values with a default.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\nfunction defaulted(struct, fallback, options = {}) {\n    return coerce(struct, unknown(), (x) => {\n        const f = typeof fallback === 'function' ? fallback() : fallback;\n        if (x === undefined) {\n            return f;\n        }\n        if (!options.strict && isPlainObject(x) && isPlainObject(f)) {\n            const ret = { ...x };\n            let changed = false;\n            for (const key in f) {\n                if (ret[key] === undefined) {\n                    ret[key] = f[key];\n                    changed = true;\n                }\n            }\n            if (changed) {\n                return ret;\n            }\n        }\n        return x;\n    });\n}\n/**\n * Augment a struct to trim string inputs.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\nfunction trimmed(struct) {\n    return coerce(struct, string(), (x) => x.trim());\n}\n\n/**\n * Ensure that a string, array, map, or set is empty.\n */\nfunction empty(struct) {\n    return refine(struct, 'empty', (value) => {\n        const size = getSize(value);\n        return (size === 0 ||\n            `Expected an empty ${struct.type} but received one with a size of \\`${size}\\``);\n    });\n}\nfunction getSize(value) {\n    if (value instanceof Map || value instanceof Set) {\n        return value.size;\n    }\n    else {\n        return value.length;\n    }\n}\n/**\n * Ensure that a number or date is below a threshold.\n */\nfunction max(struct, threshold, options = {}) {\n    const { exclusive } = options;\n    return refine(struct, 'max', (value) => {\n        return exclusive\n            ? value < threshold\n            : value <= threshold ||\n                `Expected a ${struct.type} less than ${exclusive ? '' : 'or equal to '}${threshold} but received \\`${value}\\``;\n    });\n}\n/**\n * Ensure that a number or date is above a threshold.\n */\nfunction min(struct, threshold, options = {}) {\n    const { exclusive } = options;\n    return refine(struct, 'min', (value) => {\n        return exclusive\n            ? value > threshold\n            : value >= threshold ||\n                `Expected a ${struct.type} greater than ${exclusive ? '' : 'or equal to '}${threshold} but received \\`${value}\\``;\n    });\n}\n/**\n * Ensure that a string, array, map or set is not empty.\n */\nfunction nonempty(struct) {\n    return refine(struct, 'nonempty', (value) => {\n        const size = getSize(value);\n        return (size > 0 || `Expected a nonempty ${struct.type} but received an empty one`);\n    });\n}\n/**\n * Ensure that a string matches a regular expression.\n */\nfunction pattern(struct, regexp) {\n    return refine(struct, 'pattern', (value) => {\n        return (regexp.test(value) ||\n            `Expected a ${struct.type} matching \\`/${regexp.source}/\\` but received \"${value}\"`);\n    });\n}\n/**\n * Ensure that a string, array, number, date, map, or set has a size (or length, or time) between `min` and `max`.\n */\nfunction size(struct, min, max = min) {\n    const expected = `Expected a ${struct.type}`;\n    const of = min === max ? `of \\`${min}\\`` : `between \\`${min}\\` and \\`${max}\\``;\n    return refine(struct, 'size', (value) => {\n        if (typeof value === 'number' || value instanceof Date) {\n            return ((min <= value && value <= max) ||\n                `${expected} ${of} but received \\`${value}\\``);\n        }\n        else if (value instanceof Map || value instanceof Set) {\n            const { size } = value;\n            return ((min <= size && size <= max) ||\n                `${expected} with a size ${of} but received one with a size of \\`${size}\\``);\n        }\n        else {\n            const { length } = value;\n            return ((min <= length && length <= max) ||\n                `${expected} with a length ${of} but received one with a length of \\`${length}\\``);\n        }\n    });\n}\n/**\n * Augment a `Struct` to add an additional refinement to the validation.\n *\n * The refiner function is guaranteed to receive a value of the struct's type,\n * because the struct's existing validation will already have passed. This\n * allows you to layer additional validation on top of existing structs.\n */\nfunction refine(struct, name, refiner) {\n    return new Struct({\n        ...struct,\n        *refiner(value, ctx) {\n            yield* struct.refiner(value, ctx);\n            const result = refiner(value, ctx);\n            const failures = toFailures(result, ctx, struct, value);\n            for (const failure of failures) {\n                yield { ...failure, refinement: name };\n            }\n        },\n    });\n}\n\nexport { Struct, StructError, any, array, assert, assign, bigint, boolean, coerce, create, date, defaulted, define, deprecated, dynamic, empty, enums, func, instance, integer, intersection, is, lazy, literal, map, mask, max, min, never, nonempty, nullable, number, object, omit, optional, partial, pattern, pick, record, refine, regexp, set, size, string, struct, trimmed, tuple, type, union, unknown, validate };\n//# sourceMappingURL=index.mjs.map\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","'use strict';\n\nconst uuid = require('uuid').v4;\n\n/**\n *  Generates a JSON-RPC 1.0 or 2.0 request\n *  @param {String} method Name of method to call\n *  @param {Array|Object} params Array of parameters passed to the method as specified, or an object of parameter names and corresponding value\n *  @param {String|Number|null} [id] Request ID can be a string, number, null for explicit notification or left out for automatic generation\n *  @param {Object} [options]\n *  @param {Number} [options.version=2] JSON-RPC version to use (1 or 2)\n *  @param {Boolean} [options.notificationIdNull=false] When true, version 2 requests will set id to null instead of omitting it\n *  @param {Function} [options.generator] Passed the request, and the options object and is expected to return a request ID\n *  @throws {TypeError} If any of the parameters are invalid\n *  @return {Object} A JSON-RPC 1.0 or 2.0 request\n *  @memberOf Utils\n */\nconst generateRequest = function(method, params, id, options) {\n  if(typeof method !== 'string') {\n    throw new TypeError(method + ' must be a string');\n  }\n\n  options = options || {};\n\n  // check valid version provided\n  const version = typeof options.version === 'number' ? options.version : 2;\n  if (version !== 1 && version !== 2) {\n    throw new TypeError(version + ' must be 1 or 2');\n  }\n\n  const request = {\n    method: method\n  };\n\n  if(version === 2) {\n    request.jsonrpc = '2.0';\n  }\n\n  if(params) {\n    // params given, but invalid?\n    if(typeof params !== 'object' && !Array.isArray(params)) {\n      throw new TypeError(params + ' must be an object, array or omitted');\n    }\n    request.params = params;\n  }\n\n  // if id was left out, generate one (null means explicit notification)\n  if(typeof(id) === 'undefined') {\n    const generator = typeof options.generator === 'function' ? options.generator : function() { return uuid(); };\n    request.id = generator(request, options);\n  } else if (version === 2 && id === null) {\n    // we have a version 2 notification\n    if (options.notificationIdNull) {\n      request.id = null; // id will not be set at all unless option provided\n    }\n  } else {\n    request.id = id;\n  }\n\n  return request;\n};\n\nmodule.exports = generateRequest;\n","'use strict';\n\nconst uuid = require('uuid').v4;\nconst generateRequest = require('../../generateRequest');\n\n/**\n * Constructor for a Jayson Browser Client that does not depend any node.js core libraries\n * @class ClientBrowser\n * @param {Function} callServer Method that calls the server, receives the stringified request and a regular node-style callback\n * @param {Object} [options]\n * @param {Function} [options.reviver] Reviver function for JSON\n * @param {Function} [options.replacer] Replacer function for JSON\n * @param {Number} [options.version=2] JSON-RPC version to use (1|2)\n * @param {Function} [options.generator] Function to use for generating request IDs\n *  @param {Boolean} [options.notificationIdNull=false] When true, version 2 requests will set id to null instead of omitting it\n * @return {ClientBrowser}\n */\nconst ClientBrowser = function(callServer, options) {\n  if(!(this instanceof ClientBrowser)) {\n    return new ClientBrowser(callServer, options);\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  this.options = {\n    reviver: typeof options.reviver !== 'undefined' ? options.reviver : null,\n    replacer: typeof options.replacer !== 'undefined' ? options.replacer : null,\n    generator: typeof options.generator !== 'undefined' ? options.generator : function() { return uuid(); },\n    version: typeof options.version !== 'undefined' ? options.version : 2,\n    notificationIdNull: typeof options.notificationIdNull === 'boolean' ? options.notificationIdNull : false,\n  };\n\n  this.callServer = callServer;\n};\n\nmodule.exports = ClientBrowser;\n\n/**\n *  Creates a request and dispatches it if given a callback.\n *  @param {String|Array} method A batch request if passed an Array, or a method name if passed a String\n *  @param {Array|Object} [params] Parameters for the method\n *  @param {String|Number} [id] Optional id. If undefined an id will be generated. If null it creates a notification request\n *  @param {Function} [callback] Request callback. If specified, executes the request rather than only returning it.\n *  @throws {TypeError} Invalid parameters\n *  @return {Object} JSON-RPC 1.0 or 2.0 compatible request\n */\nClientBrowser.prototype.request = function(method, params, id, callback) {\n  const self = this;\n  let request = null;\n\n  // is this a batch request?\n  const isBatch = Array.isArray(method) && typeof params === 'function';\n\n  if (this.options.version === 1 && isBatch) {\n    throw new TypeError('JSON-RPC 1.0 does not support batching');\n  }\n\n  // is this a raw request?\n  const isRaw = !isBatch && method && typeof method === 'object' && typeof params === 'function';\n\n  if(isBatch || isRaw) {\n    callback = params;\n    request = method;\n  } else {\n    if(typeof id === 'function') {\n      callback = id;\n      // specifically undefined because \"null\" is a notification request\n      id = undefined;\n    }\n\n    const hasCallback = typeof callback === 'function';\n\n    try {\n      request = generateRequest(method, params, id, {\n        generator: this.options.generator,\n        version: this.options.version,\n        notificationIdNull: this.options.notificationIdNull,\n      });\n    } catch(err) {\n      if(hasCallback) {\n        return callback(err);\n      }\n      throw err;\n    }\n\n    // no callback means we should just return a raw request\n    if(!hasCallback) {\n      return request;\n    }\n\n  }\n\n  let message;\n  try {\n    message = JSON.stringify(request, this.options.replacer);\n  } catch(err) {\n    return callback(err);\n  }\n\n  this.callServer(message, function(err, response) {\n    self._parseResponse(err, response, callback);\n  });\n\n  // always return the raw request\n  return request;\n};\n\n/**\n * Parses a response from a server\n * @param {Object} err Error to pass on that is unrelated to the actual response\n * @param {String} responseText JSON-RPC 1.0 or 2.0 response\n * @param {Function} callback Callback that will receive different arguments depending on the amount of parameters\n * @private\n */\nClientBrowser.prototype._parseResponse = function(err, responseText, callback) {\n  if(err) {\n    callback(err);\n    return;\n  }\n\n  if(!responseText) {\n    // empty response text, assume that is correct because it could be a\n    // notification which jayson does not give any body for\n    return callback();\n  }\n\n  let response;\n  try {\n    response = JSON.parse(responseText, this.options.reviver);\n  } catch(err) {\n    return callback(err);\n  }\n\n  if(callback.length === 3) {\n    // if callback length is 3, we split callback arguments on error and response\n\n    // is batch response?\n    if(Array.isArray(response)) {\n\n      // neccesary to split strictly on validity according to spec here\n      const isError = function(res) {\n        return typeof res.error !== 'undefined';\n      };\n\n      const isNotError = function (res) {\n        return !isError(res);\n      };\n\n      return callback(null, response.filter(isError), response.filter(isNotError));\n    \n    } else {\n\n      // split regardless of validity\n      return callback(null, response.error, response.result);\n    \n    }\n  \n  }\n\n  callback(null, response);\n};\n","import { Buffer } from 'buffer';\nimport { EventEmitter } from 'eventemitter3';\n\n// node_modules/esbuild-plugin-polyfill-node/polyfills/buffer.js\nvar WebSocketBrowserImpl = class extends EventEmitter {\n  socket;\n  /** Instantiate a WebSocket class\n  * @constructor\n  * @param {String} address - url to a websocket server\n  * @param {(Object)} options - websocket options\n  * @param {(String|Array)} protocols - a list of protocols\n  * @return {WebSocketBrowserImpl} - returns a WebSocket instance\n  */\n  constructor(address, options, protocols) {\n    super();\n    this.socket = new window.WebSocket(address, protocols);\n    this.socket.onopen = () => this.emit(\"open\");\n    this.socket.onmessage = (event) => this.emit(\"message\", event.data);\n    this.socket.onerror = (error) => this.emit(\"error\", error);\n    this.socket.onclose = (event) => {\n      this.emit(\"close\", event.code, event.reason);\n    };\n  }\n  /**\n  * Sends data through a websocket connection\n  * @method\n  * @param {(String|Object)} data - data to be sent via websocket\n  * @param {Object} optionsOrCallback - ws options\n  * @param {Function} callback - a callback called once the data is sent\n  * @return {Undefined}\n  */\n  send(data, optionsOrCallback, callback) {\n    const cb = callback || optionsOrCallback;\n    try {\n      this.socket.send(data);\n      cb();\n    } catch (error) {\n      cb(error);\n    }\n  }\n  /**\n  * Closes an underlying socket\n  * @method\n  * @param {Number} code - status code explaining why the connection is being closed\n  * @param {String} reason - a description why the connection is closing\n  * @return {Undefined}\n  * @throws {Error}\n  */\n  close(code, reason) {\n    this.socket.close(code, reason);\n  }\n  addEventListener(type, listener, options) {\n    this.socket.addEventListener(type, listener, options);\n  }\n};\nfunction WebSocket(address, options) {\n  return new WebSocketBrowserImpl(address, options);\n}\n\n// src/lib/utils.ts\nvar DefaultDataPack = class {\n  encode(value) {\n    return JSON.stringify(value);\n  }\n  decode(value) {\n    return JSON.parse(value);\n  }\n};\n\n// src/lib/client.ts\nvar CommonClient = class extends EventEmitter {\n  address;\n  rpc_id;\n  queue;\n  options;\n  autoconnect;\n  ready;\n  reconnect;\n  reconnect_timer_id;\n  reconnect_interval;\n  max_reconnects;\n  rest_options;\n  current_reconnects;\n  generate_request_id;\n  socket;\n  webSocketFactory;\n  dataPack;\n  /**\n  * Instantiate a Client class.\n  * @constructor\n  * @param {webSocketFactory} webSocketFactory - factory method for WebSocket\n  * @param {String} address - url to a websocket server\n  * @param {Object} options - ws options object with reconnect parameters\n  * @param {Function} generate_request_id - custom generation request Id\n  * @param {DataPack} dataPack - data pack contains encoder and decoder\n  * @return {CommonClient}\n  */\n  constructor(webSocketFactory, address = \"ws://localhost:8080\", {\n    autoconnect = true,\n    reconnect = true,\n    reconnect_interval = 1e3,\n    max_reconnects = 5,\n    ...rest_options\n  } = {}, generate_request_id, dataPack) {\n    super();\n    this.webSocketFactory = webSocketFactory;\n    this.queue = {};\n    this.rpc_id = 0;\n    this.address = address;\n    this.autoconnect = autoconnect;\n    this.ready = false;\n    this.reconnect = reconnect;\n    this.reconnect_timer_id = void 0;\n    this.reconnect_interval = reconnect_interval;\n    this.max_reconnects = max_reconnects;\n    this.rest_options = rest_options;\n    this.current_reconnects = 0;\n    this.generate_request_id = generate_request_id || (() => typeof this.rpc_id === \"number\" ? ++this.rpc_id : Number(this.rpc_id) + 1);\n    if (!dataPack) this.dataPack = new DefaultDataPack();\n    else this.dataPack = dataPack;\n    if (this.autoconnect)\n      this._connect(this.address, {\n        autoconnect: this.autoconnect,\n        reconnect: this.reconnect,\n        reconnect_interval: this.reconnect_interval,\n        max_reconnects: this.max_reconnects,\n        ...this.rest_options\n      });\n  }\n  /**\n  * Connects to a defined server if not connected already.\n  * @method\n  * @return {Undefined}\n  */\n  connect() {\n    if (this.socket) return;\n    this._connect(this.address, {\n      autoconnect: this.autoconnect,\n      reconnect: this.reconnect,\n      reconnect_interval: this.reconnect_interval,\n      max_reconnects: this.max_reconnects,\n      ...this.rest_options\n    });\n  }\n  /**\n  * Calls a registered RPC method on server.\n  * @method\n  * @param {String} method - RPC method name\n  * @param {Object|Array} params - optional method parameters\n  * @param {Number} timeout - RPC reply timeout value\n  * @param {Object} ws_opts - options passed to ws\n  * @return {Promise}\n  */\n  call(method, params, timeout, ws_opts) {\n    if (!ws_opts && \"object\" === typeof timeout) {\n      ws_opts = timeout;\n      timeout = null;\n    }\n    return new Promise((resolve, reject) => {\n      if (!this.ready) return reject(new Error(\"socket not ready\"));\n      const rpc_id = this.generate_request_id(method, params);\n      const message = {\n        jsonrpc: \"2.0\",\n        method,\n        params: params || void 0,\n        id: rpc_id\n      };\n      this.socket.send(this.dataPack.encode(message), ws_opts, (error) => {\n        if (error) return reject(error);\n        this.queue[rpc_id] = { promise: [resolve, reject] };\n        if (timeout) {\n          this.queue[rpc_id].timeout = setTimeout(() => {\n            delete this.queue[rpc_id];\n            reject(new Error(\"reply timeout\"));\n          }, timeout);\n        }\n      });\n    });\n  }\n  /**\n  * Logins with the other side of the connection.\n  * @method\n  * @param {Object} params - Login credentials object\n  * @return {Promise}\n  */\n  async login(params) {\n    const resp = await this.call(\"rpc.login\", params);\n    if (!resp) throw new Error(\"authentication failed\");\n    return resp;\n  }\n  /**\n  * Fetches a list of client's methods registered on server.\n  * @method\n  * @return {Array}\n  */\n  async listMethods() {\n    return await this.call(\"__listMethods\");\n  }\n  /**\n  * Sends a JSON-RPC 2.0 notification to server.\n  * @method\n  * @param {String} method - RPC method name\n  * @param {Object} params - optional method parameters\n  * @return {Promise}\n  */\n  notify(method, params) {\n    return new Promise((resolve, reject) => {\n      if (!this.ready) return reject(new Error(\"socket not ready\"));\n      const message = {\n        jsonrpc: \"2.0\",\n        method,\n        params\n      };\n      this.socket.send(this.dataPack.encode(message), (error) => {\n        if (error) return reject(error);\n        resolve();\n      });\n    });\n  }\n  /**\n  * Subscribes for a defined event.\n  * @method\n  * @param {String|Array} event - event name\n  * @return {Undefined}\n  * @throws {Error}\n  */\n  async subscribe(event) {\n    if (typeof event === \"string\") event = [event];\n    const result = await this.call(\"rpc.on\", event);\n    if (typeof event === \"string\" && result[event] !== \"ok\")\n      throw new Error(\n        \"Failed subscribing to an event '\" + event + \"' with: \" + result[event]\n      );\n    return result;\n  }\n  /**\n  * Unsubscribes from a defined event.\n  * @method\n  * @param {String|Array} event - event name\n  * @return {Undefined}\n  * @throws {Error}\n  */\n  async unsubscribe(event) {\n    if (typeof event === \"string\") event = [event];\n    const result = await this.call(\"rpc.off\", event);\n    if (typeof event === \"string\" && result[event] !== \"ok\")\n      throw new Error(\"Failed unsubscribing from an event with: \" + result);\n    return result;\n  }\n  /**\n  * Closes a WebSocket connection gracefully.\n  * @method\n  * @param {Number} code - socket close code\n  * @param {String} data - optional data to be sent before closing\n  * @return {Undefined}\n  */\n  close(code, data) {\n    this.socket.close(code || 1e3, data);\n  }\n  /**\n  * Enable / disable automatic reconnection.\n  * @method\n  * @param {Boolean} reconnect - enable / disable reconnection\n  * @return {Undefined}\n  */\n  setAutoReconnect(reconnect) {\n    this.reconnect = reconnect;\n  }\n  /**\n  * Set the interval between reconnection attempts.\n  * @method\n  * @param {Number} interval - reconnection interval in milliseconds\n  * @return {Undefined}\n  */\n  setReconnectInterval(interval) {\n    this.reconnect_interval = interval;\n  }\n  /**\n  * Set the maximum number of reconnection attempts.\n  * @method\n  * @param {Number} max_reconnects - maximum reconnection attempts\n  * @return {Undefined}\n  */\n  setMaxReconnects(max_reconnects) {\n    this.max_reconnects = max_reconnects;\n  }\n  /**\n  * Connection/Message handler.\n  * @method\n  * @private\n  * @param {String} address - WebSocket API address\n  * @param {Object} options - ws options object\n  * @return {Undefined}\n  */\n  _connect(address, options) {\n    clearTimeout(this.reconnect_timer_id);\n    this.socket = this.webSocketFactory(address, options);\n    this.socket.addEventListener(\"open\", () => {\n      this.ready = true;\n      this.emit(\"open\");\n      this.current_reconnects = 0;\n    });\n    this.socket.addEventListener(\"message\", ({ data: message }) => {\n      if (message instanceof ArrayBuffer)\n        message = Buffer.from(message).toString();\n      try {\n        message = this.dataPack.decode(message);\n      } catch (error) {\n        return;\n      }\n      if (message.notification && this.listeners(message.notification).length) {\n        if (!Object.keys(message.params).length)\n          return this.emit(message.notification);\n        const args = [message.notification];\n        if (message.params.constructor === Object) args.push(message.params);\n        else\n          for (let i = 0; i < message.params.length; i++)\n            args.push(message.params[i]);\n        return Promise.resolve().then(() => {\n          this.emit.apply(this, args);\n        });\n      }\n      if (!this.queue[message.id]) {\n        if (message.method) {\n          return Promise.resolve().then(() => {\n            this.emit(message.method, message?.params);\n          });\n        }\n        return;\n      }\n      if (\"error\" in message === \"result\" in message)\n        this.queue[message.id].promise[1](\n          new Error(\n            'Server response malformed. Response must include either \"result\" or \"error\", but not both.'\n          )\n        );\n      if (this.queue[message.id].timeout)\n        clearTimeout(this.queue[message.id].timeout);\n      if (message.error) this.queue[message.id].promise[1](message.error);\n      else this.queue[message.id].promise[0](message.result);\n      delete this.queue[message.id];\n    });\n    this.socket.addEventListener(\"error\", (error) => this.emit(\"error\", error));\n    this.socket.addEventListener(\"close\", ({ code, reason }) => {\n      if (this.ready)\n        setTimeout(() => this.emit(\"close\", code, reason), 0);\n      this.ready = false;\n      this.socket = void 0;\n      if (code === 1e3) return;\n      this.current_reconnects++;\n      if (this.reconnect && (this.max_reconnects > this.current_reconnects || this.max_reconnects === 0))\n        this.reconnect_timer_id = setTimeout(\n          () => this._connect(address, options),\n          this.reconnect_interval\n        );\n    });\n  }\n};\n\n// src/index.browser.ts\nvar Client = class extends CommonClient {\n  constructor(address = \"ws://localhost:8080\", {\n    autoconnect = true,\n    reconnect = true,\n    reconnect_interval = 1e3,\n    max_reconnects = 5\n  } = {}, generate_request_id) {\n    super(\n      WebSocket,\n      address,\n      {\n        autoconnect,\n        reconnect,\n        reconnect_interval,\n        max_reconnects\n      },\n      generate_request_id\n    );\n  }\n};\n\nexport { Client, CommonClient, DefaultDataPack, WebSocket };\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.browser.mjs.map","/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash } from \"./_assert.js\";\nimport { Hash, toBytes } from \"./utils.js\";\nexport class HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        ahash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        aexists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        abytes(out, this.outputLen);\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","/**\n * Short Weierstrass curve methods. The formula is: y = x + ax + b.\n *\n * ### Parameters\n *\n * To initialize a weierstrass curve, one needs to pass following params:\n *\n * * a: formula param\n * * b: formula param\n * * Fp: finite Field over which we'll do calculations. Can be complex (Fp2, Fp12)\n * * n: Curve prime subgroup order, total count of valid points in the field\n * * Gx: Base point (x, y) aka generator point x coordinate\n * * Gy: ...y coordinate\n * * h: cofactor, usually 1. h*n = curve group order (n is only subgroup order)\n * * lowS: whether to enable (default) or disable \"low-s\" non-malleable signatures\n *\n * ### Design rationale for types\n *\n * * Interaction between classes from different curves should fail:\n *   `k256.Point.BASE.add(p256.Point.BASE)`\n * * For this purpose we want to use `instanceof` operator, which is fast and works during runtime\n * * Different calls of `curve()` would return different classes -\n *   `curve(params) !== curve(params)`: if somebody decided to monkey-patch their curve,\n *   it won't affect others\n *\n * TypeScript can't infer types for classes created inside a function. Classes is one instance\n * of nominative types in TypeScript and interfaces only check for shape, so it's hard to create\n * unique type for every function call.\n *\n * We can use generic types via some param, like curve opts, but that would:\n *     1. Enable interaction between `curve(params)` and `curve(params)` (curves of same params)\n *     which is hard to debug.\n *     2. Params can be generic and we can't enforce them to be constant value:\n *     if somebody creates curve from non-constant params,\n *     it would be allowed to interact with other curves with non-constant params\n *\n * @todo https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-7.html#unique-symbol\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// prettier-ignore\nimport { pippenger, validateBasic, wNAF, } from \"./curve.js\";\n// prettier-ignore\nimport { Field, getMinHashLength, invert, mapHashToField, mod, validateField, } from \"./modular.js\";\n// prettier-ignore\nimport { aInRange, abool, bitMask, bytesToHex, bytesToNumberBE, concatBytes, createHmacDrbg, ensureBytes, hexToBytes, inRange, isBytes, memoized, numberToBytesBE, numberToHexUnpadded, validateObject } from \"./utils.js\";\nfunction validateSigVerOpts(opts) {\n    if (opts.lowS !== undefined)\n        abool('lowS', opts.lowS);\n    if (opts.prehash !== undefined)\n        abool('prehash', opts.prehash);\n}\nfunction validatePointOpts(curve) {\n    const opts = validateBasic(curve);\n    validateObject(opts, {\n        a: 'field',\n        b: 'field',\n    }, {\n        allowedPrivateKeyLengths: 'array',\n        wrapPrivateKey: 'boolean',\n        isTorsionFree: 'function',\n        clearCofactor: 'function',\n        allowInfinityPoint: 'boolean',\n        fromBytes: 'function',\n        toBytes: 'function',\n    });\n    const { endo, Fp, a } = opts;\n    if (endo) {\n        if (!Fp.eql(a, Fp.ZERO)) {\n            throw new Error('invalid endomorphism, can only be defined for Koblitz curves that have a=0');\n        }\n        if (typeof endo !== 'object' ||\n            typeof endo.beta !== 'bigint' ||\n            typeof endo.splitScalar !== 'function') {\n            throw new Error('invalid endomorphism, expected beta: bigint and splitScalar: function');\n        }\n    }\n    return Object.freeze({ ...opts });\n}\nexport class DERErr extends Error {\n    constructor(m = '') {\n        super(m);\n    }\n}\n/**\n * ASN.1 DER encoding utilities. ASN is very complex & fragile. Format:\n *\n *     [0x30 (SEQUENCE), bytelength, 0x02 (INTEGER), intLength, R, 0x02 (INTEGER), intLength, S]\n *\n * Docs: https://letsencrypt.org/docs/a-warm-welcome-to-asn1-and-der/, https://luca.ntop.org/Teaching/Appunti/asn1.html\n */\nexport const DER = {\n    // asn.1 DER encoding utils\n    Err: DERErr,\n    // Basic building block is TLV (Tag-Length-Value)\n    _tlv: {\n        encode: (tag, data) => {\n            const { Err: E } = DER;\n            if (tag < 0 || tag > 256)\n                throw new E('tlv.encode: wrong tag');\n            if (data.length & 1)\n                throw new E('tlv.encode: unpadded data');\n            const dataLen = data.length / 2;\n            const len = numberToHexUnpadded(dataLen);\n            if ((len.length / 2) & 128)\n                throw new E('tlv.encode: long form length too big');\n            // length of length with long form flag\n            const lenLen = dataLen > 127 ? numberToHexUnpadded((len.length / 2) | 128) : '';\n            const t = numberToHexUnpadded(tag);\n            return t + lenLen + len + data;\n        },\n        // v - value, l - left bytes (unparsed)\n        decode(tag, data) {\n            const { Err: E } = DER;\n            let pos = 0;\n            if (tag < 0 || tag > 256)\n                throw new E('tlv.encode: wrong tag');\n            if (data.length < 2 || data[pos++] !== tag)\n                throw new E('tlv.decode: wrong tlv');\n            const first = data[pos++];\n            const isLong = !!(first & 128); // First bit of first length byte is flag for short/long form\n            let length = 0;\n            if (!isLong)\n                length = first;\n            else {\n                // Long form: [longFlag(1bit), lengthLength(7bit), length (BE)]\n                const lenLen = first & 127;\n                if (!lenLen)\n                    throw new E('tlv.decode(long): indefinite length not supported');\n                if (lenLen > 4)\n                    throw new E('tlv.decode(long): byte length is too big'); // this will overflow u32 in js\n                const lengthBytes = data.subarray(pos, pos + lenLen);\n                if (lengthBytes.length !== lenLen)\n                    throw new E('tlv.decode: length bytes not complete');\n                if (lengthBytes[0] === 0)\n                    throw new E('tlv.decode(long): zero leftmost byte');\n                for (const b of lengthBytes)\n                    length = (length << 8) | b;\n                pos += lenLen;\n                if (length < 128)\n                    throw new E('tlv.decode(long): not minimal encoding');\n            }\n            const v = data.subarray(pos, pos + length);\n            if (v.length !== length)\n                throw new E('tlv.decode: wrong value length');\n            return { v, l: data.subarray(pos + length) };\n        },\n    },\n    // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n    // since we always use positive integers here. It must always be empty:\n    // - add zero byte if exists\n    // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n    _int: {\n        encode(num) {\n            const { Err: E } = DER;\n            if (num < _0n)\n                throw new E('integer: negative integers are not allowed');\n            let hex = numberToHexUnpadded(num);\n            // Pad with zero byte if negative flag is present\n            if (Number.parseInt(hex[0], 16) & 0b1000)\n                hex = '00' + hex;\n            if (hex.length & 1)\n                throw new E('unexpected DER parsing assertion: unpadded hex');\n            return hex;\n        },\n        decode(data) {\n            const { Err: E } = DER;\n            if (data[0] & 128)\n                throw new E('invalid signature integer: negative');\n            if (data[0] === 0x00 && !(data[1] & 128))\n                throw new E('invalid signature integer: unnecessary leading zero');\n            return bytesToNumberBE(data);\n        },\n    },\n    toSig(hex) {\n        // parse DER signature\n        const { Err: E, _int: int, _tlv: tlv } = DER;\n        const data = ensureBytes('signature', hex);\n        const { v: seqBytes, l: seqLeftBytes } = tlv.decode(0x30, data);\n        if (seqLeftBytes.length)\n            throw new E('invalid signature: left bytes after parsing');\n        const { v: rBytes, l: rLeftBytes } = tlv.decode(0x02, seqBytes);\n        const { v: sBytes, l: sLeftBytes } = tlv.decode(0x02, rLeftBytes);\n        if (sLeftBytes.length)\n            throw new E('invalid signature: left bytes after parsing');\n        return { r: int.decode(rBytes), s: int.decode(sBytes) };\n    },\n    hexFromSig(sig) {\n        const { _tlv: tlv, _int: int } = DER;\n        const rs = tlv.encode(0x02, int.encode(sig.r));\n        const ss = tlv.encode(0x02, int.encode(sig.s));\n        const seq = rs + ss;\n        return tlv.encode(0x30, seq);\n    },\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nconst _0n = BigInt(0), _1n = BigInt(1), _2n = BigInt(2), _3n = BigInt(3), _4n = BigInt(4);\nexport function weierstrassPoints(opts) {\n    const CURVE = validatePointOpts(opts);\n    const { Fp } = CURVE; // All curves has same field / group length as for now, but they can differ\n    const Fn = Field(CURVE.n, CURVE.nBitLength);\n    const toBytes = CURVE.toBytes ||\n        ((_c, point, _isCompressed) => {\n            const a = point.toAffine();\n            return concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n        });\n    const fromBytes = CURVE.fromBytes ||\n        ((bytes) => {\n            // const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n            const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n            const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n            return { x, y };\n        });\n    /**\n     * y = x + ax + b: Short weierstrass curve formula. Takes x, returns y.\n     * @returns y\n     */\n    function weierstrassEquation(x) {\n        const { a, b } = CURVE;\n        const x2 = Fp.sqr(x); // x * x\n        const x3 = Fp.mul(x2, x); // x2 * x\n        return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n    }\n    // Validate whether the passed curve params are valid.\n    // We check if curve equation works for generator point.\n    // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n    // ProjectivePoint class has not been initialized yet.\n    if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx)))\n        throw new Error('bad generator point: equation left != right');\n    // Valid group elements reside in range 1..n-1\n    function isWithinCurveOrder(num) {\n        return inRange(num, _1n, CURVE.n);\n    }\n    // Validates if priv key is valid and converts it to bigint.\n    // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n    function normPrivateKeyToScalar(key) {\n        const { allowedPrivateKeyLengths: lengths, nByteLength, wrapPrivateKey, n: N } = CURVE;\n        if (lengths && typeof key !== 'bigint') {\n            if (isBytes(key))\n                key = bytesToHex(key);\n            // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n            if (typeof key !== 'string' || !lengths.includes(key.length))\n                throw new Error('invalid private key');\n            key = key.padStart(nByteLength * 2, '0');\n        }\n        let num;\n        try {\n            num =\n                typeof key === 'bigint'\n                    ? key\n                    : bytesToNumberBE(ensureBytes('private key', key, nByteLength));\n        }\n        catch (error) {\n            throw new Error('invalid private key, expected hex or ' + nByteLength + ' bytes, got ' + typeof key);\n        }\n        if (wrapPrivateKey)\n            num = mod(num, N); // disabled by default, enabled for BLS\n        aInRange('private key', num, _1n, N); // num in range [1..N-1]\n        return num;\n    }\n    function aprjpoint(other) {\n        if (!(other instanceof Point))\n            throw new Error('ProjectivePoint expected');\n    }\n    // Memoized toAffine / validity check. They are heavy. Points are immutable.\n    // Converts Projective point to affine (x, y) coordinates.\n    // Can accept precomputed Z^-1 - for example, from invertBatch.\n    // (x, y, z)  (x=x/z, y=y/z)\n    const toAffineMemo = memoized((p, iz) => {\n        const { px: x, py: y, pz: z } = p;\n        // Fast-path for normalized points\n        if (Fp.eql(z, Fp.ONE))\n            return { x, y };\n        const is0 = p.is0();\n        // If invZ was 0, we return zero point. However we still want to execute\n        // all operations, so we replace invZ with a random number, 1.\n        if (iz == null)\n            iz = is0 ? Fp.ONE : Fp.inv(z);\n        const ax = Fp.mul(x, iz);\n        const ay = Fp.mul(y, iz);\n        const zz = Fp.mul(z, iz);\n        if (is0)\n            return { x: Fp.ZERO, y: Fp.ZERO };\n        if (!Fp.eql(zz, Fp.ONE))\n            throw new Error('invZ was invalid');\n        return { x: ax, y: ay };\n    });\n    // NOTE: on exception this will crash 'cached' and no value will be set.\n    // Otherwise true will be return\n    const assertValidMemo = memoized((p) => {\n        if (p.is0()) {\n            // (0, 1, 0) aka ZERO is invalid in most contexts.\n            // In BLS, ZERO can be serialized, so we allow it.\n            // (0, 0, 0) is invalid representation of ZERO.\n            if (CURVE.allowInfinityPoint && !Fp.is0(p.py))\n                return;\n            throw new Error('bad point: ZERO');\n        }\n        // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n        const { x, y } = p.toAffine();\n        // Check if x, y are valid field elements\n        if (!Fp.isValid(x) || !Fp.isValid(y))\n            throw new Error('bad point: x or y not FE');\n        const left = Fp.sqr(y); // y\n        const right = weierstrassEquation(x); // x + ax + b\n        if (!Fp.eql(left, right))\n            throw new Error('bad point: equation left != right');\n        if (!p.isTorsionFree())\n            throw new Error('bad point: not in prime-order subgroup');\n        return true;\n    });\n    /**\n     * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z)  (x=x/z, y=y/z)\n     * Default Point works in 2d / affine coordinates: (x, y)\n     * We're doing calculations in projective, because its operations don't require costly inversion.\n     */\n    class Point {\n        constructor(px, py, pz) {\n            if (px == null || !Fp.isValid(px))\n                throw new Error('x required');\n            if (py == null || !Fp.isValid(py))\n                throw new Error('y required');\n            if (pz == null || !Fp.isValid(pz))\n                throw new Error('z required');\n            this.px = px;\n            this.py = py;\n            this.pz = pz;\n            Object.freeze(this);\n        }\n        // Does not validate if the point is on-curve.\n        // Use fromHex instead, or call assertValidity() later.\n        static fromAffine(p) {\n            const { x, y } = p || {};\n            if (!p || !Fp.isValid(x) || !Fp.isValid(y))\n                throw new Error('invalid affine point');\n            if (p instanceof Point)\n                throw new Error('projective point not allowed');\n            const is0 = (i) => Fp.eql(i, Fp.ZERO);\n            // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n            if (is0(x) && is0(y))\n                return Point.ZERO;\n            return new Point(x, y, Fp.ONE);\n        }\n        get x() {\n            return this.toAffine().x;\n        }\n        get y() {\n            return this.toAffine().y;\n        }\n        /**\n         * Takes a bunch of Projective Points but executes only one\n         * inversion on all of them. Inversion is very slow operation,\n         * so this improves performance massively.\n         * Optimization: converts a list of projective points to a list of identical points with Z=1.\n         */\n        static normalizeZ(points) {\n            const toInv = Fp.invertBatch(points.map((p) => p.pz));\n            return points.map((p, i) => p.toAffine(toInv[i])).map(Point.fromAffine);\n        }\n        /**\n         * Converts hash string or Uint8Array to Point.\n         * @param hex short/long ECDSA hex\n         */\n        static fromHex(hex) {\n            const P = Point.fromAffine(fromBytes(ensureBytes('pointHex', hex)));\n            P.assertValidity();\n            return P;\n        }\n        // Multiplies generator point by privateKey.\n        static fromPrivateKey(privateKey) {\n            return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n        }\n        // Multiscalar Multiplication\n        static msm(points, scalars) {\n            return pippenger(Point, Fn, points, scalars);\n        }\n        // \"Private method\", don't use it directly\n        _setWindowSize(windowSize) {\n            wnaf.setWindowSize(this, windowSize);\n        }\n        // A point on curve is valid if it conforms to equation.\n        assertValidity() {\n            assertValidMemo(this);\n        }\n        hasEvenY() {\n            const { y } = this.toAffine();\n            if (Fp.isOdd)\n                return !Fp.isOdd(y);\n            throw new Error(\"Field doesn't support isOdd\");\n        }\n        /**\n         * Compare one point to another.\n         */\n        equals(other) {\n            aprjpoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            const U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n            const U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n            return U1 && U2;\n        }\n        /**\n         * Flips point to one corresponding to (x, -y) in Affine coordinates.\n         */\n        negate() {\n            return new Point(this.px, Fp.neg(this.py), this.pz);\n        }\n        // Renes-Costello-Batina exception-free doubling formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 3\n        // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n        double() {\n            const { a, b } = CURVE;\n            const b3 = Fp.mul(b, _3n);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            let t0 = Fp.mul(X1, X1); // step 1\n            let t1 = Fp.mul(Y1, Y1);\n            let t2 = Fp.mul(Z1, Z1);\n            let t3 = Fp.mul(X1, Y1);\n            t3 = Fp.add(t3, t3); // step 5\n            Z3 = Fp.mul(X1, Z1);\n            Z3 = Fp.add(Z3, Z3);\n            X3 = Fp.mul(a, Z3);\n            Y3 = Fp.mul(b3, t2);\n            Y3 = Fp.add(X3, Y3); // step 10\n            X3 = Fp.sub(t1, Y3);\n            Y3 = Fp.add(t1, Y3);\n            Y3 = Fp.mul(X3, Y3);\n            X3 = Fp.mul(t3, X3);\n            Z3 = Fp.mul(b3, Z3); // step 15\n            t2 = Fp.mul(a, t2);\n            t3 = Fp.sub(t0, t2);\n            t3 = Fp.mul(a, t3);\n            t3 = Fp.add(t3, Z3);\n            Z3 = Fp.add(t0, t0); // step 20\n            t0 = Fp.add(Z3, t0);\n            t0 = Fp.add(t0, t2);\n            t0 = Fp.mul(t0, t3);\n            Y3 = Fp.add(Y3, t0);\n            t2 = Fp.mul(Y1, Z1); // step 25\n            t2 = Fp.add(t2, t2);\n            t0 = Fp.mul(t2, t3);\n            X3 = Fp.sub(X3, t0);\n            Z3 = Fp.mul(t2, t1);\n            Z3 = Fp.add(Z3, Z3); // step 30\n            Z3 = Fp.add(Z3, Z3);\n            return new Point(X3, Y3, Z3);\n        }\n        // Renes-Costello-Batina exception-free addition formula.\n        // There is 30% faster Jacobian formula, but it is not complete.\n        // https://eprint.iacr.org/2015/1060, algorithm 1\n        // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n        add(other) {\n            aprjpoint(other);\n            const { px: X1, py: Y1, pz: Z1 } = this;\n            const { px: X2, py: Y2, pz: Z2 } = other;\n            let X3 = Fp.ZERO, Y3 = Fp.ZERO, Z3 = Fp.ZERO; // prettier-ignore\n            const a = CURVE.a;\n            const b3 = Fp.mul(CURVE.b, _3n);\n            let t0 = Fp.mul(X1, X2); // step 1\n            let t1 = Fp.mul(Y1, Y2);\n            let t2 = Fp.mul(Z1, Z2);\n            let t3 = Fp.add(X1, Y1);\n            let t4 = Fp.add(X2, Y2); // step 5\n            t3 = Fp.mul(t3, t4);\n            t4 = Fp.add(t0, t1);\n            t3 = Fp.sub(t3, t4);\n            t4 = Fp.add(X1, Z1);\n            let t5 = Fp.add(X2, Z2); // step 10\n            t4 = Fp.mul(t4, t5);\n            t5 = Fp.add(t0, t2);\n            t4 = Fp.sub(t4, t5);\n            t5 = Fp.add(Y1, Z1);\n            X3 = Fp.add(Y2, Z2); // step 15\n            t5 = Fp.mul(t5, X3);\n            X3 = Fp.add(t1, t2);\n            t5 = Fp.sub(t5, X3);\n            Z3 = Fp.mul(a, t4);\n            X3 = Fp.mul(b3, t2); // step 20\n            Z3 = Fp.add(X3, Z3);\n            X3 = Fp.sub(t1, Z3);\n            Z3 = Fp.add(t1, Z3);\n            Y3 = Fp.mul(X3, Z3);\n            t1 = Fp.add(t0, t0); // step 25\n            t1 = Fp.add(t1, t0);\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.mul(b3, t4);\n            t1 = Fp.add(t1, t2);\n            t2 = Fp.sub(t0, t2); // step 30\n            t2 = Fp.mul(a, t2);\n            t4 = Fp.add(t4, t2);\n            t0 = Fp.mul(t1, t4);\n            Y3 = Fp.add(Y3, t0);\n            t0 = Fp.mul(t5, t4); // step 35\n            X3 = Fp.mul(t3, X3);\n            X3 = Fp.sub(X3, t0);\n            t0 = Fp.mul(t3, t1);\n            Z3 = Fp.mul(t5, Z3);\n            Z3 = Fp.add(Z3, t0); // step 40\n            return new Point(X3, Y3, Z3);\n        }\n        subtract(other) {\n            return this.add(other.negate());\n        }\n        is0() {\n            return this.equals(Point.ZERO);\n        }\n        wNAF(n) {\n            return wnaf.wNAFCached(this, n, Point.normalizeZ);\n        }\n        /**\n         * Non-constant-time multiplication. Uses double-and-add algorithm.\n         * It's faster, but should only be used when you don't care about\n         * an exposed private key e.g. sig verification, which works over *public* keys.\n         */\n        multiplyUnsafe(sc) {\n            const { endo, n: N } = CURVE;\n            aInRange('scalar', sc, _0n, N);\n            const I = Point.ZERO;\n            if (sc === _0n)\n                return I;\n            if (this.is0() || sc === _1n)\n                return this;\n            // Case a: no endomorphism. Case b: has precomputes.\n            if (!endo || wnaf.hasPrecomputes(this))\n                return wnaf.wNAFCachedUnsafe(this, sc, Point.normalizeZ);\n            // Case c: endomorphism\n            let { k1neg, k1, k2neg, k2 } = endo.splitScalar(sc);\n            let k1p = I;\n            let k2p = I;\n            let d = this;\n            while (k1 > _0n || k2 > _0n) {\n                if (k1 & _1n)\n                    k1p = k1p.add(d);\n                if (k2 & _1n)\n                    k2p = k2p.add(d);\n                d = d.double();\n                k1 >>= _1n;\n                k2 >>= _1n;\n            }\n            if (k1neg)\n                k1p = k1p.negate();\n            if (k2neg)\n                k2p = k2p.negate();\n            k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n            return k1p.add(k2p);\n        }\n        /**\n         * Constant time multiplication.\n         * Uses wNAF method. Windowed method may be 10% faster,\n         * but takes 2x longer to generate and consumes 2x memory.\n         * Uses precomputes when available.\n         * Uses endomorphism for Koblitz curves.\n         * @param scalar by which the point would be multiplied\n         * @returns New point\n         */\n        multiply(scalar) {\n            const { endo, n: N } = CURVE;\n            aInRange('scalar', scalar, _1n, N);\n            let point, fake; // Fake point is used to const-time mult\n            if (endo) {\n                const { k1neg, k1, k2neg, k2 } = endo.splitScalar(scalar);\n                let { p: k1p, f: f1p } = this.wNAF(k1);\n                let { p: k2p, f: f2p } = this.wNAF(k2);\n                k1p = wnaf.constTimeNegate(k1neg, k1p);\n                k2p = wnaf.constTimeNegate(k2neg, k2p);\n                k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n                point = k1p.add(k2p);\n                fake = f1p.add(f2p);\n            }\n            else {\n                const { p, f } = this.wNAF(scalar);\n                point = p;\n                fake = f;\n            }\n            // Normalize `z` for both points, but return only real one\n            return Point.normalizeZ([point, fake])[0];\n        }\n        /**\n         * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n         * Not using Strauss-Shamir trick: precomputation tables are faster.\n         * The trick could be useful if both P and Q are not G (not in our case).\n         * @returns non-zero affine point\n         */\n        multiplyAndAddUnsafe(Q, a, b) {\n            const G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n            const mul = (P, a // Select faster multiply() method\n            ) => (a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a));\n            const sum = mul(this, a).add(mul(Q, b));\n            return sum.is0() ? undefined : sum;\n        }\n        // Converts Projective point to affine (x, y) coordinates.\n        // Can accept precomputed Z^-1 - for example, from invertBatch.\n        // (x, y, z)  (x=x/z, y=y/z)\n        toAffine(iz) {\n            return toAffineMemo(this, iz);\n        }\n        isTorsionFree() {\n            const { h: cofactor, isTorsionFree } = CURVE;\n            if (cofactor === _1n)\n                return true; // No subgroups, always torsion-free\n            if (isTorsionFree)\n                return isTorsionFree(Point, this);\n            throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n        }\n        clearCofactor() {\n            const { h: cofactor, clearCofactor } = CURVE;\n            if (cofactor === _1n)\n                return this; // Fast-path\n            if (clearCofactor)\n                return clearCofactor(Point, this);\n            return this.multiplyUnsafe(CURVE.h);\n        }\n        toRawBytes(isCompressed = true) {\n            abool('isCompressed', isCompressed);\n            this.assertValidity();\n            return toBytes(Point, this, isCompressed);\n        }\n        toHex(isCompressed = true) {\n            abool('isCompressed', isCompressed);\n            return bytesToHex(this.toRawBytes(isCompressed));\n        }\n    }\n    Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n    Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n    const _bits = CURVE.nBitLength;\n    const wnaf = wNAF(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n    // Validate if generator point is on curve\n    return {\n        CURVE,\n        ProjectivePoint: Point,\n        normPrivateKeyToScalar,\n        weierstrassEquation,\n        isWithinCurveOrder,\n    };\n}\nfunction validateOpts(curve) {\n    const opts = validateBasic(curve);\n    validateObject(opts, {\n        hash: 'hash',\n        hmac: 'function',\n        randomBytes: 'function',\n    }, {\n        bits2int: 'function',\n        bits2int_modN: 'function',\n        lowS: 'boolean',\n    });\n    return Object.freeze({ lowS: true, ...opts });\n}\n/**\n * Creates short weierstrass curve and ECDSA signature methods for it.\n * @example\n * import { Field } from '@noble/curves/abstract/modular';\n * // Before that, define BigInt-s: a, b, p, n, Gx, Gy\n * const curve = weierstrass({ a, b, Fp: Field(p), n, Gx, Gy, h: 1n })\n */\nexport function weierstrass(curveDef) {\n    const CURVE = validateOpts(curveDef);\n    const { Fp, n: CURVE_ORDER } = CURVE;\n    const compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n    const uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n    function modN(a) {\n        return mod(a, CURVE_ORDER);\n    }\n    function invN(a) {\n        return invert(a, CURVE_ORDER);\n    }\n    const { ProjectivePoint: Point, normPrivateKeyToScalar, weierstrassEquation, isWithinCurveOrder, } = weierstrassPoints({\n        ...CURVE,\n        toBytes(_c, point, isCompressed) {\n            const a = point.toAffine();\n            const x = Fp.toBytes(a.x);\n            const cat = concatBytes;\n            abool('isCompressed', isCompressed);\n            if (isCompressed) {\n                return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n            }\n            else {\n                return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n            }\n        },\n        fromBytes(bytes) {\n            const len = bytes.length;\n            const head = bytes[0];\n            const tail = bytes.subarray(1);\n            // this.assertValidity() is done inside of fromHex\n            if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n                const x = bytesToNumberBE(tail);\n                if (!inRange(x, _1n, Fp.ORDER))\n                    throw new Error('Point is not on curve');\n                const y2 = weierstrassEquation(x); // y = x + ax + b\n                let y;\n                try {\n                    y = Fp.sqrt(y2); // y = y ^ (p+1)/4\n                }\n                catch (sqrtError) {\n                    const suffix = sqrtError instanceof Error ? ': ' + sqrtError.message : '';\n                    throw new Error('Point is not on curve' + suffix);\n                }\n                const isYOdd = (y & _1n) === _1n;\n                // ECDSA\n                const isHeadOdd = (head & 1) === 1;\n                if (isHeadOdd !== isYOdd)\n                    y = Fp.neg(y);\n                return { x, y };\n            }\n            else if (len === uncompressedLen && head === 0x04) {\n                const x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n                const y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n                return { x, y };\n            }\n            else {\n                const cl = compressedLen;\n                const ul = uncompressedLen;\n                throw new Error('invalid Point, expected length of ' + cl + ', or uncompressed ' + ul + ', got ' + len);\n            }\n        },\n    });\n    const numToNByteHex = (num) => bytesToHex(numberToBytesBE(num, CURVE.nByteLength));\n    function isBiggerThanHalfOrder(number) {\n        const HALF = CURVE_ORDER >> _1n;\n        return number > HALF;\n    }\n    function normalizeS(s) {\n        return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n    }\n    // slice bytes num\n    const slcNum = (b, from, to) => bytesToNumberBE(b.slice(from, to));\n    /**\n     * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n     */\n    class Signature {\n        constructor(r, s, recovery) {\n            aInRange('r', r, _1n, CURVE_ORDER); // r in [1..N]\n            aInRange('s', s, _1n, CURVE_ORDER); // s in [1..N]\n            this.r = r;\n            this.s = s;\n            if (recovery != null)\n                this.recovery = recovery;\n            Object.freeze(this);\n        }\n        // pair (bytes of r, bytes of s)\n        static fromCompact(hex) {\n            const l = CURVE.nByteLength;\n            hex = ensureBytes('compactSignature', hex, l * 2);\n            return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n        }\n        // DER encoded ECDSA signature\n        // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n        static fromDER(hex) {\n            const { r, s } = DER.toSig(ensureBytes('DER', hex));\n            return new Signature(r, s);\n        }\n        /**\n         * @todo remove\n         * @deprecated\n         */\n        assertValidity() { }\n        addRecoveryBit(recovery) {\n            return new Signature(this.r, this.s, recovery);\n        }\n        recoverPublicKey(msgHash) {\n            const { r, s, recovery: rec } = this;\n            const h = bits2int_modN(ensureBytes('msgHash', msgHash)); // Truncate hash\n            if (rec == null || ![0, 1, 2, 3].includes(rec))\n                throw new Error('recovery id invalid');\n            const radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n            if (radj >= Fp.ORDER)\n                throw new Error('recovery id 2 or 3 invalid');\n            const prefix = (rec & 1) === 0 ? '02' : '03';\n            const R = Point.fromHex(prefix + numToNByteHex(radj));\n            const ir = invN(radj); // r^-1\n            const u1 = modN(-h * ir); // -hr^-1\n            const u2 = modN(s * ir); // sr^-1\n            const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n            if (!Q)\n                throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n            Q.assertValidity();\n            return Q;\n        }\n        // Signatures should be low-s, to prevent malleability.\n        hasHighS() {\n            return isBiggerThanHalfOrder(this.s);\n        }\n        normalizeS() {\n            return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n        }\n        // DER-encoded\n        toDERRawBytes() {\n            return hexToBytes(this.toDERHex());\n        }\n        toDERHex() {\n            return DER.hexFromSig({ r: this.r, s: this.s });\n        }\n        // padded bytes of r, then padded bytes of s\n        toCompactRawBytes() {\n            return hexToBytes(this.toCompactHex());\n        }\n        toCompactHex() {\n            return numToNByteHex(this.r) + numToNByteHex(this.s);\n        }\n    }\n    const utils = {\n        isValidPrivateKey(privateKey) {\n            try {\n                normPrivateKeyToScalar(privateKey);\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        },\n        normPrivateKeyToScalar: normPrivateKeyToScalar,\n        /**\n         * Produces cryptographically secure private key from random of size\n         * (groupLen + ceil(groupLen / 2)) with modulo bias being negligible.\n         */\n        randomPrivateKey: () => {\n            const length = getMinHashLength(CURVE.n);\n            return mapHashToField(CURVE.randomBytes(length), CURVE.n);\n        },\n        /**\n         * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n         * Allows to massively speed-up `point.multiply(scalar)`.\n         * @returns cached point\n         * @example\n         * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n         * fast.multiply(privKey); // much faster ECDH now\n         */\n        precompute(windowSize = 8, point = Point.BASE) {\n            point._setWindowSize(windowSize);\n            point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n            return point;\n        },\n    };\n    /**\n     * Computes public key for a private key. Checks for validity of the private key.\n     * @param privateKey private key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns Public key, full when isCompressed=false; short when isCompressed=true\n     */\n    function getPublicKey(privateKey, isCompressed = true) {\n        return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n    }\n    /**\n     * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n     */\n    function isProbPub(item) {\n        const arr = isBytes(item);\n        const str = typeof item === 'string';\n        const len = (arr || str) && item.length;\n        if (arr)\n            return len === compressedLen || len === uncompressedLen;\n        if (str)\n            return len === 2 * compressedLen || len === 2 * uncompressedLen;\n        if (item instanceof Point)\n            return true;\n        return false;\n    }\n    /**\n     * ECDH (Elliptic Curve Diffie Hellman).\n     * Computes shared public key from private key and public key.\n     * Checks: 1) private key validity 2) shared key is on-curve.\n     * Does NOT hash the result.\n     * @param privateA private key\n     * @param publicB different public key\n     * @param isCompressed whether to return compact (default), or full key\n     * @returns shared public key\n     */\n    function getSharedSecret(privateA, publicB, isCompressed = true) {\n        if (isProbPub(privateA))\n            throw new Error('first arg must be private key');\n        if (!isProbPub(publicB))\n            throw new Error('second arg must be public key');\n        const b = Point.fromHex(publicB); // check for being on-curve\n        return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n    }\n    // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n    // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n    // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n    // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n    const bits2int = CURVE.bits2int ||\n        function (bytes) {\n            // Our custom check \"just in case\"\n            if (bytes.length > 8192)\n                throw new Error('input is too large');\n            // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n            // for some cases, since bytes.length * 8 is not actual bitLength.\n            const num = bytesToNumberBE(bytes); // check for == u8 done here\n            const delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n            return delta > 0 ? num >> BigInt(delta) : num;\n        };\n    const bits2int_modN = CURVE.bits2int_modN ||\n        function (bytes) {\n            return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n        };\n    // NOTE: pads output with zero as per spec\n    const ORDER_MASK = bitMask(CURVE.nBitLength);\n    /**\n     * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n     */\n    function int2octets(num) {\n        aInRange('num < 2^' + CURVE.nBitLength, num, _0n, ORDER_MASK);\n        // works with order, can have different size than numToField!\n        return numberToBytesBE(num, CURVE.nByteLength);\n    }\n    // Steps A, D of RFC6979 3.2\n    // Creates RFC6979 seed; converts msg/privKey to numbers.\n    // Used only in sign, not in verify.\n    // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order,\n    // this will be invalid at least for P521. Also it can be bigger for P224 + SHA256\n    function prepSig(msgHash, privateKey, opts = defaultSigOpts) {\n        if (['recovered', 'canonical'].some((k) => k in opts))\n            throw new Error('sign() legacy options not supported');\n        const { hash, randomBytes } = CURVE;\n        let { lowS, prehash, extraEntropy: ent } = opts; // generates low-s sigs by default\n        if (lowS == null)\n            lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n        msgHash = ensureBytes('msgHash', msgHash);\n        validateSigVerOpts(opts);\n        if (prehash)\n            msgHash = ensureBytes('prehashed msgHash', hash(msgHash));\n        // We can't later call bits2octets, since nested bits2int is broken for curves\n        // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n        // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n        const h1int = bits2int_modN(msgHash);\n        const d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n        const seedArgs = [int2octets(d), int2octets(h1int)];\n        // extraEntropy. RFC6979 3.6: additional k' (optional).\n        if (ent != null && ent !== false) {\n            // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n            const e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n            seedArgs.push(ensureBytes('extraEntropy', e)); // check for being bytes\n        }\n        const seed = concatBytes(...seedArgs); // Step D of RFC6979 3.2\n        const m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n        // Converts signature params into point w r/s, checks result for validity.\n        function k2sig(kBytes) {\n            // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n            const k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n            if (!isWithinCurveOrder(k))\n                return; // Important: all mod() calls here must be done over N\n            const ik = invN(k); // k^-1 mod n\n            const q = Point.BASE.multiply(k).toAffine(); // q = Gk\n            const r = modN(q.x); // r = q.x mod n\n            if (r === _0n)\n                return;\n            // Can use scalar blinding b^-1(bm + bdr) where b  [1,q1] according to\n            // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n            // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n            const s = modN(ik * modN(m + r * d)); // Not using blinding here\n            if (s === _0n)\n                return;\n            let recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n            let normS = s;\n            if (lowS && isBiggerThanHalfOrder(s)) {\n                normS = normalizeS(s); // if lowS was passed, ensure s is always\n                recovery ^= 1; // // in the bottom half of N\n            }\n            return new Signature(r, normS, recovery); // use normS, not s\n        }\n        return { seed, k2sig };\n    }\n    const defaultSigOpts = { lowS: CURVE.lowS, prehash: false };\n    const defaultVerOpts = { lowS: CURVE.lowS, prehash: false };\n    /**\n     * Signs message hash with a private key.\n     * ```\n     * sign(m, d, k) where\n     *   (x, y) = G  k\n     *   r = x mod n\n     *   s = (m + dr)/k mod n\n     * ```\n     * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n     * @param privKey private key\n     * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n     * @returns signature with recovery param\n     */\n    function sign(msgHash, privKey, opts = defaultSigOpts) {\n        const { seed, k2sig } = prepSig(msgHash, privKey, opts); // Steps A, D of RFC6979 3.2.\n        const C = CURVE;\n        const drbg = createHmacDrbg(C.hash.outputLen, C.nByteLength, C.hmac);\n        return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n    }\n    // Enable precomputes. Slows down first publicKey computation by 20ms.\n    Point.BASE._setWindowSize(8);\n    // utils.precompute(8, ProjectivePoint.BASE)\n    /**\n     * Verifies a signature against message hash and public key.\n     * Rejects lowS signatures by default: to override,\n     * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n     *\n     * ```\n     * verify(r, s, h, P) where\n     *   U1 = hs^-1 mod n\n     *   U2 = rs^-1 mod n\n     *   R = U1G - U2P\n     *   mod(R.x, n) == r\n     * ```\n     */\n    function verify(signature, msgHash, publicKey, opts = defaultVerOpts) {\n        const sg = signature;\n        msgHash = ensureBytes('msgHash', msgHash);\n        publicKey = ensureBytes('publicKey', publicKey);\n        const { lowS, prehash, format } = opts;\n        // Verify opts, deduce signature format\n        validateSigVerOpts(opts);\n        if ('strict' in opts)\n            throw new Error('options.strict was renamed to lowS');\n        if (format !== undefined && format !== 'compact' && format !== 'der')\n            throw new Error('format must be compact or der');\n        const isHex = typeof sg === 'string' || isBytes(sg);\n        const isObj = !isHex &&\n            !format &&\n            typeof sg === 'object' &&\n            sg !== null &&\n            typeof sg.r === 'bigint' &&\n            typeof sg.s === 'bigint';\n        if (!isHex && !isObj)\n            throw new Error('invalid signature, expected Uint8Array, hex string or Signature instance');\n        let _sig = undefined;\n        let P;\n        try {\n            if (isObj)\n                _sig = new Signature(sg.r, sg.s);\n            if (isHex) {\n                // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n                // Since DER can also be 2*nByteLength bytes, we check for it first.\n                try {\n                    if (format !== 'compact')\n                        _sig = Signature.fromDER(sg);\n                }\n                catch (derError) {\n                    if (!(derError instanceof DER.Err))\n                        throw derError;\n                }\n                if (!_sig && format !== 'der')\n                    _sig = Signature.fromCompact(sg);\n            }\n            P = Point.fromHex(publicKey);\n        }\n        catch (error) {\n            return false;\n        }\n        if (!_sig)\n            return false;\n        if (lowS && _sig.hasHighS())\n            return false;\n        if (prehash)\n            msgHash = CURVE.hash(msgHash);\n        const { r, s } = _sig;\n        const h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n        const is = invN(s); // s^-1\n        const u1 = modN(h * is); // u1 = hs^-1 mod n\n        const u2 = modN(r * is); // u2 = rs^-1 mod n\n        const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)?.toAffine(); // R = u1G + u2P\n        if (!R)\n            return false;\n        const v = modN(R.x);\n        return v === r;\n    }\n    return {\n        CURVE,\n        getPublicKey,\n        getSharedSecret,\n        sign,\n        verify,\n        ProjectivePoint: Point,\n        Signature,\n        utils,\n    };\n}\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nexport function SWUFpSqrtRatio(Fp, Z) {\n    // Generic implementation\n    const q = Fp.ORDER;\n    let l = _0n;\n    for (let o = q - _1n; o % _2n === _0n; o /= _2n)\n        l += _1n;\n    const c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n    // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n    // 2n ** c1 == 2n << (c1-1)\n    const _2n_pow_c1_1 = _2n << (c1 - _1n - _1n);\n    const _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n    const c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n    const c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n    const c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n    const c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n    const c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n    const c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n    let sqrtRatio = (u, v) => {\n        let tv1 = c6; // 1. tv1 = c6\n        let tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n        let tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n        tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n        let tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n        tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n        tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n        tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n        tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n        let tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n        tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n        let isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n        tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n        tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n        tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n        tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n        // 17. for i in (c1, c1 - 1, ..., 2):\n        for (let i = c1; i > _1n; i--) {\n            let tv5 = i - _2n; // 18.    tv5 = i - 2\n            tv5 = _2n << (tv5 - _1n); // 19.    tv5 = 2^tv5\n            let tvv5 = Fp.pow(tv4, tv5); // 20.    tv5 = tv4^tv5\n            const e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n            tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n            tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n            tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n            tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n            tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n        }\n        return { isValid: isQR, value: tv3 };\n    };\n    if (Fp.ORDER % _4n === _3n) {\n        // sqrt_ratio_3mod4(u, v)\n        const c1 = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n        const c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n        sqrtRatio = (u, v) => {\n            let tv1 = Fp.sqr(v); // 1. tv1 = v^2\n            const tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n            tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n            let y1 = Fp.pow(tv1, c1); // 4. y1 = tv1^c1\n            y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n            const y2 = Fp.mul(y1, c2); // 6. y2 = y1 * c2\n            const tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n            const isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n            let y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n            return { isValid: isQR, value: y }; // 11. return (isQR, y) isQR ? y : y*c2\n        };\n    }\n    // No curves uses that\n    // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n    return sqrtRatio;\n}\n/**\n * Simplified Shallue-van de Woestijne-Ulas Method\n * https://www.rfc-editor.org/rfc/rfc9380#section-6.6.2\n */\nexport function mapToCurveSimpleSWU(Fp, opts) {\n    validateField(Fp);\n    if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z))\n        throw new Error('mapToCurveSimpleSWU: invalid opts');\n    const sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n    if (!Fp.isOdd)\n        throw new Error('Fp.isOdd is not implemented!');\n    // Input: u, an element of F.\n    // Output: (x, y), a point on E.\n    return (u) => {\n        // prettier-ignore\n        let tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n        tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n        tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n        tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n        tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n        tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n        tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n        tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n        tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n        tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n        tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n        tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n        tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n        tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n        tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n        tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n        tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n        x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n        const { isValid, value } = sqrtRatio(tv2, tv6); // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n        y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n        y = Fp.mul(y, value); // 20.   y = y * y1\n        x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n        y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n        const e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n        y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n        x = Fp.div(x, tv4); // 25.   x = x / tv4\n        return { x, y };\n    };\n}\n//# sourceMappingURL=weierstrass.js.map","/**\n * Utilities for short weierstrass curves, combined with noble-hashes.\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { concatBytes, randomBytes } from '@noble/hashes/utils';\nimport { weierstrass } from \"./abstract/weierstrass.js\";\n/** connects noble-curves to noble-hashes */\nexport function getHash(hash) {\n    return {\n        hash,\n        hmac: (key, ...msgs) => hmac(hash, key, concatBytes(...msgs)),\n        randomBytes,\n    };\n}\nexport function createCurve(curveDef, defHash) {\n    const create = (hash) => weierstrass({ ...curveDef, ...getHash(hash) });\n    return { ...create(defHash), create };\n}\n//# sourceMappingURL=_shortw_utils.js.map","/**\n * NIST secp256k1. See [pdf](https://www.secg.org/sec2-v2.pdf).\n *\n * Seems to be rigid (not backdoored)\n * [as per discussion](https://bitcointalk.org/index.php?topic=289795.msg3183975#msg3183975).\n *\n * secp256k1 belongs to Koblitz curves: it has efficiently computable endomorphism.\n * Endomorphism uses 2x less RAM, speeds up precomputation by 2x and ECDH / key recovery by 20%.\n * For precomputed wNAF it trades off 1/2 init time & 1/3 ram for 20% perf hit.\n * [See explanation](https://gist.github.com/paulmillr/eb670806793e84df628a7c434a873066).\n * @module\n */\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nimport { sha256 } from '@noble/hashes/sha2';\nimport { randomBytes } from '@noble/hashes/utils';\nimport { createCurve } from \"./_shortw_utils.js\";\nimport { createHasher, isogenyMap } from \"./abstract/hash-to-curve.js\";\nimport { Field, mod, pow2 } from \"./abstract/modular.js\";\nimport { aInRange, bytesToNumberBE, concatBytes, ensureBytes, inRange, numberToBytesBE, } from \"./abstract/utils.js\";\nimport { mapToCurveSimpleSWU } from \"./abstract/weierstrass.js\";\nconst secp256k1P = BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f');\nconst secp256k1N = BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141');\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst divNearest = (a, b) => (a + b / _2n) / b;\n/**\n * n = n^((p+1)/4) for fields p = 3 mod 4. We unwrap the loop and multiply bit-by-bit.\n * (P+1n/4n).toString(2) would produce bits [223x 1, 0, 22x 1, 4x 0, 11, 00]\n */\nfunction sqrtMod(y) {\n    const P = secp256k1P;\n    // prettier-ignore\n    const _3n = BigInt(3), _6n = BigInt(6), _11n = BigInt(11), _22n = BigInt(22);\n    // prettier-ignore\n    const _23n = BigInt(23), _44n = BigInt(44), _88n = BigInt(88);\n    const b2 = (y * y * y) % P; // x^3, 11\n    const b3 = (b2 * b2 * y) % P; // x^7\n    const b6 = (pow2(b3, _3n, P) * b3) % P;\n    const b9 = (pow2(b6, _3n, P) * b3) % P;\n    const b11 = (pow2(b9, _2n, P) * b2) % P;\n    const b22 = (pow2(b11, _11n, P) * b11) % P;\n    const b44 = (pow2(b22, _22n, P) * b22) % P;\n    const b88 = (pow2(b44, _44n, P) * b44) % P;\n    const b176 = (pow2(b88, _88n, P) * b88) % P;\n    const b220 = (pow2(b176, _44n, P) * b44) % P;\n    const b223 = (pow2(b220, _3n, P) * b3) % P;\n    const t1 = (pow2(b223, _23n, P) * b22) % P;\n    const t2 = (pow2(t1, _6n, P) * b2) % P;\n    const root = pow2(t2, _2n, P);\n    if (!Fpk1.eql(Fpk1.sqr(root), y))\n        throw new Error('Cannot find square root');\n    return root;\n}\nconst Fpk1 = Field(secp256k1P, undefined, undefined, { sqrt: sqrtMod });\n/**\n * secp256k1 curve, ECDSA and ECDH methods.\n *\n * Field: `2n**256n - 2n**32n - 2n**9n - 2n**8n - 2n**7n - 2n**6n - 2n**4n - 1n`\n *\n * @example\n * ```js\n * import { secp256k1 } from '@noble/curves/secp256k1';\n * const priv = secp256k1.utils.randomPrivateKey();\n * const pub = secp256k1.getPublicKey(priv);\n * const msg = new Uint8Array(32).fill(1); // message hash (not message) in ecdsa\n * const sig = secp256k1.sign(msg, priv); // `{prehash: true}` option is available\n * const isValid = secp256k1.verify(sig, msg, pub) === true;\n * ```\n */\nexport const secp256k1 = createCurve({\n    a: BigInt(0),\n    b: BigInt(7),\n    Fp: Fpk1,\n    n: secp256k1N,\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    h: BigInt(1), // Cofactor\n    lowS: true, // Allow only low-S signatures by default in sign() and verify()\n    endo: {\n        // Endomorphism, see above\n        beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n        splitScalar: (k) => {\n            const n = secp256k1N;\n            const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n            const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n            const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n            const b2 = a1;\n            const POW_2_128 = BigInt('0x100000000000000000000000000000000'); // (2n**128n).toString(16)\n            const c1 = divNearest(b2 * k, n);\n            const c2 = divNearest(-b1 * k, n);\n            let k1 = mod(k - c1 * a1 - c2 * a2, n);\n            let k2 = mod(-c1 * b1 - c2 * b2, n);\n            const k1neg = k1 > POW_2_128;\n            const k2neg = k2 > POW_2_128;\n            if (k1neg)\n                k1 = n - k1;\n            if (k2neg)\n                k2 = n - k2;\n            if (k1 > POW_2_128 || k2 > POW_2_128) {\n                throw new Error('splitScalar: Endomorphism failed, k=' + k);\n            }\n            return { k1neg, k1, k2neg, k2 };\n        },\n    },\n}, sha256);\n// Schnorr signatures are superior to ECDSA from above. Below is Schnorr-specific BIP0340 code.\n// https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\nconst _0n = BigInt(0);\n/** An object mapping tags to their tagged hash prefix of [SHA256(tag) | SHA256(tag)] */\nconst TAGGED_HASH_PREFIXES = {};\nfunction taggedHash(tag, ...messages) {\n    let tagP = TAGGED_HASH_PREFIXES[tag];\n    if (tagP === undefined) {\n        const tagH = sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n        tagP = concatBytes(tagH, tagH);\n        TAGGED_HASH_PREFIXES[tag] = tagP;\n    }\n    return sha256(concatBytes(tagP, ...messages));\n}\n// ECDSA compact points are 33-byte. Schnorr is 32: we strip first byte 0x02 or 0x03\nconst pointToBytes = (point) => point.toRawBytes(true).slice(1);\nconst numTo32b = (n) => numberToBytesBE(n, 32);\nconst modP = (x) => mod(x, secp256k1P);\nconst modN = (x) => mod(x, secp256k1N);\nconst Point = secp256k1.ProjectivePoint;\nconst GmulAdd = (Q, a, b) => Point.BASE.multiplyAndAddUnsafe(Q, a, b);\n// Calculate point, scalar and bytes\nfunction schnorrGetExtPubKey(priv) {\n    let d_ = secp256k1.utils.normPrivateKeyToScalar(priv); // same method executed in fromPrivateKey\n    let p = Point.fromPrivateKey(d_); // P = d'G; 0 < d' < n check is done inside\n    const scalar = p.hasEvenY() ? d_ : modN(-d_);\n    return { scalar: scalar, bytes: pointToBytes(p) };\n}\n/**\n * lift_x from BIP340. Convert 32-byte x coordinate to elliptic curve point.\n * @returns valid point checked for being on-curve\n */\nfunction lift_x(x) {\n    aInRange('x', x, _1n, secp256k1P); // Fail if x  p.\n    const xx = modP(x * x);\n    const c = modP(xx * x + BigInt(7)); // Let c = x + 7 mod p.\n    let y = sqrtMod(c); // Let y = c^(p+1)/4 mod p.\n    if (y % _2n !== _0n)\n        y = modP(-y); // Return the unique point P such that x(P) = x and\n    const p = new Point(x, y, _1n); // y(P) = y if y mod 2 = 0 or y(P) = p-y otherwise.\n    p.assertValidity();\n    return p;\n}\nconst num = bytesToNumberBE;\n/**\n * Create tagged hash, convert it to bigint, reduce modulo-n.\n */\nfunction challenge(...args) {\n    return modN(num(taggedHash('BIP0340/challenge', ...args)));\n}\n/**\n * Schnorr public key is just `x` coordinate of Point as per BIP340.\n */\nfunction schnorrGetPublicKey(privateKey) {\n    return schnorrGetExtPubKey(privateKey).bytes; // d'=int(sk). Fail if d'=0 or d'n. Ret bytes(d'G)\n}\n/**\n * Creates Schnorr signature as per BIP340. Verifies itself before returning anything.\n * auxRand is optional and is not the sole source of k generation: bad CSPRNG won't be dangerous.\n */\nfunction schnorrSign(message, privateKey, auxRand = randomBytes(32)) {\n    const m = ensureBytes('message', message);\n    const { bytes: px, scalar: d } = schnorrGetExtPubKey(privateKey); // checks for isWithinCurveOrder\n    const a = ensureBytes('auxRand', auxRand, 32); // Auxiliary random data a: a 32-byte array\n    const t = numTo32b(d ^ num(taggedHash('BIP0340/aux', a))); // Let t be the byte-wise xor of bytes(d) and hash/aux(a)\n    const rand = taggedHash('BIP0340/nonce', t, px, m); // Let rand = hash/nonce(t || bytes(P) || m)\n    const k_ = modN(num(rand)); // Let k' = int(rand) mod n\n    if (k_ === _0n)\n        throw new Error('sign failed: k is zero'); // Fail if k' = 0.\n    const { bytes: rx, scalar: k } = schnorrGetExtPubKey(k_); // Let R = k'G.\n    const e = challenge(rx, px, m); // Let e = int(hash/challenge(bytes(R) || bytes(P) || m)) mod n.\n    const sig = new Uint8Array(64); // Let sig = bytes(R) || bytes((k + ed) mod n).\n    sig.set(rx, 0);\n    sig.set(numTo32b(modN(k + e * d)), 32);\n    // If Verify(bytes(P), m, sig) (see below) returns failure, abort\n    if (!schnorrVerify(sig, m, px))\n        throw new Error('sign: Invalid signature produced');\n    return sig;\n}\n/**\n * Verifies Schnorr signature.\n * Will swallow errors & return false except for initial type validation of arguments.\n */\nfunction schnorrVerify(signature, message, publicKey) {\n    const sig = ensureBytes('signature', signature, 64);\n    const m = ensureBytes('message', message);\n    const pub = ensureBytes('publicKey', publicKey, 32);\n    try {\n        const P = lift_x(num(pub)); // P = lift_x(int(pk)); fail if that fails\n        const r = num(sig.subarray(0, 32)); // Let r = int(sig[0:32]); fail if r  p.\n        if (!inRange(r, _1n, secp256k1P))\n            return false;\n        const s = num(sig.subarray(32, 64)); // Let s = int(sig[32:64]); fail if s  n.\n        if (!inRange(s, _1n, secp256k1N))\n            return false;\n        const e = challenge(numTo32b(r), pointToBytes(P), m); // int(challenge(bytes(r)||bytes(P)||m))%n\n        const R = GmulAdd(P, s, modN(-e)); // R = sG - eP\n        if (!R || !R.hasEvenY() || R.toAffine().x !== r)\n            return false; // -eP == (n-e)P\n        return true; // Fail if is_infinite(R) / not has_even_y(R) / x(R)  r.\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Schnorr signatures over secp256k1.\n * https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki\n * @example\n * ```js\n * import { schnorr } from '@noble/curves/secp256k1';\n * const priv = schnorr.utils.randomPrivateKey();\n * const pub = schnorr.getPublicKey(priv);\n * const msg = new TextEncoder().encode('hello');\n * const sig = schnorr.sign(msg, priv);\n * const isValid = schnorr.verify(sig, msg, pub);\n * ```\n */\nexport const schnorr = /* @__PURE__ */ (() => ({\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    utils: {\n        randomPrivateKey: secp256k1.utils.randomPrivateKey,\n        lift_x,\n        pointToBytes,\n        numberToBytesBE,\n        bytesToNumberBE,\n        taggedHash,\n        mod,\n    },\n}))();\nconst isoMap = /* @__PURE__ */ (() => isogenyMap(Fpk1, [\n    // xNum\n    [\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7',\n        '0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581',\n        '0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262',\n        '0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c',\n    ],\n    // xDen\n    [\n        '0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b',\n        '0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n    // yNum\n    [\n        '0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c',\n        '0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3',\n        '0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931',\n        '0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84',\n    ],\n    // yDen\n    [\n        '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b',\n        '0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573',\n        '0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f',\n        '0x0000000000000000000000000000000000000000000000000000000000000001', // LAST 1\n    ],\n].map((i) => i.map((j) => BigInt(j)))))();\nconst mapSWU = /* @__PURE__ */ (() => mapToCurveSimpleSWU(Fpk1, {\n    A: BigInt('0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533'),\n    B: BigInt('1771'),\n    Z: Fpk1.create(BigInt('-11')),\n}))();\nconst htf = /* @__PURE__ */ (() => createHasher(secp256k1.ProjectivePoint, (scalars) => {\n    const { x, y } = mapSWU(Fpk1.create(scalars[0]));\n    return isoMap(x, y);\n}, {\n    DST: 'secp256k1_XMD:SHA-256_SSWU_RO_',\n    encodeDST: 'secp256k1_XMD:SHA-256_SSWU_NU_',\n    p: Fpk1.ORDER,\n    m: 1,\n    k: 128,\n    expand: 'xmd',\n    hash: sha256,\n}))();\n/** secp256k1 hash-to-curve from RFC 9380. */\nexport const hashToCurve = /* @__PURE__ */ (() => htf.hashToCurve)();\n/** secp256k1 encode-to-curve from RFC 9380. */\nexport const encodeToCurve = /* @__PURE__ */ (() => htf.encodeToCurve)();\n//# sourceMappingURL=secp256k1.js.map","import { Buffer } from 'buffer';\nimport { ed25519 } from '@noble/curves/ed25519';\nimport BN from 'bn.js';\nimport bs58 from 'bs58';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { serialize, deserialize, deserializeUnchecked } from 'borsh';\nimport * as BufferLayout from '@solana/buffer-layout';\nimport { blob } from '@solana/buffer-layout';\nimport { getU64Codec, getU64Encoder } from '@solana/codecs-numbers';\nimport { coerce, instance, string, tuple, literal, unknown, type, number, array, nullable, optional, boolean, record, union, create, any, assert as assert$1 } from 'superstruct';\nimport RpcClient from 'jayson/lib/client/browser';\nimport { CommonClient, WebSocket } from 'rpc-websockets';\nimport { keccak_256 } from '@noble/hashes/sha3';\nimport { secp256k1 } from '@noble/curves/secp256k1';\n\n/**\n * A 64 byte secret key, the first 32 bytes of which is the\n * private scalar and the last 32 bytes is the public key.\n * Read more: https://blog.mozilla.org/warner/2011/11/29/ed25519-keys/\n */\n\n/**\n * Ed25519 Keypair\n */\n\nconst generatePrivateKey = ed25519.utils.randomPrivateKey;\nconst generateKeypair = () => {\n  const privateScalar = ed25519.utils.randomPrivateKey();\n  const publicKey = getPublicKey(privateScalar);\n  const secretKey = new Uint8Array(64);\n  secretKey.set(privateScalar);\n  secretKey.set(publicKey, 32);\n  return {\n    publicKey,\n    secretKey\n  };\n};\nconst getPublicKey = ed25519.getPublicKey;\nfunction isOnCurve(publicKey) {\n  try {\n    ed25519.ExtendedPoint.fromHex(publicKey);\n    return true;\n  } catch {\n    return false;\n  }\n}\nconst sign = (message, secretKey) => ed25519.sign(message, secretKey.slice(0, 32));\nconst verify = ed25519.verify;\n\nconst toBuffer = arr => {\n  if (Buffer.isBuffer(arr)) {\n    return arr;\n  } else if (arr instanceof Uint8Array) {\n    return Buffer.from(arr.buffer, arr.byteOffset, arr.byteLength);\n  } else {\n    return Buffer.from(arr);\n  }\n};\n\n// Class wrapping a plain object\nclass Struct {\n  constructor(properties) {\n    Object.assign(this, properties);\n  }\n  encode() {\n    return Buffer.from(serialize(SOLANA_SCHEMA, this));\n  }\n  static decode(data) {\n    return deserialize(SOLANA_SCHEMA, this, data);\n  }\n  static decodeUnchecked(data) {\n    return deserializeUnchecked(SOLANA_SCHEMA, this, data);\n  }\n}\n\n// Class representing a Rust-compatible enum, since enums are only strings or\n// numbers in pure JS\nclass Enum extends Struct {\n  constructor(properties) {\n    super(properties);\n    this.enum = '';\n    if (Object.keys(properties).length !== 1) {\n      throw new Error('Enum can only take single value');\n    }\n    Object.keys(properties).map(key => {\n      this.enum = key;\n    });\n  }\n}\nconst SOLANA_SCHEMA = new Map();\n\nvar _PublicKey;\n\n/**\n * Maximum length of derived pubkey seed\n */\nconst MAX_SEED_LENGTH = 32;\n\n/**\n * Size of public key in bytes\n */\nconst PUBLIC_KEY_LENGTH = 32;\n\n/**\n * Value to be converted into public key\n */\n\n/**\n * JSON object representation of PublicKey class\n */\n\nfunction isPublicKeyData(value) {\n  return value._bn !== undefined;\n}\n\n// local counter used by PublicKey.unique()\nlet uniquePublicKeyCounter = 1;\n\n/**\n * A public key\n */\nclass PublicKey extends Struct {\n  /**\n   * Create a new PublicKey object\n   * @param value ed25519 public key as buffer or base-58 encoded string\n   */\n  constructor(value) {\n    super({});\n    /** @internal */\n    this._bn = void 0;\n    if (isPublicKeyData(value)) {\n      this._bn = value._bn;\n    } else {\n      if (typeof value === 'string') {\n        // assume base 58 encoding by default\n        const decoded = bs58.decode(value);\n        if (decoded.length != PUBLIC_KEY_LENGTH) {\n          throw new Error(`Invalid public key input`);\n        }\n        this._bn = new BN(decoded);\n      } else {\n        this._bn = new BN(value);\n      }\n      if (this._bn.byteLength() > PUBLIC_KEY_LENGTH) {\n        throw new Error(`Invalid public key input`);\n      }\n    }\n  }\n\n  /**\n   * Returns a unique PublicKey for tests and benchmarks using a counter\n   */\n  static unique() {\n    const key = new PublicKey(uniquePublicKeyCounter);\n    uniquePublicKeyCounter += 1;\n    return new PublicKey(key.toBuffer());\n  }\n\n  /**\n   * Default public key value. The base58-encoded string representation is all ones (as seen below)\n   * The underlying BN number is 32 bytes that are all zeros\n   */\n\n  /**\n   * Checks if two publicKeys are equal\n   */\n  equals(publicKey) {\n    return this._bn.eq(publicKey._bn);\n  }\n\n  /**\n   * Return the base-58 representation of the public key\n   */\n  toBase58() {\n    return bs58.encode(this.toBytes());\n  }\n  toJSON() {\n    return this.toBase58();\n  }\n\n  /**\n   * Return the byte array representation of the public key in big endian\n   */\n  toBytes() {\n    const buf = this.toBuffer();\n    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength);\n  }\n\n  /**\n   * Return the Buffer representation of the public key in big endian\n   */\n  toBuffer() {\n    const b = this._bn.toArrayLike(Buffer);\n    if (b.length === PUBLIC_KEY_LENGTH) {\n      return b;\n    }\n    const zeroPad = Buffer.alloc(32);\n    b.copy(zeroPad, 32 - b.length);\n    return zeroPad;\n  }\n  get [Symbol.toStringTag]() {\n    return `PublicKey(${this.toString()})`;\n  }\n\n  /**\n   * Return the base-58 representation of the public key\n   */\n  toString() {\n    return this.toBase58();\n  }\n\n  /**\n   * Derive a public key from another key, a seed, and a program ID.\n   * The program ID will also serve as the owner of the public key, giving\n   * it permission to write data to the account.\n   */\n  /* eslint-disable require-await */\n  static async createWithSeed(fromPublicKey, seed, programId) {\n    const buffer = Buffer.concat([fromPublicKey.toBuffer(), Buffer.from(seed), programId.toBuffer()]);\n    const publicKeyBytes = sha256(buffer);\n    return new PublicKey(publicKeyBytes);\n  }\n\n  /**\n   * Derive a program address from seeds and a program ID.\n   */\n  /* eslint-disable require-await */\n  static createProgramAddressSync(seeds, programId) {\n    let buffer = Buffer.alloc(0);\n    seeds.forEach(function (seed) {\n      if (seed.length > MAX_SEED_LENGTH) {\n        throw new TypeError(`Max seed length exceeded`);\n      }\n      buffer = Buffer.concat([buffer, toBuffer(seed)]);\n    });\n    buffer = Buffer.concat([buffer, programId.toBuffer(), Buffer.from('ProgramDerivedAddress')]);\n    const publicKeyBytes = sha256(buffer);\n    if (isOnCurve(publicKeyBytes)) {\n      throw new Error(`Invalid seeds, address must fall off the curve`);\n    }\n    return new PublicKey(publicKeyBytes);\n  }\n\n  /**\n   * Async version of createProgramAddressSync\n   * For backwards compatibility\n   *\n   * @deprecated Use {@link createProgramAddressSync} instead\n   */\n  /* eslint-disable require-await */\n  static async createProgramAddress(seeds, programId) {\n    return this.createProgramAddressSync(seeds, programId);\n  }\n\n  /**\n   * Find a valid program address\n   *\n   * Valid program addresses must fall off the ed25519 curve.  This function\n   * iterates a nonce until it finds one that when combined with the seeds\n   * results in a valid program address.\n   */\n  static findProgramAddressSync(seeds, programId) {\n    let nonce = 255;\n    let address;\n    while (nonce != 0) {\n      try {\n        const seedsWithNonce = seeds.concat(Buffer.from([nonce]));\n        address = this.createProgramAddressSync(seedsWithNonce, programId);\n      } catch (err) {\n        if (err instanceof TypeError) {\n          throw err;\n        }\n        nonce--;\n        continue;\n      }\n      return [address, nonce];\n    }\n    throw new Error(`Unable to find a viable program address nonce`);\n  }\n\n  /**\n   * Async version of findProgramAddressSync\n   * For backwards compatibility\n   *\n   * @deprecated Use {@link findProgramAddressSync} instead\n   */\n  static async findProgramAddress(seeds, programId) {\n    return this.findProgramAddressSync(seeds, programId);\n  }\n\n  /**\n   * Check that a pubkey is on the ed25519 curve.\n   */\n  static isOnCurve(pubkeyData) {\n    const pubkey = new PublicKey(pubkeyData);\n    return isOnCurve(pubkey.toBytes());\n  }\n}\n_PublicKey = PublicKey;\nPublicKey.default = new _PublicKey('11111111111111111111111111111111');\nSOLANA_SCHEMA.set(PublicKey, {\n  kind: 'struct',\n  fields: [['_bn', 'u256']]\n});\n\n/**\n * An account key pair (public and secret keys).\n *\n * @deprecated since v1.10.0, please use {@link Keypair} instead.\n */\nclass Account {\n  /**\n   * Create a new Account object\n   *\n   * If the secretKey parameter is not provided a new key pair is randomly\n   * created for the account\n   *\n   * @param secretKey Secret key for the account\n   */\n  constructor(secretKey) {\n    /** @internal */\n    this._publicKey = void 0;\n    /** @internal */\n    this._secretKey = void 0;\n    if (secretKey) {\n      const secretKeyBuffer = toBuffer(secretKey);\n      if (secretKey.length !== 64) {\n        throw new Error('bad secret key size');\n      }\n      this._publicKey = secretKeyBuffer.slice(32, 64);\n      this._secretKey = secretKeyBuffer.slice(0, 32);\n    } else {\n      this._secretKey = toBuffer(generatePrivateKey());\n      this._publicKey = toBuffer(getPublicKey(this._secretKey));\n    }\n  }\n\n  /**\n   * The public key for this account\n   */\n  get publicKey() {\n    return new PublicKey(this._publicKey);\n  }\n\n  /**\n   * The **unencrypted** secret key for this account. The first 32 bytes\n   * is the private scalar and the last 32 bytes is the public key.\n   * Read more: https://blog.mozilla.org/warner/2011/11/29/ed25519-keys/\n   */\n  get secretKey() {\n    return Buffer.concat([this._secretKey, this._publicKey], 64);\n  }\n}\n\nconst BPF_LOADER_DEPRECATED_PROGRAM_ID = new PublicKey('BPFLoader1111111111111111111111111111111111');\n\n/**\n * Maximum over-the-wire size of a Transaction\n *\n * 1280 is IPv6 minimum MTU\n * 40 bytes is the size of the IPv6 header\n * 8 bytes is the size of the fragment header\n */\nconst PACKET_DATA_SIZE = 1280 - 40 - 8;\nconst VERSION_PREFIX_MASK = 0x7f;\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\n\nclass TransactionExpiredBlockheightExceededError extends Error {\n  constructor(signature) {\n    super(`Signature ${signature} has expired: block height exceeded.`);\n    this.signature = void 0;\n    this.signature = signature;\n  }\n}\nObject.defineProperty(TransactionExpiredBlockheightExceededError.prototype, 'name', {\n  value: 'TransactionExpiredBlockheightExceededError'\n});\nclass TransactionExpiredTimeoutError extends Error {\n  constructor(signature, timeoutSeconds) {\n    super(`Transaction was not confirmed in ${timeoutSeconds.toFixed(2)} seconds. It is ` + 'unknown if it succeeded or failed. Check signature ' + `${signature} using the Solana Explorer or CLI tools.`);\n    this.signature = void 0;\n    this.signature = signature;\n  }\n}\nObject.defineProperty(TransactionExpiredTimeoutError.prototype, 'name', {\n  value: 'TransactionExpiredTimeoutError'\n});\nclass TransactionExpiredNonceInvalidError extends Error {\n  constructor(signature) {\n    super(`Signature ${signature} has expired: the nonce is no longer valid.`);\n    this.signature = void 0;\n    this.signature = signature;\n  }\n}\nObject.defineProperty(TransactionExpiredNonceInvalidError.prototype, 'name', {\n  value: 'TransactionExpiredNonceInvalidError'\n});\n\nclass MessageAccountKeys {\n  constructor(staticAccountKeys, accountKeysFromLookups) {\n    this.staticAccountKeys = void 0;\n    this.accountKeysFromLookups = void 0;\n    this.staticAccountKeys = staticAccountKeys;\n    this.accountKeysFromLookups = accountKeysFromLookups;\n  }\n  keySegments() {\n    const keySegments = [this.staticAccountKeys];\n    if (this.accountKeysFromLookups) {\n      keySegments.push(this.accountKeysFromLookups.writable);\n      keySegments.push(this.accountKeysFromLookups.readonly);\n    }\n    return keySegments;\n  }\n  get(index) {\n    for (const keySegment of this.keySegments()) {\n      if (index < keySegment.length) {\n        return keySegment[index];\n      } else {\n        index -= keySegment.length;\n      }\n    }\n    return;\n  }\n  get length() {\n    return this.keySegments().flat().length;\n  }\n  compileInstructions(instructions) {\n    // Bail early if any account indexes would overflow a u8\n    const U8_MAX = 255;\n    if (this.length > U8_MAX + 1) {\n      throw new Error('Account index overflow encountered during compilation');\n    }\n    const keyIndexMap = new Map();\n    this.keySegments().flat().forEach((key, index) => {\n      keyIndexMap.set(key.toBase58(), index);\n    });\n    const findKeyIndex = key => {\n      const keyIndex = keyIndexMap.get(key.toBase58());\n      if (keyIndex === undefined) throw new Error('Encountered an unknown instruction account key during compilation');\n      return keyIndex;\n    };\n    return instructions.map(instruction => {\n      return {\n        programIdIndex: findKeyIndex(instruction.programId),\n        accountKeyIndexes: instruction.keys.map(meta => findKeyIndex(meta.pubkey)),\n        data: instruction.data\n      };\n    });\n  }\n}\n\n/**\n * Layout for a public key\n */\nconst publicKey = (property = 'publicKey') => {\n  return BufferLayout.blob(32, property);\n};\n\n/**\n * Layout for a signature\n */\nconst signature = (property = 'signature') => {\n  return BufferLayout.blob(64, property);\n};\n/**\n * Layout for a Rust String type\n */\nconst rustString = (property = 'string') => {\n  const rsl = BufferLayout.struct([BufferLayout.u32('length'), BufferLayout.u32('lengthPadding'), BufferLayout.blob(BufferLayout.offset(BufferLayout.u32(), -8), 'chars')], property);\n  const _decode = rsl.decode.bind(rsl);\n  const _encode = rsl.encode.bind(rsl);\n  const rslShim = rsl;\n  rslShim.decode = (b, offset) => {\n    const data = _decode(b, offset);\n    return data['chars'].toString();\n  };\n  rslShim.encode = (str, b, offset) => {\n    const data = {\n      chars: Buffer.from(str, 'utf8')\n    };\n    return _encode(data, b, offset);\n  };\n  rslShim.alloc = str => {\n    return BufferLayout.u32().span + BufferLayout.u32().span + Buffer.from(str, 'utf8').length;\n  };\n  return rslShim;\n};\n\n/**\n * Layout for an Authorized object\n */\nconst authorized = (property = 'authorized') => {\n  return BufferLayout.struct([publicKey('staker'), publicKey('withdrawer')], property);\n};\n\n/**\n * Layout for a Lockup object\n */\nconst lockup = (property = 'lockup') => {\n  return BufferLayout.struct([BufferLayout.ns64('unixTimestamp'), BufferLayout.ns64('epoch'), publicKey('custodian')], property);\n};\n\n/**\n *  Layout for a VoteInit object\n */\nconst voteInit = (property = 'voteInit') => {\n  return BufferLayout.struct([publicKey('nodePubkey'), publicKey('authorizedVoter'), publicKey('authorizedWithdrawer'), BufferLayout.u8('commission')], property);\n};\n\n/**\n *  Layout for a VoteAuthorizeWithSeedArgs object\n */\nconst voteAuthorizeWithSeedArgs = (property = 'voteAuthorizeWithSeedArgs') => {\n  return BufferLayout.struct([BufferLayout.u32('voteAuthorizationType'), publicKey('currentAuthorityDerivedKeyOwnerPubkey'), rustString('currentAuthorityDerivedKeySeed'), publicKey('newAuthorized')], property);\n};\nfunction getAlloc(type, fields) {\n  const getItemAlloc = item => {\n    if (item.span >= 0) {\n      return item.span;\n    } else if (typeof item.alloc === 'function') {\n      return item.alloc(fields[item.property]);\n    } else if ('count' in item && 'elementLayout' in item) {\n      const field = fields[item.property];\n      if (Array.isArray(field)) {\n        return field.length * getItemAlloc(item.elementLayout);\n      }\n    } else if ('fields' in item) {\n      // This is a `Structure` whose size needs to be recursively measured.\n      return getAlloc({\n        layout: item\n      }, fields[item.property]);\n    }\n    // Couldn't determine allocated size of layout\n    return 0;\n  };\n  let alloc = 0;\n  type.layout.fields.forEach(item => {\n    alloc += getItemAlloc(item);\n  });\n  return alloc;\n}\n\nfunction decodeLength(bytes) {\n  let len = 0;\n  let size = 0;\n  for (;;) {\n    let elem = bytes.shift();\n    len |= (elem & 0x7f) << size * 7;\n    size += 1;\n    if ((elem & 0x80) === 0) {\n      break;\n    }\n  }\n  return len;\n}\nfunction encodeLength(bytes, len) {\n  let rem_len = len;\n  for (;;) {\n    let elem = rem_len & 0x7f;\n    rem_len >>= 7;\n    if (rem_len == 0) {\n      bytes.push(elem);\n      break;\n    } else {\n      elem |= 0x80;\n      bytes.push(elem);\n    }\n  }\n}\n\nfunction assert (condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n\nclass CompiledKeys {\n  constructor(payer, keyMetaMap) {\n    this.payer = void 0;\n    this.keyMetaMap = void 0;\n    this.payer = payer;\n    this.keyMetaMap = keyMetaMap;\n  }\n  static compile(instructions, payer) {\n    const keyMetaMap = new Map();\n    const getOrInsertDefault = pubkey => {\n      const address = pubkey.toBase58();\n      let keyMeta = keyMetaMap.get(address);\n      if (keyMeta === undefined) {\n        keyMeta = {\n          isSigner: false,\n          isWritable: false,\n          isInvoked: false\n        };\n        keyMetaMap.set(address, keyMeta);\n      }\n      return keyMeta;\n    };\n    const payerKeyMeta = getOrInsertDefault(payer);\n    payerKeyMeta.isSigner = true;\n    payerKeyMeta.isWritable = true;\n    for (const ix of instructions) {\n      getOrInsertDefault(ix.programId).isInvoked = true;\n      for (const accountMeta of ix.keys) {\n        const keyMeta = getOrInsertDefault(accountMeta.pubkey);\n        keyMeta.isSigner ||= accountMeta.isSigner;\n        keyMeta.isWritable ||= accountMeta.isWritable;\n      }\n    }\n    return new CompiledKeys(payer, keyMetaMap);\n  }\n  getMessageComponents() {\n    const mapEntries = [...this.keyMetaMap.entries()];\n    assert(mapEntries.length <= 256, 'Max static account keys length exceeded');\n    const writableSigners = mapEntries.filter(([, meta]) => meta.isSigner && meta.isWritable);\n    const readonlySigners = mapEntries.filter(([, meta]) => meta.isSigner && !meta.isWritable);\n    const writableNonSigners = mapEntries.filter(([, meta]) => !meta.isSigner && meta.isWritable);\n    const readonlyNonSigners = mapEntries.filter(([, meta]) => !meta.isSigner && !meta.isWritable);\n    const header = {\n      numRequiredSignatures: writableSigners.length + readonlySigners.length,\n      numReadonlySignedAccounts: readonlySigners.length,\n      numReadonlyUnsignedAccounts: readonlyNonSigners.length\n    };\n\n    // sanity checks\n    {\n      assert(writableSigners.length > 0, 'Expected at least one writable signer key');\n      const [payerAddress] = writableSigners[0];\n      assert(payerAddress === this.payer.toBase58(), 'Expected first writable signer key to be the fee payer');\n    }\n    const staticAccountKeys = [...writableSigners.map(([address]) => new PublicKey(address)), ...readonlySigners.map(([address]) => new PublicKey(address)), ...writableNonSigners.map(([address]) => new PublicKey(address)), ...readonlyNonSigners.map(([address]) => new PublicKey(address))];\n    return [header, staticAccountKeys];\n  }\n  extractTableLookup(lookupTable) {\n    const [writableIndexes, drainedWritableKeys] = this.drainKeysFoundInLookupTable(lookupTable.state.addresses, keyMeta => !keyMeta.isSigner && !keyMeta.isInvoked && keyMeta.isWritable);\n    const [readonlyIndexes, drainedReadonlyKeys] = this.drainKeysFoundInLookupTable(lookupTable.state.addresses, keyMeta => !keyMeta.isSigner && !keyMeta.isInvoked && !keyMeta.isWritable);\n\n    // Don't extract lookup if no keys were found\n    if (writableIndexes.length === 0 && readonlyIndexes.length === 0) {\n      return;\n    }\n    return [{\n      accountKey: lookupTable.key,\n      writableIndexes,\n      readonlyIndexes\n    }, {\n      writable: drainedWritableKeys,\n      readonly: drainedReadonlyKeys\n    }];\n  }\n\n  /** @internal */\n  drainKeysFoundInLookupTable(lookupTableEntries, keyMetaFilter) {\n    const lookupTableIndexes = new Array();\n    const drainedKeys = new Array();\n    for (const [address, keyMeta] of this.keyMetaMap.entries()) {\n      if (keyMetaFilter(keyMeta)) {\n        const key = new PublicKey(address);\n        const lookupTableIndex = lookupTableEntries.findIndex(entry => entry.equals(key));\n        if (lookupTableIndex >= 0) {\n          assert(lookupTableIndex < 256, 'Max lookup table index exceeded');\n          lookupTableIndexes.push(lookupTableIndex);\n          drainedKeys.push(key);\n          this.keyMetaMap.delete(address);\n        }\n      }\n    }\n    return [lookupTableIndexes, drainedKeys];\n  }\n}\n\nconst END_OF_BUFFER_ERROR_MESSAGE = 'Reached end of buffer unexpectedly';\n\n/**\n * Delegates to `Array#shift`, but throws if the array is zero-length.\n */\nfunction guardedShift(byteArray) {\n  if (byteArray.length === 0) {\n    throw new Error(END_OF_BUFFER_ERROR_MESSAGE);\n  }\n  return byteArray.shift();\n}\n\n/**\n * Delegates to `Array#splice`, but throws if the section being spliced out extends past the end of\n * the array.\n */\nfunction guardedSplice(byteArray, ...args) {\n  const [start] = args;\n  if (args.length === 2 // Implies that `deleteCount` was supplied\n  ? start + (args[1] ?? 0) > byteArray.length : start >= byteArray.length) {\n    throw new Error(END_OF_BUFFER_ERROR_MESSAGE);\n  }\n  return byteArray.splice(...args);\n}\n\n/**\n * An instruction to execute by a program\n *\n * @property {number} programIdIndex\n * @property {number[]} accounts\n * @property {string} data\n */\n\n/**\n * Message constructor arguments\n */\n\n/**\n * List of instructions to be processed atomically\n */\nclass Message {\n  constructor(args) {\n    this.header = void 0;\n    this.accountKeys = void 0;\n    this.recentBlockhash = void 0;\n    this.instructions = void 0;\n    this.indexToProgramIds = new Map();\n    this.header = args.header;\n    this.accountKeys = args.accountKeys.map(account => new PublicKey(account));\n    this.recentBlockhash = args.recentBlockhash;\n    this.instructions = args.instructions;\n    this.instructions.forEach(ix => this.indexToProgramIds.set(ix.programIdIndex, this.accountKeys[ix.programIdIndex]));\n  }\n  get version() {\n    return 'legacy';\n  }\n  get staticAccountKeys() {\n    return this.accountKeys;\n  }\n  get compiledInstructions() {\n    return this.instructions.map(ix => ({\n      programIdIndex: ix.programIdIndex,\n      accountKeyIndexes: ix.accounts,\n      data: bs58.decode(ix.data)\n    }));\n  }\n  get addressTableLookups() {\n    return [];\n  }\n  getAccountKeys() {\n    return new MessageAccountKeys(this.staticAccountKeys);\n  }\n  static compile(args) {\n    const compiledKeys = CompiledKeys.compile(args.instructions, args.payerKey);\n    const [header, staticAccountKeys] = compiledKeys.getMessageComponents();\n    const accountKeys = new MessageAccountKeys(staticAccountKeys);\n    const instructions = accountKeys.compileInstructions(args.instructions).map(ix => ({\n      programIdIndex: ix.programIdIndex,\n      accounts: ix.accountKeyIndexes,\n      data: bs58.encode(ix.data)\n    }));\n    return new Message({\n      header,\n      accountKeys: staticAccountKeys,\n      recentBlockhash: args.recentBlockhash,\n      instructions\n    });\n  }\n  isAccountSigner(index) {\n    return index < this.header.numRequiredSignatures;\n  }\n  isAccountWritable(index) {\n    const numSignedAccounts = this.header.numRequiredSignatures;\n    if (index >= this.header.numRequiredSignatures) {\n      const unsignedAccountIndex = index - numSignedAccounts;\n      const numUnsignedAccounts = this.accountKeys.length - numSignedAccounts;\n      const numWritableUnsignedAccounts = numUnsignedAccounts - this.header.numReadonlyUnsignedAccounts;\n      return unsignedAccountIndex < numWritableUnsignedAccounts;\n    } else {\n      const numWritableSignedAccounts = numSignedAccounts - this.header.numReadonlySignedAccounts;\n      return index < numWritableSignedAccounts;\n    }\n  }\n  isProgramId(index) {\n    return this.indexToProgramIds.has(index);\n  }\n  programIds() {\n    return [...this.indexToProgramIds.values()];\n  }\n  nonProgramIds() {\n    return this.accountKeys.filter((_, index) => !this.isProgramId(index));\n  }\n  serialize() {\n    const numKeys = this.accountKeys.length;\n    let keyCount = [];\n    encodeLength(keyCount, numKeys);\n    const instructions = this.instructions.map(instruction => {\n      const {\n        accounts,\n        programIdIndex\n      } = instruction;\n      const data = Array.from(bs58.decode(instruction.data));\n      let keyIndicesCount = [];\n      encodeLength(keyIndicesCount, accounts.length);\n      let dataCount = [];\n      encodeLength(dataCount, data.length);\n      return {\n        programIdIndex,\n        keyIndicesCount: Buffer.from(keyIndicesCount),\n        keyIndices: accounts,\n        dataLength: Buffer.from(dataCount),\n        data\n      };\n    });\n    let instructionCount = [];\n    encodeLength(instructionCount, instructions.length);\n    let instructionBuffer = Buffer.alloc(PACKET_DATA_SIZE);\n    Buffer.from(instructionCount).copy(instructionBuffer);\n    let instructionBufferLength = instructionCount.length;\n    instructions.forEach(instruction => {\n      const instructionLayout = BufferLayout.struct([BufferLayout.u8('programIdIndex'), BufferLayout.blob(instruction.keyIndicesCount.length, 'keyIndicesCount'), BufferLayout.seq(BufferLayout.u8('keyIndex'), instruction.keyIndices.length, 'keyIndices'), BufferLayout.blob(instruction.dataLength.length, 'dataLength'), BufferLayout.seq(BufferLayout.u8('userdatum'), instruction.data.length, 'data')]);\n      const length = instructionLayout.encode(instruction, instructionBuffer, instructionBufferLength);\n      instructionBufferLength += length;\n    });\n    instructionBuffer = instructionBuffer.slice(0, instructionBufferLength);\n    const signDataLayout = BufferLayout.struct([BufferLayout.blob(1, 'numRequiredSignatures'), BufferLayout.blob(1, 'numReadonlySignedAccounts'), BufferLayout.blob(1, 'numReadonlyUnsignedAccounts'), BufferLayout.blob(keyCount.length, 'keyCount'), BufferLayout.seq(publicKey('key'), numKeys, 'keys'), publicKey('recentBlockhash')]);\n    const transaction = {\n      numRequiredSignatures: Buffer.from([this.header.numRequiredSignatures]),\n      numReadonlySignedAccounts: Buffer.from([this.header.numReadonlySignedAccounts]),\n      numReadonlyUnsignedAccounts: Buffer.from([this.header.numReadonlyUnsignedAccounts]),\n      keyCount: Buffer.from(keyCount),\n      keys: this.accountKeys.map(key => toBuffer(key.toBytes())),\n      recentBlockhash: bs58.decode(this.recentBlockhash)\n    };\n    let signData = Buffer.alloc(2048);\n    const length = signDataLayout.encode(transaction, signData);\n    instructionBuffer.copy(signData, length);\n    return signData.slice(0, length + instructionBuffer.length);\n  }\n\n  /**\n   * Decode a compiled message into a Message object.\n   */\n  static from(buffer) {\n    // Slice up wire data\n    let byteArray = [...buffer];\n    const numRequiredSignatures = guardedShift(byteArray);\n    if (numRequiredSignatures !== (numRequiredSignatures & VERSION_PREFIX_MASK)) {\n      throw new Error('Versioned messages must be deserialized with VersionedMessage.deserialize()');\n    }\n    const numReadonlySignedAccounts = guardedShift(byteArray);\n    const numReadonlyUnsignedAccounts = guardedShift(byteArray);\n    const accountCount = decodeLength(byteArray);\n    let accountKeys = [];\n    for (let i = 0; i < accountCount; i++) {\n      const account = guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH);\n      accountKeys.push(new PublicKey(Buffer.from(account)));\n    }\n    const recentBlockhash = guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH);\n    const instructionCount = decodeLength(byteArray);\n    let instructions = [];\n    for (let i = 0; i < instructionCount; i++) {\n      const programIdIndex = guardedShift(byteArray);\n      const accountCount = decodeLength(byteArray);\n      const accounts = guardedSplice(byteArray, 0, accountCount);\n      const dataLength = decodeLength(byteArray);\n      const dataSlice = guardedSplice(byteArray, 0, dataLength);\n      const data = bs58.encode(Buffer.from(dataSlice));\n      instructions.push({\n        programIdIndex,\n        accounts,\n        data\n      });\n    }\n    const messageArgs = {\n      header: {\n        numRequiredSignatures,\n        numReadonlySignedAccounts,\n        numReadonlyUnsignedAccounts\n      },\n      recentBlockhash: bs58.encode(Buffer.from(recentBlockhash)),\n      accountKeys,\n      instructions\n    };\n    return new Message(messageArgs);\n  }\n}\n\n/**\n * Message constructor arguments\n */\n\nclass MessageV0 {\n  constructor(args) {\n    this.header = void 0;\n    this.staticAccountKeys = void 0;\n    this.recentBlockhash = void 0;\n    this.compiledInstructions = void 0;\n    this.addressTableLookups = void 0;\n    this.header = args.header;\n    this.staticAccountKeys = args.staticAccountKeys;\n    this.recentBlockhash = args.recentBlockhash;\n    this.compiledInstructions = args.compiledInstructions;\n    this.addressTableLookups = args.addressTableLookups;\n  }\n  get version() {\n    return 0;\n  }\n  get numAccountKeysFromLookups() {\n    let count = 0;\n    for (const lookup of this.addressTableLookups) {\n      count += lookup.readonlyIndexes.length + lookup.writableIndexes.length;\n    }\n    return count;\n  }\n  getAccountKeys(args) {\n    let accountKeysFromLookups;\n    if (args && 'accountKeysFromLookups' in args && args.accountKeysFromLookups) {\n      if (this.numAccountKeysFromLookups != args.accountKeysFromLookups.writable.length + args.accountKeysFromLookups.readonly.length) {\n        throw new Error('Failed to get account keys because of a mismatch in the number of account keys from lookups');\n      }\n      accountKeysFromLookups = args.accountKeysFromLookups;\n    } else if (args && 'addressLookupTableAccounts' in args && args.addressLookupTableAccounts) {\n      accountKeysFromLookups = this.resolveAddressTableLookups(args.addressLookupTableAccounts);\n    } else if (this.addressTableLookups.length > 0) {\n      throw new Error('Failed to get account keys because address table lookups were not resolved');\n    }\n    return new MessageAccountKeys(this.staticAccountKeys, accountKeysFromLookups);\n  }\n  isAccountSigner(index) {\n    return index < this.header.numRequiredSignatures;\n  }\n  isAccountWritable(index) {\n    const numSignedAccounts = this.header.numRequiredSignatures;\n    const numStaticAccountKeys = this.staticAccountKeys.length;\n    if (index >= numStaticAccountKeys) {\n      const lookupAccountKeysIndex = index - numStaticAccountKeys;\n      const numWritableLookupAccountKeys = this.addressTableLookups.reduce((count, lookup) => count + lookup.writableIndexes.length, 0);\n      return lookupAccountKeysIndex < numWritableLookupAccountKeys;\n    } else if (index >= this.header.numRequiredSignatures) {\n      const unsignedAccountIndex = index - numSignedAccounts;\n      const numUnsignedAccounts = numStaticAccountKeys - numSignedAccounts;\n      const numWritableUnsignedAccounts = numUnsignedAccounts - this.header.numReadonlyUnsignedAccounts;\n      return unsignedAccountIndex < numWritableUnsignedAccounts;\n    } else {\n      const numWritableSignedAccounts = numSignedAccounts - this.header.numReadonlySignedAccounts;\n      return index < numWritableSignedAccounts;\n    }\n  }\n  resolveAddressTableLookups(addressLookupTableAccounts) {\n    const accountKeysFromLookups = {\n      writable: [],\n      readonly: []\n    };\n    for (const tableLookup of this.addressTableLookups) {\n      const tableAccount = addressLookupTableAccounts.find(account => account.key.equals(tableLookup.accountKey));\n      if (!tableAccount) {\n        throw new Error(`Failed to find address lookup table account for table key ${tableLookup.accountKey.toBase58()}`);\n      }\n      for (const index of tableLookup.writableIndexes) {\n        if (index < tableAccount.state.addresses.length) {\n          accountKeysFromLookups.writable.push(tableAccount.state.addresses[index]);\n        } else {\n          throw new Error(`Failed to find address for index ${index} in address lookup table ${tableLookup.accountKey.toBase58()}`);\n        }\n      }\n      for (const index of tableLookup.readonlyIndexes) {\n        if (index < tableAccount.state.addresses.length) {\n          accountKeysFromLookups.readonly.push(tableAccount.state.addresses[index]);\n        } else {\n          throw new Error(`Failed to find address for index ${index} in address lookup table ${tableLookup.accountKey.toBase58()}`);\n        }\n      }\n    }\n    return accountKeysFromLookups;\n  }\n  static compile(args) {\n    const compiledKeys = CompiledKeys.compile(args.instructions, args.payerKey);\n    const addressTableLookups = new Array();\n    const accountKeysFromLookups = {\n      writable: new Array(),\n      readonly: new Array()\n    };\n    const lookupTableAccounts = args.addressLookupTableAccounts || [];\n    for (const lookupTable of lookupTableAccounts) {\n      const extractResult = compiledKeys.extractTableLookup(lookupTable);\n      if (extractResult !== undefined) {\n        const [addressTableLookup, {\n          writable,\n          readonly\n        }] = extractResult;\n        addressTableLookups.push(addressTableLookup);\n        accountKeysFromLookups.writable.push(...writable);\n        accountKeysFromLookups.readonly.push(...readonly);\n      }\n    }\n    const [header, staticAccountKeys] = compiledKeys.getMessageComponents();\n    const accountKeys = new MessageAccountKeys(staticAccountKeys, accountKeysFromLookups);\n    const compiledInstructions = accountKeys.compileInstructions(args.instructions);\n    return new MessageV0({\n      header,\n      staticAccountKeys,\n      recentBlockhash: args.recentBlockhash,\n      compiledInstructions,\n      addressTableLookups\n    });\n  }\n  serialize() {\n    const encodedStaticAccountKeysLength = Array();\n    encodeLength(encodedStaticAccountKeysLength, this.staticAccountKeys.length);\n    const serializedInstructions = this.serializeInstructions();\n    const encodedInstructionsLength = Array();\n    encodeLength(encodedInstructionsLength, this.compiledInstructions.length);\n    const serializedAddressTableLookups = this.serializeAddressTableLookups();\n    const encodedAddressTableLookupsLength = Array();\n    encodeLength(encodedAddressTableLookupsLength, this.addressTableLookups.length);\n    const messageLayout = BufferLayout.struct([BufferLayout.u8('prefix'), BufferLayout.struct([BufferLayout.u8('numRequiredSignatures'), BufferLayout.u8('numReadonlySignedAccounts'), BufferLayout.u8('numReadonlyUnsignedAccounts')], 'header'), BufferLayout.blob(encodedStaticAccountKeysLength.length, 'staticAccountKeysLength'), BufferLayout.seq(publicKey(), this.staticAccountKeys.length, 'staticAccountKeys'), publicKey('recentBlockhash'), BufferLayout.blob(encodedInstructionsLength.length, 'instructionsLength'), BufferLayout.blob(serializedInstructions.length, 'serializedInstructions'), BufferLayout.blob(encodedAddressTableLookupsLength.length, 'addressTableLookupsLength'), BufferLayout.blob(serializedAddressTableLookups.length, 'serializedAddressTableLookups')]);\n    const serializedMessage = new Uint8Array(PACKET_DATA_SIZE);\n    const MESSAGE_VERSION_0_PREFIX = 1 << 7;\n    const serializedMessageLength = messageLayout.encode({\n      prefix: MESSAGE_VERSION_0_PREFIX,\n      header: this.header,\n      staticAccountKeysLength: new Uint8Array(encodedStaticAccountKeysLength),\n      staticAccountKeys: this.staticAccountKeys.map(key => key.toBytes()),\n      recentBlockhash: bs58.decode(this.recentBlockhash),\n      instructionsLength: new Uint8Array(encodedInstructionsLength),\n      serializedInstructions,\n      addressTableLookupsLength: new Uint8Array(encodedAddressTableLookupsLength),\n      serializedAddressTableLookups\n    }, serializedMessage);\n    return serializedMessage.slice(0, serializedMessageLength);\n  }\n  serializeInstructions() {\n    let serializedLength = 0;\n    const serializedInstructions = new Uint8Array(PACKET_DATA_SIZE);\n    for (const instruction of this.compiledInstructions) {\n      const encodedAccountKeyIndexesLength = Array();\n      encodeLength(encodedAccountKeyIndexesLength, instruction.accountKeyIndexes.length);\n      const encodedDataLength = Array();\n      encodeLength(encodedDataLength, instruction.data.length);\n      const instructionLayout = BufferLayout.struct([BufferLayout.u8('programIdIndex'), BufferLayout.blob(encodedAccountKeyIndexesLength.length, 'encodedAccountKeyIndexesLength'), BufferLayout.seq(BufferLayout.u8(), instruction.accountKeyIndexes.length, 'accountKeyIndexes'), BufferLayout.blob(encodedDataLength.length, 'encodedDataLength'), BufferLayout.blob(instruction.data.length, 'data')]);\n      serializedLength += instructionLayout.encode({\n        programIdIndex: instruction.programIdIndex,\n        encodedAccountKeyIndexesLength: new Uint8Array(encodedAccountKeyIndexesLength),\n        accountKeyIndexes: instruction.accountKeyIndexes,\n        encodedDataLength: new Uint8Array(encodedDataLength),\n        data: instruction.data\n      }, serializedInstructions, serializedLength);\n    }\n    return serializedInstructions.slice(0, serializedLength);\n  }\n  serializeAddressTableLookups() {\n    let serializedLength = 0;\n    const serializedAddressTableLookups = new Uint8Array(PACKET_DATA_SIZE);\n    for (const lookup of this.addressTableLookups) {\n      const encodedWritableIndexesLength = Array();\n      encodeLength(encodedWritableIndexesLength, lookup.writableIndexes.length);\n      const encodedReadonlyIndexesLength = Array();\n      encodeLength(encodedReadonlyIndexesLength, lookup.readonlyIndexes.length);\n      const addressTableLookupLayout = BufferLayout.struct([publicKey('accountKey'), BufferLayout.blob(encodedWritableIndexesLength.length, 'encodedWritableIndexesLength'), BufferLayout.seq(BufferLayout.u8(), lookup.writableIndexes.length, 'writableIndexes'), BufferLayout.blob(encodedReadonlyIndexesLength.length, 'encodedReadonlyIndexesLength'), BufferLayout.seq(BufferLayout.u8(), lookup.readonlyIndexes.length, 'readonlyIndexes')]);\n      serializedLength += addressTableLookupLayout.encode({\n        accountKey: lookup.accountKey.toBytes(),\n        encodedWritableIndexesLength: new Uint8Array(encodedWritableIndexesLength),\n        writableIndexes: lookup.writableIndexes,\n        encodedReadonlyIndexesLength: new Uint8Array(encodedReadonlyIndexesLength),\n        readonlyIndexes: lookup.readonlyIndexes\n      }, serializedAddressTableLookups, serializedLength);\n    }\n    return serializedAddressTableLookups.slice(0, serializedLength);\n  }\n  static deserialize(serializedMessage) {\n    let byteArray = [...serializedMessage];\n    const prefix = guardedShift(byteArray);\n    const maskedPrefix = prefix & VERSION_PREFIX_MASK;\n    assert(prefix !== maskedPrefix, `Expected versioned message but received legacy message`);\n    const version = maskedPrefix;\n    assert(version === 0, `Expected versioned message with version 0 but found version ${version}`);\n    const header = {\n      numRequiredSignatures: guardedShift(byteArray),\n      numReadonlySignedAccounts: guardedShift(byteArray),\n      numReadonlyUnsignedAccounts: guardedShift(byteArray)\n    };\n    const staticAccountKeys = [];\n    const staticAccountKeysLength = decodeLength(byteArray);\n    for (let i = 0; i < staticAccountKeysLength; i++) {\n      staticAccountKeys.push(new PublicKey(guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH)));\n    }\n    const recentBlockhash = bs58.encode(guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH));\n    const instructionCount = decodeLength(byteArray);\n    const compiledInstructions = [];\n    for (let i = 0; i < instructionCount; i++) {\n      const programIdIndex = guardedShift(byteArray);\n      const accountKeyIndexesLength = decodeLength(byteArray);\n      const accountKeyIndexes = guardedSplice(byteArray, 0, accountKeyIndexesLength);\n      const dataLength = decodeLength(byteArray);\n      const data = new Uint8Array(guardedSplice(byteArray, 0, dataLength));\n      compiledInstructions.push({\n        programIdIndex,\n        accountKeyIndexes,\n        data\n      });\n    }\n    const addressTableLookupsCount = decodeLength(byteArray);\n    const addressTableLookups = [];\n    for (let i = 0; i < addressTableLookupsCount; i++) {\n      const accountKey = new PublicKey(guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH));\n      const writableIndexesLength = decodeLength(byteArray);\n      const writableIndexes = guardedSplice(byteArray, 0, writableIndexesLength);\n      const readonlyIndexesLength = decodeLength(byteArray);\n      const readonlyIndexes = guardedSplice(byteArray, 0, readonlyIndexesLength);\n      addressTableLookups.push({\n        accountKey,\n        writableIndexes,\n        readonlyIndexes\n      });\n    }\n    return new MessageV0({\n      header,\n      staticAccountKeys,\n      recentBlockhash,\n      compiledInstructions,\n      addressTableLookups\n    });\n  }\n}\n\n// eslint-disable-next-line no-redeclare\nconst VersionedMessage = {\n  deserializeMessageVersion(serializedMessage) {\n    const prefix = serializedMessage[0];\n    const maskedPrefix = prefix & VERSION_PREFIX_MASK;\n\n    // if the highest bit of the prefix is not set, the message is not versioned\n    if (maskedPrefix === prefix) {\n      return 'legacy';\n    }\n\n    // the lower 7 bits of the prefix indicate the message version\n    return maskedPrefix;\n  },\n  deserialize: serializedMessage => {\n    const version = VersionedMessage.deserializeMessageVersion(serializedMessage);\n    if (version === 'legacy') {\n      return Message.from(serializedMessage);\n    }\n    if (version === 0) {\n      return MessageV0.deserialize(serializedMessage);\n    } else {\n      throw new Error(`Transaction message version ${version} deserialization is not supported`);\n    }\n  }\n};\n\n/** @internal */\n\n/**\n * Transaction signature as base-58 encoded string\n */\n\nlet TransactionStatus = /*#__PURE__*/function (TransactionStatus) {\n  TransactionStatus[TransactionStatus[\"BLOCKHEIGHT_EXCEEDED\"] = 0] = \"BLOCKHEIGHT_EXCEEDED\";\n  TransactionStatus[TransactionStatus[\"PROCESSED\"] = 1] = \"PROCESSED\";\n  TransactionStatus[TransactionStatus[\"TIMED_OUT\"] = 2] = \"TIMED_OUT\";\n  TransactionStatus[TransactionStatus[\"NONCE_INVALID\"] = 3] = \"NONCE_INVALID\";\n  return TransactionStatus;\n}({});\n\n/**\n * Default (empty) signature\n */\nconst DEFAULT_SIGNATURE = Buffer.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);\n\n/**\n * Account metadata used to define instructions\n */\n\n/**\n * List of TransactionInstruction object fields that may be initialized at construction\n */\n\n/**\n * Configuration object for Transaction.serialize()\n */\n\n/**\n * @internal\n */\n\n/**\n * Transaction Instruction class\n */\nclass TransactionInstruction {\n  constructor(opts) {\n    /**\n     * Public keys to include in this transaction\n     * Boolean represents whether this pubkey needs to sign the transaction\n     */\n    this.keys = void 0;\n    /**\n     * Program Id to execute\n     */\n    this.programId = void 0;\n    /**\n     * Program input\n     */\n    this.data = Buffer.alloc(0);\n    this.programId = opts.programId;\n    this.keys = opts.keys;\n    if (opts.data) {\n      this.data = opts.data;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  toJSON() {\n    return {\n      keys: this.keys.map(({\n        pubkey,\n        isSigner,\n        isWritable\n      }) => ({\n        pubkey: pubkey.toJSON(),\n        isSigner,\n        isWritable\n      })),\n      programId: this.programId.toJSON(),\n      data: [...this.data]\n    };\n  }\n}\n\n/**\n * Pair of signature and corresponding public key\n */\n\n/**\n * List of Transaction object fields that may be initialized at construction\n */\n\n// For backward compatibility; an unfortunate consequence of being\n// forced to over-export types by the documentation generator.\n// See https://github.com/solana-labs/solana/pull/25820\n\n/**\n * Blockhash-based transactions have a lifetime that are defined by\n * the blockhash they include. Any transaction whose blockhash is\n * too old will be rejected.\n */\n\n/**\n * Use these options to construct a durable nonce transaction.\n */\n\n/**\n * Nonce information to be used to build an offline Transaction.\n */\n\n/**\n * @internal\n */\n\n/**\n * Transaction class\n */\nclass Transaction {\n  /**\n   * The first (payer) Transaction signature\n   *\n   * @returns {Buffer | null} Buffer of payer's signature\n   */\n  get signature() {\n    if (this.signatures.length > 0) {\n      return this.signatures[0].signature;\n    }\n    return null;\n  }\n\n  /**\n   * The transaction fee payer\n   */\n\n  // Construct a transaction with a blockhash and lastValidBlockHeight\n\n  // Construct a transaction using a durable nonce\n\n  /**\n   * @deprecated `TransactionCtorFields` has been deprecated and will be removed in a future version.\n   * Please supply a `TransactionBlockhashCtor` instead.\n   */\n\n  /**\n   * Construct an empty Transaction\n   */\n  constructor(opts) {\n    /**\n     * Signatures for the transaction.  Typically created by invoking the\n     * `sign()` method\n     */\n    this.signatures = [];\n    this.feePayer = void 0;\n    /**\n     * The instructions to atomically execute\n     */\n    this.instructions = [];\n    /**\n     * A recent transaction id. Must be populated by the caller\n     */\n    this.recentBlockhash = void 0;\n    /**\n     * the last block chain can advance to before tx is declared expired\n     * */\n    this.lastValidBlockHeight = void 0;\n    /**\n     * Optional Nonce information. If populated, transaction will use a durable\n     * Nonce hash instead of a recentBlockhash. Must be populated by the caller\n     */\n    this.nonceInfo = void 0;\n    /**\n     * If this is a nonce transaction this represents the minimum slot from which\n     * to evaluate if the nonce has advanced when attempting to confirm the\n     * transaction. This protects against a case where the transaction confirmation\n     * logic loads the nonce account from an old slot and assumes the mismatch in\n     * nonce value implies that the nonce has been advanced.\n     */\n    this.minNonceContextSlot = void 0;\n    /**\n     * @internal\n     */\n    this._message = void 0;\n    /**\n     * @internal\n     */\n    this._json = void 0;\n    if (!opts) {\n      return;\n    }\n    if (opts.feePayer) {\n      this.feePayer = opts.feePayer;\n    }\n    if (opts.signatures) {\n      this.signatures = opts.signatures;\n    }\n    if (Object.prototype.hasOwnProperty.call(opts, 'nonceInfo')) {\n      const {\n        minContextSlot,\n        nonceInfo\n      } = opts;\n      this.minNonceContextSlot = minContextSlot;\n      this.nonceInfo = nonceInfo;\n    } else if (Object.prototype.hasOwnProperty.call(opts, 'lastValidBlockHeight')) {\n      const {\n        blockhash,\n        lastValidBlockHeight\n      } = opts;\n      this.recentBlockhash = blockhash;\n      this.lastValidBlockHeight = lastValidBlockHeight;\n    } else {\n      const {\n        recentBlockhash,\n        nonceInfo\n      } = opts;\n      if (nonceInfo) {\n        this.nonceInfo = nonceInfo;\n      }\n      this.recentBlockhash = recentBlockhash;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  toJSON() {\n    return {\n      recentBlockhash: this.recentBlockhash || null,\n      feePayer: this.feePayer ? this.feePayer.toJSON() : null,\n      nonceInfo: this.nonceInfo ? {\n        nonce: this.nonceInfo.nonce,\n        nonceInstruction: this.nonceInfo.nonceInstruction.toJSON()\n      } : null,\n      instructions: this.instructions.map(instruction => instruction.toJSON()),\n      signers: this.signatures.map(({\n        publicKey\n      }) => {\n        return publicKey.toJSON();\n      })\n    };\n  }\n\n  /**\n   * Add one or more instructions to this Transaction\n   *\n   * @param {Array< Transaction | TransactionInstruction | TransactionInstructionCtorFields >} items - Instructions to add to the Transaction\n   */\n  add(...items) {\n    if (items.length === 0) {\n      throw new Error('No instructions');\n    }\n    items.forEach(item => {\n      if ('instructions' in item) {\n        this.instructions = this.instructions.concat(item.instructions);\n      } else if ('data' in item && 'programId' in item && 'keys' in item) {\n        this.instructions.push(item);\n      } else {\n        this.instructions.push(new TransactionInstruction(item));\n      }\n    });\n    return this;\n  }\n\n  /**\n   * Compile transaction data\n   */\n  compileMessage() {\n    if (this._message && JSON.stringify(this.toJSON()) === JSON.stringify(this._json)) {\n      return this._message;\n    }\n    let recentBlockhash;\n    let instructions;\n    if (this.nonceInfo) {\n      recentBlockhash = this.nonceInfo.nonce;\n      if (this.instructions[0] != this.nonceInfo.nonceInstruction) {\n        instructions = [this.nonceInfo.nonceInstruction, ...this.instructions];\n      } else {\n        instructions = this.instructions;\n      }\n    } else {\n      recentBlockhash = this.recentBlockhash;\n      instructions = this.instructions;\n    }\n    if (!recentBlockhash) {\n      throw new Error('Transaction recentBlockhash required');\n    }\n    if (instructions.length < 1) {\n      console.warn('No instructions provided');\n    }\n    let feePayer;\n    if (this.feePayer) {\n      feePayer = this.feePayer;\n    } else if (this.signatures.length > 0 && this.signatures[0].publicKey) {\n      // Use implicit fee payer\n      feePayer = this.signatures[0].publicKey;\n    } else {\n      throw new Error('Transaction fee payer required');\n    }\n    for (let i = 0; i < instructions.length; i++) {\n      if (instructions[i].programId === undefined) {\n        throw new Error(`Transaction instruction index ${i} has undefined program id`);\n      }\n    }\n    const programIds = [];\n    const accountMetas = [];\n    instructions.forEach(instruction => {\n      instruction.keys.forEach(accountMeta => {\n        accountMetas.push({\n          ...accountMeta\n        });\n      });\n      const programId = instruction.programId.toString();\n      if (!programIds.includes(programId)) {\n        programIds.push(programId);\n      }\n    });\n\n    // Append programID account metas\n    programIds.forEach(programId => {\n      accountMetas.push({\n        pubkey: new PublicKey(programId),\n        isSigner: false,\n        isWritable: false\n      });\n    });\n\n    // Cull duplicate account metas\n    const uniqueMetas = [];\n    accountMetas.forEach(accountMeta => {\n      const pubkeyString = accountMeta.pubkey.toString();\n      const uniqueIndex = uniqueMetas.findIndex(x => {\n        return x.pubkey.toString() === pubkeyString;\n      });\n      if (uniqueIndex > -1) {\n        uniqueMetas[uniqueIndex].isWritable = uniqueMetas[uniqueIndex].isWritable || accountMeta.isWritable;\n        uniqueMetas[uniqueIndex].isSigner = uniqueMetas[uniqueIndex].isSigner || accountMeta.isSigner;\n      } else {\n        uniqueMetas.push(accountMeta);\n      }\n    });\n\n    // Sort. Prioritizing first by signer, then by writable\n    uniqueMetas.sort(function (x, y) {\n      if (x.isSigner !== y.isSigner) {\n        // Signers always come before non-signers\n        return x.isSigner ? -1 : 1;\n      }\n      if (x.isWritable !== y.isWritable) {\n        // Writable accounts always come before read-only accounts\n        return x.isWritable ? -1 : 1;\n      }\n      // Otherwise, sort by pubkey, stringwise.\n      const options = {\n        localeMatcher: 'best fit',\n        usage: 'sort',\n        sensitivity: 'variant',\n        ignorePunctuation: false,\n        numeric: false,\n        caseFirst: 'lower'\n      };\n      return x.pubkey.toBase58().localeCompare(y.pubkey.toBase58(), 'en', options);\n    });\n\n    // Move fee payer to the front\n    const feePayerIndex = uniqueMetas.findIndex(x => {\n      return x.pubkey.equals(feePayer);\n    });\n    if (feePayerIndex > -1) {\n      const [payerMeta] = uniqueMetas.splice(feePayerIndex, 1);\n      payerMeta.isSigner = true;\n      payerMeta.isWritable = true;\n      uniqueMetas.unshift(payerMeta);\n    } else {\n      uniqueMetas.unshift({\n        pubkey: feePayer,\n        isSigner: true,\n        isWritable: true\n      });\n    }\n\n    // Disallow unknown signers\n    for (const signature of this.signatures) {\n      const uniqueIndex = uniqueMetas.findIndex(x => {\n        return x.pubkey.equals(signature.publicKey);\n      });\n      if (uniqueIndex > -1) {\n        if (!uniqueMetas[uniqueIndex].isSigner) {\n          uniqueMetas[uniqueIndex].isSigner = true;\n          console.warn('Transaction references a signature that is unnecessary, ' + 'only the fee payer and instruction signer accounts should sign a transaction. ' + 'This behavior is deprecated and will throw an error in the next major version release.');\n        }\n      } else {\n        throw new Error(`unknown signer: ${signature.publicKey.toString()}`);\n      }\n    }\n    let numRequiredSignatures = 0;\n    let numReadonlySignedAccounts = 0;\n    let numReadonlyUnsignedAccounts = 0;\n\n    // Split out signing from non-signing keys and count header values\n    const signedKeys = [];\n    const unsignedKeys = [];\n    uniqueMetas.forEach(({\n      pubkey,\n      isSigner,\n      isWritable\n    }) => {\n      if (isSigner) {\n        signedKeys.push(pubkey.toString());\n        numRequiredSignatures += 1;\n        if (!isWritable) {\n          numReadonlySignedAccounts += 1;\n        }\n      } else {\n        unsignedKeys.push(pubkey.toString());\n        if (!isWritable) {\n          numReadonlyUnsignedAccounts += 1;\n        }\n      }\n    });\n    const accountKeys = signedKeys.concat(unsignedKeys);\n    const compiledInstructions = instructions.map(instruction => {\n      const {\n        data,\n        programId\n      } = instruction;\n      return {\n        programIdIndex: accountKeys.indexOf(programId.toString()),\n        accounts: instruction.keys.map(meta => accountKeys.indexOf(meta.pubkey.toString())),\n        data: bs58.encode(data)\n      };\n    });\n    compiledInstructions.forEach(instruction => {\n      assert(instruction.programIdIndex >= 0);\n      instruction.accounts.forEach(keyIndex => assert(keyIndex >= 0));\n    });\n    return new Message({\n      header: {\n        numRequiredSignatures,\n        numReadonlySignedAccounts,\n        numReadonlyUnsignedAccounts\n      },\n      accountKeys,\n      recentBlockhash,\n      instructions: compiledInstructions\n    });\n  }\n\n  /**\n   * @internal\n   */\n  _compile() {\n    const message = this.compileMessage();\n    const signedKeys = message.accountKeys.slice(0, message.header.numRequiredSignatures);\n    if (this.signatures.length === signedKeys.length) {\n      const valid = this.signatures.every((pair, index) => {\n        return signedKeys[index].equals(pair.publicKey);\n      });\n      if (valid) return message;\n    }\n    this.signatures = signedKeys.map(publicKey => ({\n      signature: null,\n      publicKey\n    }));\n    return message;\n  }\n\n  /**\n   * Get a buffer of the Transaction data that need to be covered by signatures\n   */\n  serializeMessage() {\n    return this._compile().serialize();\n  }\n\n  /**\n   * Get the estimated fee associated with a transaction\n   *\n   * @param {Connection} connection Connection to RPC Endpoint.\n   *\n   * @returns {Promise<number | null>} The estimated fee for the transaction\n   */\n  async getEstimatedFee(connection) {\n    return (await connection.getFeeForMessage(this.compileMessage())).value;\n  }\n\n  /**\n   * Specify the public keys which will be used to sign the Transaction.\n   * The first signer will be used as the transaction fee payer account.\n   *\n   * Signatures can be added with either `partialSign` or `addSignature`\n   *\n   * @deprecated Deprecated since v0.84.0. Only the fee payer needs to be\n   * specified and it can be set in the Transaction constructor or with the\n   * `feePayer` property.\n   */\n  setSigners(...signers) {\n    if (signers.length === 0) {\n      throw new Error('No signers');\n    }\n    const seen = new Set();\n    this.signatures = signers.filter(publicKey => {\n      const key = publicKey.toString();\n      if (seen.has(key)) {\n        return false;\n      } else {\n        seen.add(key);\n        return true;\n      }\n    }).map(publicKey => ({\n      signature: null,\n      publicKey\n    }));\n  }\n\n  /**\n   * Sign the Transaction with the specified signers. Multiple signatures may\n   * be applied to a Transaction. The first signature is considered \"primary\"\n   * and is used identify and confirm transactions.\n   *\n   * If the Transaction `feePayer` is not set, the first signer will be used\n   * as the transaction fee payer account.\n   *\n   * Transaction fields should not be modified after the first call to `sign`,\n   * as doing so may invalidate the signature and cause the Transaction to be\n   * rejected.\n   *\n   * The Transaction must be assigned a valid `recentBlockhash` before invoking this method\n   *\n   * @param {Array<Signer>} signers Array of signers that will sign the transaction\n   */\n  sign(...signers) {\n    if (signers.length === 0) {\n      throw new Error('No signers');\n    }\n\n    // Dedupe signers\n    const seen = new Set();\n    const uniqueSigners = [];\n    for (const signer of signers) {\n      const key = signer.publicKey.toString();\n      if (seen.has(key)) {\n        continue;\n      } else {\n        seen.add(key);\n        uniqueSigners.push(signer);\n      }\n    }\n    this.signatures = uniqueSigners.map(signer => ({\n      signature: null,\n      publicKey: signer.publicKey\n    }));\n    const message = this._compile();\n    this._partialSign(message, ...uniqueSigners);\n  }\n\n  /**\n   * Partially sign a transaction with the specified accounts. All accounts must\n   * correspond to either the fee payer or a signer account in the transaction\n   * instructions.\n   *\n   * All the caveats from the `sign` method apply to `partialSign`\n   *\n   * @param {Array<Signer>} signers Array of signers that will sign the transaction\n   */\n  partialSign(...signers) {\n    if (signers.length === 0) {\n      throw new Error('No signers');\n    }\n\n    // Dedupe signers\n    const seen = new Set();\n    const uniqueSigners = [];\n    for (const signer of signers) {\n      const key = signer.publicKey.toString();\n      if (seen.has(key)) {\n        continue;\n      } else {\n        seen.add(key);\n        uniqueSigners.push(signer);\n      }\n    }\n    const message = this._compile();\n    this._partialSign(message, ...uniqueSigners);\n  }\n\n  /**\n   * @internal\n   */\n  _partialSign(message, ...signers) {\n    const signData = message.serialize();\n    signers.forEach(signer => {\n      const signature = sign(signData, signer.secretKey);\n      this._addSignature(signer.publicKey, toBuffer(signature));\n    });\n  }\n\n  /**\n   * Add an externally created signature to a transaction. The public key\n   * must correspond to either the fee payer or a signer account in the transaction\n   * instructions.\n   *\n   * @param {PublicKey} pubkey Public key that will be added to the transaction.\n   * @param {Buffer} signature An externally created signature to add to the transaction.\n   */\n  addSignature(pubkey, signature) {\n    this._compile(); // Ensure signatures array is populated\n    this._addSignature(pubkey, signature);\n  }\n\n  /**\n   * @internal\n   */\n  _addSignature(pubkey, signature) {\n    assert(signature.length === 64);\n    const index = this.signatures.findIndex(sigpair => pubkey.equals(sigpair.publicKey));\n    if (index < 0) {\n      throw new Error(`unknown signer: ${pubkey.toString()}`);\n    }\n    this.signatures[index].signature = Buffer.from(signature);\n  }\n\n  /**\n   * Verify signatures of a Transaction\n   * Optional parameter specifies if we're expecting a fully signed Transaction or a partially signed one.\n   * If no boolean is provided, we expect a fully signed Transaction by default.\n   *\n   * @param {boolean} [requireAllSignatures=true] Require a fully signed Transaction\n   */\n  verifySignatures(requireAllSignatures = true) {\n    const signatureErrors = this._getMessageSignednessErrors(this.serializeMessage(), requireAllSignatures);\n    return !signatureErrors;\n  }\n\n  /**\n   * @internal\n   */\n  _getMessageSignednessErrors(message, requireAllSignatures) {\n    const errors = {};\n    for (const {\n      signature,\n      publicKey\n    } of this.signatures) {\n      if (signature === null) {\n        if (requireAllSignatures) {\n          (errors.missing ||= []).push(publicKey);\n        }\n      } else {\n        if (!verify(signature, message, publicKey.toBytes())) {\n          (errors.invalid ||= []).push(publicKey);\n        }\n      }\n    }\n    return errors.invalid || errors.missing ? errors : undefined;\n  }\n\n  /**\n   * Serialize the Transaction in the wire format.\n   *\n   * @param {Buffer} [config] Config of transaction.\n   *\n   * @returns {Buffer} Signature of transaction in wire format.\n   */\n  serialize(config) {\n    const {\n      requireAllSignatures,\n      verifySignatures\n    } = Object.assign({\n      requireAllSignatures: true,\n      verifySignatures: true\n    }, config);\n    const signData = this.serializeMessage();\n    if (verifySignatures) {\n      const sigErrors = this._getMessageSignednessErrors(signData, requireAllSignatures);\n      if (sigErrors) {\n        let errorMessage = 'Signature verification failed.';\n        if (sigErrors.invalid) {\n          errorMessage += `\\nInvalid signature for public key${sigErrors.invalid.length === 1 ? '' : '(s)'} [\\`${sigErrors.invalid.map(p => p.toBase58()).join('`, `')}\\`].`;\n        }\n        if (sigErrors.missing) {\n          errorMessage += `\\nMissing signature for public key${sigErrors.missing.length === 1 ? '' : '(s)'} [\\`${sigErrors.missing.map(p => p.toBase58()).join('`, `')}\\`].`;\n        }\n        throw new Error(errorMessage);\n      }\n    }\n    return this._serialize(signData);\n  }\n\n  /**\n   * @internal\n   */\n  _serialize(signData) {\n    const {\n      signatures\n    } = this;\n    const signatureCount = [];\n    encodeLength(signatureCount, signatures.length);\n    const transactionLength = signatureCount.length + signatures.length * 64 + signData.length;\n    const wireTransaction = Buffer.alloc(transactionLength);\n    assert(signatures.length < 256);\n    Buffer.from(signatureCount).copy(wireTransaction, 0);\n    signatures.forEach(({\n      signature\n    }, index) => {\n      if (signature !== null) {\n        assert(signature.length === 64, `signature has invalid length`);\n        Buffer.from(signature).copy(wireTransaction, signatureCount.length + index * 64);\n      }\n    });\n    signData.copy(wireTransaction, signatureCount.length + signatures.length * 64);\n    assert(wireTransaction.length <= PACKET_DATA_SIZE, `Transaction too large: ${wireTransaction.length} > ${PACKET_DATA_SIZE}`);\n    return wireTransaction;\n  }\n\n  /**\n   * Deprecated method\n   * @internal\n   */\n  get keys() {\n    assert(this.instructions.length === 1);\n    return this.instructions[0].keys.map(keyObj => keyObj.pubkey);\n  }\n\n  /**\n   * Deprecated method\n   * @internal\n   */\n  get programId() {\n    assert(this.instructions.length === 1);\n    return this.instructions[0].programId;\n  }\n\n  /**\n   * Deprecated method\n   * @internal\n   */\n  get data() {\n    assert(this.instructions.length === 1);\n    return this.instructions[0].data;\n  }\n\n  /**\n   * Parse a wire transaction into a Transaction object.\n   *\n   * @param {Buffer | Uint8Array | Array<number>} buffer Signature of wire Transaction\n   *\n   * @returns {Transaction} Transaction associated with the signature\n   */\n  static from(buffer) {\n    // Slice up wire data\n    let byteArray = [...buffer];\n    const signatureCount = decodeLength(byteArray);\n    let signatures = [];\n    for (let i = 0; i < signatureCount; i++) {\n      const signature = guardedSplice(byteArray, 0, SIGNATURE_LENGTH_IN_BYTES);\n      signatures.push(bs58.encode(Buffer.from(signature)));\n    }\n    return Transaction.populate(Message.from(byteArray), signatures);\n  }\n\n  /**\n   * Populate Transaction object from message and signatures\n   *\n   * @param {Message} message Message of transaction\n   * @param {Array<string>} signatures List of signatures to assign to the transaction\n   *\n   * @returns {Transaction} The populated Transaction\n   */\n  static populate(message, signatures = []) {\n    const transaction = new Transaction();\n    transaction.recentBlockhash = message.recentBlockhash;\n    if (message.header.numRequiredSignatures > 0) {\n      transaction.feePayer = message.accountKeys[0];\n    }\n    signatures.forEach((signature, index) => {\n      const sigPubkeyPair = {\n        signature: signature == bs58.encode(DEFAULT_SIGNATURE) ? null : bs58.decode(signature),\n        publicKey: message.accountKeys[index]\n      };\n      transaction.signatures.push(sigPubkeyPair);\n    });\n    message.instructions.forEach(instruction => {\n      const keys = instruction.accounts.map(account => {\n        const pubkey = message.accountKeys[account];\n        return {\n          pubkey,\n          isSigner: transaction.signatures.some(keyObj => keyObj.publicKey.toString() === pubkey.toString()) || message.isAccountSigner(account),\n          isWritable: message.isAccountWritable(account)\n        };\n      });\n      transaction.instructions.push(new TransactionInstruction({\n        keys,\n        programId: message.accountKeys[instruction.programIdIndex],\n        data: bs58.decode(instruction.data)\n      }));\n    });\n    transaction._message = message;\n    transaction._json = transaction.toJSON();\n    return transaction;\n  }\n}\n\nclass TransactionMessage {\n  constructor(args) {\n    this.payerKey = void 0;\n    this.instructions = void 0;\n    this.recentBlockhash = void 0;\n    this.payerKey = args.payerKey;\n    this.instructions = args.instructions;\n    this.recentBlockhash = args.recentBlockhash;\n  }\n  static decompile(message, args) {\n    const {\n      header,\n      compiledInstructions,\n      recentBlockhash\n    } = message;\n    const {\n      numRequiredSignatures,\n      numReadonlySignedAccounts,\n      numReadonlyUnsignedAccounts\n    } = header;\n    const numWritableSignedAccounts = numRequiredSignatures - numReadonlySignedAccounts;\n    assert(numWritableSignedAccounts > 0, 'Message header is invalid');\n    const numWritableUnsignedAccounts = message.staticAccountKeys.length - numRequiredSignatures - numReadonlyUnsignedAccounts;\n    assert(numWritableUnsignedAccounts >= 0, 'Message header is invalid');\n    const accountKeys = message.getAccountKeys(args);\n    const payerKey = accountKeys.get(0);\n    if (payerKey === undefined) {\n      throw new Error('Failed to decompile message because no account keys were found');\n    }\n    const instructions = [];\n    for (const compiledIx of compiledInstructions) {\n      const keys = [];\n      for (const keyIndex of compiledIx.accountKeyIndexes) {\n        const pubkey = accountKeys.get(keyIndex);\n        if (pubkey === undefined) {\n          throw new Error(`Failed to find key for account key index ${keyIndex}`);\n        }\n        const isSigner = keyIndex < numRequiredSignatures;\n        let isWritable;\n        if (isSigner) {\n          isWritable = keyIndex < numWritableSignedAccounts;\n        } else if (keyIndex < accountKeys.staticAccountKeys.length) {\n          isWritable = keyIndex - numRequiredSignatures < numWritableUnsignedAccounts;\n        } else {\n          isWritable = keyIndex - accountKeys.staticAccountKeys.length <\n          // accountKeysFromLookups cannot be undefined because we already found a pubkey for this index above\n          accountKeys.accountKeysFromLookups.writable.length;\n        }\n        keys.push({\n          pubkey,\n          isSigner: keyIndex < header.numRequiredSignatures,\n          isWritable\n        });\n      }\n      const programId = accountKeys.get(compiledIx.programIdIndex);\n      if (programId === undefined) {\n        throw new Error(`Failed to find program id for program id index ${compiledIx.programIdIndex}`);\n      }\n      instructions.push(new TransactionInstruction({\n        programId,\n        data: toBuffer(compiledIx.data),\n        keys\n      }));\n    }\n    return new TransactionMessage({\n      payerKey,\n      instructions,\n      recentBlockhash\n    });\n  }\n  compileToLegacyMessage() {\n    return Message.compile({\n      payerKey: this.payerKey,\n      recentBlockhash: this.recentBlockhash,\n      instructions: this.instructions\n    });\n  }\n  compileToV0Message(addressLookupTableAccounts) {\n    return MessageV0.compile({\n      payerKey: this.payerKey,\n      recentBlockhash: this.recentBlockhash,\n      instructions: this.instructions,\n      addressLookupTableAccounts\n    });\n  }\n}\n\n/**\n * Versioned transaction class\n */\nclass VersionedTransaction {\n  get version() {\n    return this.message.version;\n  }\n  constructor(message, signatures) {\n    this.signatures = void 0;\n    this.message = void 0;\n    if (signatures !== undefined) {\n      assert(signatures.length === message.header.numRequiredSignatures, 'Expected signatures length to be equal to the number of required signatures');\n      this.signatures = signatures;\n    } else {\n      const defaultSignatures = [];\n      for (let i = 0; i < message.header.numRequiredSignatures; i++) {\n        defaultSignatures.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES));\n      }\n      this.signatures = defaultSignatures;\n    }\n    this.message = message;\n  }\n  serialize() {\n    const serializedMessage = this.message.serialize();\n    const encodedSignaturesLength = Array();\n    encodeLength(encodedSignaturesLength, this.signatures.length);\n    const transactionLayout = BufferLayout.struct([BufferLayout.blob(encodedSignaturesLength.length, 'encodedSignaturesLength'), BufferLayout.seq(signature(), this.signatures.length, 'signatures'), BufferLayout.blob(serializedMessage.length, 'serializedMessage')]);\n    const serializedTransaction = new Uint8Array(2048);\n    const serializedTransactionLength = transactionLayout.encode({\n      encodedSignaturesLength: new Uint8Array(encodedSignaturesLength),\n      signatures: this.signatures,\n      serializedMessage\n    }, serializedTransaction);\n    return serializedTransaction.slice(0, serializedTransactionLength);\n  }\n  static deserialize(serializedTransaction) {\n    let byteArray = [...serializedTransaction];\n    const signatures = [];\n    const signaturesLength = decodeLength(byteArray);\n    for (let i = 0; i < signaturesLength; i++) {\n      signatures.push(new Uint8Array(guardedSplice(byteArray, 0, SIGNATURE_LENGTH_IN_BYTES)));\n    }\n    const message = VersionedMessage.deserialize(new Uint8Array(byteArray));\n    return new VersionedTransaction(message, signatures);\n  }\n  sign(signers) {\n    const messageData = this.message.serialize();\n    const signerPubkeys = this.message.staticAccountKeys.slice(0, this.message.header.numRequiredSignatures);\n    for (const signer of signers) {\n      const signerIndex = signerPubkeys.findIndex(pubkey => pubkey.equals(signer.publicKey));\n      assert(signerIndex >= 0, `Cannot sign with non signer key ${signer.publicKey.toBase58()}`);\n      this.signatures[signerIndex] = sign(messageData, signer.secretKey);\n    }\n  }\n  addSignature(publicKey, signature) {\n    assert(signature.byteLength === 64, 'Signature must be 64 bytes long');\n    const signerPubkeys = this.message.staticAccountKeys.slice(0, this.message.header.numRequiredSignatures);\n    const signerIndex = signerPubkeys.findIndex(pubkey => pubkey.equals(publicKey));\n    assert(signerIndex >= 0, `Can not add signature; \\`${publicKey.toBase58()}\\` is not required to sign this transaction`);\n    this.signatures[signerIndex] = signature;\n  }\n}\n\n// TODO: These constants should be removed in favor of reading them out of a\n// Syscall account\n\n/**\n * @internal\n */\nconst NUM_TICKS_PER_SECOND = 160;\n\n/**\n * @internal\n */\nconst DEFAULT_TICKS_PER_SLOT = 64;\n\n/**\n * @internal\n */\nconst NUM_SLOTS_PER_SECOND = NUM_TICKS_PER_SECOND / DEFAULT_TICKS_PER_SLOT;\n\n/**\n * @internal\n */\nconst MS_PER_SLOT = 1000 / NUM_SLOTS_PER_SECOND;\n\nconst SYSVAR_CLOCK_PUBKEY = new PublicKey('SysvarC1ock11111111111111111111111111111111');\nconst SYSVAR_EPOCH_SCHEDULE_PUBKEY = new PublicKey('SysvarEpochSchedu1e111111111111111111111111');\nconst SYSVAR_INSTRUCTIONS_PUBKEY = new PublicKey('Sysvar1nstructions1111111111111111111111111');\nconst SYSVAR_RECENT_BLOCKHASHES_PUBKEY = new PublicKey('SysvarRecentB1ockHashes11111111111111111111');\nconst SYSVAR_RENT_PUBKEY = new PublicKey('SysvarRent111111111111111111111111111111111');\nconst SYSVAR_REWARDS_PUBKEY = new PublicKey('SysvarRewards111111111111111111111111111111');\nconst SYSVAR_SLOT_HASHES_PUBKEY = new PublicKey('SysvarS1otHashes111111111111111111111111111');\nconst SYSVAR_SLOT_HISTORY_PUBKEY = new PublicKey('SysvarS1otHistory11111111111111111111111111');\nconst SYSVAR_STAKE_HISTORY_PUBKEY = new PublicKey('SysvarStakeHistory1111111111111111111111111');\n\nclass SendTransactionError extends Error {\n  constructor({\n    action,\n    signature,\n    transactionMessage,\n    logs\n  }) {\n    const maybeLogsOutput = logs ? `Logs: \\n${JSON.stringify(logs.slice(-10), null, 2)}. ` : '';\n    const guideText = '\\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.';\n    let message;\n    switch (action) {\n      case 'send':\n        message = `Transaction ${signature} resulted in an error. \\n` + `${transactionMessage}. ` + maybeLogsOutput + guideText;\n        break;\n      case 'simulate':\n        message = `Simulation failed. \\nMessage: ${transactionMessage}. \\n` + maybeLogsOutput + guideText;\n        break;\n      default:\n        {\n          message = `Unknown action '${(a => a)(action)}'`;\n        }\n    }\n    super(message);\n    this.signature = void 0;\n    this.transactionMessage = void 0;\n    this.transactionLogs = void 0;\n    this.signature = signature;\n    this.transactionMessage = transactionMessage;\n    this.transactionLogs = logs ? logs : undefined;\n  }\n  get transactionError() {\n    return {\n      message: this.transactionMessage,\n      logs: Array.isArray(this.transactionLogs) ? this.transactionLogs : undefined\n    };\n  }\n\n  /* @deprecated Use `await getLogs()` instead */\n  get logs() {\n    const cachedLogs = this.transactionLogs;\n    if (cachedLogs != null && typeof cachedLogs === 'object' && 'then' in cachedLogs) {\n      return undefined;\n    }\n    return cachedLogs;\n  }\n  async getLogs(connection) {\n    if (!Array.isArray(this.transactionLogs)) {\n      this.transactionLogs = new Promise((resolve, reject) => {\n        connection.getTransaction(this.signature).then(tx => {\n          if (tx && tx.meta && tx.meta.logMessages) {\n            const logs = tx.meta.logMessages;\n            this.transactionLogs = logs;\n            resolve(logs);\n          } else {\n            reject(new Error('Log messages not found'));\n          }\n        }).catch(reject);\n      });\n    }\n    return await this.transactionLogs;\n  }\n}\n\n// Keep in sync with client/src/rpc_custom_errors.rs\n// Typescript `enums` thwart tree-shaking. See https://bargsten.org/jsts/enums/\nconst SolanaJSONRPCErrorCode = {\n  JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP: -32001,\n  JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE: -32002,\n  JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE: -32003,\n  JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE: -32004,\n  JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY: -32005,\n  JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE: -32006,\n  JSON_RPC_SERVER_ERROR_SLOT_SKIPPED: -32007,\n  JSON_RPC_SERVER_ERROR_NO_SNAPSHOT: -32008,\n  JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED: -32009,\n  JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX: -32010,\n  JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE: -32011,\n  JSON_RPC_SCAN_ERROR: -32012,\n  JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH: -32013,\n  JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET: -32014,\n  JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION: -32015,\n  JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED: -32016\n};\nclass SolanaJSONRPCError extends Error {\n  constructor({\n    code,\n    message,\n    data\n  }, customMessage) {\n    super(customMessage != null ? `${customMessage}: ${message}` : message);\n    this.code = void 0;\n    this.data = void 0;\n    this.code = code;\n    this.data = data;\n    this.name = 'SolanaJSONRPCError';\n  }\n}\n\n/**\n * Sign, send and confirm a transaction.\n *\n * If `commitment` option is not specified, defaults to 'max' commitment.\n *\n * @param {Connection} connection\n * @param {Transaction} transaction\n * @param {Array<Signer>} signers\n * @param {ConfirmOptions} [options]\n * @returns {Promise<TransactionSignature>}\n */\nasync function sendAndConfirmTransaction(connection, transaction, signers, options) {\n  const sendOptions = options && {\n    skipPreflight: options.skipPreflight,\n    preflightCommitment: options.preflightCommitment || options.commitment,\n    maxRetries: options.maxRetries,\n    minContextSlot: options.minContextSlot\n  };\n  const signature = await connection.sendTransaction(transaction, signers, sendOptions);\n  let status;\n  if (transaction.recentBlockhash != null && transaction.lastValidBlockHeight != null) {\n    status = (await connection.confirmTransaction({\n      abortSignal: options?.abortSignal,\n      signature: signature,\n      blockhash: transaction.recentBlockhash,\n      lastValidBlockHeight: transaction.lastValidBlockHeight\n    }, options && options.commitment)).value;\n  } else if (transaction.minNonceContextSlot != null && transaction.nonceInfo != null) {\n    const {\n      nonceInstruction\n    } = transaction.nonceInfo;\n    const nonceAccountPubkey = nonceInstruction.keys[0].pubkey;\n    status = (await connection.confirmTransaction({\n      abortSignal: options?.abortSignal,\n      minContextSlot: transaction.minNonceContextSlot,\n      nonceAccountPubkey,\n      nonceValue: transaction.nonceInfo.nonce,\n      signature\n    }, options && options.commitment)).value;\n  } else {\n    if (options?.abortSignal != null) {\n      console.warn('sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was ' + 'supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` ' + 'or a combination of `nonceInfo` and `minNonceContextSlot` are abortable.');\n    }\n    status = (await connection.confirmTransaction(signature, options && options.commitment)).value;\n  }\n  if (status.err) {\n    if (signature != null) {\n      throw new SendTransactionError({\n        action: 'send',\n        signature: signature,\n        transactionMessage: `Status: (${JSON.stringify(status)})`\n      });\n    }\n    throw new Error(`Transaction ${signature} failed (${JSON.stringify(status)})`);\n  }\n  return signature;\n}\n\n// zzz\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * @internal\n */\n\n/**\n * Populate a buffer of instruction data using an InstructionType\n * @internal\n */\nfunction encodeData(type, fields) {\n  const allocLength = type.layout.span >= 0 ? type.layout.span : getAlloc(type, fields);\n  const data = Buffer.alloc(allocLength);\n  const layoutFields = Object.assign({\n    instruction: type.index\n  }, fields);\n  type.layout.encode(layoutFields, data);\n  return data;\n}\n\n/**\n * Decode instruction data buffer using an InstructionType\n * @internal\n */\nfunction decodeData$1(type, buffer) {\n  let data;\n  try {\n    data = type.layout.decode(buffer);\n  } catch (err) {\n    throw new Error('invalid instruction; ' + err);\n  }\n  if (data.instruction !== type.index) {\n    throw new Error(`invalid instruction; instruction index mismatch ${data.instruction} != ${type.index}`);\n  }\n  return data;\n}\n\n/**\n * https://github.com/solana-labs/solana/blob/90bedd7e067b5b8f3ddbb45da00a4e9cabb22c62/sdk/src/fee_calculator.rs#L7-L11\n *\n * @internal\n */\nconst FeeCalculatorLayout = BufferLayout.nu64('lamportsPerSignature');\n\n/**\n * Calculator for transaction fees.\n *\n * @deprecated Deprecated since Solana v1.8.0.\n */\n\n/**\n * See https://github.com/solana-labs/solana/blob/0ea2843ec9cdc517572b8e62c959f41b55cf4453/sdk/src/nonce_state.rs#L29-L32\n *\n * @internal\n */\nconst NonceAccountLayout = BufferLayout.struct([BufferLayout.u32('version'), BufferLayout.u32('state'), publicKey('authorizedPubkey'), publicKey('nonce'), BufferLayout.struct([FeeCalculatorLayout], 'feeCalculator')]);\nconst NONCE_ACCOUNT_LENGTH = NonceAccountLayout.span;\n\n/**\n * A durable nonce is a 32 byte value encoded as a base58 string.\n */\n\n/**\n * NonceAccount class\n */\nclass NonceAccount {\n  /**\n   * @internal\n   */\n  constructor(args) {\n    this.authorizedPubkey = void 0;\n    this.nonce = void 0;\n    this.feeCalculator = void 0;\n    this.authorizedPubkey = args.authorizedPubkey;\n    this.nonce = args.nonce;\n    this.feeCalculator = args.feeCalculator;\n  }\n\n  /**\n   * Deserialize NonceAccount from the account data.\n   *\n   * @param buffer account data\n   * @return NonceAccount\n   */\n  static fromAccountData(buffer) {\n    const nonceAccount = NonceAccountLayout.decode(toBuffer(buffer), 0);\n    return new NonceAccount({\n      authorizedPubkey: new PublicKey(nonceAccount.authorizedPubkey),\n      nonce: new PublicKey(nonceAccount.nonce).toString(),\n      feeCalculator: nonceAccount.feeCalculator\n    });\n  }\n}\n\nfunction u64(property) {\n  const layout = blob(8 /* bytes */, property);\n  const decode = layout.decode.bind(layout);\n  const encode = layout.encode.bind(layout);\n  const bigIntLayout = layout;\n  const codec = getU64Codec();\n  bigIntLayout.decode = (buffer, offset) => {\n    const src = decode(buffer, offset);\n    return codec.decode(src);\n  };\n  bigIntLayout.encode = (bigInt, buffer, offset) => {\n    const src = codec.encode(bigInt);\n    return encode(src, buffer, offset);\n  };\n  return bigIntLayout;\n}\n\n/**\n * Create account system transaction params\n */\n\n/**\n * Transfer system transaction params\n */\n\n/**\n * Assign system transaction params\n */\n\n/**\n * Create account with seed system transaction params\n */\n\n/**\n * Create nonce account system transaction params\n */\n\n/**\n * Create nonce account with seed system transaction params\n */\n\n/**\n * Initialize nonce account system instruction params\n */\n\n/**\n * Advance nonce account system instruction params\n */\n\n/**\n * Withdraw nonce account system transaction params\n */\n\n/**\n * Authorize nonce account system transaction params\n */\n\n/**\n * Allocate account system transaction params\n */\n\n/**\n * Allocate account with seed system transaction params\n */\n\n/**\n * Assign account with seed system transaction params\n */\n\n/**\n * Transfer with seed system transaction params\n */\n\n/** Decoded transfer system transaction instruction */\n\n/** Decoded transferWithSeed system transaction instruction */\n\n/**\n * System Instruction class\n */\nclass SystemInstruction {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Decode a system instruction and retrieve the instruction type.\n   */\n  static decodeInstructionType(instruction) {\n    this.checkProgramId(instruction.programId);\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const [ixType, layout] of Object.entries(SYSTEM_INSTRUCTION_LAYOUTS)) {\n      if (layout.index == typeIndex) {\n        type = ixType;\n        break;\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a SystemInstruction');\n    }\n    return type;\n  }\n\n  /**\n   * Decode a create account system instruction and retrieve the instruction params.\n   */\n  static decodeCreateAccount(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      lamports,\n      space,\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Create, instruction.data);\n    return {\n      fromPubkey: instruction.keys[0].pubkey,\n      newAccountPubkey: instruction.keys[1].pubkey,\n      lamports,\n      space,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode a transfer system instruction and retrieve the instruction params.\n   */\n  static decodeTransfer(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      lamports\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Transfer, instruction.data);\n    return {\n      fromPubkey: instruction.keys[0].pubkey,\n      toPubkey: instruction.keys[1].pubkey,\n      lamports\n    };\n  }\n\n  /**\n   * Decode a transfer with seed system instruction and retrieve the instruction params.\n   */\n  static decodeTransferWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      lamports,\n      seed,\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed, instruction.data);\n    return {\n      fromPubkey: instruction.keys[0].pubkey,\n      basePubkey: instruction.keys[1].pubkey,\n      toPubkey: instruction.keys[2].pubkey,\n      lamports,\n      seed,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode an allocate system instruction and retrieve the instruction params.\n   */\n  static decodeAllocate(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 1);\n    const {\n      space\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Allocate, instruction.data);\n    return {\n      accountPubkey: instruction.keys[0].pubkey,\n      space\n    };\n  }\n\n  /**\n   * Decode an allocate with seed system instruction and retrieve the instruction params.\n   */\n  static decodeAllocateWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 1);\n    const {\n      base,\n      seed,\n      space,\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed, instruction.data);\n    return {\n      accountPubkey: instruction.keys[0].pubkey,\n      basePubkey: new PublicKey(base),\n      seed,\n      space,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode an assign system instruction and retrieve the instruction params.\n   */\n  static decodeAssign(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 1);\n    const {\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Assign, instruction.data);\n    return {\n      accountPubkey: instruction.keys[0].pubkey,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode an assign with seed system instruction and retrieve the instruction params.\n   */\n  static decodeAssignWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 1);\n    const {\n      base,\n      seed,\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed, instruction.data);\n    return {\n      accountPubkey: instruction.keys[0].pubkey,\n      basePubkey: new PublicKey(base),\n      seed,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode a create account with seed system instruction and retrieve the instruction params.\n   */\n  static decodeCreateWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      base,\n      seed,\n      lamports,\n      space,\n      programId\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed, instruction.data);\n    return {\n      fromPubkey: instruction.keys[0].pubkey,\n      newAccountPubkey: instruction.keys[1].pubkey,\n      basePubkey: new PublicKey(base),\n      seed,\n      lamports,\n      space,\n      programId: new PublicKey(programId)\n    };\n  }\n\n  /**\n   * Decode a nonce initialize system instruction and retrieve the instruction params.\n   */\n  static decodeNonceInitialize(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      authorized\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount, instruction.data);\n    return {\n      noncePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: new PublicKey(authorized)\n    };\n  }\n\n  /**\n   * Decode a nonce advance system instruction and retrieve the instruction params.\n   */\n  static decodeNonceAdvance(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount, instruction.data);\n    return {\n      noncePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: instruction.keys[2].pubkey\n    };\n  }\n\n  /**\n   * Decode a nonce withdraw system instruction and retrieve the instruction params.\n   */\n  static decodeNonceWithdraw(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 5);\n    const {\n      lamports\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount, instruction.data);\n    return {\n      noncePubkey: instruction.keys[0].pubkey,\n      toPubkey: instruction.keys[1].pubkey,\n      authorizedPubkey: instruction.keys[4].pubkey,\n      lamports\n    };\n  }\n\n  /**\n   * Decode a nonce authorize system instruction and retrieve the instruction params.\n   */\n  static decodeNonceAuthorize(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      authorized\n    } = decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount, instruction.data);\n    return {\n      noncePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: instruction.keys[1].pubkey,\n      newAuthorizedPubkey: new PublicKey(authorized)\n    };\n  }\n\n  /**\n   * @internal\n   */\n  static checkProgramId(programId) {\n    if (!programId.equals(SystemProgram.programId)) {\n      throw new Error('invalid instruction; programId is not SystemProgram');\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static checkKeyLength(keys, expectedLength) {\n    if (keys.length < expectedLength) {\n      throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`);\n    }\n  }\n}\n\n/**\n * An enumeration of valid SystemInstructionType's\n */\n\n/**\n * An enumeration of valid system InstructionType's\n * @internal\n */\nconst SYSTEM_INSTRUCTION_LAYOUTS = Object.freeze({\n  Create: {\n    index: 0,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('lamports'), BufferLayout.ns64('space'), publicKey('programId')])\n  },\n  Assign: {\n    index: 1,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('programId')])\n  },\n  Transfer: {\n    index: 2,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), u64('lamports')])\n  },\n  CreateWithSeed: {\n    index: 3,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('base'), rustString('seed'), BufferLayout.ns64('lamports'), BufferLayout.ns64('space'), publicKey('programId')])\n  },\n  AdvanceNonceAccount: {\n    index: 4,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  WithdrawNonceAccount: {\n    index: 5,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('lamports')])\n  },\n  InitializeNonceAccount: {\n    index: 6,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('authorized')])\n  },\n  AuthorizeNonceAccount: {\n    index: 7,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('authorized')])\n  },\n  Allocate: {\n    index: 8,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('space')])\n  },\n  AllocateWithSeed: {\n    index: 9,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('base'), rustString('seed'), BufferLayout.ns64('space'), publicKey('programId')])\n  },\n  AssignWithSeed: {\n    index: 10,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('base'), rustString('seed'), publicKey('programId')])\n  },\n  TransferWithSeed: {\n    index: 11,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), u64('lamports'), rustString('seed'), publicKey('programId')])\n  },\n  UpgradeNonceAccount: {\n    index: 12,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  }\n});\n\n/**\n * Factory class for transactions to interact with the System program\n */\nclass SystemProgram {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the System program\n   */\n\n  /**\n   * Generate a transaction instruction that creates a new account\n   */\n  static createAccount(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.Create;\n    const data = encodeData(type, {\n      lamports: params.lamports,\n      space: params.space,\n      programId: toBuffer(params.programId.toBuffer())\n    });\n    return new TransactionInstruction({\n      keys: [{\n        pubkey: params.fromPubkey,\n        isSigner: true,\n        isWritable: true\n      }, {\n        pubkey: params.newAccountPubkey,\n        isSigner: true,\n        isWritable: true\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction instruction that transfers lamports from one account to another\n   */\n  static transfer(params) {\n    let data;\n    let keys;\n    if ('basePubkey' in params) {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;\n      data = encodeData(type, {\n        lamports: BigInt(params.lamports),\n        seed: params.seed,\n        programId: toBuffer(params.programId.toBuffer())\n      });\n      keys = [{\n        pubkey: params.fromPubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: params.basePubkey,\n        isSigner: true,\n        isWritable: false\n      }, {\n        pubkey: params.toPubkey,\n        isSigner: false,\n        isWritable: true\n      }];\n    } else {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.Transfer;\n      data = encodeData(type, {\n        lamports: BigInt(params.lamports)\n      });\n      keys = [{\n        pubkey: params.fromPubkey,\n        isSigner: true,\n        isWritable: true\n      }, {\n        pubkey: params.toPubkey,\n        isSigner: false,\n        isWritable: true\n      }];\n    }\n    return new TransactionInstruction({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction instruction that assigns an account to a program\n   */\n  static assign(params) {\n    let data;\n    let keys;\n    if ('basePubkey' in params) {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;\n      data = encodeData(type, {\n        base: toBuffer(params.basePubkey.toBuffer()),\n        seed: params.seed,\n        programId: toBuffer(params.programId.toBuffer())\n      });\n      keys = [{\n        pubkey: params.accountPubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: params.basePubkey,\n        isSigner: true,\n        isWritable: false\n      }];\n    } else {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.Assign;\n      data = encodeData(type, {\n        programId: toBuffer(params.programId.toBuffer())\n      });\n      keys = [{\n        pubkey: params.accountPubkey,\n        isSigner: true,\n        isWritable: true\n      }];\n    }\n    return new TransactionInstruction({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction instruction that creates a new account at\n   *   an address generated with `from`, a seed, and programId\n   */\n  static createAccountWithSeed(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed;\n    const data = encodeData(type, {\n      base: toBuffer(params.basePubkey.toBuffer()),\n      seed: params.seed,\n      lamports: params.lamports,\n      space: params.space,\n      programId: toBuffer(params.programId.toBuffer())\n    });\n    let keys = [{\n      pubkey: params.fromPubkey,\n      isSigner: true,\n      isWritable: true\n    }, {\n      pubkey: params.newAccountPubkey,\n      isSigner: false,\n      isWritable: true\n    }];\n    if (!params.basePubkey.equals(params.fromPubkey)) {\n      keys.push({\n        pubkey: params.basePubkey,\n        isSigner: true,\n        isWritable: false\n      });\n    }\n    return new TransactionInstruction({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction that creates a new Nonce account\n   */\n  static createNonceAccount(params) {\n    const transaction = new Transaction();\n    if ('basePubkey' in params && 'seed' in params) {\n      transaction.add(SystemProgram.createAccountWithSeed({\n        fromPubkey: params.fromPubkey,\n        newAccountPubkey: params.noncePubkey,\n        basePubkey: params.basePubkey,\n        seed: params.seed,\n        lamports: params.lamports,\n        space: NONCE_ACCOUNT_LENGTH,\n        programId: this.programId\n      }));\n    } else {\n      transaction.add(SystemProgram.createAccount({\n        fromPubkey: params.fromPubkey,\n        newAccountPubkey: params.noncePubkey,\n        lamports: params.lamports,\n        space: NONCE_ACCOUNT_LENGTH,\n        programId: this.programId\n      }));\n    }\n    const initParams = {\n      noncePubkey: params.noncePubkey,\n      authorizedPubkey: params.authorizedPubkey\n    };\n    transaction.add(this.nonceInitialize(initParams));\n    return transaction;\n  }\n\n  /**\n   * Generate an instruction to initialize a Nonce account\n   */\n  static nonceInitialize(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount;\n    const data = encodeData(type, {\n      authorized: toBuffer(params.authorizedPubkey.toBuffer())\n    });\n    const instructionData = {\n      keys: [{\n        pubkey: params.noncePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_RENT_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate an instruction to advance the nonce in a Nonce account\n   */\n  static nonceAdvance(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount;\n    const data = encodeData(type);\n    const instructionData = {\n      keys: [{\n        pubkey: params.noncePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: params.authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate a transaction instruction that withdraws lamports from a Nonce account\n   */\n  static nonceWithdraw(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount;\n    const data = encodeData(type, {\n      lamports: params.lamports\n    });\n    return new TransactionInstruction({\n      keys: [{\n        pubkey: params.noncePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: params.toPubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_RECENT_BLOCKHASHES_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_RENT_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: params.authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction instruction that authorizes a new PublicKey as the authority\n   * on a Nonce account.\n   */\n  static nonceAuthorize(params) {\n    const type = SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount;\n    const data = encodeData(type, {\n      authorized: toBuffer(params.newAuthorizedPubkey.toBuffer())\n    });\n    return new TransactionInstruction({\n      keys: [{\n        pubkey: params.noncePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: params.authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction instruction that allocates space in an account without funding\n   */\n  static allocate(params) {\n    let data;\n    let keys;\n    if ('basePubkey' in params) {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;\n      data = encodeData(type, {\n        base: toBuffer(params.basePubkey.toBuffer()),\n        seed: params.seed,\n        space: params.space,\n        programId: toBuffer(params.programId.toBuffer())\n      });\n      keys = [{\n        pubkey: params.accountPubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: params.basePubkey,\n        isSigner: true,\n        isWritable: false\n      }];\n    } else {\n      const type = SYSTEM_INSTRUCTION_LAYOUTS.Allocate;\n      data = encodeData(type, {\n        space: params.space\n      });\n      keys = [{\n        pubkey: params.accountPubkey,\n        isSigner: true,\n        isWritable: true\n      }];\n    }\n    return new TransactionInstruction({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n}\nSystemProgram.programId = new PublicKey('11111111111111111111111111111111');\n\n// Keep program chunks under PACKET_DATA_SIZE, leaving enough room for the\n// rest of the Transaction fields\n//\n// TODO: replace 300 with a proper constant for the size of the other\n// Transaction fields\nconst CHUNK_SIZE = PACKET_DATA_SIZE - 300;\n\n/**\n * Program loader interface\n */\nclass Loader {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Amount of program data placed in each load Transaction\n   */\n\n  /**\n   * Minimum number of signatures required to load a program not including\n   * retries\n   *\n   * Can be used to calculate transaction fees\n   */\n  static getMinNumSignatures(dataLength) {\n    return 2 * (\n    // Every transaction requires two signatures (payer + program)\n    Math.ceil(dataLength / Loader.chunkSize) + 1 +\n    // Add one for Create transaction\n    1) // Add one for Finalize transaction\n    ;\n  }\n\n  /**\n   * Loads a generic program\n   *\n   * @param connection The connection to use\n   * @param payer System account that pays to load the program\n   * @param program Account to load the program into\n   * @param programId Public key that identifies the loader\n   * @param data Program octets\n   * @return true if program was loaded successfully, false if program was already loaded\n   */\n  static async load(connection, payer, program, programId, data) {\n    {\n      const balanceNeeded = await connection.getMinimumBalanceForRentExemption(data.length);\n\n      // Fetch program account info to check if it has already been created\n      const programInfo = await connection.getAccountInfo(program.publicKey, 'confirmed');\n      let transaction = null;\n      if (programInfo !== null) {\n        if (programInfo.executable) {\n          console.error('Program load failed, account is already executable');\n          return false;\n        }\n        if (programInfo.data.length !== data.length) {\n          transaction = transaction || new Transaction();\n          transaction.add(SystemProgram.allocate({\n            accountPubkey: program.publicKey,\n            space: data.length\n          }));\n        }\n        if (!programInfo.owner.equals(programId)) {\n          transaction = transaction || new Transaction();\n          transaction.add(SystemProgram.assign({\n            accountPubkey: program.publicKey,\n            programId\n          }));\n        }\n        if (programInfo.lamports < balanceNeeded) {\n          transaction = transaction || new Transaction();\n          transaction.add(SystemProgram.transfer({\n            fromPubkey: payer.publicKey,\n            toPubkey: program.publicKey,\n            lamports: balanceNeeded - programInfo.lamports\n          }));\n        }\n      } else {\n        transaction = new Transaction().add(SystemProgram.createAccount({\n          fromPubkey: payer.publicKey,\n          newAccountPubkey: program.publicKey,\n          lamports: balanceNeeded > 0 ? balanceNeeded : 1,\n          space: data.length,\n          programId\n        }));\n      }\n\n      // If the account is already created correctly, skip this step\n      // and proceed directly to loading instructions\n      if (transaction !== null) {\n        await sendAndConfirmTransaction(connection, transaction, [payer, program], {\n          commitment: 'confirmed'\n        });\n      }\n    }\n    const dataLayout = BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.u32('offset'), BufferLayout.u32('bytesLength'), BufferLayout.u32('bytesLengthPadding'), BufferLayout.seq(BufferLayout.u8('byte'), BufferLayout.offset(BufferLayout.u32(), -8), 'bytes')]);\n    const chunkSize = Loader.chunkSize;\n    let offset = 0;\n    let array = data;\n    let transactions = [];\n    while (array.length > 0) {\n      const bytes = array.slice(0, chunkSize);\n      const data = Buffer.alloc(chunkSize + 16);\n      dataLayout.encode({\n        instruction: 0,\n        // Load instruction\n        offset,\n        bytes: bytes,\n        bytesLength: 0,\n        bytesLengthPadding: 0\n      }, data);\n      const transaction = new Transaction().add({\n        keys: [{\n          pubkey: program.publicKey,\n          isSigner: true,\n          isWritable: true\n        }],\n        programId,\n        data\n      });\n      transactions.push(sendAndConfirmTransaction(connection, transaction, [payer, program], {\n        commitment: 'confirmed'\n      }));\n\n      // Delay between sends in an attempt to reduce rate limit errors\n      if (connection._rpcEndpoint.includes('solana.com')) {\n        const REQUESTS_PER_SECOND = 4;\n        await sleep(1000 / REQUESTS_PER_SECOND);\n      }\n      offset += chunkSize;\n      array = array.slice(chunkSize);\n    }\n    await Promise.all(transactions);\n\n    // Finalize the account loaded with program data for execution\n    {\n      const dataLayout = BufferLayout.struct([BufferLayout.u32('instruction')]);\n      const data = Buffer.alloc(dataLayout.span);\n      dataLayout.encode({\n        instruction: 1 // Finalize instruction\n      }, data);\n      const transaction = new Transaction().add({\n        keys: [{\n          pubkey: program.publicKey,\n          isSigner: true,\n          isWritable: true\n        }, {\n          pubkey: SYSVAR_RENT_PUBKEY,\n          isSigner: false,\n          isWritable: false\n        }],\n        programId,\n        data\n      });\n      const deployCommitment = 'processed';\n      const finalizeSignature = await connection.sendTransaction(transaction, [payer, program], {\n        preflightCommitment: deployCommitment\n      });\n      const {\n        context,\n        value\n      } = await connection.confirmTransaction({\n        signature: finalizeSignature,\n        lastValidBlockHeight: transaction.lastValidBlockHeight,\n        blockhash: transaction.recentBlockhash\n      }, deployCommitment);\n      if (value.err) {\n        throw new Error(`Transaction ${finalizeSignature} failed (${JSON.stringify(value)})`);\n      }\n      // We prevent programs from being usable until the slot after their deployment.\n      // See https://github.com/solana-labs/solana/pull/29654\n      while (true // eslint-disable-line no-constant-condition\n      ) {\n        try {\n          const currentSlot = await connection.getSlot({\n            commitment: deployCommitment\n          });\n          if (currentSlot > context.slot) {\n            break;\n          }\n        } catch {\n          /* empty */\n        }\n        await new Promise(resolve => setTimeout(resolve, Math.round(MS_PER_SLOT / 2)));\n      }\n    }\n\n    // success\n    return true;\n  }\n}\nLoader.chunkSize = CHUNK_SIZE;\n\n/**\n * @deprecated Deprecated since Solana v1.17.20.\n */\nconst BPF_LOADER_PROGRAM_ID = new PublicKey('BPFLoader2111111111111111111111111111111111');\n\n/**\n * Factory class for transactions to interact with a program loader\n *\n * @deprecated Deprecated since Solana v1.17.20.\n */\nclass BpfLoader {\n  /**\n   * Minimum number of signatures required to load a program not including\n   * retries\n   *\n   * Can be used to calculate transaction fees\n   */\n  static getMinNumSignatures(dataLength) {\n    return Loader.getMinNumSignatures(dataLength);\n  }\n\n  /**\n   * Load a SBF program\n   *\n   * @param connection The connection to use\n   * @param payer Account that will pay program loading fees\n   * @param program Account to load the program into\n   * @param elf The entire ELF containing the SBF program\n   * @param loaderProgramId The program id of the BPF loader to use\n   * @return true if program was loaded successfully, false if program was already loaded\n   */\n  static load(connection, payer, program, elf, loaderProgramId) {\n    return Loader.load(connection, payer, program, loaderProgramId, elf);\n  }\n}\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar fastStableStringify$1;\nvar hasRequiredFastStableStringify;\n\nfunction requireFastStableStringify () {\n\tif (hasRequiredFastStableStringify) return fastStableStringify$1;\n\thasRequiredFastStableStringify = 1;\n\tvar objToString = Object.prototype.toString;\n\tvar objKeys = Object.keys || function(obj) {\n\t\t\tvar keys = [];\n\t\t\tfor (var name in obj) {\n\t\t\t\tkeys.push(name);\n\t\t\t}\n\t\t\treturn keys;\n\t\t};\n\n\tfunction stringify(val, isArrayProp) {\n\t\tvar i, max, str, keys, key, propVal, toStr;\n\t\tif (val === true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\tif (val === false) {\n\t\t\treturn \"false\";\n\t\t}\n\t\tswitch (typeof val) {\n\t\t\tcase \"object\":\n\t\t\t\tif (val === null) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else if (val.toJSON && typeof val.toJSON === \"function\") {\n\t\t\t\t\treturn stringify(val.toJSON(), isArrayProp);\n\t\t\t\t} else {\n\t\t\t\t\ttoStr = objToString.call(val);\n\t\t\t\t\tif (toStr === \"[object Array]\") {\n\t\t\t\t\t\tstr = '[';\n\t\t\t\t\t\tmax = val.length - 1;\n\t\t\t\t\t\tfor(i = 0; i < max; i++) {\n\t\t\t\t\t\t\tstr += stringify(val[i], true) + ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (max > -1) {\n\t\t\t\t\t\t\tstr += stringify(val[i], true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str + ']';\n\t\t\t\t\t} else if (toStr === \"[object Object]\") {\n\t\t\t\t\t\t// only object is left\n\t\t\t\t\t\tkeys = objKeys(val).sort();\n\t\t\t\t\t\tmax = keys.length;\n\t\t\t\t\t\tstr = \"\";\n\t\t\t\t\t\ti = 0;\n\t\t\t\t\t\twhile (i < max) {\n\t\t\t\t\t\t\tkey = keys[i];\n\t\t\t\t\t\t\tpropVal = stringify(val[key], false);\n\t\t\t\t\t\t\tif (propVal !== undefined) {\n\t\t\t\t\t\t\t\tif (str) {\n\t\t\t\t\t\t\t\t\tstr += ',';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstr += JSON.stringify(key) + ':' + propVal;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '{' + str + '}';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn JSON.stringify(val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\tcase \"function\":\n\t\t\tcase \"undefined\":\n\t\t\t\treturn isArrayProp ? null : undefined;\n\t\t\tcase \"string\":\n\t\t\t\treturn JSON.stringify(val);\n\t\t\tdefault:\n\t\t\t\treturn isFinite(val) ? val : null;\n\t\t}\n\t}\n\n\tfastStableStringify$1 = function(val) {\n\t\tvar returnVal = stringify(val, false);\n\t\tif (returnVal !== undefined) {\n\t\t\treturn ''+ returnVal;\n\t\t}\n\t};\n\treturn fastStableStringify$1;\n}\n\nvar fastStableStringifyExports = /*@__PURE__*/ requireFastStableStringify();\nvar fastStableStringify = /*@__PURE__*/getDefaultExportFromCjs(fastStableStringifyExports);\n\nconst MINIMUM_SLOT_PER_EPOCH = 32;\n\n// Returns the number of trailing zeros in the binary representation of self.\nfunction trailingZeros(n) {\n  let trailingZeros = 0;\n  while (n > 1) {\n    n /= 2;\n    trailingZeros++;\n  }\n  return trailingZeros;\n}\n\n// Returns the smallest power of two greater than or equal to n\nfunction nextPowerOfTwo(n) {\n  if (n === 0) return 1;\n  n--;\n  n |= n >> 1;\n  n |= n >> 2;\n  n |= n >> 4;\n  n |= n >> 8;\n  n |= n >> 16;\n  n |= n >> 32;\n  return n + 1;\n}\n\n/**\n * Epoch schedule\n * (see https://docs.solana.com/terminology#epoch)\n * Can be retrieved with the {@link Connection.getEpochSchedule} method\n */\nclass EpochSchedule {\n  constructor(slotsPerEpoch, leaderScheduleSlotOffset, warmup, firstNormalEpoch, firstNormalSlot) {\n    /** The maximum number of slots in each epoch */\n    this.slotsPerEpoch = void 0;\n    /** The number of slots before beginning of an epoch to calculate a leader schedule for that epoch */\n    this.leaderScheduleSlotOffset = void 0;\n    /** Indicates whether epochs start short and grow */\n    this.warmup = void 0;\n    /** The first epoch with `slotsPerEpoch` slots */\n    this.firstNormalEpoch = void 0;\n    /** The first slot of `firstNormalEpoch` */\n    this.firstNormalSlot = void 0;\n    this.slotsPerEpoch = slotsPerEpoch;\n    this.leaderScheduleSlotOffset = leaderScheduleSlotOffset;\n    this.warmup = warmup;\n    this.firstNormalEpoch = firstNormalEpoch;\n    this.firstNormalSlot = firstNormalSlot;\n  }\n  getEpoch(slot) {\n    return this.getEpochAndSlotIndex(slot)[0];\n  }\n  getEpochAndSlotIndex(slot) {\n    if (slot < this.firstNormalSlot) {\n      const epoch = trailingZeros(nextPowerOfTwo(slot + MINIMUM_SLOT_PER_EPOCH + 1)) - trailingZeros(MINIMUM_SLOT_PER_EPOCH) - 1;\n      const epochLen = this.getSlotsInEpoch(epoch);\n      const slotIndex = slot - (epochLen - MINIMUM_SLOT_PER_EPOCH);\n      return [epoch, slotIndex];\n    } else {\n      const normalSlotIndex = slot - this.firstNormalSlot;\n      const normalEpochIndex = Math.floor(normalSlotIndex / this.slotsPerEpoch);\n      const epoch = this.firstNormalEpoch + normalEpochIndex;\n      const slotIndex = normalSlotIndex % this.slotsPerEpoch;\n      return [epoch, slotIndex];\n    }\n  }\n  getFirstSlotInEpoch(epoch) {\n    if (epoch <= this.firstNormalEpoch) {\n      return (Math.pow(2, epoch) - 1) * MINIMUM_SLOT_PER_EPOCH;\n    } else {\n      return (epoch - this.firstNormalEpoch) * this.slotsPerEpoch + this.firstNormalSlot;\n    }\n  }\n  getLastSlotInEpoch(epoch) {\n    return this.getFirstSlotInEpoch(epoch) + this.getSlotsInEpoch(epoch) - 1;\n  }\n  getSlotsInEpoch(epoch) {\n    if (epoch < this.firstNormalEpoch) {\n      return Math.pow(2, epoch + trailingZeros(MINIMUM_SLOT_PER_EPOCH));\n    } else {\n      return this.slotsPerEpoch;\n    }\n  }\n}\n\nvar fetchImpl = globalThis.fetch;\n\nclass RpcWebSocketClient extends CommonClient {\n  constructor(address, options, generate_request_id) {\n    const webSocketFactory = url => {\n      const rpc = WebSocket(url, {\n        autoconnect: true,\n        max_reconnects: 5,\n        reconnect: true,\n        reconnect_interval: 1000,\n        ...options\n      });\n      if ('socket' in rpc) {\n        this.underlyingSocket = rpc.socket;\n      } else {\n        this.underlyingSocket = rpc;\n      }\n      return rpc;\n    };\n    super(webSocketFactory, address, options, generate_request_id);\n    this.underlyingSocket = void 0;\n  }\n  call(...args) {\n    const readyState = this.underlyingSocket?.readyState;\n    if (readyState === 1 /* WebSocket.OPEN */) {\n      return super.call(...args);\n    }\n    return Promise.reject(new Error('Tried to call a JSON-RPC method `' + args[0] + '` but the socket was not `CONNECTING` or `OPEN` (`readyState` was ' + readyState + ')'));\n  }\n  notify(...args) {\n    const readyState = this.underlyingSocket?.readyState;\n    if (readyState === 1 /* WebSocket.OPEN */) {\n      return super.notify(...args);\n    }\n    return Promise.reject(new Error('Tried to send a JSON-RPC notification `' + args[0] + '` but the socket was not `CONNECTING` or `OPEN` (`readyState` was ' + readyState + ')'));\n  }\n}\n\n/**\n * @internal\n */\n\n/**\n * Decode account data buffer using an AccountType\n * @internal\n */\nfunction decodeData(type, data) {\n  let decoded;\n  try {\n    decoded = type.layout.decode(data);\n  } catch (err) {\n    throw new Error('invalid instruction; ' + err);\n  }\n  if (decoded.typeIndex !== type.index) {\n    throw new Error(`invalid account data; account type mismatch ${decoded.typeIndex} != ${type.index}`);\n  }\n  return decoded;\n}\n\n/// The serialized size of lookup table metadata\nconst LOOKUP_TABLE_META_SIZE = 56;\nclass AddressLookupTableAccount {\n  constructor(args) {\n    this.key = void 0;\n    this.state = void 0;\n    this.key = args.key;\n    this.state = args.state;\n  }\n  isActive() {\n    const U64_MAX = BigInt('0xffffffffffffffff');\n    return this.state.deactivationSlot === U64_MAX;\n  }\n  static deserialize(accountData) {\n    const meta = decodeData(LookupTableMetaLayout, accountData);\n    const serializedAddressesLen = accountData.length - LOOKUP_TABLE_META_SIZE;\n    assert(serializedAddressesLen >= 0, 'lookup table is invalid');\n    assert(serializedAddressesLen % 32 === 0, 'lookup table is invalid');\n    const numSerializedAddresses = serializedAddressesLen / 32;\n    const {\n      addresses\n    } = BufferLayout.struct([BufferLayout.seq(publicKey(), numSerializedAddresses, 'addresses')]).decode(accountData.slice(LOOKUP_TABLE_META_SIZE));\n    return {\n      deactivationSlot: meta.deactivationSlot,\n      lastExtendedSlot: meta.lastExtendedSlot,\n      lastExtendedSlotStartIndex: meta.lastExtendedStartIndex,\n      authority: meta.authority.length !== 0 ? new PublicKey(meta.authority[0]) : undefined,\n      addresses: addresses.map(address => new PublicKey(address))\n    };\n  }\n}\nconst LookupTableMetaLayout = {\n  index: 1,\n  layout: BufferLayout.struct([BufferLayout.u32('typeIndex'), u64('deactivationSlot'), BufferLayout.nu64('lastExtendedSlot'), BufferLayout.u8('lastExtendedStartIndex'), BufferLayout.u8(),\n  // option\n  BufferLayout.seq(publicKey(), BufferLayout.offset(BufferLayout.u8(), -1), 'authority')])\n};\n\nconst URL_RE = /^[^:]+:\\/\\/([^:[]+|\\[[^\\]]+\\])(:\\d+)?(.*)/i;\nfunction makeWebsocketUrl(endpoint) {\n  const matches = endpoint.match(URL_RE);\n  if (matches == null) {\n    throw TypeError(`Failed to validate endpoint URL \\`${endpoint}\\``);\n  }\n  const [_,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  hostish, portWithColon, rest] = matches;\n  const protocol = endpoint.startsWith('https:') ? 'wss:' : 'ws:';\n  const startPort = portWithColon == null ? null : parseInt(portWithColon.slice(1), 10);\n  const websocketPort =\n  // Only shift the port by +1 as a convention for ws(s) only if given endpoint\n  // is explicitly specifying the endpoint port (HTTP-based RPC), assuming\n  // we're directly trying to connect to agave-validator's ws listening port.\n  // When the endpoint omits the port, we're connecting to the protocol\n  // default ports: http(80) or https(443) and it's assumed we're behind a reverse\n  // proxy which manages WebSocket upgrade and backend port redirection.\n  startPort == null ? '' : `:${startPort + 1}`;\n  return `${protocol}//${hostish}${websocketPort}${rest}`;\n}\n\nconst PublicKeyFromString = coerce(instance(PublicKey), string(), value => new PublicKey(value));\nconst RawAccountDataResult = tuple([string(), literal('base64')]);\nconst BufferFromRawAccountData = coerce(instance(Buffer), RawAccountDataResult, value => Buffer.from(value[0], 'base64'));\n\n/**\n * Attempt to use a recent blockhash for up to 30 seconds\n * @internal\n */\nconst BLOCKHASH_CACHE_TIMEOUT_MS = 30 * 1000;\n\n/**\n * HACK.\n * Copied from rpc-websockets/dist/lib/client.\n * Otherwise, `yarn build` fails with:\n * https://gist.github.com/steveluscher/c057eca81d479ef705cdb53162f9971d\n */\n\n/** @internal */\n/** @internal */\n/** @internal */\n/** @internal */\n\n/** @internal */\n/**\n * @internal\n * Every subscription contains the args used to open the subscription with\n * the server, and a list of callers interested in notifications.\n */\n\n/**\n * @internal\n * A subscription may be in various states of connectedness. Only when it is\n * fully connected will it have a server subscription id associated with it.\n * This id can be returned to the server to unsubscribe the client entirely.\n */\n\n/**\n * A type that encapsulates a subscription's RPC method\n * names and notification (callback) signature.\n */\n\n/**\n * @internal\n * Utility type that keeps tagged unions intact while omitting properties.\n */\n\n/**\n * @internal\n * This type represents a single subscribable 'topic.' It's made up of:\n *\n * - The args used to open the subscription with the server,\n * - The state of the subscription, in terms of its connectedness, and\n * - The set of callbacks to call when the server publishes notifications\n *\n * This record gets indexed by `SubscriptionConfigHash` and is used to\n * set up subscriptions, fan out notifications, and track subscription state.\n */\n\n/**\n * @internal\n */\n\n/**\n * Extra contextual information for RPC responses\n */\n\n/**\n * Options for sending transactions\n */\n\n/**\n * Options for confirming transactions\n */\n\n/**\n * Options for getConfirmedSignaturesForAddress2\n */\n\n/**\n * Options for getSignaturesForAddress\n */\n\n/**\n * RPC Response with extra contextual information\n */\n\n/**\n * A strategy for confirming transactions that uses the last valid\n * block height for a given blockhash to check for transaction expiration.\n */\n\n/**\n * A strategy for confirming durable nonce transactions.\n */\n\n/**\n * Properties shared by all transaction confirmation strategies\n */\n\n/**\n * This type represents all transaction confirmation strategies\n */\n\n/* @internal */\nfunction assertEndpointUrl(putativeUrl) {\n  if (/^https?:/.test(putativeUrl) === false) {\n    throw new TypeError('Endpoint URL must start with `http:` or `https:`.');\n  }\n  return putativeUrl;\n}\n\n/** @internal */\nfunction extractCommitmentFromConfig(commitmentOrConfig) {\n  let commitment;\n  let config;\n  if (typeof commitmentOrConfig === 'string') {\n    commitment = commitmentOrConfig;\n  } else if (commitmentOrConfig) {\n    const {\n      commitment: specifiedCommitment,\n      ...specifiedConfig\n    } = commitmentOrConfig;\n    commitment = specifiedCommitment;\n    config = specifiedConfig;\n  }\n  return {\n    commitment,\n    config\n  };\n}\n\n/**\n * @internal\n */\nfunction applyDefaultMemcmpEncodingToFilters(filters) {\n  return filters.map(filter => 'memcmp' in filter ? {\n    ...filter,\n    memcmp: {\n      ...filter.memcmp,\n      encoding: filter.memcmp.encoding ?? 'base58'\n    }\n  } : filter);\n}\n\n/**\n * @internal\n */\nfunction createRpcResult(result) {\n  return union([type({\n    jsonrpc: literal('2.0'),\n    id: string(),\n    result\n  }), type({\n    jsonrpc: literal('2.0'),\n    id: string(),\n    error: type({\n      code: unknown(),\n      message: string(),\n      data: optional(any())\n    })\n  })]);\n}\nconst UnknownRpcResult = createRpcResult(unknown());\n\n/**\n * @internal\n */\nfunction jsonRpcResult(schema) {\n  return coerce(createRpcResult(schema), UnknownRpcResult, value => {\n    if ('error' in value) {\n      return value;\n    } else {\n      return {\n        ...value,\n        result: create(value.result, schema)\n      };\n    }\n  });\n}\n\n/**\n * @internal\n */\nfunction jsonRpcResultAndContext(value) {\n  return jsonRpcResult(type({\n    context: type({\n      slot: number()\n    }),\n    value\n  }));\n}\n\n/**\n * @internal\n */\nfunction notificationResultAndContext(value) {\n  return type({\n    context: type({\n      slot: number()\n    }),\n    value\n  });\n}\n\n/**\n * @internal\n */\nfunction versionedMessageFromResponse(version, response) {\n  if (version === 0) {\n    return new MessageV0({\n      header: response.header,\n      staticAccountKeys: response.accountKeys.map(accountKey => new PublicKey(accountKey)),\n      recentBlockhash: response.recentBlockhash,\n      compiledInstructions: response.instructions.map(ix => ({\n        programIdIndex: ix.programIdIndex,\n        accountKeyIndexes: ix.accounts,\n        data: bs58.decode(ix.data)\n      })),\n      addressTableLookups: response.addressTableLookups\n    });\n  } else {\n    return new Message(response);\n  }\n}\n\n/**\n * The level of commitment desired when querying state\n * <pre>\n *   'processed': Query the most recent block which has reached 1 confirmation by the connected node\n *   'confirmed': Query the most recent block which has reached 1 confirmation by the cluster\n *   'finalized': Query the most recent block which has been finalized by the cluster\n * </pre>\n */\n\n// Deprecated as of v1.5.5\n\n/**\n * A subset of Commitment levels, which are at least optimistically confirmed\n * <pre>\n *   'confirmed': Query the most recent block which has reached 1 confirmation by the cluster\n *   'finalized': Query the most recent block which has been finalized by the cluster\n * </pre>\n */\n\n/**\n * Filter for largest accounts query\n * <pre>\n *   'circulating':    Return the largest accounts that are part of the circulating supply\n *   'nonCirculating': Return the largest accounts that are not part of the circulating supply\n * </pre>\n */\n\n/**\n * Configuration object for changing `getAccountInfo` query behavior\n */\n\n/**\n * Configuration object for changing `getBalance` query behavior\n */\n\n/**\n * Configuration object for changing `getBlock` query behavior\n */\n\n/**\n * Configuration object for changing `getBlock` query behavior\n */\n\n/**\n * Configuration object for changing `getStakeMinimumDelegation` query behavior\n */\n\n/**\n * Configuration object for changing `getBlockHeight` query behavior\n */\n\n/**\n * Configuration object for changing `getEpochInfo` query behavior\n */\n\n/**\n * Configuration object for changing `getInflationReward` query behavior\n */\n\n/**\n * Configuration object for changing `getLatestBlockhash` query behavior\n */\n\n/**\n * Configuration object for changing `isBlockhashValid` query behavior\n */\n\n/**\n * Configuration object for changing `getSlot` query behavior\n */\n\n/**\n * Configuration object for changing `getSlotLeader` query behavior\n */\n\n/**\n * Configuration object for changing `getTransaction` query behavior\n */\n\n/**\n * Configuration object for changing `getTransaction` query behavior\n */\n\n/**\n * Configuration object for changing `getLargestAccounts` query behavior\n */\n\n/**\n * Configuration object for changing `getSupply` request behavior\n */\n\n/**\n * Configuration object for changing query behavior\n */\n\n/**\n * Information describing a cluster node\n */\n\n/**\n * Information describing a vote account\n */\n\n/**\n * A collection of cluster vote accounts\n */\n\n/**\n * Network Inflation\n * (see https://docs.solana.com/implemented-proposals/ed_overview)\n */\n\nconst GetInflationGovernorResult = type({\n  foundation: number(),\n  foundationTerm: number(),\n  initial: number(),\n  taper: number(),\n  terminal: number()\n});\n\n/**\n * The inflation reward for an epoch\n */\n\n/**\n * Expected JSON RPC response for the \"getInflationReward\" message\n */\nconst GetInflationRewardResult = jsonRpcResult(array(nullable(type({\n  epoch: number(),\n  effectiveSlot: number(),\n  amount: number(),\n  postBalance: number(),\n  commission: optional(nullable(number()))\n}))));\n\n/**\n * Configuration object for changing `getRecentPrioritizationFees` query behavior\n */\n\n/**\n * Expected JSON RPC response for the \"getRecentPrioritizationFees\" message\n */\nconst GetRecentPrioritizationFeesResult = array(type({\n  slot: number(),\n  prioritizationFee: number()\n}));\n/**\n * Expected JSON RPC response for the \"getInflationRate\" message\n */\nconst GetInflationRateResult = type({\n  total: number(),\n  validator: number(),\n  foundation: number(),\n  epoch: number()\n});\n\n/**\n * Information about the current epoch\n */\n\nconst GetEpochInfoResult = type({\n  epoch: number(),\n  slotIndex: number(),\n  slotsInEpoch: number(),\n  absoluteSlot: number(),\n  blockHeight: optional(number()),\n  transactionCount: optional(number())\n});\nconst GetEpochScheduleResult = type({\n  slotsPerEpoch: number(),\n  leaderScheduleSlotOffset: number(),\n  warmup: boolean(),\n  firstNormalEpoch: number(),\n  firstNormalSlot: number()\n});\n\n/**\n * Leader schedule\n * (see https://docs.solana.com/terminology#leader-schedule)\n */\n\nconst GetLeaderScheduleResult = record(string(), array(number()));\n\n/**\n * Transaction error or null\n */\nconst TransactionErrorResult = nullable(union([type({}), string()]));\n\n/**\n * Signature status for a transaction\n */\nconst SignatureStatusResult = type({\n  err: TransactionErrorResult\n});\n\n/**\n * Transaction signature received notification\n */\nconst SignatureReceivedResult = literal('receivedSignature');\n\n/**\n * Version info for a node\n */\n\nconst VersionResult = type({\n  'solana-core': string(),\n  'feature-set': optional(number())\n});\nconst ParsedInstructionStruct = type({\n  program: string(),\n  programId: PublicKeyFromString,\n  parsed: unknown()\n});\nconst PartiallyDecodedInstructionStruct = type({\n  programId: PublicKeyFromString,\n  accounts: array(PublicKeyFromString),\n  data: string()\n});\nconst SimulatedTransactionResponseStruct = jsonRpcResultAndContext(type({\n  err: nullable(union([type({}), string()])),\n  logs: nullable(array(string())),\n  accounts: optional(nullable(array(nullable(type({\n    executable: boolean(),\n    owner: string(),\n    lamports: number(),\n    data: array(string()),\n    rentEpoch: optional(number())\n  }))))),\n  unitsConsumed: optional(number()),\n  returnData: optional(nullable(type({\n    programId: string(),\n    data: tuple([string(), literal('base64')])\n  }))),\n  innerInstructions: optional(nullable(array(type({\n    index: number(),\n    instructions: array(union([ParsedInstructionStruct, PartiallyDecodedInstructionStruct]))\n  }))))\n}));\n\n/**\n * Metadata for a parsed confirmed transaction on the ledger\n *\n * @deprecated Deprecated since RPC v1.8.0. Please use {@link ParsedTransactionMeta} instead.\n */\n\n/**\n * Collection of addresses loaded by a transaction using address table lookups\n */\n\n/**\n * Metadata for a parsed transaction on the ledger\n */\n\n/**\n * Metadata for a confirmed transaction on the ledger\n */\n\n/**\n * A processed transaction from the RPC API\n */\n\n/**\n * A processed transaction from the RPC API\n */\n\n/**\n * A processed transaction message from the RPC API\n */\n\n/**\n * A confirmed transaction on the ledger\n *\n * @deprecated Deprecated since RPC v1.8.0.\n */\n\n/**\n * A partially decoded transaction instruction\n */\n\n/**\n * A parsed transaction message account\n */\n\n/**\n * A parsed transaction instruction\n */\n\n/**\n * A parsed address table lookup\n */\n\n/**\n * A parsed transaction message\n */\n\n/**\n * A parsed transaction\n */\n\n/**\n * A parsed and confirmed transaction on the ledger\n *\n * @deprecated Deprecated since RPC v1.8.0. Please use {@link ParsedTransactionWithMeta} instead.\n */\n\n/**\n * A parsed transaction on the ledger with meta\n */\n\n/**\n * A processed block fetched from the RPC API\n */\n\n/**\n * A processed block fetched from the RPC API where the `transactionDetails` mode is `accounts`\n */\n\n/**\n * A processed block fetched from the RPC API where the `transactionDetails` mode is `none`\n */\n\n/**\n * A block with parsed transactions\n */\n\n/**\n * A block with parsed transactions where the `transactionDetails` mode is `accounts`\n */\n\n/**\n * A block with parsed transactions where the `transactionDetails` mode is `none`\n */\n\n/**\n * A processed block fetched from the RPC API\n */\n\n/**\n * A processed block fetched from the RPC API where the `transactionDetails` mode is `accounts`\n */\n\n/**\n * A processed block fetched from the RPC API where the `transactionDetails` mode is `none`\n */\n\n/**\n * A confirmed block on the ledger\n *\n * @deprecated Deprecated since RPC v1.8.0.\n */\n\n/**\n * A Block on the ledger with signatures only\n */\n\n/**\n * recent block production information\n */\n\n/**\n * Expected JSON RPC response for the \"getBlockProduction\" message\n */\nconst BlockProductionResponseStruct = jsonRpcResultAndContext(type({\n  byIdentity: record(string(), array(number())),\n  range: type({\n    firstSlot: number(),\n    lastSlot: number()\n  })\n}));\n\n/**\n * A performance sample\n */\n\nfunction createRpcClient(url, httpHeaders, customFetch, fetchMiddleware, disableRetryOnRateLimit, httpAgent) {\n  const fetch = customFetch ? customFetch : fetchImpl;\n  let agent;\n  {\n    if (httpAgent != null) {\n      console.warn('You have supplied an `httpAgent` when creating a `Connection` in a browser environment.' + 'It has been ignored; `httpAgent` is only used in Node environments.');\n    }\n  }\n  let fetchWithMiddleware;\n  if (fetchMiddleware) {\n    fetchWithMiddleware = async (info, init) => {\n      const modifiedFetchArgs = await new Promise((resolve, reject) => {\n        try {\n          fetchMiddleware(info, init, (modifiedInfo, modifiedInit) => resolve([modifiedInfo, modifiedInit]));\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return await fetch(...modifiedFetchArgs);\n    };\n  }\n  const clientBrowser = new RpcClient(async (request, callback) => {\n    const options = {\n      method: 'POST',\n      body: request,\n      agent,\n      headers: Object.assign({\n        'Content-Type': 'application/json'\n      }, httpHeaders || {}, COMMON_HTTP_HEADERS)\n    };\n    try {\n      let too_many_requests_retries = 5;\n      let res;\n      let waitTime = 500;\n      for (;;) {\n        if (fetchWithMiddleware) {\n          res = await fetchWithMiddleware(url, options);\n        } else {\n          res = await fetch(url, options);\n        }\n        if (res.status !== 429 /* Too many requests */) {\n          break;\n        }\n        if (disableRetryOnRateLimit === true) {\n          break;\n        }\n        too_many_requests_retries -= 1;\n        if (too_many_requests_retries === 0) {\n          break;\n        }\n        console.error(`Server responded with ${res.status} ${res.statusText}.  Retrying after ${waitTime}ms delay...`);\n        await sleep(waitTime);\n        waitTime *= 2;\n      }\n      const text = await res.text();\n      if (res.ok) {\n        callback(null, text);\n      } else {\n        callback(new Error(`${res.status} ${res.statusText}: ${text}`));\n      }\n    } catch (err) {\n      if (err instanceof Error) callback(err);\n    }\n  }, {});\n  return clientBrowser;\n}\nfunction createRpcRequest(client) {\n  return (method, args) => {\n    return new Promise((resolve, reject) => {\n      client.request(method, args, (err, response) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(response);\n      });\n    });\n  };\n}\nfunction createRpcBatchRequest(client) {\n  return requests => {\n    return new Promise((resolve, reject) => {\n      // Do nothing if requests is empty\n      if (requests.length === 0) resolve([]);\n      const batch = requests.map(params => {\n        return client.request(params.methodName, params.args);\n      });\n      client.request(batch, (err, response) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(response);\n      });\n    });\n  };\n}\n\n/**\n * Expected JSON RPC response for the \"getInflationGovernor\" message\n */\nconst GetInflationGovernorRpcResult = jsonRpcResult(GetInflationGovernorResult);\n\n/**\n * Expected JSON RPC response for the \"getInflationRate\" message\n */\nconst GetInflationRateRpcResult = jsonRpcResult(GetInflationRateResult);\n\n/**\n * Expected JSON RPC response for the \"getRecentPrioritizationFees\" message\n */\nconst GetRecentPrioritizationFeesRpcResult = jsonRpcResult(GetRecentPrioritizationFeesResult);\n\n/**\n * Expected JSON RPC response for the \"getEpochInfo\" message\n */\nconst GetEpochInfoRpcResult = jsonRpcResult(GetEpochInfoResult);\n\n/**\n * Expected JSON RPC response for the \"getEpochSchedule\" message\n */\nconst GetEpochScheduleRpcResult = jsonRpcResult(GetEpochScheduleResult);\n\n/**\n * Expected JSON RPC response for the \"getLeaderSchedule\" message\n */\nconst GetLeaderScheduleRpcResult = jsonRpcResult(GetLeaderScheduleResult);\n\n/**\n * Expected JSON RPC response for the \"minimumLedgerSlot\" and \"getFirstAvailableBlock\" messages\n */\nconst SlotRpcResult = jsonRpcResult(number());\n\n/**\n * Supply\n */\n\n/**\n * Expected JSON RPC response for the \"getSupply\" message\n */\nconst GetSupplyRpcResult = jsonRpcResultAndContext(type({\n  total: number(),\n  circulating: number(),\n  nonCirculating: number(),\n  nonCirculatingAccounts: array(PublicKeyFromString)\n}));\n\n/**\n * Token amount object which returns a token amount in different formats\n * for various client use cases.\n */\n\n/**\n * Expected JSON RPC structure for token amounts\n */\nconst TokenAmountResult = type({\n  amount: string(),\n  uiAmount: nullable(number()),\n  decimals: number(),\n  uiAmountString: optional(string())\n});\n\n/**\n * Token address and balance.\n */\n\n/**\n * Expected JSON RPC response for the \"getTokenLargestAccounts\" message\n */\nconst GetTokenLargestAccountsResult = jsonRpcResultAndContext(array(type({\n  address: PublicKeyFromString,\n  amount: string(),\n  uiAmount: nullable(number()),\n  decimals: number(),\n  uiAmountString: optional(string())\n})));\n\n/**\n * Expected JSON RPC response for the \"getTokenAccountsByOwner\" message\n */\nconst GetTokenAccountsByOwner = jsonRpcResultAndContext(array(type({\n  pubkey: PublicKeyFromString,\n  account: type({\n    executable: boolean(),\n    owner: PublicKeyFromString,\n    lamports: number(),\n    data: BufferFromRawAccountData,\n    rentEpoch: number()\n  })\n})));\nconst ParsedAccountDataResult = type({\n  program: string(),\n  parsed: unknown(),\n  space: number()\n});\n\n/**\n * Expected JSON RPC response for the \"getTokenAccountsByOwner\" message with parsed data\n */\nconst GetParsedTokenAccountsByOwner = jsonRpcResultAndContext(array(type({\n  pubkey: PublicKeyFromString,\n  account: type({\n    executable: boolean(),\n    owner: PublicKeyFromString,\n    lamports: number(),\n    data: ParsedAccountDataResult,\n    rentEpoch: number()\n  })\n})));\n\n/**\n * Pair of an account address and its balance\n */\n\n/**\n * Expected JSON RPC response for the \"getLargestAccounts\" message\n */\nconst GetLargestAccountsRpcResult = jsonRpcResultAndContext(array(type({\n  lamports: number(),\n  address: PublicKeyFromString\n})));\n\n/**\n * @internal\n */\nconst AccountInfoResult = type({\n  executable: boolean(),\n  owner: PublicKeyFromString,\n  lamports: number(),\n  data: BufferFromRawAccountData,\n  rentEpoch: number()\n});\n\n/**\n * @internal\n */\nconst KeyedAccountInfoResult = type({\n  pubkey: PublicKeyFromString,\n  account: AccountInfoResult\n});\nconst ParsedOrRawAccountData = coerce(union([instance(Buffer), ParsedAccountDataResult]), union([RawAccountDataResult, ParsedAccountDataResult]), value => {\n  if (Array.isArray(value)) {\n    return create(value, BufferFromRawAccountData);\n  } else {\n    return value;\n  }\n});\n\n/**\n * @internal\n */\nconst ParsedAccountInfoResult = type({\n  executable: boolean(),\n  owner: PublicKeyFromString,\n  lamports: number(),\n  data: ParsedOrRawAccountData,\n  rentEpoch: number()\n});\nconst KeyedParsedAccountInfoResult = type({\n  pubkey: PublicKeyFromString,\n  account: ParsedAccountInfoResult\n});\n\n/**\n * @internal\n */\nconst StakeActivationResult = type({\n  state: union([literal('active'), literal('inactive'), literal('activating'), literal('deactivating')]),\n  active: number(),\n  inactive: number()\n});\n\n/**\n * Expected JSON RPC response for the \"getConfirmedSignaturesForAddress2\" message\n */\n\nconst GetConfirmedSignaturesForAddress2RpcResult = jsonRpcResult(array(type({\n  signature: string(),\n  slot: number(),\n  err: TransactionErrorResult,\n  memo: nullable(string()),\n  blockTime: optional(nullable(number()))\n})));\n\n/**\n * Expected JSON RPC response for the \"getSignaturesForAddress\" message\n */\nconst GetSignaturesForAddressRpcResult = jsonRpcResult(array(type({\n  signature: string(),\n  slot: number(),\n  err: TransactionErrorResult,\n  memo: nullable(string()),\n  blockTime: optional(nullable(number()))\n})));\n\n/***\n * Expected JSON RPC response for the \"accountNotification\" message\n */\nconst AccountNotificationResult = type({\n  subscription: number(),\n  result: notificationResultAndContext(AccountInfoResult)\n});\n\n/**\n * @internal\n */\nconst ProgramAccountInfoResult = type({\n  pubkey: PublicKeyFromString,\n  account: AccountInfoResult\n});\n\n/***\n * Expected JSON RPC response for the \"programNotification\" message\n */\nconst ProgramAccountNotificationResult = type({\n  subscription: number(),\n  result: notificationResultAndContext(ProgramAccountInfoResult)\n});\n\n/**\n * @internal\n */\nconst SlotInfoResult = type({\n  parent: number(),\n  slot: number(),\n  root: number()\n});\n\n/**\n * Expected JSON RPC response for the \"slotNotification\" message\n */\nconst SlotNotificationResult = type({\n  subscription: number(),\n  result: SlotInfoResult\n});\n\n/**\n * Slot updates which can be used for tracking the live progress of a cluster.\n * - `\"firstShredReceived\"`: connected node received the first shred of a block.\n * Indicates that a new block that is being produced.\n * - `\"completed\"`: connected node has received all shreds of a block. Indicates\n * a block was recently produced.\n * - `\"optimisticConfirmation\"`: block was optimistically confirmed by the\n * cluster. It is not guaranteed that an optimistic confirmation notification\n * will be sent for every finalized blocks.\n * - `\"root\"`: the connected node rooted this block.\n * - `\"createdBank\"`: the connected node has started validating this block.\n * - `\"frozen\"`: the connected node has validated this block.\n * - `\"dead\"`: the connected node failed to validate this block.\n */\n\n/**\n * @internal\n */\nconst SlotUpdateResult = union([type({\n  type: union([literal('firstShredReceived'), literal('completed'), literal('optimisticConfirmation'), literal('root')]),\n  slot: number(),\n  timestamp: number()\n}), type({\n  type: literal('createdBank'),\n  parent: number(),\n  slot: number(),\n  timestamp: number()\n}), type({\n  type: literal('frozen'),\n  slot: number(),\n  timestamp: number(),\n  stats: type({\n    numTransactionEntries: number(),\n    numSuccessfulTransactions: number(),\n    numFailedTransactions: number(),\n    maxTransactionsPerEntry: number()\n  })\n}), type({\n  type: literal('dead'),\n  slot: number(),\n  timestamp: number(),\n  err: string()\n})]);\n\n/**\n * Expected JSON RPC response for the \"slotsUpdatesNotification\" message\n */\nconst SlotUpdateNotificationResult = type({\n  subscription: number(),\n  result: SlotUpdateResult\n});\n\n/**\n * Expected JSON RPC response for the \"signatureNotification\" message\n */\nconst SignatureNotificationResult = type({\n  subscription: number(),\n  result: notificationResultAndContext(union([SignatureStatusResult, SignatureReceivedResult]))\n});\n\n/**\n * Expected JSON RPC response for the \"rootNotification\" message\n */\nconst RootNotificationResult = type({\n  subscription: number(),\n  result: number()\n});\nconst ContactInfoResult = type({\n  pubkey: string(),\n  gossip: nullable(string()),\n  tpu: nullable(string()),\n  rpc: nullable(string()),\n  version: nullable(string())\n});\nconst VoteAccountInfoResult = type({\n  votePubkey: string(),\n  nodePubkey: string(),\n  activatedStake: number(),\n  epochVoteAccount: boolean(),\n  epochCredits: array(tuple([number(), number(), number()])),\n  commission: number(),\n  lastVote: number(),\n  rootSlot: nullable(number())\n});\n\n/**\n * Expected JSON RPC response for the \"getVoteAccounts\" message\n */\nconst GetVoteAccounts = jsonRpcResult(type({\n  current: array(VoteAccountInfoResult),\n  delinquent: array(VoteAccountInfoResult)\n}));\nconst ConfirmationStatus = union([literal('processed'), literal('confirmed'), literal('finalized')]);\nconst SignatureStatusResponse = type({\n  slot: number(),\n  confirmations: nullable(number()),\n  err: TransactionErrorResult,\n  confirmationStatus: optional(ConfirmationStatus)\n});\n\n/**\n * Expected JSON RPC response for the \"getSignatureStatuses\" message\n */\nconst GetSignatureStatusesRpcResult = jsonRpcResultAndContext(array(nullable(SignatureStatusResponse)));\n\n/**\n * Expected JSON RPC response for the \"getMinimumBalanceForRentExemption\" message\n */\nconst GetMinimumBalanceForRentExemptionRpcResult = jsonRpcResult(number());\nconst AddressTableLookupStruct = type({\n  accountKey: PublicKeyFromString,\n  writableIndexes: array(number()),\n  readonlyIndexes: array(number())\n});\nconst ConfirmedTransactionResult = type({\n  signatures: array(string()),\n  message: type({\n    accountKeys: array(string()),\n    header: type({\n      numRequiredSignatures: number(),\n      numReadonlySignedAccounts: number(),\n      numReadonlyUnsignedAccounts: number()\n    }),\n    instructions: array(type({\n      accounts: array(number()),\n      data: string(),\n      programIdIndex: number()\n    })),\n    recentBlockhash: string(),\n    addressTableLookups: optional(array(AddressTableLookupStruct))\n  })\n});\nconst AnnotatedAccountKey = type({\n  pubkey: PublicKeyFromString,\n  signer: boolean(),\n  writable: boolean(),\n  source: optional(union([literal('transaction'), literal('lookupTable')]))\n});\nconst ConfirmedTransactionAccountsModeResult = type({\n  accountKeys: array(AnnotatedAccountKey),\n  signatures: array(string())\n});\nconst ParsedInstructionResult = type({\n  parsed: unknown(),\n  program: string(),\n  programId: PublicKeyFromString\n});\nconst RawInstructionResult = type({\n  accounts: array(PublicKeyFromString),\n  data: string(),\n  programId: PublicKeyFromString\n});\nconst InstructionResult = union([RawInstructionResult, ParsedInstructionResult]);\nconst UnknownInstructionResult = union([type({\n  parsed: unknown(),\n  program: string(),\n  programId: string()\n}), type({\n  accounts: array(string()),\n  data: string(),\n  programId: string()\n})]);\nconst ParsedOrRawInstruction = coerce(InstructionResult, UnknownInstructionResult, value => {\n  if ('accounts' in value) {\n    return create(value, RawInstructionResult);\n  } else {\n    return create(value, ParsedInstructionResult);\n  }\n});\n\n/**\n * @internal\n */\nconst ParsedConfirmedTransactionResult = type({\n  signatures: array(string()),\n  message: type({\n    accountKeys: array(AnnotatedAccountKey),\n    instructions: array(ParsedOrRawInstruction),\n    recentBlockhash: string(),\n    addressTableLookups: optional(nullable(array(AddressTableLookupStruct)))\n  })\n});\nconst TokenBalanceResult = type({\n  accountIndex: number(),\n  mint: string(),\n  owner: optional(string()),\n  programId: optional(string()),\n  uiTokenAmount: TokenAmountResult\n});\nconst LoadedAddressesResult = type({\n  writable: array(PublicKeyFromString),\n  readonly: array(PublicKeyFromString)\n});\n\n/**\n * @internal\n */\nconst ConfirmedTransactionMetaResult = type({\n  err: TransactionErrorResult,\n  fee: number(),\n  innerInstructions: optional(nullable(array(type({\n    index: number(),\n    instructions: array(type({\n      accounts: array(number()),\n      data: string(),\n      programIdIndex: number()\n    }))\n  })))),\n  preBalances: array(number()),\n  postBalances: array(number()),\n  logMessages: optional(nullable(array(string()))),\n  preTokenBalances: optional(nullable(array(TokenBalanceResult))),\n  postTokenBalances: optional(nullable(array(TokenBalanceResult))),\n  loadedAddresses: optional(LoadedAddressesResult),\n  computeUnitsConsumed: optional(number())\n});\n\n/**\n * @internal\n */\nconst ParsedConfirmedTransactionMetaResult = type({\n  err: TransactionErrorResult,\n  fee: number(),\n  innerInstructions: optional(nullable(array(type({\n    index: number(),\n    instructions: array(ParsedOrRawInstruction)\n  })))),\n  preBalances: array(number()),\n  postBalances: array(number()),\n  logMessages: optional(nullable(array(string()))),\n  preTokenBalances: optional(nullable(array(TokenBalanceResult))),\n  postTokenBalances: optional(nullable(array(TokenBalanceResult))),\n  loadedAddresses: optional(LoadedAddressesResult),\n  computeUnitsConsumed: optional(number())\n});\nconst TransactionVersionStruct = union([literal(0), literal('legacy')]);\n\n/** @internal */\nconst RewardsResult = type({\n  pubkey: string(),\n  lamports: number(),\n  postBalance: nullable(number()),\n  rewardType: nullable(string()),\n  commission: optional(nullable(number()))\n});\n\n/**\n * Expected JSON RPC response for the \"getBlock\" message\n */\nconst GetBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  transactions: array(type({\n    transaction: ConfirmedTransactionResult,\n    meta: nullable(ConfirmedTransactionMetaResult),\n    version: optional(TransactionVersionStruct)\n  })),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected JSON RPC response for the \"getBlock\" message when `transactionDetails` is `none`\n */\nconst GetNoneModeBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected JSON RPC response for the \"getBlock\" message when `transactionDetails` is `accounts`\n */\nconst GetAccountsModeBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  transactions: array(type({\n    transaction: ConfirmedTransactionAccountsModeResult,\n    meta: nullable(ConfirmedTransactionMetaResult),\n    version: optional(TransactionVersionStruct)\n  })),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected parsed JSON RPC response for the \"getBlock\" message\n */\nconst GetParsedBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  transactions: array(type({\n    transaction: ParsedConfirmedTransactionResult,\n    meta: nullable(ParsedConfirmedTransactionMetaResult),\n    version: optional(TransactionVersionStruct)\n  })),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected parsed JSON RPC response for the \"getBlock\" message  when `transactionDetails` is `accounts`\n */\nconst GetParsedAccountsModeBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  transactions: array(type({\n    transaction: ConfirmedTransactionAccountsModeResult,\n    meta: nullable(ParsedConfirmedTransactionMetaResult),\n    version: optional(TransactionVersionStruct)\n  })),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected parsed JSON RPC response for the \"getBlock\" message  when `transactionDetails` is `none`\n */\nconst GetParsedNoneModeBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number()),\n  blockHeight: nullable(number())\n})));\n\n/**\n * Expected JSON RPC response for the \"getConfirmedBlock\" message\n *\n * @deprecated Deprecated since RPC v1.8.0. Please use {@link GetBlockRpcResult} instead.\n */\nconst GetConfirmedBlockRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  transactions: array(type({\n    transaction: ConfirmedTransactionResult,\n    meta: nullable(ConfirmedTransactionMetaResult)\n  })),\n  rewards: optional(array(RewardsResult)),\n  blockTime: nullable(number())\n})));\n\n/**\n * Expected JSON RPC response for the \"getBlock\" message\n */\nconst GetBlockSignaturesRpcResult = jsonRpcResult(nullable(type({\n  blockhash: string(),\n  previousBlockhash: string(),\n  parentSlot: number(),\n  signatures: array(string()),\n  blockTime: nullable(number())\n})));\n\n/**\n * Expected JSON RPC response for the \"getTransaction\" message\n */\nconst GetTransactionRpcResult = jsonRpcResult(nullable(type({\n  slot: number(),\n  meta: nullable(ConfirmedTransactionMetaResult),\n  blockTime: optional(nullable(number())),\n  transaction: ConfirmedTransactionResult,\n  version: optional(TransactionVersionStruct)\n})));\n\n/**\n * Expected parsed JSON RPC response for the \"getTransaction\" message\n */\nconst GetParsedTransactionRpcResult = jsonRpcResult(nullable(type({\n  slot: number(),\n  transaction: ParsedConfirmedTransactionResult,\n  meta: nullable(ParsedConfirmedTransactionMetaResult),\n  blockTime: optional(nullable(number())),\n  version: optional(TransactionVersionStruct)\n})));\n\n/**\n * Expected JSON RPC response for the \"getLatestBlockhash\" message\n */\nconst GetLatestBlockhashRpcResult = jsonRpcResultAndContext(type({\n  blockhash: string(),\n  lastValidBlockHeight: number()\n}));\n\n/**\n * Expected JSON RPC response for the \"isBlockhashValid\" message\n */\nconst IsBlockhashValidRpcResult = jsonRpcResultAndContext(boolean());\nconst PerfSampleResult = type({\n  slot: number(),\n  numTransactions: number(),\n  numSlots: number(),\n  samplePeriodSecs: number()\n});\n\n/*\n * Expected JSON RPC response for \"getRecentPerformanceSamples\" message\n */\nconst GetRecentPerformanceSamplesRpcResult = jsonRpcResult(array(PerfSampleResult));\n\n/**\n * Expected JSON RPC response for the \"getFeeCalculatorForBlockhash\" message\n */\nconst GetFeeCalculatorRpcResult = jsonRpcResultAndContext(nullable(type({\n  feeCalculator: type({\n    lamportsPerSignature: number()\n  })\n})));\n\n/**\n * Expected JSON RPC response for the \"requestAirdrop\" message\n */\nconst RequestAirdropRpcResult = jsonRpcResult(string());\n\n/**\n * Expected JSON RPC response for the \"sendTransaction\" message\n */\nconst SendTransactionRpcResult = jsonRpcResult(string());\n\n/**\n * Information about the latest slot being processed by a node\n */\n\n/**\n * Parsed account data\n */\n\n/**\n * Stake Activation data\n */\n\n/**\n * Data slice argument for getProgramAccounts\n */\n\n/**\n * Memory comparison filter for getProgramAccounts\n */\n\n/**\n * Data size comparison filter for getProgramAccounts\n */\n\n/**\n * A filter object for getProgramAccounts\n */\n\n/**\n * Configuration object for getProgramAccounts requests\n */\n\n/**\n * Configuration object for getParsedProgramAccounts\n */\n\n/**\n * Configuration object for getMultipleAccounts\n */\n\n/**\n * Configuration object for `getStakeActivation`\n */\n\n/**\n * Configuration object for `getStakeActivation`\n */\n\n/**\n * Configuration object for `getStakeActivation`\n */\n\n/**\n * Configuration object for `getNonce`\n */\n\n/**\n * Configuration object for `getNonceAndContext`\n */\n\n/**\n * Information describing an account\n */\n\n/**\n * Account information identified by pubkey\n */\n\n/**\n * Callback function for account change notifications\n */\n\n/**\n * Callback function for program account change notifications\n */\n\n/**\n * Callback function for slot change notifications\n */\n\n/**\n * Callback function for slot update notifications\n */\n\n/**\n * Callback function for signature status notifications\n */\n\n/**\n * Signature status notification with transaction result\n */\n\n/**\n * Signature received notification\n */\n\n/**\n * Callback function for signature notifications\n */\n\n/**\n * Signature subscription options\n */\n\n/**\n * Callback function for root change notifications\n */\n\n/**\n * @internal\n */\nconst LogsResult = type({\n  err: TransactionErrorResult,\n  logs: array(string()),\n  signature: string()\n});\n\n/**\n * Logs result.\n */\n\n/**\n * Expected JSON RPC response for the \"logsNotification\" message.\n */\nconst LogsNotificationResult = type({\n  result: notificationResultAndContext(LogsResult),\n  subscription: number()\n});\n\n/**\n * Filter for log subscriptions.\n */\n\n/**\n * Callback function for log notifications.\n */\n\n/**\n * Signature result\n */\n\n/**\n * Transaction error\n */\n\n/**\n * Transaction confirmation status\n * <pre>\n *   'processed': Transaction landed in a block which has reached 1 confirmation by the connected node\n *   'confirmed': Transaction landed in a block which has reached 1 confirmation by the cluster\n *   'finalized': Transaction landed in a block which has been finalized by the cluster\n * </pre>\n */\n\n/**\n * Signature status\n */\n\n/**\n * A confirmed signature with its status\n */\n\n/**\n * An object defining headers to be passed to the RPC server\n */\n\n/**\n * The type of the JavaScript `fetch()` API\n */\n\n/**\n * A callback used to augment the outgoing HTTP request\n */\n\n/**\n * Configuration for instantiating a Connection\n */\n\n/** @internal */\nconst COMMON_HTTP_HEADERS = {\n  'solana-client': `js/${\"1.0.0-maintenance\"}`\n};\n\n/**\n * A connection to a fullnode JSON RPC endpoint\n */\nclass Connection {\n  /**\n   * Establish a JSON RPC connection\n   *\n   * @param endpoint URL to the fullnode JSON RPC endpoint\n   * @param commitmentOrConfig optional default commitment level or optional ConnectionConfig configuration object\n   */\n  constructor(endpoint, _commitmentOrConfig) {\n    /** @internal */\n    this._commitment = void 0;\n    /** @internal */\n    this._confirmTransactionInitialTimeout = void 0;\n    /** @internal */\n    this._rpcEndpoint = void 0;\n    /** @internal */\n    this._rpcWsEndpoint = void 0;\n    /** @internal */\n    this._rpcClient = void 0;\n    /** @internal */\n    this._rpcRequest = void 0;\n    /** @internal */\n    this._rpcBatchRequest = void 0;\n    /** @internal */\n    this._rpcWebSocket = void 0;\n    /** @internal */\n    this._rpcWebSocketConnected = false;\n    /** @internal */\n    this._rpcWebSocketHeartbeat = null;\n    /** @internal */\n    this._rpcWebSocketIdleTimeout = null;\n    /** @internal\n     * A number that we increment every time an active connection closes.\n     * Used to determine whether the same socket connection that was open\n     * when an async operation started is the same one that's active when\n     * its continuation fires.\n     *\n     */\n    this._rpcWebSocketGeneration = 0;\n    /** @internal */\n    this._disableBlockhashCaching = false;\n    /** @internal */\n    this._pollingBlockhash = false;\n    /** @internal */\n    this._blockhashInfo = {\n      latestBlockhash: null,\n      lastFetch: 0,\n      transactionSignatures: [],\n      simulatedSignatures: []\n    };\n    /** @internal */\n    this._nextClientSubscriptionId = 0;\n    /** @internal */\n    this._subscriptionDisposeFunctionsByClientSubscriptionId = {};\n    /** @internal */\n    this._subscriptionHashByClientSubscriptionId = {};\n    /** @internal */\n    this._subscriptionStateChangeCallbacksByHash = {};\n    /** @internal */\n    this._subscriptionCallbacksByServerSubscriptionId = {};\n    /** @internal */\n    this._subscriptionsByHash = {};\n    /**\n     * Special case.\n     * After a signature is processed, RPCs automatically dispose of the\n     * subscription on the server side. We need to track which of these\n     * subscriptions have been disposed in such a way, so that we know\n     * whether the client is dealing with a not-yet-processed signature\n     * (in which case we must tear down the server subscription) or an\n     * already-processed signature (in which case the client can simply\n     * clear out the subscription locally without telling the server).\n     *\n     * NOTE: There is a proposal to eliminate this special case, here:\n     * https://github.com/solana-labs/solana/issues/18892\n     */\n    /** @internal */\n    this._subscriptionsAutoDisposedByRpc = new Set();\n    /*\n     * Returns the current block height of the node\n     */\n    this.getBlockHeight = (() => {\n      const requestPromises = {};\n      return async commitmentOrConfig => {\n        const {\n          commitment,\n          config\n        } = extractCommitmentFromConfig(commitmentOrConfig);\n        const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n        const requestHash = fastStableStringify(args);\n        requestPromises[requestHash] = requestPromises[requestHash] ?? (async () => {\n          try {\n            const unsafeRes = await this._rpcRequest('getBlockHeight', args);\n            const res = create(unsafeRes, jsonRpcResult(number()));\n            if ('error' in res) {\n              throw new SolanaJSONRPCError(res.error, 'failed to get block height information');\n            }\n            return res.result;\n          } finally {\n            delete requestPromises[requestHash];\n          }\n        })();\n        return await requestPromises[requestHash];\n      };\n    })();\n    let wsEndpoint;\n    let httpHeaders;\n    let fetch;\n    let fetchMiddleware;\n    let disableRetryOnRateLimit;\n    let httpAgent;\n    if (_commitmentOrConfig && typeof _commitmentOrConfig === 'string') {\n      this._commitment = _commitmentOrConfig;\n    } else if (_commitmentOrConfig) {\n      this._commitment = _commitmentOrConfig.commitment;\n      this._confirmTransactionInitialTimeout = _commitmentOrConfig.confirmTransactionInitialTimeout;\n      wsEndpoint = _commitmentOrConfig.wsEndpoint;\n      httpHeaders = _commitmentOrConfig.httpHeaders;\n      fetch = _commitmentOrConfig.fetch;\n      fetchMiddleware = _commitmentOrConfig.fetchMiddleware;\n      disableRetryOnRateLimit = _commitmentOrConfig.disableRetryOnRateLimit;\n      httpAgent = _commitmentOrConfig.httpAgent;\n    }\n    this._rpcEndpoint = assertEndpointUrl(endpoint);\n    this._rpcWsEndpoint = wsEndpoint || makeWebsocketUrl(endpoint);\n    this._rpcClient = createRpcClient(endpoint, httpHeaders, fetch, fetchMiddleware, disableRetryOnRateLimit, httpAgent);\n    this._rpcRequest = createRpcRequest(this._rpcClient);\n    this._rpcBatchRequest = createRpcBatchRequest(this._rpcClient);\n    this._rpcWebSocket = new RpcWebSocketClient(this._rpcWsEndpoint, {\n      autoconnect: false,\n      max_reconnects: Infinity\n    });\n    this._rpcWebSocket.on('open', this._wsOnOpen.bind(this));\n    this._rpcWebSocket.on('error', this._wsOnError.bind(this));\n    this._rpcWebSocket.on('close', this._wsOnClose.bind(this));\n    this._rpcWebSocket.on('accountNotification', this._wsOnAccountNotification.bind(this));\n    this._rpcWebSocket.on('programNotification', this._wsOnProgramAccountNotification.bind(this));\n    this._rpcWebSocket.on('slotNotification', this._wsOnSlotNotification.bind(this));\n    this._rpcWebSocket.on('slotsUpdatesNotification', this._wsOnSlotUpdatesNotification.bind(this));\n    this._rpcWebSocket.on('signatureNotification', this._wsOnSignatureNotification.bind(this));\n    this._rpcWebSocket.on('rootNotification', this._wsOnRootNotification.bind(this));\n    this._rpcWebSocket.on('logsNotification', this._wsOnLogsNotification.bind(this));\n  }\n\n  /**\n   * The default commitment used for requests\n   */\n  get commitment() {\n    return this._commitment;\n  }\n\n  /**\n   * The RPC endpoint\n   */\n  get rpcEndpoint() {\n    return this._rpcEndpoint;\n  }\n\n  /**\n   * Fetch the balance for the specified public key, return with context\n   */\n  async getBalanceAndContext(publicKey, commitmentOrConfig) {\n    /** @internal */\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([publicKey.toBase58()], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getBalance', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(number()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get balance for ${publicKey.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the balance for the specified public key\n   */\n  async getBalance(publicKey, commitmentOrConfig) {\n    return await this.getBalanceAndContext(publicKey, commitmentOrConfig).then(x => x.value).catch(e => {\n      throw new Error('failed to get balance of account ' + publicKey.toBase58() + ': ' + e);\n    });\n  }\n\n  /**\n   * Fetch the estimated production time of a block\n   */\n  async getBlockTime(slot) {\n    const unsafeRes = await this._rpcRequest('getBlockTime', [slot]);\n    const res = create(unsafeRes, jsonRpcResult(nullable(number())));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get block time for slot ${slot}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the lowest slot that the node has information about in its ledger.\n   * This value may increase over time if the node is configured to purge older ledger data\n   */\n  async getMinimumLedgerSlot() {\n    const unsafeRes = await this._rpcRequest('minimumLedgerSlot', []);\n    const res = create(unsafeRes, jsonRpcResult(number()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get minimum ledger slot');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the slot of the lowest confirmed block that has not been purged from the ledger\n   */\n  async getFirstAvailableBlock() {\n    const unsafeRes = await this._rpcRequest('getFirstAvailableBlock', []);\n    const res = create(unsafeRes, SlotRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get first available block');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch information about the current supply\n   */\n  async getSupply(config) {\n    let configArg = {};\n    if (typeof config === 'string') {\n      configArg = {\n        commitment: config\n      };\n    } else if (config) {\n      configArg = {\n        ...config,\n        commitment: config && config.commitment || this.commitment\n      };\n    } else {\n      configArg = {\n        commitment: this.commitment\n      };\n    }\n    const unsafeRes = await this._rpcRequest('getSupply', [configArg]);\n    const res = create(unsafeRes, GetSupplyRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get supply');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current supply of a token mint\n   */\n  async getTokenSupply(tokenMintAddress, commitment) {\n    const args = this._buildArgs([tokenMintAddress.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getTokenSupply', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(TokenAmountResult));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get token supply');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current balance of a token account\n   */\n  async getTokenAccountBalance(tokenAddress, commitment) {\n    const args = this._buildArgs([tokenAddress.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getTokenAccountBalance', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(TokenAmountResult));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get token account balance');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the token accounts owned by the specified account\n   *\n   * @return {Promise<RpcResponseAndContext<GetProgramAccountsResponse>}\n   */\n  async getTokenAccountsByOwner(ownerAddress, filter, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    let _args = [ownerAddress.toBase58()];\n    if ('mint' in filter) {\n      _args.push({\n        mint: filter.mint.toBase58()\n      });\n    } else {\n      _args.push({\n        programId: filter.programId.toBase58()\n      });\n    }\n    const args = this._buildArgs(_args, commitment, 'base64', config);\n    const unsafeRes = await this._rpcRequest('getTokenAccountsByOwner', args);\n    const res = create(unsafeRes, GetTokenAccountsByOwner);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get token accounts owned by account ${ownerAddress.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch parsed token accounts owned by the specified account\n   *\n   * @return {Promise<RpcResponseAndContext<Array<{pubkey: PublicKey, account: AccountInfo<ParsedAccountData>}>>>}\n   */\n  async getParsedTokenAccountsByOwner(ownerAddress, filter, commitment) {\n    let _args = [ownerAddress.toBase58()];\n    if ('mint' in filter) {\n      _args.push({\n        mint: filter.mint.toBase58()\n      });\n    } else {\n      _args.push({\n        programId: filter.programId.toBase58()\n      });\n    }\n    const args = this._buildArgs(_args, commitment, 'jsonParsed');\n    const unsafeRes = await this._rpcRequest('getTokenAccountsByOwner', args);\n    const res = create(unsafeRes, GetParsedTokenAccountsByOwner);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get token accounts owned by account ${ownerAddress.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the 20 largest accounts with their current balances\n   */\n  async getLargestAccounts(config) {\n    const arg = {\n      ...config,\n      commitment: config && config.commitment || this.commitment\n    };\n    const args = arg.filter || arg.commitment ? [arg] : [];\n    const unsafeRes = await this._rpcRequest('getLargestAccounts', args);\n    const res = create(unsafeRes, GetLargestAccountsRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get largest accounts');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the 20 largest token accounts with their current balances\n   * for a given mint.\n   */\n  async getTokenLargestAccounts(mintAddress, commitment) {\n    const args = this._buildArgs([mintAddress.toBase58()], commitment);\n    const unsafeRes = await this._rpcRequest('getTokenLargestAccounts', args);\n    const res = create(unsafeRes, GetTokenLargestAccountsResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get token largest accounts');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the account info for the specified public key, return with context\n   */\n  async getAccountInfoAndContext(publicKey, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([publicKey.toBase58()], commitment, 'base64', config);\n    const unsafeRes = await this._rpcRequest('getAccountInfo', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(nullable(AccountInfoResult)));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get info about account ${publicKey.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch parsed account info for the specified public key\n   */\n  async getParsedAccountInfo(publicKey, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([publicKey.toBase58()], commitment, 'jsonParsed', config);\n    const unsafeRes = await this._rpcRequest('getAccountInfo', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(nullable(ParsedAccountInfoResult)));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get info about account ${publicKey.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the account info for the specified public key\n   */\n  async getAccountInfo(publicKey, commitmentOrConfig) {\n    try {\n      const res = await this.getAccountInfoAndContext(publicKey, commitmentOrConfig);\n      return res.value;\n    } catch (e) {\n      throw new Error('failed to get info about account ' + publicKey.toBase58() + ': ' + e);\n    }\n  }\n\n  /**\n   * Fetch all the account info for multiple accounts specified by an array of public keys, return with context\n   */\n  async getMultipleParsedAccounts(publicKeys, rawConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(rawConfig);\n    const keys = publicKeys.map(key => key.toBase58());\n    const args = this._buildArgs([keys], commitment, 'jsonParsed', config);\n    const unsafeRes = await this._rpcRequest('getMultipleAccounts', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(array(nullable(ParsedAccountInfoResult))));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get info for accounts ${keys}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the account info for multiple accounts specified by an array of public keys, return with context\n   */\n  async getMultipleAccountsInfoAndContext(publicKeys, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const keys = publicKeys.map(key => key.toBase58());\n    const args = this._buildArgs([keys], commitment, 'base64', config);\n    const unsafeRes = await this._rpcRequest('getMultipleAccounts', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(array(nullable(AccountInfoResult))));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get info for accounts ${keys}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the account info for multiple accounts specified by an array of public keys\n   */\n  async getMultipleAccountsInfo(publicKeys, commitmentOrConfig) {\n    const res = await this.getMultipleAccountsInfoAndContext(publicKeys, commitmentOrConfig);\n    return res.value;\n  }\n\n  /**\n   * Returns epoch activation information for a stake account that has been delegated\n   *\n   * @deprecated Deprecated since RPC v1.18; will be removed in a future version.\n   */\n  async getStakeActivation(publicKey, commitmentOrConfig, epoch) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([publicKey.toBase58()], commitment, undefined /* encoding */, {\n      ...config,\n      epoch: epoch != null ? epoch : config?.epoch\n    });\n    const unsafeRes = await this._rpcRequest('getStakeActivation', args);\n    const res = create(unsafeRes, jsonRpcResult(StakeActivationResult));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get Stake Activation ${publicKey.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch all the accounts owned by the specified program id\n   *\n   * @return {Promise<Array<{pubkey: PublicKey, account: AccountInfo<Buffer>}>>}\n   */\n\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n  async getProgramAccounts(programId, configOrCommitment) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(configOrCommitment);\n    const {\n      encoding,\n      ...configWithoutEncoding\n    } = config || {};\n    const args = this._buildArgs([programId.toBase58()], commitment, encoding || 'base64', {\n      ...configWithoutEncoding,\n      ...(configWithoutEncoding.filters ? {\n        filters: applyDefaultMemcmpEncodingToFilters(configWithoutEncoding.filters)\n      } : null)\n    });\n    const unsafeRes = await this._rpcRequest('getProgramAccounts', args);\n    const baseSchema = array(KeyedAccountInfoResult);\n    const res = configWithoutEncoding.withContext === true ? create(unsafeRes, jsonRpcResultAndContext(baseSchema)) : create(unsafeRes, jsonRpcResult(baseSchema));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get accounts owned by program ${programId.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch and parse all the accounts owned by the specified program id\n   *\n   * @return {Promise<Array<{pubkey: PublicKey, account: AccountInfo<Buffer | ParsedAccountData>}>>}\n   */\n  async getParsedProgramAccounts(programId, configOrCommitment) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(configOrCommitment);\n    const args = this._buildArgs([programId.toBase58()], commitment, 'jsonParsed', config);\n    const unsafeRes = await this._rpcRequest('getProgramAccounts', args);\n    const res = create(unsafeRes, jsonRpcResult(array(KeyedParsedAccountInfoResult)));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get accounts owned by program ${programId.toBase58()}`);\n    }\n    return res.result;\n  }\n\n  /** @deprecated Instead, call `confirmTransaction` and pass in {@link TransactionConfirmationStrategy} */\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n  async confirmTransaction(strategy, commitment) {\n    let rawSignature;\n    if (typeof strategy == 'string') {\n      rawSignature = strategy;\n    } else {\n      const config = strategy;\n      if (config.abortSignal?.aborted) {\n        return Promise.reject(config.abortSignal.reason);\n      }\n      rawSignature = config.signature;\n    }\n    let decodedSignature;\n    try {\n      decodedSignature = bs58.decode(rawSignature);\n    } catch (err) {\n      throw new Error('signature must be base58 encoded: ' + rawSignature);\n    }\n    assert(decodedSignature.length === 64, 'signature has invalid length');\n    if (typeof strategy === 'string') {\n      return await this.confirmTransactionUsingLegacyTimeoutStrategy({\n        commitment: commitment || this.commitment,\n        signature: rawSignature\n      });\n    } else if ('lastValidBlockHeight' in strategy) {\n      return await this.confirmTransactionUsingBlockHeightExceedanceStrategy({\n        commitment: commitment || this.commitment,\n        strategy\n      });\n    } else {\n      return await this.confirmTransactionUsingDurableNonceStrategy({\n        commitment: commitment || this.commitment,\n        strategy\n      });\n    }\n  }\n  getCancellationPromise(signal) {\n    return new Promise((_, reject) => {\n      if (signal == null) {\n        return;\n      }\n      if (signal.aborted) {\n        reject(signal.reason);\n      } else {\n        signal.addEventListener('abort', () => {\n          reject(signal.reason);\n        });\n      }\n    });\n  }\n  getTransactionConfirmationPromise({\n    commitment,\n    signature\n  }) {\n    let signatureSubscriptionId;\n    let disposeSignatureSubscriptionStateChangeObserver;\n    let done = false;\n    const confirmationPromise = new Promise((resolve, reject) => {\n      try {\n        signatureSubscriptionId = this.onSignature(signature, (result, context) => {\n          signatureSubscriptionId = undefined;\n          const response = {\n            context,\n            value: result\n          };\n          resolve({\n            __type: TransactionStatus.PROCESSED,\n            response\n          });\n        }, commitment);\n        const subscriptionSetupPromise = new Promise(resolveSubscriptionSetup => {\n          if (signatureSubscriptionId == null) {\n            resolveSubscriptionSetup();\n          } else {\n            disposeSignatureSubscriptionStateChangeObserver = this._onSubscriptionStateChange(signatureSubscriptionId, nextState => {\n              if (nextState === 'subscribed') {\n                resolveSubscriptionSetup();\n              }\n            });\n          }\n        });\n        (async () => {\n          await subscriptionSetupPromise;\n          if (done) return;\n          const response = await this.getSignatureStatus(signature);\n          if (done) return;\n          if (response == null) {\n            return;\n          }\n          const {\n            context,\n            value\n          } = response;\n          if (value == null) {\n            return;\n          }\n          if (value?.err) {\n            reject(value.err);\n          } else {\n            switch (commitment) {\n              case 'confirmed':\n              case 'single':\n              case 'singleGossip':\n                {\n                  if (value.confirmationStatus === 'processed') {\n                    return;\n                  }\n                  break;\n                }\n              case 'finalized':\n              case 'max':\n              case 'root':\n                {\n                  if (value.confirmationStatus === 'processed' || value.confirmationStatus === 'confirmed') {\n                    return;\n                  }\n                  break;\n                }\n              // exhaust enums to ensure full coverage\n              case 'processed':\n              case 'recent':\n            }\n            done = true;\n            resolve({\n              __type: TransactionStatus.PROCESSED,\n              response: {\n                context,\n                value\n              }\n            });\n          }\n        })();\n      } catch (err) {\n        reject(err);\n      }\n    });\n    const abortConfirmation = () => {\n      if (disposeSignatureSubscriptionStateChangeObserver) {\n        disposeSignatureSubscriptionStateChangeObserver();\n        disposeSignatureSubscriptionStateChangeObserver = undefined;\n      }\n      if (signatureSubscriptionId != null) {\n        this.removeSignatureListener(signatureSubscriptionId);\n        signatureSubscriptionId = undefined;\n      }\n    };\n    return {\n      abortConfirmation,\n      confirmationPromise\n    };\n  }\n  async confirmTransactionUsingBlockHeightExceedanceStrategy({\n    commitment,\n    strategy: {\n      abortSignal,\n      lastValidBlockHeight,\n      signature\n    }\n  }) {\n    let done = false;\n    const expiryPromise = new Promise(resolve => {\n      const checkBlockHeight = async () => {\n        try {\n          const blockHeight = await this.getBlockHeight(commitment);\n          return blockHeight;\n        } catch (_e) {\n          return -1;\n        }\n      };\n      (async () => {\n        let currentBlockHeight = await checkBlockHeight();\n        if (done) return;\n        while (currentBlockHeight <= lastValidBlockHeight) {\n          await sleep(1000);\n          if (done) return;\n          currentBlockHeight = await checkBlockHeight();\n          if (done) return;\n        }\n        resolve({\n          __type: TransactionStatus.BLOCKHEIGHT_EXCEEDED\n        });\n      })();\n    });\n    const {\n      abortConfirmation,\n      confirmationPromise\n    } = this.getTransactionConfirmationPromise({\n      commitment,\n      signature\n    });\n    const cancellationPromise = this.getCancellationPromise(abortSignal);\n    let result;\n    try {\n      const outcome = await Promise.race([cancellationPromise, confirmationPromise, expiryPromise]);\n      if (outcome.__type === TransactionStatus.PROCESSED) {\n        result = outcome.response;\n      } else {\n        throw new TransactionExpiredBlockheightExceededError(signature);\n      }\n    } finally {\n      done = true;\n      abortConfirmation();\n    }\n    return result;\n  }\n  async confirmTransactionUsingDurableNonceStrategy({\n    commitment,\n    strategy: {\n      abortSignal,\n      minContextSlot,\n      nonceAccountPubkey,\n      nonceValue,\n      signature\n    }\n  }) {\n    let done = false;\n    const expiryPromise = new Promise(resolve => {\n      let currentNonceValue = nonceValue;\n      let lastCheckedSlot = null;\n      const getCurrentNonceValue = async () => {\n        try {\n          const {\n            context,\n            value: nonceAccount\n          } = await this.getNonceAndContext(nonceAccountPubkey, {\n            commitment,\n            minContextSlot\n          });\n          lastCheckedSlot = context.slot;\n          return nonceAccount?.nonce;\n        } catch (e) {\n          // If for whatever reason we can't reach/read the nonce\n          // account, just keep using the last-known value.\n          return currentNonceValue;\n        }\n      };\n      (async () => {\n        currentNonceValue = await getCurrentNonceValue();\n        if (done) return;\n        while (true // eslint-disable-line no-constant-condition\n        ) {\n          if (nonceValue !== currentNonceValue) {\n            resolve({\n              __type: TransactionStatus.NONCE_INVALID,\n              slotInWhichNonceDidAdvance: lastCheckedSlot\n            });\n            return;\n          }\n          await sleep(2000);\n          if (done) return;\n          currentNonceValue = await getCurrentNonceValue();\n          if (done) return;\n        }\n      })();\n    });\n    const {\n      abortConfirmation,\n      confirmationPromise\n    } = this.getTransactionConfirmationPromise({\n      commitment,\n      signature\n    });\n    const cancellationPromise = this.getCancellationPromise(abortSignal);\n    let result;\n    try {\n      const outcome = await Promise.race([cancellationPromise, confirmationPromise, expiryPromise]);\n      if (outcome.__type === TransactionStatus.PROCESSED) {\n        result = outcome.response;\n      } else {\n        // Double check that the transaction is indeed unconfirmed.\n        let signatureStatus;\n        while (true // eslint-disable-line no-constant-condition\n        ) {\n          const status = await this.getSignatureStatus(signature);\n          if (status == null) {\n            break;\n          }\n          if (status.context.slot < (outcome.slotInWhichNonceDidAdvance ?? minContextSlot)) {\n            await sleep(400);\n            continue;\n          }\n          signatureStatus = status;\n          break;\n        }\n        if (signatureStatus?.value) {\n          const commitmentForStatus = commitment || 'finalized';\n          const {\n            confirmationStatus\n          } = signatureStatus.value;\n          switch (commitmentForStatus) {\n            case 'processed':\n            case 'recent':\n              if (confirmationStatus !== 'processed' && confirmationStatus !== 'confirmed' && confirmationStatus !== 'finalized') {\n                throw new TransactionExpiredNonceInvalidError(signature);\n              }\n              break;\n            case 'confirmed':\n            case 'single':\n            case 'singleGossip':\n              if (confirmationStatus !== 'confirmed' && confirmationStatus !== 'finalized') {\n                throw new TransactionExpiredNonceInvalidError(signature);\n              }\n              break;\n            case 'finalized':\n            case 'max':\n            case 'root':\n              if (confirmationStatus !== 'finalized') {\n                throw new TransactionExpiredNonceInvalidError(signature);\n              }\n              break;\n            default:\n              // Exhaustive switch.\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              (_ => {})(commitmentForStatus);\n          }\n          result = {\n            context: signatureStatus.context,\n            value: {\n              err: signatureStatus.value.err\n            }\n          };\n        } else {\n          throw new TransactionExpiredNonceInvalidError(signature);\n        }\n      }\n    } finally {\n      done = true;\n      abortConfirmation();\n    }\n    return result;\n  }\n  async confirmTransactionUsingLegacyTimeoutStrategy({\n    commitment,\n    signature\n  }) {\n    let timeoutId;\n    const expiryPromise = new Promise(resolve => {\n      let timeoutMs = this._confirmTransactionInitialTimeout || 60 * 1000;\n      switch (commitment) {\n        case 'processed':\n        case 'recent':\n        case 'single':\n        case 'confirmed':\n        case 'singleGossip':\n          {\n            timeoutMs = this._confirmTransactionInitialTimeout || 30 * 1000;\n            break;\n          }\n      }\n      timeoutId = setTimeout(() => resolve({\n        __type: TransactionStatus.TIMED_OUT,\n        timeoutMs\n      }), timeoutMs);\n    });\n    const {\n      abortConfirmation,\n      confirmationPromise\n    } = this.getTransactionConfirmationPromise({\n      commitment,\n      signature\n    });\n    let result;\n    try {\n      const outcome = await Promise.race([confirmationPromise, expiryPromise]);\n      if (outcome.__type === TransactionStatus.PROCESSED) {\n        result = outcome.response;\n      } else {\n        throw new TransactionExpiredTimeoutError(signature, outcome.timeoutMs / 1000);\n      }\n    } finally {\n      clearTimeout(timeoutId);\n      abortConfirmation();\n    }\n    return result;\n  }\n\n  /**\n   * Return the list of nodes that are currently participating in the cluster\n   */\n  async getClusterNodes() {\n    const unsafeRes = await this._rpcRequest('getClusterNodes', []);\n    const res = create(unsafeRes, jsonRpcResult(array(ContactInfoResult)));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get cluster nodes');\n    }\n    return res.result;\n  }\n\n  /**\n   * Return the list of nodes that are currently participating in the cluster\n   */\n  async getVoteAccounts(commitment) {\n    const args = this._buildArgs([], commitment);\n    const unsafeRes = await this._rpcRequest('getVoteAccounts', args);\n    const res = create(unsafeRes, GetVoteAccounts);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get vote accounts');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current slot that the node is processing\n   */\n  async getSlot(commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getSlot', args);\n    const res = create(unsafeRes, jsonRpcResult(number()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get slot');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current slot leader of the cluster\n   */\n  async getSlotLeader(commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getSlotLeader', args);\n    const res = create(unsafeRes, jsonRpcResult(string()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get slot leader');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch `limit` number of slot leaders starting from `startSlot`\n   *\n   * @param startSlot fetch slot leaders starting from this slot\n   * @param limit number of slot leaders to return\n   */\n  async getSlotLeaders(startSlot, limit) {\n    const args = [startSlot, limit];\n    const unsafeRes = await this._rpcRequest('getSlotLeaders', args);\n    const res = create(unsafeRes, jsonRpcResult(array(PublicKeyFromString)));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get slot leaders');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current status of a signature\n   */\n  async getSignatureStatus(signature, config) {\n    const {\n      context,\n      value: values\n    } = await this.getSignatureStatuses([signature], config);\n    assert(values.length === 1);\n    const value = values[0];\n    return {\n      context,\n      value\n    };\n  }\n\n  /**\n   * Fetch the current statuses of a batch of signatures\n   */\n  async getSignatureStatuses(signatures, config) {\n    const params = [signatures];\n    if (config) {\n      params.push(config);\n    }\n    const unsafeRes = await this._rpcRequest('getSignatureStatuses', params);\n    const res = create(unsafeRes, GetSignatureStatusesRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get signature status');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current transaction count of the cluster\n   */\n  async getTransactionCount(commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getTransactionCount', args);\n    const res = create(unsafeRes, jsonRpcResult(number()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get transaction count');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the current total currency supply of the cluster in lamports\n   *\n   * @deprecated Deprecated since RPC v1.2.8. Please use {@link getSupply} instead.\n   */\n  async getTotalSupply(commitment) {\n    const result = await this.getSupply({\n      commitment,\n      excludeNonCirculatingAccountsList: true\n    });\n    return result.value.total;\n  }\n\n  /**\n   * Fetch the cluster InflationGovernor parameters\n   */\n  async getInflationGovernor(commitment) {\n    const args = this._buildArgs([], commitment);\n    const unsafeRes = await this._rpcRequest('getInflationGovernor', args);\n    const res = create(unsafeRes, GetInflationGovernorRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get inflation');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the inflation reward for a list of addresses for an epoch\n   */\n  async getInflationReward(addresses, epoch, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([addresses.map(pubkey => pubkey.toBase58())], commitment, undefined /* encoding */, {\n      ...config,\n      epoch: epoch != null ? epoch : config?.epoch\n    });\n    const unsafeRes = await this._rpcRequest('getInflationReward', args);\n    const res = create(unsafeRes, GetInflationRewardResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get inflation reward');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the specific inflation values for the current epoch\n   */\n  async getInflationRate() {\n    const unsafeRes = await this._rpcRequest('getInflationRate', []);\n    const res = create(unsafeRes, GetInflationRateRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get inflation rate');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the Epoch Info parameters\n   */\n  async getEpochInfo(commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getEpochInfo', args);\n    const res = create(unsafeRes, GetEpochInfoRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get epoch info');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the Epoch Schedule parameters\n   */\n  async getEpochSchedule() {\n    const unsafeRes = await this._rpcRequest('getEpochSchedule', []);\n    const res = create(unsafeRes, GetEpochScheduleRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get epoch schedule');\n    }\n    const epochSchedule = res.result;\n    return new EpochSchedule(epochSchedule.slotsPerEpoch, epochSchedule.leaderScheduleSlotOffset, epochSchedule.warmup, epochSchedule.firstNormalEpoch, epochSchedule.firstNormalSlot);\n  }\n\n  /**\n   * Fetch the leader schedule for the current epoch\n   * @return {Promise<RpcResponseAndContext<LeaderSchedule>>}\n   */\n  async getLeaderSchedule() {\n    const unsafeRes = await this._rpcRequest('getLeaderSchedule', []);\n    const res = create(unsafeRes, GetLeaderScheduleRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get leader schedule');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the minimum balance needed to exempt an account of `dataLength`\n   * size from rent\n   */\n  async getMinimumBalanceForRentExemption(dataLength, commitment) {\n    const args = this._buildArgs([dataLength], commitment);\n    const unsafeRes = await this._rpcRequest('getMinimumBalanceForRentExemption', args);\n    const res = create(unsafeRes, GetMinimumBalanceForRentExemptionRpcResult);\n    if ('error' in res) {\n      console.warn('Unable to fetch minimum balance for rent exemption');\n      return 0;\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch a recent blockhash from the cluster, return with context\n   * @return {Promise<RpcResponseAndContext<{blockhash: Blockhash, feeCalculator: FeeCalculator}>>}\n   *\n   * @deprecated Deprecated since RPC v1.9.0. Please use {@link getLatestBlockhash} instead.\n   */\n  async getRecentBlockhashAndContext(commitment) {\n    const {\n      context,\n      value: {\n        blockhash\n      }\n    } = await this.getLatestBlockhashAndContext(commitment);\n    const feeCalculator = {\n      get lamportsPerSignature() {\n        throw new Error('The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is ' + 'no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee ' + 'for a given message.');\n      },\n      toJSON() {\n        return {};\n      }\n    };\n    return {\n      context,\n      value: {\n        blockhash,\n        feeCalculator\n      }\n    };\n  }\n\n  /**\n   * Fetch recent performance samples\n   * @return {Promise<Array<PerfSample>>}\n   */\n  async getRecentPerformanceSamples(limit) {\n    const unsafeRes = await this._rpcRequest('getRecentPerformanceSamples', limit ? [limit] : []);\n    const res = create(unsafeRes, GetRecentPerformanceSamplesRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get recent performance samples');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the fee calculator for a recent blockhash from the cluster, return with context\n   *\n   * @deprecated Deprecated since RPC v1.9.0. Please use {@link getFeeForMessage} instead.\n   */\n  async getFeeCalculatorForBlockhash(blockhash, commitment) {\n    const args = this._buildArgs([blockhash], commitment);\n    const unsafeRes = await this._rpcRequest('getFeeCalculatorForBlockhash', args);\n    const res = create(unsafeRes, GetFeeCalculatorRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get fee calculator');\n    }\n    const {\n      context,\n      value\n    } = res.result;\n    return {\n      context,\n      value: value !== null ? value.feeCalculator : null\n    };\n  }\n\n  /**\n   * Fetch the fee for a message from the cluster, return with context\n   */\n  async getFeeForMessage(message, commitment) {\n    const wireMessage = toBuffer(message.serialize()).toString('base64');\n    const args = this._buildArgs([wireMessage], commitment);\n    const unsafeRes = await this._rpcRequest('getFeeForMessage', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(nullable(number())));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get fee for message');\n    }\n    if (res.result === null) {\n      throw new Error('invalid blockhash');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch a list of prioritization fees from recent blocks.\n   */\n  async getRecentPrioritizationFees(config) {\n    const accounts = config?.lockedWritableAccounts?.map(key => key.toBase58());\n    const args = accounts?.length ? [accounts] : [];\n    const unsafeRes = await this._rpcRequest('getRecentPrioritizationFees', args);\n    const res = create(unsafeRes, GetRecentPrioritizationFeesRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get recent prioritization fees');\n    }\n    return res.result;\n  }\n  /**\n   * Fetch a recent blockhash from the cluster\n   * @return {Promise<{blockhash: Blockhash, feeCalculator: FeeCalculator}>}\n   *\n   * @deprecated Deprecated since RPC v1.8.0. Please use {@link getLatestBlockhash} instead.\n   */\n  async getRecentBlockhash(commitment) {\n    try {\n      const res = await this.getRecentBlockhashAndContext(commitment);\n      return res.value;\n    } catch (e) {\n      throw new Error('failed to get recent blockhash: ' + e);\n    }\n  }\n\n  /**\n   * Fetch the latest blockhash from the cluster\n   * @return {Promise<BlockhashWithExpiryBlockHeight>}\n   */\n  async getLatestBlockhash(commitmentOrConfig) {\n    try {\n      const res = await this.getLatestBlockhashAndContext(commitmentOrConfig);\n      return res.value;\n    } catch (e) {\n      throw new Error('failed to get recent blockhash: ' + e);\n    }\n  }\n\n  /**\n   * Fetch the latest blockhash from the cluster\n   * @return {Promise<BlockhashWithExpiryBlockHeight>}\n   */\n  async getLatestBlockhashAndContext(commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getLatestBlockhash', args);\n    const res = create(unsafeRes, GetLatestBlockhashRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get latest blockhash');\n    }\n    return res.result;\n  }\n\n  /**\n   * Returns whether a blockhash is still valid or not\n   */\n  async isBlockhashValid(blockhash, rawConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(rawConfig);\n    const args = this._buildArgs([blockhash], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('isBlockhashValid', args);\n    const res = create(unsafeRes, IsBlockhashValidRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to determine if the blockhash `' + blockhash + '`is valid');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the node version\n   */\n  async getVersion() {\n    const unsafeRes = await this._rpcRequest('getVersion', []);\n    const res = create(unsafeRes, jsonRpcResult(VersionResult));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get version');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch the genesis hash\n   */\n  async getGenesisHash() {\n    const unsafeRes = await this._rpcRequest('getGenesisHash', []);\n    const res = create(unsafeRes, jsonRpcResult(string()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get genesis hash');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch a processed block from the cluster.\n   *\n   * @deprecated Instead, call `getBlock` using a `GetVersionedBlockConfig` by\n   * setting the `maxSupportedTransactionVersion` property.\n   */\n\n  /**\n   * @deprecated Instead, call `getBlock` using a `GetVersionedBlockConfig` by\n   * setting the `maxSupportedTransactionVersion` property.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * @deprecated Instead, call `getBlock` using a `GetVersionedBlockConfig` by\n   * setting the `maxSupportedTransactionVersion` property.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Fetch a processed block from the cluster.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Fetch a processed block from the cluster.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n  async getBlock(slot, rawConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(rawConfig);\n    const args = this._buildArgsAtLeastConfirmed([slot], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getBlock', args);\n    try {\n      switch (config?.transactionDetails) {\n        case 'accounts':\n          {\n            const res = create(unsafeRes, GetAccountsModeBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            return res.result;\n          }\n        case 'none':\n          {\n            const res = create(unsafeRes, GetNoneModeBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            return res.result;\n          }\n        default:\n          {\n            const res = create(unsafeRes, GetBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            const {\n              result\n            } = res;\n            return result ? {\n              ...result,\n              transactions: result.transactions.map(({\n                transaction,\n                meta,\n                version\n              }) => ({\n                meta,\n                transaction: {\n                  ...transaction,\n                  message: versionedMessageFromResponse(version, transaction.message)\n                },\n                version\n              }))\n            } : null;\n          }\n      }\n    } catch (e) {\n      throw new SolanaJSONRPCError(e, 'failed to get confirmed block');\n    }\n  }\n\n  /**\n   * Fetch parsed transaction details for a confirmed or finalized block\n   */\n\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n  async getParsedBlock(slot, rawConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(rawConfig);\n    const args = this._buildArgsAtLeastConfirmed([slot], commitment, 'jsonParsed', config);\n    const unsafeRes = await this._rpcRequest('getBlock', args);\n    try {\n      switch (config?.transactionDetails) {\n        case 'accounts':\n          {\n            const res = create(unsafeRes, GetParsedAccountsModeBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            return res.result;\n          }\n        case 'none':\n          {\n            const res = create(unsafeRes, GetParsedNoneModeBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            return res.result;\n          }\n        default:\n          {\n            const res = create(unsafeRes, GetParsedBlockRpcResult);\n            if ('error' in res) {\n              throw res.error;\n            }\n            return res.result;\n          }\n      }\n    } catch (e) {\n      throw new SolanaJSONRPCError(e, 'failed to get block');\n    }\n  }\n  /*\n   * Returns recent block production information from the current or previous epoch\n   */\n  async getBlockProduction(configOrCommitment) {\n    let extra;\n    let commitment;\n    if (typeof configOrCommitment === 'string') {\n      commitment = configOrCommitment;\n    } else if (configOrCommitment) {\n      const {\n        commitment: c,\n        ...rest\n      } = configOrCommitment;\n      commitment = c;\n      extra = rest;\n    }\n    const args = this._buildArgs([], commitment, 'base64', extra);\n    const unsafeRes = await this._rpcRequest('getBlockProduction', args);\n    const res = create(unsafeRes, BlockProductionResponseStruct);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get block production information');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch a confirmed or finalized transaction from the cluster.\n   *\n   * @deprecated Instead, call `getTransaction` using a\n   * `GetVersionedTransactionConfig` by setting the\n   * `maxSupportedTransactionVersion` property.\n   */\n\n  /**\n   * Fetch a confirmed or finalized transaction from the cluster.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Fetch a confirmed or finalized transaction from the cluster.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n  async getTransaction(signature, rawConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(rawConfig);\n    const args = this._buildArgsAtLeastConfirmed([signature], commitment, undefined /* encoding */, config);\n    const unsafeRes = await this._rpcRequest('getTransaction', args);\n    const res = create(unsafeRes, GetTransactionRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get transaction');\n    }\n    const result = res.result;\n    if (!result) return result;\n    return {\n      ...result,\n      transaction: {\n        ...result.transaction,\n        message: versionedMessageFromResponse(result.version, result.transaction.message)\n      }\n    };\n  }\n\n  /**\n   * Fetch parsed transaction details for a confirmed or finalized transaction\n   */\n  async getParsedTransaction(signature, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgsAtLeastConfirmed([signature], commitment, 'jsonParsed', config);\n    const unsafeRes = await this._rpcRequest('getTransaction', args);\n    const res = create(unsafeRes, GetParsedTransactionRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get transaction');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch parsed transaction details for a batch of confirmed transactions\n   */\n  async getParsedTransactions(signatures, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const batch = signatures.map(signature => {\n      const args = this._buildArgsAtLeastConfirmed([signature], commitment, 'jsonParsed', config);\n      return {\n        methodName: 'getTransaction',\n        args\n      };\n    });\n    const unsafeRes = await this._rpcBatchRequest(batch);\n    const res = unsafeRes.map(unsafeRes => {\n      const res = create(unsafeRes, GetParsedTransactionRpcResult);\n      if ('error' in res) {\n        throw new SolanaJSONRPCError(res.error, 'failed to get transactions');\n      }\n      return res.result;\n    });\n    return res;\n  }\n\n  /**\n   * Fetch transaction details for a batch of confirmed transactions.\n   * Similar to {@link getParsedTransactions} but returns a {@link TransactionResponse}.\n   *\n   * @deprecated Instead, call `getTransactions` using a\n   * `GetVersionedTransactionConfig` by setting the\n   * `maxSupportedTransactionVersion` property.\n   */\n\n  /**\n   * Fetch transaction details for a batch of confirmed transactions.\n   * Similar to {@link getParsedTransactions} but returns a {@link\n   * VersionedTransactionResponse}.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Fetch transaction details for a batch of confirmed transactions.\n   * Similar to {@link getParsedTransactions} but returns a {@link\n   * VersionedTransactionResponse}.\n   */\n  // eslint-disable-next-line no-dupe-class-members\n  async getTransactions(signatures, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const batch = signatures.map(signature => {\n      const args = this._buildArgsAtLeastConfirmed([signature], commitment, undefined /* encoding */, config);\n      return {\n        methodName: 'getTransaction',\n        args\n      };\n    });\n    const unsafeRes = await this._rpcBatchRequest(batch);\n    const res = unsafeRes.map(unsafeRes => {\n      const res = create(unsafeRes, GetTransactionRpcResult);\n      if ('error' in res) {\n        throw new SolanaJSONRPCError(res.error, 'failed to get transactions');\n      }\n      const result = res.result;\n      if (!result) return result;\n      return {\n        ...result,\n        transaction: {\n          ...result.transaction,\n          message: versionedMessageFromResponse(result.version, result.transaction.message)\n        }\n      };\n    });\n    return res;\n  }\n\n  /**\n   * Fetch a list of Transactions and transaction statuses from the cluster\n   * for a confirmed block.\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getBlock} instead.\n   */\n  async getConfirmedBlock(slot, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([slot], commitment);\n    const unsafeRes = await this._rpcRequest('getBlock', args);\n    const res = create(unsafeRes, GetConfirmedBlockRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get confirmed block');\n    }\n    const result = res.result;\n    if (!result) {\n      throw new Error('Confirmed block ' + slot + ' not found');\n    }\n    const block = {\n      ...result,\n      transactions: result.transactions.map(({\n        transaction,\n        meta\n      }) => {\n        const message = new Message(transaction.message);\n        return {\n          meta,\n          transaction: {\n            ...transaction,\n            message\n          }\n        };\n      })\n    };\n    return {\n      ...block,\n      transactions: block.transactions.map(({\n        transaction,\n        meta\n      }) => {\n        return {\n          meta,\n          transaction: Transaction.populate(transaction.message, transaction.signatures)\n        };\n      })\n    };\n  }\n\n  /**\n   * Fetch confirmed blocks between two slots\n   */\n  async getBlocks(startSlot, endSlot, commitment) {\n    const args = this._buildArgsAtLeastConfirmed(endSlot !== undefined ? [startSlot, endSlot] : [startSlot], commitment);\n    const unsafeRes = await this._rpcRequest('getBlocks', args);\n    const res = create(unsafeRes, jsonRpcResult(array(number())));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get blocks');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch a list of Signatures from the cluster for a block, excluding rewards\n   */\n  async getBlockSignatures(slot, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([slot], commitment, undefined, {\n      transactionDetails: 'signatures',\n      rewards: false\n    });\n    const unsafeRes = await this._rpcRequest('getBlock', args);\n    const res = create(unsafeRes, GetBlockSignaturesRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get block');\n    }\n    const result = res.result;\n    if (!result) {\n      throw new Error('Block ' + slot + ' not found');\n    }\n    return result;\n  }\n\n  /**\n   * Fetch a list of Signatures from the cluster for a confirmed block, excluding rewards\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getBlockSignatures} instead.\n   */\n  async getConfirmedBlockSignatures(slot, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([slot], commitment, undefined, {\n      transactionDetails: 'signatures',\n      rewards: false\n    });\n    const unsafeRes = await this._rpcRequest('getBlock', args);\n    const res = create(unsafeRes, GetBlockSignaturesRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get confirmed block');\n    }\n    const result = res.result;\n    if (!result) {\n      throw new Error('Confirmed block ' + slot + ' not found');\n    }\n    return result;\n  }\n\n  /**\n   * Fetch a transaction details for a confirmed transaction\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getTransaction} instead.\n   */\n  async getConfirmedTransaction(signature, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([signature], commitment);\n    const unsafeRes = await this._rpcRequest('getTransaction', args);\n    const res = create(unsafeRes, GetTransactionRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get transaction');\n    }\n    const result = res.result;\n    if (!result) return result;\n    const message = new Message(result.transaction.message);\n    const signatures = result.transaction.signatures;\n    return {\n      ...result,\n      transaction: Transaction.populate(message, signatures)\n    };\n  }\n\n  /**\n   * Fetch parsed transaction details for a confirmed transaction\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getParsedTransaction} instead.\n   */\n  async getParsedConfirmedTransaction(signature, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([signature], commitment, 'jsonParsed');\n    const unsafeRes = await this._rpcRequest('getTransaction', args);\n    const res = create(unsafeRes, GetParsedTransactionRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get confirmed transaction');\n    }\n    return res.result;\n  }\n\n  /**\n   * Fetch parsed transaction details for a batch of confirmed transactions\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getParsedTransactions} instead.\n   */\n  async getParsedConfirmedTransactions(signatures, commitment) {\n    const batch = signatures.map(signature => {\n      const args = this._buildArgsAtLeastConfirmed([signature], commitment, 'jsonParsed');\n      return {\n        methodName: 'getTransaction',\n        args\n      };\n    });\n    const unsafeRes = await this._rpcBatchRequest(batch);\n    const res = unsafeRes.map(unsafeRes => {\n      const res = create(unsafeRes, GetParsedTransactionRpcResult);\n      if ('error' in res) {\n        throw new SolanaJSONRPCError(res.error, 'failed to get confirmed transactions');\n      }\n      return res.result;\n    });\n    return res;\n  }\n\n  /**\n   * Fetch a list of all the confirmed signatures for transactions involving an address\n   * within a specified slot range. Max range allowed is 10,000 slots.\n   *\n   * @deprecated Deprecated since RPC v1.3. Please use {@link getConfirmedSignaturesForAddress2} instead.\n   *\n   * @param address queried address\n   * @param startSlot start slot, inclusive\n   * @param endSlot end slot, inclusive\n   */\n  async getConfirmedSignaturesForAddress(address, startSlot, endSlot) {\n    let options = {};\n    let firstAvailableBlock = await this.getFirstAvailableBlock();\n    while (!('until' in options)) {\n      startSlot--;\n      if (startSlot <= 0 || startSlot < firstAvailableBlock) {\n        break;\n      }\n      try {\n        const block = await this.getConfirmedBlockSignatures(startSlot, 'finalized');\n        if (block.signatures.length > 0) {\n          options.until = block.signatures[block.signatures.length - 1].toString();\n        }\n      } catch (err) {\n        if (err instanceof Error && err.message.includes('skipped')) {\n          continue;\n        } else {\n          throw err;\n        }\n      }\n    }\n    let highestConfirmedRoot = await this.getSlot('finalized');\n    while (!('before' in options)) {\n      endSlot++;\n      if (endSlot > highestConfirmedRoot) {\n        break;\n      }\n      try {\n        const block = await this.getConfirmedBlockSignatures(endSlot);\n        if (block.signatures.length > 0) {\n          options.before = block.signatures[block.signatures.length - 1].toString();\n        }\n      } catch (err) {\n        if (err instanceof Error && err.message.includes('skipped')) {\n          continue;\n        } else {\n          throw err;\n        }\n      }\n    }\n    const confirmedSignatureInfo = await this.getConfirmedSignaturesForAddress2(address, options);\n    return confirmedSignatureInfo.map(info => info.signature);\n  }\n\n  /**\n   * Returns confirmed signatures for transactions involving an\n   * address backwards in time from the provided signature or most recent confirmed block\n   *\n   * @deprecated Deprecated since RPC v1.7.0. Please use {@link getSignaturesForAddress} instead.\n   */\n  async getConfirmedSignaturesForAddress2(address, options, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([address.toBase58()], commitment, undefined, options);\n    const unsafeRes = await this._rpcRequest('getConfirmedSignaturesForAddress2', args);\n    const res = create(unsafeRes, GetConfirmedSignaturesForAddress2RpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get confirmed signatures for address');\n    }\n    return res.result;\n  }\n\n  /**\n   * Returns confirmed signatures for transactions involving an\n   * address backwards in time from the provided signature or most recent confirmed block\n   *\n   *\n   * @param address queried address\n   * @param options\n   */\n  async getSignaturesForAddress(address, options, commitment) {\n    const args = this._buildArgsAtLeastConfirmed([address.toBase58()], commitment, undefined, options);\n    const unsafeRes = await this._rpcRequest('getSignaturesForAddress', args);\n    const res = create(unsafeRes, GetSignaturesForAddressRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, 'failed to get signatures for address');\n    }\n    return res.result;\n  }\n  async getAddressLookupTable(accountKey, config) {\n    const {\n      context,\n      value: accountInfo\n    } = await this.getAccountInfoAndContext(accountKey, config);\n    let value = null;\n    if (accountInfo !== null) {\n      value = new AddressLookupTableAccount({\n        key: accountKey,\n        state: AddressLookupTableAccount.deserialize(accountInfo.data)\n      });\n    }\n    return {\n      context,\n      value\n    };\n  }\n\n  /**\n   * Fetch the contents of a Nonce account from the cluster, return with context\n   */\n  async getNonceAndContext(nonceAccount, commitmentOrConfig) {\n    const {\n      context,\n      value: accountInfo\n    } = await this.getAccountInfoAndContext(nonceAccount, commitmentOrConfig);\n    let value = null;\n    if (accountInfo !== null) {\n      value = NonceAccount.fromAccountData(accountInfo.data);\n    }\n    return {\n      context,\n      value\n    };\n  }\n\n  /**\n   * Fetch the contents of a Nonce account from the cluster\n   */\n  async getNonce(nonceAccount, commitmentOrConfig) {\n    return await this.getNonceAndContext(nonceAccount, commitmentOrConfig).then(x => x.value).catch(e => {\n      throw new Error('failed to get nonce for account ' + nonceAccount.toBase58() + ': ' + e);\n    });\n  }\n\n  /**\n   * Request an allocation of lamports to the specified address\n   *\n   * ```typescript\n   * import { Connection, PublicKey, LAMPORTS_PER_SOL } from \"@solana/web3.js\";\n   *\n   * (async () => {\n   *   const connection = new Connection(\"https://api.testnet.solana.com\", \"confirmed\");\n   *   const myAddress = new PublicKey(\"2nr1bHFT86W9tGnyvmYW4vcHKsQB3sVQfnddasz4kExM\");\n   *   const signature = await connection.requestAirdrop(myAddress, LAMPORTS_PER_SOL);\n   *   await connection.confirmTransaction(signature);\n   * })();\n   * ```\n   */\n  async requestAirdrop(to, lamports) {\n    const unsafeRes = await this._rpcRequest('requestAirdrop', [to.toBase58(), lamports]);\n    const res = create(unsafeRes, RequestAirdropRpcResult);\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `airdrop to ${to.toBase58()} failed`);\n    }\n    return res.result;\n  }\n\n  /**\n   * @internal\n   */\n  async _blockhashWithExpiryBlockHeight(disableCache) {\n    if (!disableCache) {\n      // Wait for polling to finish\n      while (this._pollingBlockhash) {\n        await sleep(100);\n      }\n      const timeSinceFetch = Date.now() - this._blockhashInfo.lastFetch;\n      const expired = timeSinceFetch >= BLOCKHASH_CACHE_TIMEOUT_MS;\n      if (this._blockhashInfo.latestBlockhash !== null && !expired) {\n        return this._blockhashInfo.latestBlockhash;\n      }\n    }\n    return await this._pollNewBlockhash();\n  }\n\n  /**\n   * @internal\n   */\n  async _pollNewBlockhash() {\n    this._pollingBlockhash = true;\n    try {\n      const startTime = Date.now();\n      const cachedLatestBlockhash = this._blockhashInfo.latestBlockhash;\n      const cachedBlockhash = cachedLatestBlockhash ? cachedLatestBlockhash.blockhash : null;\n      for (let i = 0; i < 50; i++) {\n        const latestBlockhash = await this.getLatestBlockhash('finalized');\n        if (cachedBlockhash !== latestBlockhash.blockhash) {\n          this._blockhashInfo = {\n            latestBlockhash,\n            lastFetch: Date.now(),\n            transactionSignatures: [],\n            simulatedSignatures: []\n          };\n          return latestBlockhash;\n        }\n\n        // Sleep for approximately half a slot\n        await sleep(MS_PER_SLOT / 2);\n      }\n      throw new Error(`Unable to obtain a new blockhash after ${Date.now() - startTime}ms`);\n    } finally {\n      this._pollingBlockhash = false;\n    }\n  }\n\n  /**\n   * get the stake minimum delegation\n   */\n  async getStakeMinimumDelegation(config) {\n    const {\n      commitment,\n      config: configArg\n    } = extractCommitmentFromConfig(config);\n    const args = this._buildArgs([], commitment, 'base64', configArg);\n    const unsafeRes = await this._rpcRequest('getStakeMinimumDelegation', args);\n    const res = create(unsafeRes, jsonRpcResultAndContext(number()));\n    if ('error' in res) {\n      throw new SolanaJSONRPCError(res.error, `failed to get stake minimum delegation`);\n    }\n    return res.result;\n  }\n\n  /**\n   * Simulate a transaction\n   *\n   * @deprecated Instead, call {@link simulateTransaction} with {@link\n   * VersionedTransaction} and {@link SimulateTransactionConfig} parameters\n   */\n\n  /**\n   * Simulate a transaction\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Simulate a transaction\n   */\n  // eslint-disable-next-line no-dupe-class-members\n  async simulateTransaction(transactionOrMessage, configOrSigners, includeAccounts) {\n    if ('message' in transactionOrMessage) {\n      const versionedTx = transactionOrMessage;\n      const wireTransaction = versionedTx.serialize();\n      const encodedTransaction = Buffer.from(wireTransaction).toString('base64');\n      if (Array.isArray(configOrSigners) || includeAccounts !== undefined) {\n        throw new Error('Invalid arguments');\n      }\n      const config = configOrSigners || {};\n      config.encoding = 'base64';\n      if (!('commitment' in config)) {\n        config.commitment = this.commitment;\n      }\n      if (configOrSigners && typeof configOrSigners === 'object' && 'innerInstructions' in configOrSigners) {\n        config.innerInstructions = configOrSigners.innerInstructions;\n      }\n      const args = [encodedTransaction, config];\n      const unsafeRes = await this._rpcRequest('simulateTransaction', args);\n      const res = create(unsafeRes, SimulatedTransactionResponseStruct);\n      if ('error' in res) {\n        throw new Error('failed to simulate transaction: ' + res.error.message);\n      }\n      return res.result;\n    }\n    let transaction;\n    if (transactionOrMessage instanceof Transaction) {\n      let originalTx = transactionOrMessage;\n      transaction = new Transaction();\n      transaction.feePayer = originalTx.feePayer;\n      transaction.instructions = transactionOrMessage.instructions;\n      transaction.nonceInfo = originalTx.nonceInfo;\n      transaction.signatures = originalTx.signatures;\n    } else {\n      transaction = Transaction.populate(transactionOrMessage);\n      // HACK: this function relies on mutating the populated transaction\n      transaction._message = transaction._json = undefined;\n    }\n    if (configOrSigners !== undefined && !Array.isArray(configOrSigners)) {\n      throw new Error('Invalid arguments');\n    }\n    const signers = configOrSigners;\n    if (transaction.nonceInfo && signers) {\n      transaction.sign(...signers);\n    } else {\n      let disableCache = this._disableBlockhashCaching;\n      for (;;) {\n        const latestBlockhash = await this._blockhashWithExpiryBlockHeight(disableCache);\n        transaction.lastValidBlockHeight = latestBlockhash.lastValidBlockHeight;\n        transaction.recentBlockhash = latestBlockhash.blockhash;\n        if (!signers) break;\n        transaction.sign(...signers);\n        if (!transaction.signature) {\n          throw new Error('!signature'); // should never happen\n        }\n        const signature = transaction.signature.toString('base64');\n        if (!this._blockhashInfo.simulatedSignatures.includes(signature) && !this._blockhashInfo.transactionSignatures.includes(signature)) {\n          // The signature of this transaction has not been seen before with the\n          // current recentBlockhash, all done. Let's break\n          this._blockhashInfo.simulatedSignatures.push(signature);\n          break;\n        } else {\n          // This transaction would be treated as duplicate (its derived signature\n          // matched to one of already recorded signatures).\n          // So, we must fetch a new blockhash for a different signature by disabling\n          // our cache not to wait for the cache expiration (BLOCKHASH_CACHE_TIMEOUT_MS).\n          disableCache = true;\n        }\n      }\n    }\n    const message = transaction._compile();\n    const signData = message.serialize();\n    const wireTransaction = transaction._serialize(signData);\n    const encodedTransaction = wireTransaction.toString('base64');\n    const config = {\n      encoding: 'base64',\n      commitment: this.commitment\n    };\n    if (includeAccounts) {\n      const addresses = (Array.isArray(includeAccounts) ? includeAccounts : message.nonProgramIds()).map(key => key.toBase58());\n      config['accounts'] = {\n        encoding: 'base64',\n        addresses\n      };\n    }\n    if (signers) {\n      config.sigVerify = true;\n    }\n    if (configOrSigners && typeof configOrSigners === 'object' && 'innerInstructions' in configOrSigners) {\n      config.innerInstructions = configOrSigners.innerInstructions;\n    }\n    const args = [encodedTransaction, config];\n    const unsafeRes = await this._rpcRequest('simulateTransaction', args);\n    const res = create(unsafeRes, SimulatedTransactionResponseStruct);\n    if ('error' in res) {\n      let logs;\n      if ('data' in res.error) {\n        logs = res.error.data.logs;\n        if (logs && Array.isArray(logs)) {\n          const traceIndent = '\\n    ';\n          const logTrace = traceIndent + logs.join(traceIndent);\n          console.error(res.error.message, logTrace);\n        }\n      }\n      throw new SendTransactionError({\n        action: 'simulate',\n        signature: '',\n        transactionMessage: res.error.message,\n        logs: logs\n      });\n    }\n    return res.result;\n  }\n\n  /**\n   * Sign and send a transaction\n   *\n   * @deprecated Instead, call {@link sendTransaction} with a {@link\n   * VersionedTransaction}\n   */\n\n  /**\n   * Send a signed transaction\n   */\n  // eslint-disable-next-line no-dupe-class-members\n\n  /**\n   * Sign and send a transaction\n   */\n  // eslint-disable-next-line no-dupe-class-members\n  async sendTransaction(transaction, signersOrOptions, options) {\n    if ('version' in transaction) {\n      if (signersOrOptions && Array.isArray(signersOrOptions)) {\n        throw new Error('Invalid arguments');\n      }\n      const wireTransaction = transaction.serialize();\n      return await this.sendRawTransaction(wireTransaction, signersOrOptions);\n    }\n    if (signersOrOptions === undefined || !Array.isArray(signersOrOptions)) {\n      throw new Error('Invalid arguments');\n    }\n    const signers = signersOrOptions;\n    if (transaction.nonceInfo) {\n      transaction.sign(...signers);\n    } else {\n      let disableCache = this._disableBlockhashCaching;\n      for (;;) {\n        const latestBlockhash = await this._blockhashWithExpiryBlockHeight(disableCache);\n        transaction.lastValidBlockHeight = latestBlockhash.lastValidBlockHeight;\n        transaction.recentBlockhash = latestBlockhash.blockhash;\n        transaction.sign(...signers);\n        if (!transaction.signature) {\n          throw new Error('!signature'); // should never happen\n        }\n        const signature = transaction.signature.toString('base64');\n        if (!this._blockhashInfo.transactionSignatures.includes(signature)) {\n          // The signature of this transaction has not been seen before with the\n          // current recentBlockhash, all done. Let's break\n          this._blockhashInfo.transactionSignatures.push(signature);\n          break;\n        } else {\n          // This transaction would be treated as duplicate (its derived signature\n          // matched to one of already recorded signatures).\n          // So, we must fetch a new blockhash for a different signature by disabling\n          // our cache not to wait for the cache expiration (BLOCKHASH_CACHE_TIMEOUT_MS).\n          disableCache = true;\n        }\n      }\n    }\n    const wireTransaction = transaction.serialize();\n    return await this.sendRawTransaction(wireTransaction, options);\n  }\n\n  /**\n   * Send a transaction that has already been signed and serialized into the\n   * wire format\n   */\n  async sendRawTransaction(rawTransaction, options) {\n    const encodedTransaction = toBuffer(rawTransaction).toString('base64');\n    const result = await this.sendEncodedTransaction(encodedTransaction, options);\n    return result;\n  }\n\n  /**\n   * Send a transaction that has already been signed, serialized into the\n   * wire format, and encoded as a base64 string\n   */\n  async sendEncodedTransaction(encodedTransaction, options) {\n    const config = {\n      encoding: 'base64'\n    };\n    const skipPreflight = options && options.skipPreflight;\n    const preflightCommitment = skipPreflight === true ? 'processed' // FIXME Remove when https://github.com/anza-xyz/agave/pull/483 is deployed.\n    : options && options.preflightCommitment || this.commitment;\n    if (options && options.maxRetries != null) {\n      config.maxRetries = options.maxRetries;\n    }\n    if (options && options.minContextSlot != null) {\n      config.minContextSlot = options.minContextSlot;\n    }\n    if (skipPreflight) {\n      config.skipPreflight = skipPreflight;\n    }\n    if (preflightCommitment) {\n      config.preflightCommitment = preflightCommitment;\n    }\n    const args = [encodedTransaction, config];\n    const unsafeRes = await this._rpcRequest('sendTransaction', args);\n    const res = create(unsafeRes, SendTransactionRpcResult);\n    if ('error' in res) {\n      let logs = undefined;\n      if ('data' in res.error) {\n        logs = res.error.data.logs;\n      }\n      throw new SendTransactionError({\n        action: skipPreflight ? 'send' : 'simulate',\n        signature: '',\n        transactionMessage: res.error.message,\n        logs: logs\n      });\n    }\n    return res.result;\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnOpen() {\n    this._rpcWebSocketConnected = true;\n    this._rpcWebSocketHeartbeat = setInterval(() => {\n      // Ping server every 5s to prevent idle timeouts\n      (async () => {\n        try {\n          await this._rpcWebSocket.notify('ping');\n          // eslint-disable-next-line no-empty\n        } catch {}\n      })();\n    }, 5000);\n    this._updateSubscriptions();\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnError(err) {\n    this._rpcWebSocketConnected = false;\n    console.error('ws error:', err.message);\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnClose(code) {\n    this._rpcWebSocketConnected = false;\n    this._rpcWebSocketGeneration = (this._rpcWebSocketGeneration + 1) % Number.MAX_SAFE_INTEGER;\n    if (this._rpcWebSocketIdleTimeout) {\n      clearTimeout(this._rpcWebSocketIdleTimeout);\n      this._rpcWebSocketIdleTimeout = null;\n    }\n    if (this._rpcWebSocketHeartbeat) {\n      clearInterval(this._rpcWebSocketHeartbeat);\n      this._rpcWebSocketHeartbeat = null;\n    }\n    if (code === 1000) {\n      // explicit close, check if any subscriptions have been made since close\n      this._updateSubscriptions();\n      return;\n    }\n\n    // implicit close, prepare subscriptions for auto-reconnect\n    this._subscriptionCallbacksByServerSubscriptionId = {};\n    Object.entries(this._subscriptionsByHash).forEach(([hash, subscription]) => {\n      this._setSubscription(hash, {\n        ...subscription,\n        state: 'pending'\n      });\n    });\n  }\n\n  /**\n   * @internal\n   */\n  _setSubscription(hash, nextSubscription) {\n    const prevState = this._subscriptionsByHash[hash]?.state;\n    this._subscriptionsByHash[hash] = nextSubscription;\n    if (prevState !== nextSubscription.state) {\n      const stateChangeCallbacks = this._subscriptionStateChangeCallbacksByHash[hash];\n      if (stateChangeCallbacks) {\n        stateChangeCallbacks.forEach(cb => {\n          try {\n            cb(nextSubscription.state);\n            // eslint-disable-next-line no-empty\n          } catch {}\n        });\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onSubscriptionStateChange(clientSubscriptionId, callback) {\n    const hash = this._subscriptionHashByClientSubscriptionId[clientSubscriptionId];\n    if (hash == null) {\n      return () => {};\n    }\n    const stateChangeCallbacks = this._subscriptionStateChangeCallbacksByHash[hash] ||= new Set();\n    stateChangeCallbacks.add(callback);\n    return () => {\n      stateChangeCallbacks.delete(callback);\n      if (stateChangeCallbacks.size === 0) {\n        delete this._subscriptionStateChangeCallbacksByHash[hash];\n      }\n    };\n  }\n\n  /**\n   * @internal\n   */\n  async _updateSubscriptions() {\n    if (Object.keys(this._subscriptionsByHash).length === 0) {\n      if (this._rpcWebSocketConnected) {\n        this._rpcWebSocketConnected = false;\n        this._rpcWebSocketIdleTimeout = setTimeout(() => {\n          this._rpcWebSocketIdleTimeout = null;\n          try {\n            this._rpcWebSocket.close();\n          } catch (err) {\n            // swallow error if socket has already been closed.\n            if (err instanceof Error) {\n              console.log(`Error when closing socket connection: ${err.message}`);\n            }\n          }\n        }, 500);\n      }\n      return;\n    }\n    if (this._rpcWebSocketIdleTimeout !== null) {\n      clearTimeout(this._rpcWebSocketIdleTimeout);\n      this._rpcWebSocketIdleTimeout = null;\n      this._rpcWebSocketConnected = true;\n    }\n    if (!this._rpcWebSocketConnected) {\n      this._rpcWebSocket.connect();\n      return;\n    }\n    const activeWebSocketGeneration = this._rpcWebSocketGeneration;\n    const isCurrentConnectionStillActive = () => {\n      return activeWebSocketGeneration === this._rpcWebSocketGeneration;\n    };\n    await Promise.all(\n    // Don't be tempted to change this to `Object.entries`. We call\n    // `_updateSubscriptions` recursively when processing the state,\n    // so it's important that we look up the *current* version of\n    // each subscription, every time we process a hash.\n    Object.keys(this._subscriptionsByHash).map(async hash => {\n      const subscription = this._subscriptionsByHash[hash];\n      if (subscription === undefined) {\n        // This entry has since been deleted. Skip.\n        return;\n      }\n      switch (subscription.state) {\n        case 'pending':\n        case 'unsubscribed':\n          if (subscription.callbacks.size === 0) {\n            /**\n             * You can end up here when:\n             *\n             * - a subscription has recently unsubscribed\n             *   without having new callbacks added to it\n             *   while the unsubscribe was in flight, or\n             * - when a pending subscription has its\n             *   listeners removed before a request was\n             *   sent to the server.\n             *\n             * Being that nobody is interested in this\n             * subscription any longer, delete it.\n             */\n            delete this._subscriptionsByHash[hash];\n            if (subscription.state === 'unsubscribed') {\n              delete this._subscriptionCallbacksByServerSubscriptionId[subscription.serverSubscriptionId];\n            }\n            await this._updateSubscriptions();\n            return;\n          }\n          await (async () => {\n            const {\n              args,\n              method\n            } = subscription;\n            try {\n              this._setSubscription(hash, {\n                ...subscription,\n                state: 'subscribing'\n              });\n              const serverSubscriptionId = await this._rpcWebSocket.call(method, args);\n              this._setSubscription(hash, {\n                ...subscription,\n                serverSubscriptionId,\n                state: 'subscribed'\n              });\n              this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId] = subscription.callbacks;\n              await this._updateSubscriptions();\n            } catch (e) {\n              console.error(`Received ${e instanceof Error ? '' : 'JSON-RPC '}error calling \\`${method}\\``, {\n                args,\n                error: e\n              });\n              if (!isCurrentConnectionStillActive()) {\n                return;\n              }\n              // TODO: Maybe add an 'errored' state or a retry limit?\n              this._setSubscription(hash, {\n                ...subscription,\n                state: 'pending'\n              });\n              await this._updateSubscriptions();\n            }\n          })();\n          break;\n        case 'subscribed':\n          if (subscription.callbacks.size === 0) {\n            // By the time we successfully set up a subscription\n            // with the server, the client stopped caring about it.\n            // Tear it down now.\n            await (async () => {\n              const {\n                serverSubscriptionId,\n                unsubscribeMethod\n              } = subscription;\n              if (this._subscriptionsAutoDisposedByRpc.has(serverSubscriptionId)) {\n                /**\n                 * Special case.\n                 * If we're dealing with a subscription that has been auto-\n                 * disposed by the RPC, then we can skip the RPC call to\n                 * tear down the subscription here.\n                 *\n                 * NOTE: There is a proposal to eliminate this special case, here:\n                 * https://github.com/solana-labs/solana/issues/18892\n                 */\n                this._subscriptionsAutoDisposedByRpc.delete(serverSubscriptionId);\n              } else {\n                this._setSubscription(hash, {\n                  ...subscription,\n                  state: 'unsubscribing'\n                });\n                this._setSubscription(hash, {\n                  ...subscription,\n                  state: 'unsubscribing'\n                });\n                try {\n                  await this._rpcWebSocket.call(unsubscribeMethod, [serverSubscriptionId]);\n                } catch (e) {\n                  if (e instanceof Error) {\n                    console.error(`${unsubscribeMethod} error:`, e.message);\n                  }\n                  if (!isCurrentConnectionStillActive()) {\n                    return;\n                  }\n                  // TODO: Maybe add an 'errored' state or a retry limit?\n                  this._setSubscription(hash, {\n                    ...subscription,\n                    state: 'subscribed'\n                  });\n                  await this._updateSubscriptions();\n                  return;\n                }\n              }\n              this._setSubscription(hash, {\n                ...subscription,\n                state: 'unsubscribed'\n              });\n              await this._updateSubscriptions();\n            })();\n          }\n          break;\n      }\n    }));\n  }\n\n  /**\n   * @internal\n   */\n  _handleServerNotification(serverSubscriptionId, callbackArgs) {\n    const callbacks = this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId];\n    if (callbacks === undefined) {\n      return;\n    }\n    callbacks.forEach(cb => {\n      try {\n        cb(\n        // I failed to find a way to convince TypeScript that `cb` is of type\n        // `TCallback` which is certainly compatible with `Parameters<TCallback>`.\n        // See https://github.com/microsoft/TypeScript/issues/47615\n        // @ts-ignore\n        ...callbackArgs);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnAccountNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, AccountNotificationResult);\n    this._handleServerNotification(subscription, [result.value, result.context]);\n  }\n\n  /**\n   * @internal\n   */\n  _makeSubscription(subscriptionConfig,\n  /**\n   * When preparing `args` for a call to `_makeSubscription`, be sure\n   * to carefully apply a default `commitment` property, if necessary.\n   *\n   * - If the user supplied a `commitment` use that.\n   * - Otherwise, if the `Connection::commitment` is set, use that.\n   * - Otherwise, set it to the RPC server default: `finalized`.\n   *\n   * This is extremely important to ensure that these two fundamentally\n   * identical subscriptions produce the same identifying hash:\n   *\n   * - A subscription made without specifying a commitment.\n   * - A subscription made where the commitment specified is the same\n   *   as the default applied to the subscription above.\n   *\n   * Example; these two subscriptions must produce the same hash:\n   *\n   * - An `accountSubscribe` subscription for `'PUBKEY'`\n   * - An `accountSubscribe` subscription for `'PUBKEY'` with commitment\n   *   `'finalized'`.\n   *\n   * See the 'making a subscription with defaulted params omitted' test\n   * in `connection-subscriptions.ts` for more.\n   */\n  args) {\n    const clientSubscriptionId = this._nextClientSubscriptionId++;\n    const hash = fastStableStringify([subscriptionConfig.method, args]);\n    const existingSubscription = this._subscriptionsByHash[hash];\n    if (existingSubscription === undefined) {\n      this._subscriptionsByHash[hash] = {\n        ...subscriptionConfig,\n        args,\n        callbacks: new Set([subscriptionConfig.callback]),\n        state: 'pending'\n      };\n    } else {\n      existingSubscription.callbacks.add(subscriptionConfig.callback);\n    }\n    this._subscriptionHashByClientSubscriptionId[clientSubscriptionId] = hash;\n    this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId] = async () => {\n      delete this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];\n      delete this._subscriptionHashByClientSubscriptionId[clientSubscriptionId];\n      const subscription = this._subscriptionsByHash[hash];\n      assert(subscription !== undefined, `Could not find a \\`Subscription\\` when tearing down client subscription #${clientSubscriptionId}`);\n      subscription.callbacks.delete(subscriptionConfig.callback);\n      await this._updateSubscriptions();\n    };\n    this._updateSubscriptions();\n    return clientSubscriptionId;\n  }\n\n  /**\n   * Register a callback to be invoked whenever the specified account changes\n   *\n   * @param publicKey Public key of the account to monitor\n   * @param callback Function to invoke whenever the account is changed\n   * @param config\n   * @return subscription id\n   */\n\n  /** @deprecated Instead, pass in an {@link AccountSubscriptionConfig} */\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n  onAccountChange(publicKey, callback, commitmentOrConfig) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([publicKey.toBase58()], commitment || this._commitment || 'finalized',\n    // Apply connection/server default.\n    'base64', config);\n    return this._makeSubscription({\n      callback,\n      method: 'accountSubscribe',\n      unsubscribeMethod: 'accountUnsubscribe'\n    }, args);\n  }\n\n  /**\n   * Deregister an account notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeAccountChangeListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'account change');\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnProgramAccountNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, ProgramAccountNotificationResult);\n    this._handleServerNotification(subscription, [{\n      accountId: result.value.pubkey,\n      accountInfo: result.value.account\n    }, result.context]);\n  }\n\n  /**\n   * Register a callback to be invoked whenever accounts owned by the\n   * specified program change\n   *\n   * @param programId Public key of the program to monitor\n   * @param callback Function to invoke whenever the account is changed\n   * @param config\n   * @return subscription id\n   */\n\n  /** @deprecated Instead, pass in a {@link ProgramAccountSubscriptionConfig} */\n  // eslint-disable-next-line no-dupe-class-members\n\n  // eslint-disable-next-line no-dupe-class-members\n  onProgramAccountChange(programId, callback, commitmentOrConfig, maybeFilters) {\n    const {\n      commitment,\n      config\n    } = extractCommitmentFromConfig(commitmentOrConfig);\n    const args = this._buildArgs([programId.toBase58()], commitment || this._commitment || 'finalized',\n    // Apply connection/server default.\n    'base64' /* encoding */, config ? config : maybeFilters ? {\n      filters: applyDefaultMemcmpEncodingToFilters(maybeFilters)\n    } : undefined /* extra */);\n    return this._makeSubscription({\n      callback,\n      method: 'programSubscribe',\n      unsubscribeMethod: 'programUnsubscribe'\n    }, args);\n  }\n\n  /**\n   * Deregister an account notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeProgramAccountChangeListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'program account change');\n  }\n\n  /**\n   * Registers a callback to be invoked whenever logs are emitted.\n   */\n  onLogs(filter, callback, commitment) {\n    const args = this._buildArgs([typeof filter === 'object' ? {\n      mentions: [filter.toString()]\n    } : filter], commitment || this._commitment || 'finalized' // Apply connection/server default.\n    );\n    return this._makeSubscription({\n      callback,\n      method: 'logsSubscribe',\n      unsubscribeMethod: 'logsUnsubscribe'\n    }, args);\n  }\n\n  /**\n   * Deregister a logs callback.\n   *\n   * @param clientSubscriptionId client subscription id to deregister.\n   */\n  async removeOnLogsListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'logs');\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnLogsNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, LogsNotificationResult);\n    this._handleServerNotification(subscription, [result.value, result.context]);\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnSlotNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, SlotNotificationResult);\n    this._handleServerNotification(subscription, [result]);\n  }\n\n  /**\n   * Register a callback to be invoked upon slot changes\n   *\n   * @param callback Function to invoke whenever the slot changes\n   * @return subscription id\n   */\n  onSlotChange(callback) {\n    return this._makeSubscription({\n      callback,\n      method: 'slotSubscribe',\n      unsubscribeMethod: 'slotUnsubscribe'\n    }, [] /* args */);\n  }\n\n  /**\n   * Deregister a slot notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeSlotChangeListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'slot change');\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnSlotUpdatesNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, SlotUpdateNotificationResult);\n    this._handleServerNotification(subscription, [result]);\n  }\n\n  /**\n   * Register a callback to be invoked upon slot updates. {@link SlotUpdate}'s\n   * may be useful to track live progress of a cluster.\n   *\n   * @param callback Function to invoke whenever the slot updates\n   * @return subscription id\n   */\n  onSlotUpdate(callback) {\n    return this._makeSubscription({\n      callback,\n      method: 'slotsUpdatesSubscribe',\n      unsubscribeMethod: 'slotsUpdatesUnsubscribe'\n    }, [] /* args */);\n  }\n\n  /**\n   * Deregister a slot update notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeSlotUpdateListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'slot update');\n  }\n\n  /**\n   * @internal\n   */\n\n  async _unsubscribeClientSubscription(clientSubscriptionId, subscriptionName) {\n    const dispose = this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];\n    if (dispose) {\n      await dispose();\n    } else {\n      console.warn('Ignored unsubscribe request because an active subscription with id ' + `\\`${clientSubscriptionId}\\` for '${subscriptionName}' events ` + 'could not be found.');\n    }\n  }\n  _buildArgs(args, override, encoding, extra) {\n    const commitment = override || this._commitment;\n    if (commitment || encoding || extra) {\n      let options = {};\n      if (encoding) {\n        options.encoding = encoding;\n      }\n      if (commitment) {\n        options.commitment = commitment;\n      }\n      if (extra) {\n        options = Object.assign(options, extra);\n      }\n      args.push(options);\n    }\n    return args;\n  }\n\n  /**\n   * @internal\n   */\n  _buildArgsAtLeastConfirmed(args, override, encoding, extra) {\n    const commitment = override || this._commitment;\n    if (commitment && !['confirmed', 'finalized'].includes(commitment)) {\n      throw new Error('Using Connection with default commitment: `' + this._commitment + '`, but method requires at least `confirmed`');\n    }\n    return this._buildArgs(args, override, encoding, extra);\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnSignatureNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, SignatureNotificationResult);\n    if (result.value !== 'receivedSignature') {\n      /**\n       * Special case.\n       * After a signature is processed, RPCs automatically dispose of the\n       * subscription on the server side. We need to track which of these\n       * subscriptions have been disposed in such a way, so that we know\n       * whether the client is dealing with a not-yet-processed signature\n       * (in which case we must tear down the server subscription) or an\n       * already-processed signature (in which case the client can simply\n       * clear out the subscription locally without telling the server).\n       *\n       * NOTE: There is a proposal to eliminate this special case, here:\n       * https://github.com/solana-labs/solana/issues/18892\n       */\n      this._subscriptionsAutoDisposedByRpc.add(subscription);\n    }\n    this._handleServerNotification(subscription, result.value === 'receivedSignature' ? [{\n      type: 'received'\n    }, result.context] : [{\n      type: 'status',\n      result: result.value\n    }, result.context]);\n  }\n\n  /**\n   * Register a callback to be invoked upon signature updates\n   *\n   * @param signature Transaction signature string in base 58\n   * @param callback Function to invoke on signature notifications\n   * @param commitment Specify the commitment level signature must reach before notification\n   * @return subscription id\n   */\n  onSignature(signature, callback, commitment) {\n    const args = this._buildArgs([signature], commitment || this._commitment || 'finalized' // Apply connection/server default.\n    );\n    const clientSubscriptionId = this._makeSubscription({\n      callback: (notification, context) => {\n        if (notification.type === 'status') {\n          callback(notification.result, context);\n          // Signatures subscriptions are auto-removed by the RPC service\n          // so no need to explicitly send an unsubscribe message.\n          try {\n            this.removeSignatureListener(clientSubscriptionId);\n            // eslint-disable-next-line no-empty\n          } catch (_err) {\n            // Already removed.\n          }\n        }\n      },\n      method: 'signatureSubscribe',\n      unsubscribeMethod: 'signatureUnsubscribe'\n    }, args);\n    return clientSubscriptionId;\n  }\n\n  /**\n   * Register a callback to be invoked when a transaction is\n   * received and/or processed.\n   *\n   * @param signature Transaction signature string in base 58\n   * @param callback Function to invoke on signature notifications\n   * @param options Enable received notifications and set the commitment\n   *   level that signature must reach before notification\n   * @return subscription id\n   */\n  onSignatureWithOptions(signature, callback, options) {\n    const {\n      commitment,\n      ...extra\n    } = {\n      ...options,\n      commitment: options && options.commitment || this._commitment || 'finalized' // Apply connection/server default.\n    };\n    const args = this._buildArgs([signature], commitment, undefined /* encoding */, extra);\n    const clientSubscriptionId = this._makeSubscription({\n      callback: (notification, context) => {\n        callback(notification, context);\n        // Signatures subscriptions are auto-removed by the RPC service\n        // so no need to explicitly send an unsubscribe message.\n        try {\n          this.removeSignatureListener(clientSubscriptionId);\n          // eslint-disable-next-line no-empty\n        } catch (_err) {\n          // Already removed.\n        }\n      },\n      method: 'signatureSubscribe',\n      unsubscribeMethod: 'signatureUnsubscribe'\n    }, args);\n    return clientSubscriptionId;\n  }\n\n  /**\n   * Deregister a signature notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeSignatureListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'signature result');\n  }\n\n  /**\n   * @internal\n   */\n  _wsOnRootNotification(notification) {\n    const {\n      result,\n      subscription\n    } = create(notification, RootNotificationResult);\n    this._handleServerNotification(subscription, [result]);\n  }\n\n  /**\n   * Register a callback to be invoked upon root changes\n   *\n   * @param callback Function to invoke whenever the root changes\n   * @return subscription id\n   */\n  onRootChange(callback) {\n    return this._makeSubscription({\n      callback,\n      method: 'rootSubscribe',\n      unsubscribeMethod: 'rootUnsubscribe'\n    }, [] /* args */);\n  }\n\n  /**\n   * Deregister a root notification callback\n   *\n   * @param clientSubscriptionId client subscription id to deregister\n   */\n  async removeRootChangeListener(clientSubscriptionId) {\n    await this._unsubscribeClientSubscription(clientSubscriptionId, 'root change');\n  }\n}\n\n/**\n * Keypair signer interface\n */\n\n/**\n * An account keypair used for signing transactions.\n */\nclass Keypair {\n  /**\n   * Create a new keypair instance.\n   * Generate random keypair if no {@link Ed25519Keypair} is provided.\n   *\n   * @param {Ed25519Keypair} keypair ed25519 keypair\n   */\n  constructor(keypair) {\n    this._keypair = void 0;\n    this._keypair = keypair ?? generateKeypair();\n  }\n\n  /**\n   * Generate a new random keypair\n   *\n   * @returns {Keypair} Keypair\n   */\n  static generate() {\n    return new Keypair(generateKeypair());\n  }\n\n  /**\n   * Create a keypair from a raw secret key byte array.\n   *\n   * This method should only be used to recreate a keypair from a previously\n   * generated secret key. Generating keypairs from a random seed should be done\n   * with the {@link Keypair.fromSeed} method.\n   *\n   * @throws error if the provided secret key is invalid and validation is not skipped.\n   *\n   * @param secretKey secret key byte array\n   * @param options skip secret key validation\n   *\n   * @returns {Keypair} Keypair\n   */\n  static fromSecretKey(secretKey, options) {\n    if (secretKey.byteLength !== 64) {\n      throw new Error('bad secret key size');\n    }\n    const publicKey = secretKey.slice(32, 64);\n    if (!options || !options.skipValidation) {\n      const privateScalar = secretKey.slice(0, 32);\n      const computedPublicKey = getPublicKey(privateScalar);\n      for (let ii = 0; ii < 32; ii++) {\n        if (publicKey[ii] !== computedPublicKey[ii]) {\n          throw new Error('provided secretKey is invalid');\n        }\n      }\n    }\n    return new Keypair({\n      publicKey,\n      secretKey\n    });\n  }\n\n  /**\n   * Generate a keypair from a 32 byte seed.\n   *\n   * @param seed seed byte array\n   *\n   * @returns {Keypair} Keypair\n   */\n  static fromSeed(seed) {\n    const publicKey = getPublicKey(seed);\n    const secretKey = new Uint8Array(64);\n    secretKey.set(seed);\n    secretKey.set(publicKey, 32);\n    return new Keypair({\n      publicKey,\n      secretKey\n    });\n  }\n\n  /**\n   * The public key for this keypair\n   *\n   * @returns {PublicKey} PublicKey\n   */\n  get publicKey() {\n    return new PublicKey(this._keypair.publicKey);\n  }\n\n  /**\n   * The raw secret key for this keypair\n   * @returns {Uint8Array} Secret key in an array of Uint8 bytes\n   */\n  get secretKey() {\n    return new Uint8Array(this._keypair.secretKey);\n  }\n}\n\n/**\n * An enumeration of valid LookupTableInstructionType's\n */\n\n/**\n * An enumeration of valid address lookup table InstructionType's\n * @internal\n */\nconst LOOKUP_TABLE_INSTRUCTION_LAYOUTS = Object.freeze({\n  CreateLookupTable: {\n    index: 0,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), u64('recentSlot'), BufferLayout.u8('bumpSeed')])\n  },\n  FreezeLookupTable: {\n    index: 1,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  ExtendLookupTable: {\n    index: 2,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), u64(), BufferLayout.seq(publicKey(), BufferLayout.offset(BufferLayout.u32(), -8), 'addresses')])\n  },\n  DeactivateLookupTable: {\n    index: 3,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  CloseLookupTable: {\n    index: 4,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  }\n});\nclass AddressLookupTableInstruction {\n  /**\n   * @internal\n   */\n  constructor() {}\n  static decodeInstructionType(instruction) {\n    this.checkProgramId(instruction.programId);\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const index = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const [layoutType, layout] of Object.entries(LOOKUP_TABLE_INSTRUCTION_LAYOUTS)) {\n      if (layout.index == index) {\n        type = layoutType;\n        break;\n      }\n    }\n    if (!type) {\n      throw new Error('Invalid Instruction. Should be a LookupTable Instruction');\n    }\n    return type;\n  }\n  static decodeCreateLookupTable(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeysLength(instruction.keys, 4);\n    const {\n      recentSlot\n    } = decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable, instruction.data);\n    return {\n      authority: instruction.keys[1].pubkey,\n      payer: instruction.keys[2].pubkey,\n      recentSlot: Number(recentSlot)\n    };\n  }\n  static decodeExtendLookupTable(instruction) {\n    this.checkProgramId(instruction.programId);\n    if (instruction.keys.length < 2) {\n      throw new Error(`invalid instruction; found ${instruction.keys.length} keys, expected at least 2`);\n    }\n    const {\n      addresses\n    } = decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable, instruction.data);\n    return {\n      lookupTable: instruction.keys[0].pubkey,\n      authority: instruction.keys[1].pubkey,\n      payer: instruction.keys.length > 2 ? instruction.keys[2].pubkey : undefined,\n      addresses: addresses.map(buffer => new PublicKey(buffer))\n    };\n  }\n  static decodeCloseLookupTable(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeysLength(instruction.keys, 3);\n    return {\n      lookupTable: instruction.keys[0].pubkey,\n      authority: instruction.keys[1].pubkey,\n      recipient: instruction.keys[2].pubkey\n    };\n  }\n  static decodeFreezeLookupTable(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeysLength(instruction.keys, 2);\n    return {\n      lookupTable: instruction.keys[0].pubkey,\n      authority: instruction.keys[1].pubkey\n    };\n  }\n  static decodeDeactivateLookupTable(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeysLength(instruction.keys, 2);\n    return {\n      lookupTable: instruction.keys[0].pubkey,\n      authority: instruction.keys[1].pubkey\n    };\n  }\n\n  /**\n   * @internal\n   */\n  static checkProgramId(programId) {\n    if (!programId.equals(AddressLookupTableProgram.programId)) {\n      throw new Error('invalid instruction; programId is not AddressLookupTable Program');\n    }\n  }\n  /**\n   * @internal\n   */\n  static checkKeysLength(keys, expectedLength) {\n    if (keys.length < expectedLength) {\n      throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`);\n    }\n  }\n}\nclass AddressLookupTableProgram {\n  /**\n   * @internal\n   */\n  constructor() {}\n  static createLookupTable(params) {\n    const [lookupTableAddress, bumpSeed] = PublicKey.findProgramAddressSync([params.authority.toBuffer(), getU64Encoder().encode(params.recentSlot)], this.programId);\n    const type = LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable;\n    const data = encodeData(type, {\n      recentSlot: BigInt(params.recentSlot),\n      bumpSeed: bumpSeed\n    });\n    const keys = [{\n      pubkey: lookupTableAddress,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: params.authority,\n      isSigner: true,\n      isWritable: false\n    }, {\n      pubkey: params.payer,\n      isSigner: true,\n      isWritable: true\n    }, {\n      pubkey: SystemProgram.programId,\n      isSigner: false,\n      isWritable: false\n    }];\n    return [new TransactionInstruction({\n      programId: this.programId,\n      keys: keys,\n      data: data\n    }), lookupTableAddress];\n  }\n  static freezeLookupTable(params) {\n    const type = LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable;\n    const data = encodeData(type);\n    const keys = [{\n      pubkey: params.lookupTable,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: params.authority,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new TransactionInstruction({\n      programId: this.programId,\n      keys: keys,\n      data: data\n    });\n  }\n  static extendLookupTable(params) {\n    const type = LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable;\n    const data = encodeData(type, {\n      addresses: params.addresses.map(addr => addr.toBytes())\n    });\n    const keys = [{\n      pubkey: params.lookupTable,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: params.authority,\n      isSigner: true,\n      isWritable: false\n    }];\n    if (params.payer) {\n      keys.push({\n        pubkey: params.payer,\n        isSigner: true,\n        isWritable: true\n      }, {\n        pubkey: SystemProgram.programId,\n        isSigner: false,\n        isWritable: false\n      });\n    }\n    return new TransactionInstruction({\n      programId: this.programId,\n      keys: keys,\n      data: data\n    });\n  }\n  static deactivateLookupTable(params) {\n    const type = LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable;\n    const data = encodeData(type);\n    const keys = [{\n      pubkey: params.lookupTable,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: params.authority,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new TransactionInstruction({\n      programId: this.programId,\n      keys: keys,\n      data: data\n    });\n  }\n  static closeLookupTable(params) {\n    const type = LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable;\n    const data = encodeData(type);\n    const keys = [{\n      pubkey: params.lookupTable,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: params.authority,\n      isSigner: true,\n      isWritable: false\n    }, {\n      pubkey: params.recipient,\n      isSigner: false,\n      isWritable: true\n    }];\n    return new TransactionInstruction({\n      programId: this.programId,\n      keys: keys,\n      data: data\n    });\n  }\n}\nAddressLookupTableProgram.programId = new PublicKey('AddressLookupTab1e1111111111111111111111111');\n\n/**\n * Compute Budget Instruction class\n */\nclass ComputeBudgetInstruction {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Decode a compute budget instruction and retrieve the instruction type.\n   */\n  static decodeInstructionType(instruction) {\n    this.checkProgramId(instruction.programId);\n    const instructionTypeLayout = BufferLayout.u8('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const [ixType, layout] of Object.entries(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS)) {\n      if (layout.index == typeIndex) {\n        type = ixType;\n        break;\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a ComputeBudgetInstruction');\n    }\n    return type;\n  }\n\n  /**\n   * Decode request units compute budget instruction and retrieve the instruction params.\n   */\n  static decodeRequestUnits(instruction) {\n    this.checkProgramId(instruction.programId);\n    const {\n      units,\n      additionalFee\n    } = decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits, instruction.data);\n    return {\n      units,\n      additionalFee\n    };\n  }\n\n  /**\n   * Decode request heap frame compute budget instruction and retrieve the instruction params.\n   */\n  static decodeRequestHeapFrame(instruction) {\n    this.checkProgramId(instruction.programId);\n    const {\n      bytes\n    } = decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame, instruction.data);\n    return {\n      bytes\n    };\n  }\n\n  /**\n   * Decode set compute unit limit compute budget instruction and retrieve the instruction params.\n   */\n  static decodeSetComputeUnitLimit(instruction) {\n    this.checkProgramId(instruction.programId);\n    const {\n      units\n    } = decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit, instruction.data);\n    return {\n      units\n    };\n  }\n\n  /**\n   * Decode set compute unit price compute budget instruction and retrieve the instruction params.\n   */\n  static decodeSetComputeUnitPrice(instruction) {\n    this.checkProgramId(instruction.programId);\n    const {\n      microLamports\n    } = decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice, instruction.data);\n    return {\n      microLamports\n    };\n  }\n\n  /**\n   * @internal\n   */\n  static checkProgramId(programId) {\n    if (!programId.equals(ComputeBudgetProgram.programId)) {\n      throw new Error('invalid instruction; programId is not ComputeBudgetProgram');\n    }\n  }\n}\n\n/**\n * An enumeration of valid ComputeBudgetInstructionType's\n */\n\n/**\n * Request units instruction params\n */\n\n/**\n * Request heap frame instruction params\n */\n\n/**\n * Set compute unit limit instruction params\n */\n\n/**\n * Set compute unit price instruction params\n */\n\n/**\n * An enumeration of valid ComputeBudget InstructionType's\n * @internal\n */\nconst COMPUTE_BUDGET_INSTRUCTION_LAYOUTS = Object.freeze({\n  RequestUnits: {\n    index: 0,\n    layout: BufferLayout.struct([BufferLayout.u8('instruction'), BufferLayout.u32('units'), BufferLayout.u32('additionalFee')])\n  },\n  RequestHeapFrame: {\n    index: 1,\n    layout: BufferLayout.struct([BufferLayout.u8('instruction'), BufferLayout.u32('bytes')])\n  },\n  SetComputeUnitLimit: {\n    index: 2,\n    layout: BufferLayout.struct([BufferLayout.u8('instruction'), BufferLayout.u32('units')])\n  },\n  SetComputeUnitPrice: {\n    index: 3,\n    layout: BufferLayout.struct([BufferLayout.u8('instruction'), u64('microLamports')])\n  }\n});\n\n/**\n * Factory class for transaction instructions to interact with the Compute Budget program\n */\nclass ComputeBudgetProgram {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the Compute Budget program\n   */\n\n  /**\n   * @deprecated Instead, call {@link setComputeUnitLimit} and/or {@link setComputeUnitPrice}\n   */\n  static requestUnits(params) {\n    const type = COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits;\n    const data = encodeData(type, params);\n    return new TransactionInstruction({\n      keys: [],\n      programId: this.programId,\n      data\n    });\n  }\n  static requestHeapFrame(params) {\n    const type = COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame;\n    const data = encodeData(type, params);\n    return new TransactionInstruction({\n      keys: [],\n      programId: this.programId,\n      data\n    });\n  }\n  static setComputeUnitLimit(params) {\n    const type = COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit;\n    const data = encodeData(type, params);\n    return new TransactionInstruction({\n      keys: [],\n      programId: this.programId,\n      data\n    });\n  }\n  static setComputeUnitPrice(params) {\n    const type = COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice;\n    const data = encodeData(type, {\n      microLamports: BigInt(params.microLamports)\n    });\n    return new TransactionInstruction({\n      keys: [],\n      programId: this.programId,\n      data\n    });\n  }\n}\nComputeBudgetProgram.programId = new PublicKey('ComputeBudget111111111111111111111111111111');\n\nconst PRIVATE_KEY_BYTES$1 = 64;\nconst PUBLIC_KEY_BYTES$1 = 32;\nconst SIGNATURE_BYTES = 64;\n\n/**\n * Params for creating an ed25519 instruction using a public key\n */\n\n/**\n * Params for creating an ed25519 instruction using a private key\n */\n\nconst ED25519_INSTRUCTION_LAYOUT = BufferLayout.struct([BufferLayout.u8('numSignatures'), BufferLayout.u8('padding'), BufferLayout.u16('signatureOffset'), BufferLayout.u16('signatureInstructionIndex'), BufferLayout.u16('publicKeyOffset'), BufferLayout.u16('publicKeyInstructionIndex'), BufferLayout.u16('messageDataOffset'), BufferLayout.u16('messageDataSize'), BufferLayout.u16('messageInstructionIndex')]);\nclass Ed25519Program {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the ed25519 program\n   */\n\n  /**\n   * Create an ed25519 instruction with a public key and signature. The\n   * public key must be a buffer that is 32 bytes long, and the signature\n   * must be a buffer of 64 bytes.\n   */\n  static createInstructionWithPublicKey(params) {\n    const {\n      publicKey,\n      message,\n      signature,\n      instructionIndex\n    } = params;\n    assert(publicKey.length === PUBLIC_KEY_BYTES$1, `Public Key must be ${PUBLIC_KEY_BYTES$1} bytes but received ${publicKey.length} bytes`);\n    assert(signature.length === SIGNATURE_BYTES, `Signature must be ${SIGNATURE_BYTES} bytes but received ${signature.length} bytes`);\n    const publicKeyOffset = ED25519_INSTRUCTION_LAYOUT.span;\n    const signatureOffset = publicKeyOffset + publicKey.length;\n    const messageDataOffset = signatureOffset + signature.length;\n    const numSignatures = 1;\n    const instructionData = Buffer.alloc(messageDataOffset + message.length);\n    const index = instructionIndex == null ? 0xffff // An index of `u16::MAX` makes it default to the current instruction.\n    : instructionIndex;\n    ED25519_INSTRUCTION_LAYOUT.encode({\n      numSignatures,\n      padding: 0,\n      signatureOffset,\n      signatureInstructionIndex: index,\n      publicKeyOffset,\n      publicKeyInstructionIndex: index,\n      messageDataOffset,\n      messageDataSize: message.length,\n      messageInstructionIndex: index\n    }, instructionData);\n    instructionData.fill(publicKey, publicKeyOffset);\n    instructionData.fill(signature, signatureOffset);\n    instructionData.fill(message, messageDataOffset);\n    return new TransactionInstruction({\n      keys: [],\n      programId: Ed25519Program.programId,\n      data: instructionData\n    });\n  }\n\n  /**\n   * Create an ed25519 instruction with a private key. The private key\n   * must be a buffer that is 64 bytes long.\n   */\n  static createInstructionWithPrivateKey(params) {\n    const {\n      privateKey,\n      message,\n      instructionIndex\n    } = params;\n    assert(privateKey.length === PRIVATE_KEY_BYTES$1, `Private key must be ${PRIVATE_KEY_BYTES$1} bytes but received ${privateKey.length} bytes`);\n    try {\n      const keypair = Keypair.fromSecretKey(privateKey);\n      const publicKey = keypair.publicKey.toBytes();\n      const signature = sign(message, keypair.secretKey);\n      return this.createInstructionWithPublicKey({\n        publicKey,\n        message,\n        signature,\n        instructionIndex\n      });\n    } catch (error) {\n      throw new Error(`Error creating instruction; ${error}`);\n    }\n  }\n}\nEd25519Program.programId = new PublicKey('Ed25519SigVerify111111111111111111111111111');\n\nconst ecdsaSign = (msgHash, privKey) => {\n  const signature = secp256k1.sign(msgHash, privKey);\n  return [signature.toCompactRawBytes(), signature.recovery];\n};\nsecp256k1.utils.isValidPrivateKey;\nconst publicKeyCreate = secp256k1.getPublicKey;\n\nconst PRIVATE_KEY_BYTES = 32;\nconst ETHEREUM_ADDRESS_BYTES = 20;\nconst PUBLIC_KEY_BYTES = 64;\nconst SIGNATURE_OFFSETS_SERIALIZED_SIZE = 11;\n\n/**\n * Params for creating an secp256k1 instruction using a public key\n */\n\n/**\n * Params for creating an secp256k1 instruction using an Ethereum address\n */\n\n/**\n * Params for creating an secp256k1 instruction using a private key\n */\n\nconst SECP256K1_INSTRUCTION_LAYOUT = BufferLayout.struct([BufferLayout.u8('numSignatures'), BufferLayout.u16('signatureOffset'), BufferLayout.u8('signatureInstructionIndex'), BufferLayout.u16('ethAddressOffset'), BufferLayout.u8('ethAddressInstructionIndex'), BufferLayout.u16('messageDataOffset'), BufferLayout.u16('messageDataSize'), BufferLayout.u8('messageInstructionIndex'), BufferLayout.blob(20, 'ethAddress'), BufferLayout.blob(64, 'signature'), BufferLayout.u8('recoveryId')]);\nclass Secp256k1Program {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the secp256k1 program\n   */\n\n  /**\n   * Construct an Ethereum address from a secp256k1 public key buffer.\n   * @param {Buffer} publicKey a 64 byte secp256k1 public key buffer\n   */\n  static publicKeyToEthAddress(publicKey) {\n    assert(publicKey.length === PUBLIC_KEY_BYTES, `Public key must be ${PUBLIC_KEY_BYTES} bytes but received ${publicKey.length} bytes`);\n    try {\n      return Buffer.from(keccak_256(toBuffer(publicKey))).slice(-ETHEREUM_ADDRESS_BYTES);\n    } catch (error) {\n      throw new Error(`Error constructing Ethereum address: ${error}`);\n    }\n  }\n\n  /**\n   * Create an secp256k1 instruction with a public key. The public key\n   * must be a buffer that is 64 bytes long.\n   */\n  static createInstructionWithPublicKey(params) {\n    const {\n      publicKey,\n      message,\n      signature,\n      recoveryId,\n      instructionIndex\n    } = params;\n    return Secp256k1Program.createInstructionWithEthAddress({\n      ethAddress: Secp256k1Program.publicKeyToEthAddress(publicKey),\n      message,\n      signature,\n      recoveryId,\n      instructionIndex\n    });\n  }\n\n  /**\n   * Create an secp256k1 instruction with an Ethereum address. The address\n   * must be a hex string or a buffer that is 20 bytes long.\n   */\n  static createInstructionWithEthAddress(params) {\n    const {\n      ethAddress: rawAddress,\n      message,\n      signature,\n      recoveryId,\n      instructionIndex = 0\n    } = params;\n    let ethAddress;\n    if (typeof rawAddress === 'string') {\n      if (rawAddress.startsWith('0x')) {\n        ethAddress = Buffer.from(rawAddress.substr(2), 'hex');\n      } else {\n        ethAddress = Buffer.from(rawAddress, 'hex');\n      }\n    } else {\n      ethAddress = rawAddress;\n    }\n    assert(ethAddress.length === ETHEREUM_ADDRESS_BYTES, `Address must be ${ETHEREUM_ADDRESS_BYTES} bytes but received ${ethAddress.length} bytes`);\n    const dataStart = 1 + SIGNATURE_OFFSETS_SERIALIZED_SIZE;\n    const ethAddressOffset = dataStart;\n    const signatureOffset = dataStart + ethAddress.length;\n    const messageDataOffset = signatureOffset + signature.length + 1;\n    const numSignatures = 1;\n    const instructionData = Buffer.alloc(SECP256K1_INSTRUCTION_LAYOUT.span + message.length);\n    SECP256K1_INSTRUCTION_LAYOUT.encode({\n      numSignatures,\n      signatureOffset,\n      signatureInstructionIndex: instructionIndex,\n      ethAddressOffset,\n      ethAddressInstructionIndex: instructionIndex,\n      messageDataOffset,\n      messageDataSize: message.length,\n      messageInstructionIndex: instructionIndex,\n      signature: toBuffer(signature),\n      ethAddress: toBuffer(ethAddress),\n      recoveryId\n    }, instructionData);\n    instructionData.fill(toBuffer(message), SECP256K1_INSTRUCTION_LAYOUT.span);\n    return new TransactionInstruction({\n      keys: [],\n      programId: Secp256k1Program.programId,\n      data: instructionData\n    });\n  }\n\n  /**\n   * Create an secp256k1 instruction with a private key. The private key\n   * must be a buffer that is 32 bytes long.\n   */\n  static createInstructionWithPrivateKey(params) {\n    const {\n      privateKey: pkey,\n      message,\n      instructionIndex\n    } = params;\n    assert(pkey.length === PRIVATE_KEY_BYTES, `Private key must be ${PRIVATE_KEY_BYTES} bytes but received ${pkey.length} bytes`);\n    try {\n      const privateKey = toBuffer(pkey);\n      const publicKey = publicKeyCreate(privateKey, false /* isCompressed */).slice(1); // throw away leading byte\n      const messageHash = Buffer.from(keccak_256(toBuffer(message)));\n      const [signature, recoveryId] = ecdsaSign(messageHash, privateKey);\n      return this.createInstructionWithPublicKey({\n        publicKey,\n        message,\n        signature,\n        recoveryId,\n        instructionIndex\n      });\n    } catch (error) {\n      throw new Error(`Error creating instruction; ${error}`);\n    }\n  }\n}\nSecp256k1Program.programId = new PublicKey('KeccakSecp256k11111111111111111111111111111');\n\nvar _Lockup;\n\n/**\n * Address of the stake config account which configures the rate\n * of stake warmup and cooldown as well as the slashing penalty.\n */\nconst STAKE_CONFIG_ID = new PublicKey('StakeConfig11111111111111111111111111111111');\n\n/**\n * Stake account authority info\n */\nclass Authorized {\n  /**\n   * Create a new Authorized object\n   * @param staker the stake authority\n   * @param withdrawer the withdraw authority\n   */\n  constructor(staker, withdrawer) {\n    /** stake authority */\n    this.staker = void 0;\n    /** withdraw authority */\n    this.withdrawer = void 0;\n    this.staker = staker;\n    this.withdrawer = withdrawer;\n  }\n}\n/**\n * Stake account lockup info\n */\nclass Lockup {\n  /**\n   * Create a new Lockup object\n   */\n  constructor(unixTimestamp, epoch, custodian) {\n    /** Unix timestamp of lockup expiration */\n    this.unixTimestamp = void 0;\n    /** Epoch of lockup expiration */\n    this.epoch = void 0;\n    /** Lockup custodian authority */\n    this.custodian = void 0;\n    this.unixTimestamp = unixTimestamp;\n    this.epoch = epoch;\n    this.custodian = custodian;\n  }\n\n  /**\n   * Default, inactive Lockup value\n   */\n}\n_Lockup = Lockup;\nLockup.default = new _Lockup(0, 0, PublicKey.default);\n/**\n * Create stake account transaction params\n */\n/**\n * Create stake account with seed transaction params\n */\n/**\n * Initialize stake instruction params\n */\n/**\n * Delegate stake instruction params\n */\n/**\n * Authorize stake instruction params\n */\n/**\n * Authorize stake instruction params using a derived key\n */\n/**\n * Split stake instruction params\n */\n/**\n * Split with seed transaction params\n */\n/**\n * Withdraw stake instruction params\n */\n/**\n * Deactivate stake instruction params\n */\n/**\n * Merge stake instruction params\n */\n/**\n * Stake Instruction class\n */\nclass StakeInstruction {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Decode a stake instruction and retrieve the instruction type.\n   */\n  static decodeInstructionType(instruction) {\n    this.checkProgramId(instruction.programId);\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const [ixType, layout] of Object.entries(STAKE_INSTRUCTION_LAYOUTS)) {\n      if (layout.index == typeIndex) {\n        type = ixType;\n        break;\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a StakeInstruction');\n    }\n    return type;\n  }\n\n  /**\n   * Decode a initialize stake instruction and retrieve the instruction params.\n   */\n  static decodeInitialize(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      authorized,\n      lockup\n    } = decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Initialize, instruction.data);\n    return {\n      stakePubkey: instruction.keys[0].pubkey,\n      authorized: new Authorized(new PublicKey(authorized.staker), new PublicKey(authorized.withdrawer)),\n      lockup: new Lockup(lockup.unixTimestamp, lockup.epoch, new PublicKey(lockup.custodian))\n    };\n  }\n\n  /**\n   * Decode a delegate stake instruction and retrieve the instruction params.\n   */\n  static decodeDelegate(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 6);\n    decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Delegate, instruction.data);\n    return {\n      stakePubkey: instruction.keys[0].pubkey,\n      votePubkey: instruction.keys[1].pubkey,\n      authorizedPubkey: instruction.keys[5].pubkey\n    };\n  }\n\n  /**\n   * Decode an authorize stake instruction and retrieve the instruction params.\n   */\n  static decodeAuthorize(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      newAuthorized,\n      stakeAuthorizationType\n    } = decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Authorize, instruction.data);\n    const o = {\n      stakePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: instruction.keys[2].pubkey,\n      newAuthorizedPubkey: new PublicKey(newAuthorized),\n      stakeAuthorizationType: {\n        index: stakeAuthorizationType\n      }\n    };\n    if (instruction.keys.length > 3) {\n      o.custodianPubkey = instruction.keys[3].pubkey;\n    }\n    return o;\n  }\n\n  /**\n   * Decode an authorize-with-seed stake instruction and retrieve the instruction params.\n   */\n  static decodeAuthorizeWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 2);\n    const {\n      newAuthorized,\n      stakeAuthorizationType,\n      authoritySeed,\n      authorityOwner\n    } = decodeData$1(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed, instruction.data);\n    const o = {\n      stakePubkey: instruction.keys[0].pubkey,\n      authorityBase: instruction.keys[1].pubkey,\n      authoritySeed: authoritySeed,\n      authorityOwner: new PublicKey(authorityOwner),\n      newAuthorizedPubkey: new PublicKey(newAuthorized),\n      stakeAuthorizationType: {\n        index: stakeAuthorizationType\n      }\n    };\n    if (instruction.keys.length > 3) {\n      o.custodianPubkey = instruction.keys[3].pubkey;\n    }\n    return o;\n  }\n\n  /**\n   * Decode a split stake instruction and retrieve the instruction params.\n   */\n  static decodeSplit(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      lamports\n    } = decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Split, instruction.data);\n    return {\n      stakePubkey: instruction.keys[0].pubkey,\n      splitStakePubkey: instruction.keys[1].pubkey,\n      authorizedPubkey: instruction.keys[2].pubkey,\n      lamports\n    };\n  }\n\n  /**\n   * Decode a merge stake instruction and retrieve the instruction params.\n   */\n  static decodeMerge(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Merge, instruction.data);\n    return {\n      stakePubkey: instruction.keys[0].pubkey,\n      sourceStakePubKey: instruction.keys[1].pubkey,\n      authorizedPubkey: instruction.keys[4].pubkey\n    };\n  }\n\n  /**\n   * Decode a withdraw stake instruction and retrieve the instruction params.\n   */\n  static decodeWithdraw(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 5);\n    const {\n      lamports\n    } = decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Withdraw, instruction.data);\n    const o = {\n      stakePubkey: instruction.keys[0].pubkey,\n      toPubkey: instruction.keys[1].pubkey,\n      authorizedPubkey: instruction.keys[4].pubkey,\n      lamports\n    };\n    if (instruction.keys.length > 5) {\n      o.custodianPubkey = instruction.keys[5].pubkey;\n    }\n    return o;\n  }\n\n  /**\n   * Decode a deactivate stake instruction and retrieve the instruction params.\n   */\n  static decodeDeactivate(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Deactivate, instruction.data);\n    return {\n      stakePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: instruction.keys[2].pubkey\n    };\n  }\n\n  /**\n   * @internal\n   */\n  static checkProgramId(programId) {\n    if (!programId.equals(StakeProgram.programId)) {\n      throw new Error('invalid instruction; programId is not StakeProgram');\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static checkKeyLength(keys, expectedLength) {\n    if (keys.length < expectedLength) {\n      throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`);\n    }\n  }\n}\n\n/**\n * An enumeration of valid StakeInstructionType's\n */\n\n/**\n * An enumeration of valid stake InstructionType's\n * @internal\n */\nconst STAKE_INSTRUCTION_LAYOUTS = Object.freeze({\n  Initialize: {\n    index: 0,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), authorized(), lockup()])\n  },\n  Authorize: {\n    index: 1,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('newAuthorized'), BufferLayout.u32('stakeAuthorizationType')])\n  },\n  Delegate: {\n    index: 2,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  Split: {\n    index: 3,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('lamports')])\n  },\n  Withdraw: {\n    index: 4,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('lamports')])\n  },\n  Deactivate: {\n    index: 5,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  Merge: {\n    index: 7,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  AuthorizeWithSeed: {\n    index: 8,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('newAuthorized'), BufferLayout.u32('stakeAuthorizationType'), rustString('authoritySeed'), publicKey('authorityOwner')])\n  }\n});\n\n/**\n * Stake authorization type\n */\n\n/**\n * An enumeration of valid StakeAuthorizationLayout's\n */\nconst StakeAuthorizationLayout = Object.freeze({\n  Staker: {\n    index: 0\n  },\n  Withdrawer: {\n    index: 1\n  }\n});\n\n/**\n * Factory class for transactions to interact with the Stake program\n */\nclass StakeProgram {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the Stake program\n   */\n\n  /**\n   * Generate an Initialize instruction to add to a Stake Create transaction\n   */\n  static initialize(params) {\n    const {\n      stakePubkey,\n      authorized,\n      lockup: maybeLockup\n    } = params;\n    const lockup = maybeLockup || Lockup.default;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Initialize;\n    const data = encodeData(type, {\n      authorized: {\n        staker: toBuffer(authorized.staker.toBuffer()),\n        withdrawer: toBuffer(authorized.withdrawer.toBuffer())\n      },\n      lockup: {\n        unixTimestamp: lockup.unixTimestamp,\n        epoch: lockup.epoch,\n        custodian: toBuffer(lockup.custodian.toBuffer())\n      }\n    });\n    const instructionData = {\n      keys: [{\n        pubkey: stakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_RENT_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate a Transaction that creates a new Stake account at\n   *   an address generated with `from`, a seed, and the Stake programId\n   */\n  static createAccountWithSeed(params) {\n    const transaction = new Transaction();\n    transaction.add(SystemProgram.createAccountWithSeed({\n      fromPubkey: params.fromPubkey,\n      newAccountPubkey: params.stakePubkey,\n      basePubkey: params.basePubkey,\n      seed: params.seed,\n      lamports: params.lamports,\n      space: this.space,\n      programId: this.programId\n    }));\n    const {\n      stakePubkey,\n      authorized,\n      lockup\n    } = params;\n    return transaction.add(this.initialize({\n      stakePubkey,\n      authorized,\n      lockup\n    }));\n  }\n\n  /**\n   * Generate a Transaction that creates a new Stake account\n   */\n  static createAccount(params) {\n    const transaction = new Transaction();\n    transaction.add(SystemProgram.createAccount({\n      fromPubkey: params.fromPubkey,\n      newAccountPubkey: params.stakePubkey,\n      lamports: params.lamports,\n      space: this.space,\n      programId: this.programId\n    }));\n    const {\n      stakePubkey,\n      authorized,\n      lockup\n    } = params;\n    return transaction.add(this.initialize({\n      stakePubkey,\n      authorized,\n      lockup\n    }));\n  }\n\n  /**\n   * Generate a Transaction that delegates Stake tokens to a validator\n   * Vote PublicKey. This transaction can also be used to redelegate Stake\n   * to a new validator Vote PublicKey.\n   */\n  static delegate(params) {\n    const {\n      stakePubkey,\n      authorizedPubkey,\n      votePubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Delegate;\n    const data = encodeData(type);\n    return new Transaction().add({\n      keys: [{\n        pubkey: stakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: votePubkey,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_CLOCK_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_STAKE_HISTORY_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: STAKE_CONFIG_ID,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a Transaction that authorizes a new PublicKey as Staker\n   * or Withdrawer on the Stake account.\n   */\n  static authorize(params) {\n    const {\n      stakePubkey,\n      authorizedPubkey,\n      newAuthorizedPubkey,\n      stakeAuthorizationType,\n      custodianPubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Authorize;\n    const data = encodeData(type, {\n      newAuthorized: toBuffer(newAuthorizedPubkey.toBuffer()),\n      stakeAuthorizationType: stakeAuthorizationType.index\n    });\n    const keys = [{\n      pubkey: stakePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: SYSVAR_CLOCK_PUBKEY,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: authorizedPubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    if (custodianPubkey) {\n      keys.push({\n        pubkey: custodianPubkey,\n        isSigner: true,\n        isWritable: false\n      });\n    }\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a Transaction that authorizes a new PublicKey as Staker\n   * or Withdrawer on the Stake account.\n   */\n  static authorizeWithSeed(params) {\n    const {\n      stakePubkey,\n      authorityBase,\n      authoritySeed,\n      authorityOwner,\n      newAuthorizedPubkey,\n      stakeAuthorizationType,\n      custodianPubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed;\n    const data = encodeData(type, {\n      newAuthorized: toBuffer(newAuthorizedPubkey.toBuffer()),\n      stakeAuthorizationType: stakeAuthorizationType.index,\n      authoritySeed: authoritySeed,\n      authorityOwner: toBuffer(authorityOwner.toBuffer())\n    });\n    const keys = [{\n      pubkey: stakePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: authorityBase,\n      isSigner: true,\n      isWritable: false\n    }, {\n      pubkey: SYSVAR_CLOCK_PUBKEY,\n      isSigner: false,\n      isWritable: false\n    }];\n    if (custodianPubkey) {\n      keys.push({\n        pubkey: custodianPubkey,\n        isSigner: true,\n        isWritable: false\n      });\n    }\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * @internal\n   */\n  static splitInstruction(params) {\n    const {\n      stakePubkey,\n      authorizedPubkey,\n      splitStakePubkey,\n      lamports\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Split;\n    const data = encodeData(type, {\n      lamports\n    });\n    return new TransactionInstruction({\n      keys: [{\n        pubkey: stakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: splitStakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a Transaction that splits Stake tokens into another stake account\n   */\n  static split(params,\n  // Compute the cost of allocating the new stake account in lamports\n  rentExemptReserve) {\n    const transaction = new Transaction();\n    transaction.add(SystemProgram.createAccount({\n      fromPubkey: params.authorizedPubkey,\n      newAccountPubkey: params.splitStakePubkey,\n      lamports: rentExemptReserve,\n      space: this.space,\n      programId: this.programId\n    }));\n    return transaction.add(this.splitInstruction(params));\n  }\n\n  /**\n   * Generate a Transaction that splits Stake tokens into another account\n   * derived from a base public key and seed\n   */\n  static splitWithSeed(params,\n  // If this stake account is new, compute the cost of allocating it in lamports\n  rentExemptReserve) {\n    const {\n      stakePubkey,\n      authorizedPubkey,\n      splitStakePubkey,\n      basePubkey,\n      seed,\n      lamports\n    } = params;\n    const transaction = new Transaction();\n    transaction.add(SystemProgram.allocate({\n      accountPubkey: splitStakePubkey,\n      basePubkey,\n      seed,\n      space: this.space,\n      programId: this.programId\n    }));\n    if (rentExemptReserve && rentExemptReserve > 0) {\n      transaction.add(SystemProgram.transfer({\n        fromPubkey: params.authorizedPubkey,\n        toPubkey: splitStakePubkey,\n        lamports: rentExemptReserve\n      }));\n    }\n    return transaction.add(this.splitInstruction({\n      stakePubkey,\n      authorizedPubkey,\n      splitStakePubkey,\n      lamports\n    }));\n  }\n\n  /**\n   * Generate a Transaction that merges Stake accounts.\n   */\n  static merge(params) {\n    const {\n      stakePubkey,\n      sourceStakePubKey,\n      authorizedPubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Merge;\n    const data = encodeData(type);\n    return new Transaction().add({\n      keys: [{\n        pubkey: stakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: sourceStakePubKey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_CLOCK_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_STAKE_HISTORY_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a Transaction that withdraws deactivated Stake tokens.\n   */\n  static withdraw(params) {\n    const {\n      stakePubkey,\n      authorizedPubkey,\n      toPubkey,\n      lamports,\n      custodianPubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Withdraw;\n    const data = encodeData(type, {\n      lamports\n    });\n    const keys = [{\n      pubkey: stakePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: toPubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: SYSVAR_CLOCK_PUBKEY,\n      isSigner: false,\n      isWritable: false\n    }, {\n      pubkey: SYSVAR_STAKE_HISTORY_PUBKEY,\n      isSigner: false,\n      isWritable: false\n    }, {\n      pubkey: authorizedPubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    if (custodianPubkey) {\n      keys.push({\n        pubkey: custodianPubkey,\n        isSigner: true,\n        isWritable: false\n      });\n    }\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a Transaction that deactivates Stake tokens.\n   */\n  static deactivate(params) {\n    const {\n      stakePubkey,\n      authorizedPubkey\n    } = params;\n    const type = STAKE_INSTRUCTION_LAYOUTS.Deactivate;\n    const data = encodeData(type);\n    return new Transaction().add({\n      keys: [{\n        pubkey: stakePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_CLOCK_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: authorizedPubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    });\n  }\n}\nStakeProgram.programId = new PublicKey('Stake11111111111111111111111111111111111111');\n/**\n * Max space of a Stake account\n *\n * This is generated from the solana-stake-program StakeState struct as\n * `StakeStateV2::size_of()`:\n * https://docs.rs/solana-stake-program/latest/solana_stake_program/stake_state/enum.StakeStateV2.html\n */\nStakeProgram.space = 200;\n\n/**\n * Vote account info\n */\nclass VoteInit {\n  /** [0, 100] */\n\n  constructor(nodePubkey, authorizedVoter, authorizedWithdrawer, commission) {\n    this.nodePubkey = void 0;\n    this.authorizedVoter = void 0;\n    this.authorizedWithdrawer = void 0;\n    this.commission = void 0;\n    this.nodePubkey = nodePubkey;\n    this.authorizedVoter = authorizedVoter;\n    this.authorizedWithdrawer = authorizedWithdrawer;\n    this.commission = commission;\n  }\n}\n\n/**\n * Create vote account transaction params\n */\n\n/**\n * InitializeAccount instruction params\n */\n\n/**\n * Authorize instruction params\n */\n\n/**\n * AuthorizeWithSeed instruction params\n */\n\n/**\n * Withdraw from vote account transaction params\n */\n\n/**\n * Update validator identity (node pubkey) vote account instruction params.\n */\n\n/**\n * Vote Instruction class\n */\nclass VoteInstruction {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Decode a vote instruction and retrieve the instruction type.\n   */\n  static decodeInstructionType(instruction) {\n    this.checkProgramId(instruction.programId);\n    const instructionTypeLayout = BufferLayout.u32('instruction');\n    const typeIndex = instructionTypeLayout.decode(instruction.data);\n    let type;\n    for (const [ixType, layout] of Object.entries(VOTE_INSTRUCTION_LAYOUTS)) {\n      if (layout.index == typeIndex) {\n        type = ixType;\n        break;\n      }\n    }\n    if (!type) {\n      throw new Error('Instruction type incorrect; not a VoteInstruction');\n    }\n    return type;\n  }\n\n  /**\n   * Decode an initialize vote instruction and retrieve the instruction params.\n   */\n  static decodeInitializeAccount(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 4);\n    const {\n      voteInit\n    } = decodeData$1(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount, instruction.data);\n    return {\n      votePubkey: instruction.keys[0].pubkey,\n      nodePubkey: instruction.keys[3].pubkey,\n      voteInit: new VoteInit(new PublicKey(voteInit.nodePubkey), new PublicKey(voteInit.authorizedVoter), new PublicKey(voteInit.authorizedWithdrawer), voteInit.commission)\n    };\n  }\n\n  /**\n   * Decode an authorize instruction and retrieve the instruction params.\n   */\n  static decodeAuthorize(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      newAuthorized,\n      voteAuthorizationType\n    } = decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Authorize, instruction.data);\n    return {\n      votePubkey: instruction.keys[0].pubkey,\n      authorizedPubkey: instruction.keys[2].pubkey,\n      newAuthorizedPubkey: new PublicKey(newAuthorized),\n      voteAuthorizationType: {\n        index: voteAuthorizationType\n      }\n    };\n  }\n\n  /**\n   * Decode an authorize instruction and retrieve the instruction params.\n   */\n  static decodeAuthorizeWithSeed(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      voteAuthorizeWithSeedArgs: {\n        currentAuthorityDerivedKeyOwnerPubkey,\n        currentAuthorityDerivedKeySeed,\n        newAuthorized,\n        voteAuthorizationType\n      }\n    } = decodeData$1(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed, instruction.data);\n    return {\n      currentAuthorityDerivedKeyBasePubkey: instruction.keys[2].pubkey,\n      currentAuthorityDerivedKeyOwnerPubkey: new PublicKey(currentAuthorityDerivedKeyOwnerPubkey),\n      currentAuthorityDerivedKeySeed: currentAuthorityDerivedKeySeed,\n      newAuthorizedPubkey: new PublicKey(newAuthorized),\n      voteAuthorizationType: {\n        index: voteAuthorizationType\n      },\n      votePubkey: instruction.keys[0].pubkey\n    };\n  }\n\n  /**\n   * Decode a withdraw instruction and retrieve the instruction params.\n   */\n  static decodeWithdraw(instruction) {\n    this.checkProgramId(instruction.programId);\n    this.checkKeyLength(instruction.keys, 3);\n    const {\n      lamports\n    } = decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Withdraw, instruction.data);\n    return {\n      votePubkey: instruction.keys[0].pubkey,\n      authorizedWithdrawerPubkey: instruction.keys[2].pubkey,\n      lamports,\n      toPubkey: instruction.keys[1].pubkey\n    };\n  }\n\n  /**\n   * @internal\n   */\n  static checkProgramId(programId) {\n    if (!programId.equals(VoteProgram.programId)) {\n      throw new Error('invalid instruction; programId is not VoteProgram');\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static checkKeyLength(keys, expectedLength) {\n    if (keys.length < expectedLength) {\n      throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`);\n    }\n  }\n}\n\n/**\n * An enumeration of valid VoteInstructionType's\n */\n\n/** @internal */\n\nconst VOTE_INSTRUCTION_LAYOUTS = Object.freeze({\n  InitializeAccount: {\n    index: 0,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), voteInit()])\n  },\n  Authorize: {\n    index: 1,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), publicKey('newAuthorized'), BufferLayout.u32('voteAuthorizationType')])\n  },\n  Withdraw: {\n    index: 3,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), BufferLayout.ns64('lamports')])\n  },\n  UpdateValidatorIdentity: {\n    index: 4,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction')])\n  },\n  AuthorizeWithSeed: {\n    index: 10,\n    layout: BufferLayout.struct([BufferLayout.u32('instruction'), voteAuthorizeWithSeedArgs()])\n  }\n});\n\n/**\n * VoteAuthorize type\n */\n\n/**\n * An enumeration of valid VoteAuthorization layouts.\n */\nconst VoteAuthorizationLayout = Object.freeze({\n  Voter: {\n    index: 0\n  },\n  Withdrawer: {\n    index: 1\n  }\n});\n\n/**\n * Factory class for transactions to interact with the Vote program\n */\nclass VoteProgram {\n  /**\n   * @internal\n   */\n  constructor() {}\n\n  /**\n   * Public key that identifies the Vote program\n   */\n\n  /**\n   * Generate an Initialize instruction.\n   */\n  static initializeAccount(params) {\n    const {\n      votePubkey,\n      nodePubkey,\n      voteInit\n    } = params;\n    const type = VOTE_INSTRUCTION_LAYOUTS.InitializeAccount;\n    const data = encodeData(type, {\n      voteInit: {\n        nodePubkey: toBuffer(voteInit.nodePubkey.toBuffer()),\n        authorizedVoter: toBuffer(voteInit.authorizedVoter.toBuffer()),\n        authorizedWithdrawer: toBuffer(voteInit.authorizedWithdrawer.toBuffer()),\n        commission: voteInit.commission\n      }\n    });\n    const instructionData = {\n      keys: [{\n        pubkey: votePubkey,\n        isSigner: false,\n        isWritable: true\n      }, {\n        pubkey: SYSVAR_RENT_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: SYSVAR_CLOCK_PUBKEY,\n        isSigner: false,\n        isWritable: false\n      }, {\n        pubkey: nodePubkey,\n        isSigner: true,\n        isWritable: false\n      }],\n      programId: this.programId,\n      data\n    };\n    return new TransactionInstruction(instructionData);\n  }\n\n  /**\n   * Generate a transaction that creates a new Vote account.\n   */\n  static createAccount(params) {\n    const transaction = new Transaction();\n    transaction.add(SystemProgram.createAccount({\n      fromPubkey: params.fromPubkey,\n      newAccountPubkey: params.votePubkey,\n      lamports: params.lamports,\n      space: this.space,\n      programId: this.programId\n    }));\n    return transaction.add(this.initializeAccount({\n      votePubkey: params.votePubkey,\n      nodePubkey: params.voteInit.nodePubkey,\n      voteInit: params.voteInit\n    }));\n  }\n\n  /**\n   * Generate a transaction that authorizes a new Voter or Withdrawer on the Vote account.\n   */\n  static authorize(params) {\n    const {\n      votePubkey,\n      authorizedPubkey,\n      newAuthorizedPubkey,\n      voteAuthorizationType\n    } = params;\n    const type = VOTE_INSTRUCTION_LAYOUTS.Authorize;\n    const data = encodeData(type, {\n      newAuthorized: toBuffer(newAuthorizedPubkey.toBuffer()),\n      voteAuthorizationType: voteAuthorizationType.index\n    });\n    const keys = [{\n      pubkey: votePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: SYSVAR_CLOCK_PUBKEY,\n      isSigner: false,\n      isWritable: false\n    }, {\n      pubkey: authorizedPubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction that authorizes a new Voter or Withdrawer on the Vote account\n   * where the current Voter or Withdrawer authority is a derived key.\n   */\n  static authorizeWithSeed(params) {\n    const {\n      currentAuthorityDerivedKeyBasePubkey,\n      currentAuthorityDerivedKeyOwnerPubkey,\n      currentAuthorityDerivedKeySeed,\n      newAuthorizedPubkey,\n      voteAuthorizationType,\n      votePubkey\n    } = params;\n    const type = VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed;\n    const data = encodeData(type, {\n      voteAuthorizeWithSeedArgs: {\n        currentAuthorityDerivedKeyOwnerPubkey: toBuffer(currentAuthorityDerivedKeyOwnerPubkey.toBuffer()),\n        currentAuthorityDerivedKeySeed: currentAuthorityDerivedKeySeed,\n        newAuthorized: toBuffer(newAuthorizedPubkey.toBuffer()),\n        voteAuthorizationType: voteAuthorizationType.index\n      }\n    });\n    const keys = [{\n      pubkey: votePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: SYSVAR_CLOCK_PUBKEY,\n      isSigner: false,\n      isWritable: false\n    }, {\n      pubkey: currentAuthorityDerivedKeyBasePubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction to withdraw from a Vote account.\n   */\n  static withdraw(params) {\n    const {\n      votePubkey,\n      authorizedWithdrawerPubkey,\n      lamports,\n      toPubkey\n    } = params;\n    const type = VOTE_INSTRUCTION_LAYOUTS.Withdraw;\n    const data = encodeData(type, {\n      lamports\n    });\n    const keys = [{\n      pubkey: votePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: toPubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: authorizedWithdrawerPubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n\n  /**\n   * Generate a transaction to withdraw safely from a Vote account.\n   *\n   * This function was created as a safeguard for vote accounts running validators, `safeWithdraw`\n   * checks that the withdraw amount will not exceed the specified balance while leaving enough left\n   * to cover rent. If you wish to close the vote account by withdrawing the full amount, call the\n   * `withdraw` method directly.\n   */\n  static safeWithdraw(params, currentVoteAccountBalance, rentExemptMinimum) {\n    if (params.lamports > currentVoteAccountBalance - rentExemptMinimum) {\n      throw new Error('Withdraw will leave vote account with insufficient funds.');\n    }\n    return VoteProgram.withdraw(params);\n  }\n\n  /**\n   * Generate a transaction to update the validator identity (node pubkey) of a Vote account.\n   */\n  static updateValidatorIdentity(params) {\n    const {\n      votePubkey,\n      authorizedWithdrawerPubkey,\n      nodePubkey\n    } = params;\n    const type = VOTE_INSTRUCTION_LAYOUTS.UpdateValidatorIdentity;\n    const data = encodeData(type);\n    const keys = [{\n      pubkey: votePubkey,\n      isSigner: false,\n      isWritable: true\n    }, {\n      pubkey: nodePubkey,\n      isSigner: true,\n      isWritable: false\n    }, {\n      pubkey: authorizedWithdrawerPubkey,\n      isSigner: true,\n      isWritable: false\n    }];\n    return new Transaction().add({\n      keys,\n      programId: this.programId,\n      data\n    });\n  }\n}\nVoteProgram.programId = new PublicKey('Vote111111111111111111111111111111111111111');\n/**\n * Max space of a Vote account\n *\n * This is generated from the solana-vote-program VoteState struct as\n * `VoteState::size_of()`:\n * https://docs.rs/solana-vote-program/1.9.5/solana_vote_program/vote_state/struct.VoteState.html#method.size_of\n *\n * KEEP IN SYNC WITH `VoteState::size_of()` in https://github.com/solana-labs/solana/blob/a474cb24b9238f5edcc982f65c0b37d4a1046f7e/sdk/program/src/vote/state/mod.rs#L340-L342\n */\nVoteProgram.space = 3762;\n\nconst VALIDATOR_INFO_KEY = new PublicKey('Va1idator1nfo111111111111111111111111111111');\n\n/**\n * @internal\n */\n\n/**\n * Info used to identity validators.\n */\n\nconst InfoString = type({\n  name: string(),\n  website: optional(string()),\n  details: optional(string()),\n  iconUrl: optional(string()),\n  keybaseUsername: optional(string())\n});\n\n/**\n * ValidatorInfo class\n */\nclass ValidatorInfo {\n  /**\n   * Construct a valid ValidatorInfo\n   *\n   * @param key validator public key\n   * @param info validator information\n   */\n  constructor(key, info) {\n    /**\n     * validator public key\n     */\n    this.key = void 0;\n    /**\n     * validator information\n     */\n    this.info = void 0;\n    this.key = key;\n    this.info = info;\n  }\n\n  /**\n   * Deserialize ValidatorInfo from the config account data. Exactly two config\n   * keys are required in the data.\n   *\n   * @param buffer config account data\n   * @return null if info was not found\n   */\n  static fromConfigData(buffer) {\n    let byteArray = [...buffer];\n    const configKeyCount = decodeLength(byteArray);\n    if (configKeyCount !== 2) return null;\n    const configKeys = [];\n    for (let i = 0; i < 2; i++) {\n      const publicKey = new PublicKey(guardedSplice(byteArray, 0, PUBLIC_KEY_LENGTH));\n      const isSigner = guardedShift(byteArray) === 1;\n      configKeys.push({\n        publicKey,\n        isSigner\n      });\n    }\n    if (configKeys[0].publicKey.equals(VALIDATOR_INFO_KEY)) {\n      if (configKeys[1].isSigner) {\n        const rawInfo = rustString().decode(Buffer.from(byteArray));\n        const info = JSON.parse(rawInfo);\n        assert$1(info, InfoString);\n        return new ValidatorInfo(configKeys[1].publicKey, info);\n      }\n    }\n    return null;\n  }\n}\n\nconst VOTE_PROGRAM_ID = new PublicKey('Vote111111111111111111111111111111111111111');\n\n/**\n * History of how many credits earned by the end of each epoch\n */\n\n/**\n * See https://github.com/solana-labs/solana/blob/8a12ed029cfa38d4a45400916c2463fb82bbec8c/programs/vote_api/src/vote_state.rs#L68-L88\n *\n * @internal\n */\nconst VoteAccountLayout = BufferLayout.struct([publicKey('nodePubkey'), publicKey('authorizedWithdrawer'), BufferLayout.u8('commission'), BufferLayout.nu64(),\n// votes.length\nBufferLayout.seq(BufferLayout.struct([BufferLayout.nu64('slot'), BufferLayout.u32('confirmationCount')]), BufferLayout.offset(BufferLayout.u32(), -8), 'votes'), BufferLayout.u8('rootSlotValid'), BufferLayout.nu64('rootSlot'), BufferLayout.nu64(),\n// authorizedVoters.length\nBufferLayout.seq(BufferLayout.struct([BufferLayout.nu64('epoch'), publicKey('authorizedVoter')]), BufferLayout.offset(BufferLayout.u32(), -8), 'authorizedVoters'), BufferLayout.struct([BufferLayout.seq(BufferLayout.struct([publicKey('authorizedPubkey'), BufferLayout.nu64('epochOfLastAuthorizedSwitch'), BufferLayout.nu64('targetEpoch')]), 32, 'buf'), BufferLayout.nu64('idx'), BufferLayout.u8('isEmpty')], 'priorVoters'), BufferLayout.nu64(),\n// epochCredits.length\nBufferLayout.seq(BufferLayout.struct([BufferLayout.nu64('epoch'), BufferLayout.nu64('credits'), BufferLayout.nu64('prevCredits')]), BufferLayout.offset(BufferLayout.u32(), -8), 'epochCredits'), BufferLayout.struct([BufferLayout.nu64('slot'), BufferLayout.nu64('timestamp')], 'lastTimestamp')]);\n/**\n * VoteAccount class\n */\nclass VoteAccount {\n  /**\n   * @internal\n   */\n  constructor(args) {\n    this.nodePubkey = void 0;\n    this.authorizedWithdrawer = void 0;\n    this.commission = void 0;\n    this.rootSlot = void 0;\n    this.votes = void 0;\n    this.authorizedVoters = void 0;\n    this.priorVoters = void 0;\n    this.epochCredits = void 0;\n    this.lastTimestamp = void 0;\n    this.nodePubkey = args.nodePubkey;\n    this.authorizedWithdrawer = args.authorizedWithdrawer;\n    this.commission = args.commission;\n    this.rootSlot = args.rootSlot;\n    this.votes = args.votes;\n    this.authorizedVoters = args.authorizedVoters;\n    this.priorVoters = args.priorVoters;\n    this.epochCredits = args.epochCredits;\n    this.lastTimestamp = args.lastTimestamp;\n  }\n\n  /**\n   * Deserialize VoteAccount from the account data.\n   *\n   * @param buffer account data\n   * @return VoteAccount\n   */\n  static fromAccountData(buffer) {\n    const versionOffset = 4;\n    const va = VoteAccountLayout.decode(toBuffer(buffer), versionOffset);\n    let rootSlot = va.rootSlot;\n    if (!va.rootSlotValid) {\n      rootSlot = null;\n    }\n    return new VoteAccount({\n      nodePubkey: new PublicKey(va.nodePubkey),\n      authorizedWithdrawer: new PublicKey(va.authorizedWithdrawer),\n      commission: va.commission,\n      votes: va.votes,\n      rootSlot,\n      authorizedVoters: va.authorizedVoters.map(parseAuthorizedVoter),\n      priorVoters: getPriorVoters(va.priorVoters),\n      epochCredits: va.epochCredits,\n      lastTimestamp: va.lastTimestamp\n    });\n  }\n}\nfunction parseAuthorizedVoter({\n  authorizedVoter,\n  epoch\n}) {\n  return {\n    epoch,\n    authorizedVoter: new PublicKey(authorizedVoter)\n  };\n}\nfunction parsePriorVoters({\n  authorizedPubkey,\n  epochOfLastAuthorizedSwitch,\n  targetEpoch\n}) {\n  return {\n    authorizedPubkey: new PublicKey(authorizedPubkey),\n    epochOfLastAuthorizedSwitch,\n    targetEpoch\n  };\n}\nfunction getPriorVoters({\n  buf,\n  idx,\n  isEmpty\n}) {\n  if (isEmpty) {\n    return [];\n  }\n  return [...buf.slice(idx + 1).map(parsePriorVoters), ...buf.slice(0, idx).map(parsePriorVoters)];\n}\n\nconst endpoint = {\n  http: {\n    devnet: 'http://api.devnet.solana.com',\n    testnet: 'http://api.testnet.solana.com',\n    'mainnet-beta': 'http://api.mainnet-beta.solana.com/'\n  },\n  https: {\n    devnet: 'https://api.devnet.solana.com',\n    testnet: 'https://api.testnet.solana.com',\n    'mainnet-beta': 'https://api.mainnet-beta.solana.com/'\n  }\n};\n/**\n * Retrieves the RPC API URL for the specified cluster\n * @param {Cluster} [cluster=\"devnet\"] - The cluster name of the RPC API URL to use. Possible options: 'devnet' | 'testnet' | 'mainnet-beta'\n * @param {boolean} [tls=\"http\"] - Use TLS when connecting to cluster.\n *\n * @returns {string} URL string of the RPC endpoint\n */\nfunction clusterApiUrl(cluster, tls) {\n  const key = tls === false ? 'http' : 'https';\n  if (!cluster) {\n    return endpoint[key]['devnet'];\n  }\n  const url = endpoint[key][cluster];\n  if (!url) {\n    throw new Error(`Unknown ${key} cluster: ${cluster}`);\n  }\n  return url;\n}\n\n/**\n * Send and confirm a raw transaction\n *\n * If `commitment` option is not specified, defaults to 'max' commitment.\n *\n * @param {Connection} connection\n * @param {Buffer} rawTransaction\n * @param {TransactionConfirmationStrategy} confirmationStrategy\n * @param {ConfirmOptions} [options]\n * @returns {Promise<TransactionSignature>}\n */\n\n/**\n * @deprecated Calling `sendAndConfirmRawTransaction()` without a `confirmationStrategy`\n * is no longer supported and will be removed in a future version.\n */\n// eslint-disable-next-line no-redeclare\n\n// eslint-disable-next-line no-redeclare\nasync function sendAndConfirmRawTransaction(connection, rawTransaction, confirmationStrategyOrConfirmOptions, maybeConfirmOptions) {\n  let confirmationStrategy;\n  let options;\n  if (confirmationStrategyOrConfirmOptions && Object.prototype.hasOwnProperty.call(confirmationStrategyOrConfirmOptions, 'lastValidBlockHeight')) {\n    confirmationStrategy = confirmationStrategyOrConfirmOptions;\n    options = maybeConfirmOptions;\n  } else if (confirmationStrategyOrConfirmOptions && Object.prototype.hasOwnProperty.call(confirmationStrategyOrConfirmOptions, 'nonceValue')) {\n    confirmationStrategy = confirmationStrategyOrConfirmOptions;\n    options = maybeConfirmOptions;\n  } else {\n    options = confirmationStrategyOrConfirmOptions;\n  }\n  const sendOptions = options && {\n    skipPreflight: options.skipPreflight,\n    preflightCommitment: options.preflightCommitment || options.commitment,\n    minContextSlot: options.minContextSlot\n  };\n  const signature = await connection.sendRawTransaction(rawTransaction, sendOptions);\n  const commitment = options && options.commitment;\n  const confirmationPromise = confirmationStrategy ? connection.confirmTransaction(confirmationStrategy, commitment) : connection.confirmTransaction(signature, commitment);\n  const status = (await confirmationPromise).value;\n  if (status.err) {\n    if (signature != null) {\n      throw new SendTransactionError({\n        action: sendOptions?.skipPreflight ? 'send' : 'simulate',\n        signature: signature,\n        transactionMessage: `Status: (${JSON.stringify(status)})`\n      });\n    }\n    throw new Error(`Raw transaction ${signature} failed (${JSON.stringify(status)})`);\n  }\n  return signature;\n}\n\n/**\n * There are 1-billion lamports in one SOL\n */\nconst LAMPORTS_PER_SOL = 1000000000;\n\nexport { Account, AddressLookupTableAccount, AddressLookupTableInstruction, AddressLookupTableProgram, Authorized, BLOCKHASH_CACHE_TIMEOUT_MS, BPF_LOADER_DEPRECATED_PROGRAM_ID, BPF_LOADER_PROGRAM_ID, BpfLoader, COMPUTE_BUDGET_INSTRUCTION_LAYOUTS, ComputeBudgetInstruction, ComputeBudgetProgram, Connection, Ed25519Program, Enum, EpochSchedule, FeeCalculatorLayout, Keypair, LAMPORTS_PER_SOL, LOOKUP_TABLE_INSTRUCTION_LAYOUTS, Loader, Lockup, MAX_SEED_LENGTH, Message, MessageAccountKeys, MessageV0, NONCE_ACCOUNT_LENGTH, NonceAccount, PACKET_DATA_SIZE, PUBLIC_KEY_LENGTH, PublicKey, SIGNATURE_LENGTH_IN_BYTES, SOLANA_SCHEMA, STAKE_CONFIG_ID, STAKE_INSTRUCTION_LAYOUTS, SYSTEM_INSTRUCTION_LAYOUTS, SYSVAR_CLOCK_PUBKEY, SYSVAR_EPOCH_SCHEDULE_PUBKEY, SYSVAR_INSTRUCTIONS_PUBKEY, SYSVAR_RECENT_BLOCKHASHES_PUBKEY, SYSVAR_RENT_PUBKEY, SYSVAR_REWARDS_PUBKEY, SYSVAR_SLOT_HASHES_PUBKEY, SYSVAR_SLOT_HISTORY_PUBKEY, SYSVAR_STAKE_HISTORY_PUBKEY, Secp256k1Program, SendTransactionError, SolanaJSONRPCError, SolanaJSONRPCErrorCode, StakeAuthorizationLayout, StakeInstruction, StakeProgram, Struct, SystemInstruction, SystemProgram, Transaction, TransactionExpiredBlockheightExceededError, TransactionExpiredNonceInvalidError, TransactionExpiredTimeoutError, TransactionInstruction, TransactionMessage, TransactionStatus, VALIDATOR_INFO_KEY, VERSION_PREFIX_MASK, VOTE_PROGRAM_ID, ValidatorInfo, VersionedMessage, VersionedTransaction, VoteAccount, VoteAuthorizationLayout, VoteInit, VoteInstruction, VoteProgram, clusterApiUrl, sendAndConfirmRawTransaction, sendAndConfirmTransaction };\n//# sourceMappingURL=index.browser.esm.js.map\n","import { BaseMessageSignerWalletAdapter, isIosAndRedirectable, isVersionedTransaction, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const PhantomWalletName = 'Phantom';\nexport class PhantomWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = PhantomWalletName;\n        this.url = 'https://phantom.app';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                wallet.off('accountChanged', this._accountChanged);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._accountChanged = (newPublicKey) => {\n            const publicKey = this._publicKey;\n            if (!publicKey)\n                return;\n            try {\n                newPublicKey = new PublicKey(newPublicKey.toBytes());\n            }\n            catch (error) {\n                this.emit('error', new WalletPublicKeyError(error?.message, error));\n                return;\n            }\n            if (publicKey.equals(newPublicKey))\n                return;\n            this._publicKey = newPublicKey;\n            this.emit('connect', newPublicKey);\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            if (isIosAndRedirectable()) {\n                // when in iOS (not webview), set Phantom as loadable instead of checking for install\n                this._readyState = WalletReadyState.Loadable;\n                this.emit('readyStateChange', this._readyState);\n            }\n            else {\n                scopePollingDetectionStrategy(() => {\n                    if (window.phantom?.solana?.isPhantom || window.solana?.isPhantom) {\n                        this._readyState = WalletReadyState.Installed;\n                        this.emit('readyStateChange', this._readyState);\n                        return true;\n                    }\n                    return false;\n                });\n            }\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async autoConnect() {\n        // Skip autoconnect in the Loadable state\n        // We can't redirect to a universal link without user input\n        if (this.readyState === WalletReadyState.Installed) {\n            await this.connect();\n        }\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this.readyState === WalletReadyState.Loadable) {\n                // redirect to the Phantom /browse universal link\n                // this will open the current URL in the Phantom in-wallet browser\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://phantom.app/ul/browse/${url}?ref=${ref}`;\n                return;\n            }\n            if (this.readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.phantom?.solana || window.solana;\n            if (!wallet.isConnected) {\n                try {\n                    await wallet.connect();\n                }\n                catch (error) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n            if (!wallet.publicKey)\n                throw new WalletAccountError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signers, ...sendOptions } = options;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                }\n                else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions));\n                    signers?.length && transaction.partialSign(...signers);\n                }\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n                const { signature } = await wallet.signAndSendTransaction(transaction, sendOptions);\n                return signature;\n            }\n            catch (error) {\n                if (error instanceof WalletError)\n                    throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signature } = await wallet.signMessage(message);\n                return signature;\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _RegisterWalletEvent_detail;\n/**\n * Register a {@link \"@wallet-standard/base\".Wallet} as a Standard Wallet with the app.\n *\n * This dispatches a {@link \"@wallet-standard/base\".WindowRegisterWalletEvent} to notify the app that the Wallet is\n * ready to be registered.\n *\n * This also adds a listener for {@link \"@wallet-standard/base\".WindowAppReadyEvent} to listen for a notification from\n * the app that the app is ready to register the Wallet.\n *\n * This combination of event dispatch and listener guarantees that the Wallet will be registered synchronously as soon\n * as the app is ready whether the Wallet loads before or after the app.\n *\n * @param wallet Wallet to register.\n *\n * @group Wallet\n */\nexport function registerWallet(wallet) {\n    const callback = ({ register }) => register(wallet);\n    try {\n        window.dispatchEvent(new RegisterWalletEvent(callback));\n    }\n    catch (error) {\n        console.error('wallet-standard:register-wallet event could not be dispatched\\n', error);\n    }\n    try {\n        window.addEventListener('wallet-standard:app-ready', ({ detail: api }) => callback(api));\n    }\n    catch (error) {\n        console.error('wallet-standard:app-ready event listener could not be added\\n', error);\n    }\n}\nclass RegisterWalletEvent extends Event {\n    get detail() {\n        return __classPrivateFieldGet(this, _RegisterWalletEvent_detail, \"f\");\n    }\n    get type() {\n        return 'wallet-standard:register-wallet';\n    }\n    constructor(callback) {\n        super('wallet-standard:register-wallet', {\n            bubbles: false,\n            cancelable: false,\n            composed: false,\n        });\n        _RegisterWalletEvent_detail.set(this, void 0);\n        __classPrivateFieldSet(this, _RegisterWalletEvent_detail, callback, \"f\");\n    }\n    /** @deprecated */\n    preventDefault() {\n        throw new Error('preventDefault cannot be called');\n    }\n    /** @deprecated */\n    stopImmediatePropagation() {\n        throw new Error('stopImmediatePropagation cannot be called');\n    }\n    /** @deprecated */\n    stopPropagation() {\n        throw new Error('stopPropagation cannot be called');\n    }\n}\n_RegisterWalletEvent_detail = new WeakMap();\n/**\n * @deprecated Use {@link registerWallet} instead.\n *\n * @group Deprecated\n */\nexport function DEPRECATED_registerWallet(wallet) {\n    var _a;\n    registerWallet(wallet);\n    try {\n        ((_a = window.navigator).wallets || (_a.wallets = [])).push(({ register }) => register(wallet));\n    }\n    catch (error) {\n        console.error('window.navigator.wallets could not be pushed\\n', error);\n    }\n}\n//# sourceMappingURL=register.js.map","/** Solana Mainnet (beta) cluster, e.g. https://api.mainnet-beta.solana.com */\nexport const SOLANA_MAINNET_CHAIN = 'solana:mainnet';\n/** Solana Devnet cluster, e.g. https://api.devnet.solana.com */\nexport const SOLANA_DEVNET_CHAIN = 'solana:devnet';\n/** Solana Testnet cluster, e.g. https://api.testnet.solana.com */\nexport const SOLANA_TESTNET_CHAIN = 'solana:testnet';\n/** Solana Localnet cluster, e.g. http://localhost:8899 */\nexport const SOLANA_LOCALNET_CHAIN = 'solana:localnet';\n/** Array of all Solana clusters */\nexport const SOLANA_CHAINS = [\n    SOLANA_MAINNET_CHAIN,\n    SOLANA_DEVNET_CHAIN,\n    SOLANA_TESTNET_CHAIN,\n    SOLANA_LOCALNET_CHAIN,\n];\n/**\n * Check if a chain corresponds with one of the Solana clusters.\n */\nexport function isSolanaChain(chain) {\n    return SOLANA_CHAINS.includes(chain);\n}\n//# sourceMappingURL=index.js.map","/** @internal */\nexport const icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=';\n//# sourceMappingURL=icon.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SolflareMetaMaskWallet_instances, _SolflareMetaMaskWallet_listeners, _SolflareMetaMaskWallet_version, _SolflareMetaMaskWallet_name, _SolflareMetaMaskWallet_icon, _SolflareMetaMaskWallet_solflareMetaMask, _SolflareMetaMaskWallet_on, _SolflareMetaMaskWallet_emit, _SolflareMetaMaskWallet_off, _SolflareMetaMaskWallet_connect, _SolflareMetaMaskWallet_disconnect, _SolflareMetaMaskWallet_signAndSendTransaction, _SolflareMetaMaskWallet_signTransaction, _SolflareMetaMaskWallet_signMessage;\nimport { WalletNotConnectedError } from '@solana/wallet-adapter-base';\nimport { SOLANA_DEVNET_CHAIN, SOLANA_MAINNET_CHAIN, SOLANA_TESTNET_CHAIN } from '@solana/wallet-standard-chains';\nimport { SolanaSignAndSendTransaction, SolanaSignMessage, SolanaSignTransaction, } from '@solana/wallet-standard-features';\nimport { StandardConnect, StandardDisconnect, StandardEvents, } from '@wallet-standard/features';\nimport { icon } from './icon.js';\nexport class SolflareMetaMaskWallet {\n    constructor() {\n        _SolflareMetaMaskWallet_instances.add(this);\n        _SolflareMetaMaskWallet_listeners.set(this, {});\n        _SolflareMetaMaskWallet_version.set(this, '1.0.0');\n        _SolflareMetaMaskWallet_name.set(this, 'MetaMask');\n        _SolflareMetaMaskWallet_icon.set(this, icon);\n        _SolflareMetaMaskWallet_solflareMetaMask.set(this, null);\n        _SolflareMetaMaskWallet_on.set(this, (event, listener) => {\n            __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.push(listener) || (__classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet(this, _SolflareMetaMaskWallet_instances, \"m\", _SolflareMetaMaskWallet_off).call(this, event, listener);\n        });\n        _SolflareMetaMaskWallet_connect.set(this, async () => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\")) {\n                let SolflareMetaMaskClass;\n                try {\n                    SolflareMetaMaskClass = (await import('@solflare-wallet/metamask-sdk')).default;\n                }\n                catch (error) {\n                    throw new Error('Unable to load Solflare MetaMask SDK');\n                }\n                __classPrivateFieldSet(this, _SolflareMetaMaskWallet_solflareMetaMask, new SolflareMetaMaskClass(), \"f\");\n                __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").on('standard_change', (properties) => __classPrivateFieldGet(this, _SolflareMetaMaskWallet_instances, \"m\", _SolflareMetaMaskWallet_emit).call(this, 'change', properties));\n            }\n            if (!this.accounts.length) {\n                await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").connect();\n            }\n            return { accounts: this.accounts };\n        });\n        _SolflareMetaMaskWallet_disconnect.set(this, async () => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                return;\n            await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").disconnect();\n        });\n        _SolflareMetaMaskWallet_signAndSendTransaction.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignAndSendTransaction(...inputs);\n        });\n        _SolflareMetaMaskWallet_signTransaction.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignTransaction(...inputs);\n        });\n        _SolflareMetaMaskWallet_signMessage.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignMessage(...inputs);\n        });\n    }\n    get version() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_name, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_icon, \"f\");\n    }\n    get chains() {\n        return [SOLANA_MAINNET_CHAIN, SOLANA_DEVNET_CHAIN, SOLANA_TESTNET_CHAIN];\n    }\n    get features() {\n        return {\n            [StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_connect, \"f\"),\n            },\n            [StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_disconnect, \"f\"),\n            },\n            [StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_on, \"f\"),\n            },\n            [SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signAndSendTransaction, \"f\"),\n            },\n            [SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signTransaction, \"f\"),\n            },\n            [SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signMessage, \"f\"),\n            },\n        };\n    }\n    get accounts() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\") ? __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardAccounts : [];\n    }\n}\n_SolflareMetaMaskWallet_listeners = new WeakMap(), _SolflareMetaMaskWallet_version = new WeakMap(), _SolflareMetaMaskWallet_name = new WeakMap(), _SolflareMetaMaskWallet_icon = new WeakMap(), _SolflareMetaMaskWallet_solflareMetaMask = new WeakMap(), _SolflareMetaMaskWallet_on = new WeakMap(), _SolflareMetaMaskWallet_connect = new WeakMap(), _SolflareMetaMaskWallet_disconnect = new WeakMap(), _SolflareMetaMaskWallet_signAndSendTransaction = new WeakMap(), _SolflareMetaMaskWallet_signTransaction = new WeakMap(), _SolflareMetaMaskWallet_signMessage = new WeakMap(), _SolflareMetaMaskWallet_instances = new WeakSet(), _SolflareMetaMaskWallet_emit = function _SolflareMetaMaskWallet_emit(event, ...args) {\n    // eslint-disable-next-line prefer-spread\n    __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.forEach((listener) => listener.apply(null, args));\n}, _SolflareMetaMaskWallet_off = function _SolflareMetaMaskWallet_off(event, listener) {\n    __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event] = __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.filter((existingListener) => listener !== existingListener);\n};\n//# sourceMappingURL=wallet.js.map","import { registerWallet } from '@wallet-standard/wallet';\nimport { SolflareMetaMaskWallet } from './wallet.js';\nlet registered = false;\nfunction register() {\n    if (registered)\n        return;\n    registerWallet(new SolflareMetaMaskWallet());\n    registered = true;\n}\n/** @internal */\nexport async function detectAndRegisterSolflareMetaMaskWallet() {\n    const id = 'solflare-detect-metamask';\n    function postMessage() {\n        window.postMessage({\n            target: 'metamask-contentscript',\n            data: {\n                name: 'metamask-provider',\n                data: {\n                    id,\n                    jsonrpc: '2.0',\n                    method: 'wallet_getSnaps',\n                },\n            },\n        }, window.location.origin);\n    }\n    function onMessage(event) {\n        const message = event.data;\n        if (message?.target === 'metamask-inpage' && message.data?.name === 'metamask-provider') {\n            if (message.data.data?.id === id) {\n                window.removeEventListener('message', onMessage);\n                if (!message.data.data.error) {\n                    register();\n                }\n            }\n            else {\n                postMessage();\n            }\n        }\n    }\n    window.addEventListener('message', onMessage);\n    window.setTimeout(() => window.removeEventListener('message', onMessage), 5000);\n    postMessage();\n}\n//# sourceMappingURL=detect.js.map","import { BaseMessageSignerWalletAdapter, WalletConfigError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, isIosAndRedirectable, isVersionedTransaction, scopePollingDetectionStrategy, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { detectAndRegisterSolflareMetaMaskWallet } from './metamask/detect.js';\nexport const SolflareWalletName = 'Solflare';\nexport class SolflareWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = SolflareWalletName;\n        this.url = 'https://solflare.com';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Loadable;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._accountChanged = (newPublicKey) => {\n            if (!newPublicKey)\n                return;\n            const publicKey = this._publicKey;\n            if (!publicKey)\n                return;\n            try {\n                newPublicKey = new PublicKey(newPublicKey.toBytes());\n            }\n            catch (error) {\n                this.emit('error', new WalletPublicKeyError(error?.message, error));\n                return;\n            }\n            if (publicKey.equals(newPublicKey))\n                return;\n            this._publicKey = newPublicKey;\n            this.emit('connect', newPublicKey);\n        };\n        this._connecting = false;\n        this._publicKey = null;\n        this._wallet = null;\n        this._config = config;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.solflare?.isSolflare || window.SolflareApp) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n            detectAndRegisterSolflareMetaMaskWallet();\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get connected() {\n        return !!this._wallet?.connected;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async autoConnect() {\n        // Skip autoconnect in the Loadable state on iOS\n        // We can't redirect to a universal link without user input\n        if (!(this.readyState === WalletReadyState.Loadable && isIosAndRedirectable())) {\n            await this.connect();\n        }\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Loadable && this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            // redirect to the Solflare /browse universal link\n            // this will open the current URL in the Solflare in-wallet browser\n            if (this.readyState === WalletReadyState.Loadable && isIosAndRedirectable()) {\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://solflare.com/ul/v1/browse/${url}?ref=${ref}`;\n                return;\n            }\n            let SolflareClass;\n            try {\n                SolflareClass = (await import('@solflare-wallet/sdk')).default;\n            }\n            catch (error) {\n                throw new WalletLoadError(error?.message, error);\n            }\n            let wallet;\n            try {\n                wallet = new SolflareClass({ network: this._config.network });\n            }\n            catch (error) {\n                throw new WalletConfigError(error?.message, error);\n            }\n            this._connecting = true;\n            if (!wallet.connected) {\n                try {\n                    await wallet.connect();\n                }\n                catch (error) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n            if (!wallet.publicKey)\n                throw new WalletConnectionError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signers, ...sendOptions } = options;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                }\n                else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions));\n                    signers?.length && transaction.partialSign(...signers);\n                }\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n                return await wallet.signAndSendTransaction(transaction, sendOptions);\n            }\n            catch (error) {\n                if (error instanceof WalletError)\n                    throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return await wallet.signMessage(message, 'utf8');\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const BackpackWalletName = 'Backpack';\nexport class BackpackWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = BackpackWalletName;\n        this.url = 'https://backpack.app';\n        this.icon = 'data:image/png;base64,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';\n        this.supportedTransactionVersions = null;\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.backpack?.isBackpack) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get connected() {\n        return !!this._wallet?.isConnected;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.backpack;\n            try {\n                await wallet.connect();\n            }\n            catch (error) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n            if (!wallet.publicKey)\n                throw new WalletAccountError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            const { signers, ...sendOptions } = options;\n            try {\n                return await wallet.send(transaction, signers, sendOptions, connection, this.publicKey);\n            }\n            catch (error) {\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction, this.publicKey));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions, this.publicKey));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return await wallet.signMessage(message, this.publicKey);\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  const BASE_MAP = new Uint8Array(256)\n  for (let j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (let i = 0; i < ALPHABET.length; i++) {\n    const x = ALPHABET.charAt(i)\n    const xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  const BASE = ALPHABET.length\n  const LEADER = ALPHABET.charAt(0)\n  const FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  const iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    // eslint-disable-next-line no-empty\n    if (source instanceof Uint8Array) { } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n    // Skip & count leading zeroes.\n    let zeroes = 0\n    let length = 0\n    let pbegin = 0\n    const pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n    // Allocate enough space in big-endian base58 representation.\n    const size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    const b58 = new Uint8Array(size)\n    // Process the bytes.\n    while (pbegin !== pend) {\n      let carry = source[pbegin]\n      // Apply \"b58 = b58 * 256 + ch\".\n      let i = 0\n      for (let it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n    // Skip leading zeroes in base58 result.\n    let it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n    // Translate the result into a string.\n    let str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    let psz = 0\n    // Skip and count leading '1's.\n    let zeroes = 0\n    let length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n    // Allocate enough space in big-endian base256 representation.\n    const size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    const b256 = new Uint8Array(size)\n    // Process the characters.\n    while (psz < source.length) {\n      // Find code of next character\n      const charCode = source.charCodeAt(psz)\n      // Base map can not be indexed using char code\n      if (charCode > 255) { return }\n      // Decode character\n      let carry = BASE_MAP[charCode]\n      // Invalid character\n      if (carry === 255) { return }\n      let i = 0\n      for (let it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n    // Skip leading zeroes in b256.\n    let it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    const vch = new Uint8Array(zeroes + (size - it4))\n    let j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    const buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode,\n    decodeUnsafe,\n    decode\n  }\n}\nexport default base\n","import basex from 'base-x';\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\nexport default basex(ALPHABET);\n","// Utility functions for SIWS \n\n/**\n * Format a SIWS message object from canister into a string for signing\n * @param message The SIWS message object from the canister (expected fields based on spec)\n * @returns Formatted message string for signing\n */\nexport function formatSiwsMessage(message: any): string {\n    // Convert timestamps from nanoseconds (BigInt) to ISO string\n    // Assuming message.issued_at and message.expiration_time are BigInts\n    const issuedAtDate = new Date(Number(message.issued_at / BigInt(1_000_000)));\n    const expirationDate = new Date(Number(message.expiration_time / BigInt(1_000_000)));\n    \n    // Format according to SIWS spec EIP-4361 (with Solana specifics)\n    let formattedMessage = `${message.domain} wants you to sign in with your Solana account:\\n`;\n    formattedMessage += `${message.address}\\n\\n`; // Solana address\n    formattedMessage += (message.statement || \"\") + \"\\n\\n\"; // Optional statement\n    formattedMessage += `URI: ${message.uri}\\n`;\n    formattedMessage += `Version: ${message.version}\\n`; \n    formattedMessage += `Chain ID: ${message.chain_id || 'solana'}\\n`; // Solana Chain ID might vary\n    formattedMessage += `Nonce: ${message.nonce}\\n`;\n    formattedMessage += `Issued At: ${issuedAtDate.toISOString()}\\n`;\n    formattedMessage += `Expiration Time: ${expirationDate.toISOString()}`;\n    \n    // Optional fields according to EIP-4361, add if present in `message`\n    if (message.request_id) formattedMessage += `\\nRequest ID: ${message.request_id}`;\n    if (message.resources) {\n      formattedMessage += `\\nResources:`;\n      message.resources.forEach((resource: string) => {\n        formattedMessage += `\\n- ${resource}`;\n      });\n    }\n    \n    return formattedMessage;\n  } ","export const idlFactory = ({ IDL }) => {\n  const RuntimeFeature = IDL.Variant({\n    'IncludeUriInSeed' : IDL.Null,\n    'DisablePrincipalToSolMapping' : IDL.Null,\n    'DisableSolToPrincipalMapping' : IDL.Null,\n  });\n  const SettingsInput = IDL.Record({\n    'uri' : IDL.Text,\n    'runtime_features' : IDL.Opt(IDL.Vec(RuntimeFeature)),\n    'domain' : IDL.Text,\n    'statement' : IDL.Opt(IDL.Text),\n    'scheme' : IDL.Opt(IDL.Text),\n    'salt' : IDL.Text,\n    'session_expires_in' : IDL.Opt(IDL.Nat64),\n    'targets' : IDL.Opt(IDL.Vec(IDL.Text)),\n    'chain_id' : IDL.Opt(IDL.Text),\n    'sign_in_expires_in' : IDL.Opt(IDL.Nat64),\n  });\n  const Principal = IDL.Vec(IDL.Nat8);\n  const Address = IDL.Text;\n  const GetAddressResponse = IDL.Variant({ 'Ok' : Address, 'Err' : IDL.Text });\n  const GetPrincipalResponse = IDL.Variant({\n    'Ok' : Principal,\n    'Err' : IDL.Text,\n  });\n  const PublicKey = IDL.Vec(IDL.Nat8);\n  const SessionKey = PublicKey;\n  const Timestamp = IDL.Nat64;\n  const Delegation = IDL.Record({\n    'pubkey' : PublicKey,\n    'targets' : IDL.Opt(IDL.Vec(IDL.Principal)),\n    'expiration' : Timestamp,\n  });\n  const SignedDelegation = IDL.Record({\n    'signature' : IDL.Vec(IDL.Nat8),\n    'delegation' : Delegation,\n  });\n  const GetDelegationResponse = IDL.Variant({\n    'Ok' : SignedDelegation,\n    'Err' : IDL.Text,\n  });\n  const SiwsSignature = IDL.Text;\n  const CanisterPublicKey = PublicKey;\n  const LoginDetails = IDL.Record({\n    'user_canister_pubkey' : CanisterPublicKey,\n    'expiration' : Timestamp,\n  });\n  const LoginResponse = IDL.Variant({ 'Ok' : LoginDetails, 'Err' : IDL.Text });\n  const SiwsMessage = IDL.Record({\n    'uri' : IDL.Text,\n    'issued_at' : IDL.Nat64,\n    'domain' : IDL.Text,\n    'statement' : IDL.Text,\n    'version' : IDL.Nat32,\n    'chain_id' : IDL.Text,\n    'address' : Address,\n    'nonce' : IDL.Text,\n    'expiration_time' : IDL.Nat64,\n  });\n  const PrepareLoginResponse = IDL.Variant({\n    'Ok' : SiwsMessage,\n    'Err' : IDL.Text,\n  });\n  return IDL.Service({\n    'get_address' : IDL.Func([Principal], [GetAddressResponse], ['query']),\n    'get_caller_address' : IDL.Func([], [GetAddressResponse], ['query']),\n    'get_principal' : IDL.Func([Address], [GetPrincipalResponse], ['query']),\n    'siws_get_delegation' : IDL.Func(\n        [Address, SessionKey, Timestamp],\n        [GetDelegationResponse],\n        ['query'],\n      ),\n    'siws_login' : IDL.Func(\n        [SiwsSignature, Address, SessionKey],\n        [LoginResponse],\n        [],\n      ),\n    'siws_prepare_login' : IDL.Func([Address], [PrepareLoginResponse], []),\n  });\n};\nexport const init = ({ IDL }) => {\n  const RuntimeFeature = IDL.Variant({\n    'IncludeUriInSeed' : IDL.Null,\n    'DisablePrincipalToSolMapping' : IDL.Null,\n    'DisableSolToPrincipalMapping' : IDL.Null,\n  });\n  const SettingsInput = IDL.Record({\n    'uri' : IDL.Text,\n    'runtime_features' : IDL.Opt(IDL.Vec(RuntimeFeature)),\n    'domain' : IDL.Text,\n    'statement' : IDL.Opt(IDL.Text),\n    'scheme' : IDL.Opt(IDL.Text),\n    'salt' : IDL.Text,\n    'session_expires_in' : IDL.Opt(IDL.Nat64),\n    'targets' : IDL.Opt(IDL.Vec(IDL.Text)),\n    'chain_id' : IDL.Opt(IDL.Text),\n    'sign_in_expires_in' : IDL.Opt(IDL.Nat64),\n  });\n  return [SettingsInput];\n};\n","import { PublicKey } from '@solana/web3.js';\n/** Address of the SPL Token program */\nexport const TOKEN_PROGRAM_ID = new PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');\n/** Address of the SPL Token 2022 program */\nexport const TOKEN_2022_PROGRAM_ID = new PublicKey('TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb');\n/** Address of the SPL Associated Token Account program */\nexport const ASSOCIATED_TOKEN_PROGRAM_ID = new PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n/** Address of the special mint for wrapped native SOL in spl-token */\nexport const NATIVE_MINT = new PublicKey('So11111111111111111111111111111111111111112');\n/** Address of the special mint for wrapped native SOL in spl-token-2022 */\nexport const NATIVE_MINT_2022 = new PublicKey('9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP');\n/** Check that the token program provided is not `Tokenkeg...`, useful when using extensions */\nexport function programSupportsExtensions(programId) {\n    if (programId.equals(TOKEN_PROGRAM_ID)) {\n        return false;\n    }\n    else {\n        return true;\n    }\n}\n//# sourceMappingURL=constants.js.map","// Placeholder for the Solana SIWS Adapter\nimport { Adapter, Wallet } from \"../../types/index.d\";\nimport {\n  HttpAgent,\n  ActorSubclass,\n  AnonymousIdentity,\n  Identity,\n  Actor,\n} from \"@dfinity/agent\";\nimport { Principal } from \"@dfinity/principal\";\nimport {\n  WalletAdapterNetwork,\n  WalletReadyState,\n  type Adapter as SolanaAdapter,\n  type MessageSignerWalletAdapterProps,\n} from \"@solana/wallet-adapter-base\";\nimport { PhantomWalletAdapter } from \"@solana/wallet-adapter-phantom\";\nimport { SolflareWalletAdapter } from \"@solana/wallet-adapter-solflare\";\nimport { BackpackWalletAdapter } from \"@solana/wallet-adapter-backpack\";\nimport { Connection, PublicKey, LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport {\n  Ed25519KeyIdentity,\n  DelegationIdentity,\n  DelegationChain,\n  Delegation,\n} from \"@dfinity/identity\";\nimport bs58 from \"bs58\";\nimport { formatSiwsMessage } from \"./utils\";\nimport type { _SERVICE as SiwsProviderService } from \"../../did/ic_siws_provider\";\nimport { idlFactory as siwsProviderIdlFactory } from \"../../did/ic_siws_provider.did.js\";\nimport { AccountIdentifier } from \"@dfinity/ledger-icp\";\nimport {\n  TOKEN_PROGRAM_ID,\n} from \"@solana/spl-token\";\n\n// Define SIWS Provider Actor interface using generated types\ntype SiwsProviderActor = ActorSubclass<SiwsProviderService>;\n\n// Define the shape of the config object the adapter expects\n// This combines global PNPConfig and specific adapter config\ntype SolSiwsAdapterConfig = Wallet.PNPConfig & Adapter.Info[\"config\"];\n\n// Add TokenInfo interface \nexport interface TokenInfo {\n  symbol: string;\n  name: string;\n  logoURI?: string;\n  decimals: number;\n  address: string;\n  price?: number; // USD price\n}\n\nexport interface SplTokenBalance {\n    mint: string; // The token mint address (identifier)\n    amount: string; // The raw token amount (smallest unit)\n    decimals: number; // Number of decimals for the token\n    uiAmount: number; // The user-friendly amount (amount / 10^decimals)\n    symbol?: string; // Optional: Token symbol (if known)\n    name?: string; // Optional: Token name (if known)\n    logo?: string; // Optional: Token logo URL (if known)\n    usdValue?: number; // Optional: Value in USD\n}\n\nexport class SolSiwsAdapter implements Adapter.Interface {\n  public walletName: string;\n  public logo: string;\n  public readonly id: string;\n  static supportedChains: Adapter.Chain[] = [Adapter.Chain.ICP, Adapter.Chain.SOL];\n\n\n  private config: SolSiwsAdapterConfig;\n  private state: Adapter.Status = Adapter.Status.INIT;\n  private solanaAdapter: SolanaAdapter;\n  private solanaConnection: Connection;\n  private identity: Identity | null = null; // Holds the DelegationIdentity after SIWS flow\n  private principal: Principal | null = null;\n  private solanaAddress: string | null = null;\n\n  // Add a private property to cache token list\n  private tokenListCache: Record<string, TokenInfo> | null = null;\n  // Add a private property to cache token prices\n  private tokenPricesTimestamp: number = 0;\n\n  constructor(adapterInfo: Adapter.Info, pnpConfig: Wallet.PNPConfig) {\n    this.id = adapterInfo.id;\n    this.walletName = adapterInfo.walletName;\n    this.logo = adapterInfo.logo;\n\n    // Merge global and adapter-specific configs\n    this.config = {\n      ...pnpConfig,\n      ...adapterInfo.config,\n    };\n\n    const network = this.config.solanaNetwork || WalletAdapterNetwork.Mainnet;\n    const endpoint =\n      network === WalletAdapterNetwork.Mainnet\n        ? \"https://wiser-omniscient-thunder.solana-mainnet.quiknode.pro/c3a27d9cb72eb335a30e3407d576ef64e61b4e8d\" // Replace with preferred mainnet endpoint if needed\n        : \"https://api.devnet.solana.com\";\n    this.solanaConnection = new Connection(endpoint);\n\n    // Instantiate the correct Solana adapter based on the ID\n    if (this.id === \"phantomSiws\") {\n      this.solanaAdapter = new PhantomWalletAdapter();\n    } else if (this.id === \"solflareSiws\") {\n      this.solanaAdapter = new SolflareWalletAdapter({ network });\n    } else if (this.id === \"backpackSiws\") {\n      this.solanaAdapter = new BackpackWalletAdapter();\n    } else {\n      throw new Error(\n        `Unsupported SIWS adapter ID: ${this.id}. Expected 'phantomSiws', 'solflareSiws', or 'backpackSiws'.`\n      );\n    }\n\n    this.setupWalletListeners();\n    this.state = Adapter.Status.READY;\n  }\n\n  private setupWalletListeners(): void {\n    this.solanaAdapter.on(\"connect\", this.handleSolanaConnect);\n    this.solanaAdapter.on(\"disconnect\", this.handleSolanaDisconnect);\n    this.solanaAdapter.on(\"error\", this.handleSolanaError);\n  }\n\n  private removeWalletListeners(): void {\n    this.solanaAdapter.off(\"connect\", this.handleSolanaConnect);\n    this.solanaAdapter.off(\"disconnect\", this.handleSolanaDisconnect);\n    this.solanaAdapter.off(\"error\", this.handleSolanaError);\n  }\n\n  // Bound event handlers to maintain `this` context\n  private handleSolanaConnect = (publicKey: PublicKey): void => {\n    console.log(\n      `[${this.walletName}] Solana wallet connected:`,\n      publicKey.toBase58()\n    );\n    this.solanaAddress = publicKey.toBase58();\n    // Connection established, SIWS flow will happen in `connect` method\n  };\n\n  private handleSolanaDisconnect = (): void => {\n    console.log(`[${this.walletName}] Solana wallet disconnected.`);\n    // If the wallet disconnects externally, trigger a full disconnect/cleanup\n    if (\n      this.state !== Adapter.Status.DISCONNECTING &&\n      this.state !== Adapter.Status.DISCONNECTED\n    ) {\n      this.disconnect();\n    }\n  };\n\n  private handleSolanaError = (error: any): void => {\n    console.error(`[${this.walletName}] Solana wallet error:`, error);\n    this.state = Adapter.Status.ERROR;\n    // Optionally trigger disconnect on error\n    this.disconnect();\n  };\n\n  // --- Adapter.Interface Implementation ---\n\n  async isAvailable(): Promise<boolean> {\n    // Check if the selected Solana adapter is ready\n    return (\n      this.solanaAdapter.readyState === WalletReadyState.Installed ||\n      this.solanaAdapter.readyState === WalletReadyState.Loadable\n    );\n  }\n\n  async isConnected(): Promise<boolean> {\n    // Check both Solana wallet connection and successful SIWS delegation\n    return (\n      this.solanaAdapter.connected &&\n      this.identity !== null &&\n      !this.identity.getPrincipal().isAnonymous()\n    );\n  }\n\n  async connect(): Promise<Wallet.Account> {\n    if (\n      this.state === Adapter.Status.CONNECTING ||\n      this.state === Adapter.Status.CONNECTED\n    ) {\n      // Already connecting or connected\n      return { owner: this.principal?.toText(), subaccount: null };\n    }\n    if (\n      this.state !== Adapter.Status.READY &&\n      this.state !== Adapter.Status.DISCONNECTED\n    ) {\n      throw new Error(`Cannot connect while in state: ${this.state}`);\n    }\n\n    this.state = Adapter.Status.CONNECTING;\n\n    try {\n      // 1. Ensure Solana Wallet is Connected\n      if (!this.solanaAdapter.connected) {\n        await this.solanaAdapter.connect(); // This triggers the 'connect' listener if successful\n      }\n      // Ensure address is set (might happen via listener or if already connected)\n      if (!this.solanaAdapter.publicKey) {\n        throw new Error(\n          \"Solana wallet connected but public key not available.\"\n        );\n      }\n      this.solanaAddress = this.solanaAdapter.publicKey.toBase58();\n\n      // 2. Perform SIWS Flow\n      const siwsResult = await this.performSiwsLogin(this.solanaAddress);\n      this.identity = siwsResult.identity;\n      this.principal = siwsResult.principal;\n\n      if (!this.principal || this.principal.isAnonymous()) {\n        throw new Error(\n          \"SIWS flow completed but resulted in an anonymous principal.\"\n        );\n      }\n\n      this.state = Adapter.Status.CONNECTED;\n      // Return the IC account details\n      return { owner: this.principal?.toText(), subaccount: null }; // SIWS typically doesn't involve subaccounts\n    } catch (error) {\n      console.error(`[${this.walletName}] Connect failed:`, error);\n      this.state = Adapter.Status.ERROR;\n      await this.disconnect(); // Attempt cleanup on failure\n      throw error; // Re-throw the error for PNP core to handle\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    if (\n      this.state === Adapter.Status.DISCONNECTING ||\n      this.state === Adapter.Status.DISCONNECTED\n    ) {\n      return;\n    }\n    this.state = Adapter.Status.DISCONNECTING;\n\n    try {\n      // Disconnect Solana wallet if connected\n      if (this.solanaAdapter.connected) {\n        // Temporarily remove listener to prevent disconnect loop if disconnect() triggers event\n        this.removeWalletListeners();\n        await this.solanaAdapter.disconnect();\n        this.setupWalletListeners(); // Re-attach listeners\n      }\n    } catch (error) {\n      console.warn(\n        `[${this.walletName}] Error during Solana disconnect:`,\n        error\n      );\n      // Continue cleanup even if Solana disconnect fails\n    } finally {\n      // Clear internal state\n      this.identity = null;\n      this.principal = null;\n      this.solanaAddress = null;\n      this.state = Adapter.Status.DISCONNECTED;\n      console.log(`[${this.walletName}] Disconnected.`);\n    }\n  }\n\n  async getPrincipal(): Promise<string> {\n    if (!this.principal) {\n      throw new Error(\"Not connected or SIWS flow not completed.\");\n    }\n    return this.principal.toText();\n  }\n\n  // Standard implementation for getAccountId, can be overridden by subclasses if needed\n  async getAccountId(): Promise<string> {\n    const principal = await this.getPrincipal();\n    if (!principal)\n      throw new Error(\"Principal not available to derive account ID\");\n    return AccountIdentifier.fromPrincipal({\n      principal: Principal.fromText(principal),\n      subAccount: undefined, // Default subaccount\n    }).toHex();\n  }\n\n  async getSolanaAddress(): Promise<string> {\n    // For SIWS, the primary identifier is the Solana address\n    if (!this.solanaAddress) {\n      throw new Error(\"Not connected or Solana address not available.\");\n    }\n    return this.solanaAddress;\n  }\n\n  async getAddresses(): Promise<Adapter.Addresses> {\n    return {\n      sol: this.solanaAddress,\n      icp: {\n        owner: this.principal?.toText(),\n        subaccount: await this.getAccountId(),\n      },\n    };\n  }\n\n  createActor<T>(\n    canisterId: string,\n    idl: any,\n    options?: { requiresSigning?: boolean }\n  ): ActorSubclass<T> {\n    const requiresSigning = options?.requiresSigning ?? true;\n    if (requiresSigning && !this.identity) {\n      throw new Error(\n        \"Cannot create signed actor: Not connected or SIWS flow not completed.\"\n      );\n    }\n\n    const agent = HttpAgent.createSync({\n      host: this.config.hostUrl,\n      identity: this.identity,\n      verifyQuerySignatures: this.config.verifyQuerySignatures,\n    });\n\n    return Actor.createActor<T>(idl, { agent, canisterId });\n  }\n\n  // --- Balance Fetching Methods ---\n\n  /**\n   * Fetches token prices from Jupiter API\n   * @returns A map of token addresses to their USD prices\n   */\n  private async getTokenPrices(): Promise<Record<string, number>> {\n    try {\n      // Check if we've fetched prices recently (within last 2 minutes)\n      const now = Date.now();\n      if (this.tokenListCache && this.tokenPricesTimestamp > 0 && \n          now - this.tokenPricesTimestamp < 2 * 60 * 1000) {\n        // Return cached prices\n        const priceMap: Record<string, number> = {};\n        for (const [address, tokenInfo] of Object.entries(this.tokenListCache)) {\n          if (tokenInfo.price) {\n            priceMap[address] = tokenInfo.price;\n          }\n        }\n        return priceMap;\n      }\n      \n      // Get a list of token addresses from our token list\n      const tokenMap = await this.getTokenList();\n      \n      // Create request URL with token addresses\n      const tokenAddresses = Object.keys(tokenMap);\n      \n      // Split into smaller chunks to avoid URL length limits\n      const tokenChunks = [];\n      for (let i = 0; i < tokenAddresses.length; i += 50) {\n        tokenChunks.push(tokenAddresses.slice(i, i + 50));\n      }\n      \n      const priceMap: Record<string, number> = {};\n      \n      // Process each chunk\n      for (const chunk of tokenChunks) {\n        try {\n          // Always include SOL in each request\n          const requestIds = ['SOL', ...chunk].join(',');\n          const response = await fetch(`https://price.jup.ag/v4/price?ids=${requestIds}`);\n          \n          if (!response.ok) {\n            console.warn(`Failed to fetch Jupiter prices for chunk, status: ${response.status}`);\n            continue;\n          }\n          \n          const priceData = await response.json();\n          \n          // Process Jupiter response data\n          if (priceData.data) {\n            for (const [address, data] of Object.entries(priceData.data)) {\n              if (data && typeof data === 'object' && 'price' in data && data.price !== null) {\n                const price = Number(data.price);\n                if (!isNaN(price) && price > 0) {\n                  priceMap[address] = price;\n                  \n                  // Update price in token cache\n                  if (this.tokenListCache && this.tokenListCache[address]) {\n                    this.tokenListCache[address].price = price;\n                  }\n                }\n              }\n            }\n          }\n        } catch (chunkError) {\n          console.warn(`Error fetching prices for token chunk:`, chunkError);\n          // Continue with next chunk\n        }\n      }\n      \n      // Update timestamp\n      this.tokenPricesTimestamp = now;\n      \n      console.log(`[${this.walletName}] Loaded prices for ${Object.keys(priceMap).length} tokens`);\n      return priceMap;\n    } catch (error) {\n      console.warn(`[${this.walletName}] Failed to fetch token prices:`, error);\n      return {}; // Return empty object on error\n    }\n  }\n\n  /**\n   * Fetches token metadata from the Solana token list\n   * @returns A record mapping token addresses to their metadata\n   */\n  private async getTokenList(): Promise<Record<string, TokenInfo>> {\n    if (this.tokenListCache) {\n      return this.tokenListCache;\n    }\n    \n    try {\n      // First try the Jupiter token list which is well-maintained\n      const response = await fetch('https://token.jup.ag/all');\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch Jupiter token list: ${response.status}`);\n      }\n      \n      const tokenList = await response.json();\n      const tokenMap: Record<string, TokenInfo> = {};\n      \n      // Process and cache the token list\n      for (const token of tokenList) {\n        if (token.address && token.symbol) {\n          tokenMap[token.address] = {\n            symbol: token.symbol,\n            name: token.name || token.symbol,\n            logoURI: token.logoURI,\n            decimals: token.decimals || 0,\n            address: token.address\n          };\n        }\n      }\n      \n      this.tokenListCache = tokenMap;\n      console.log(`[${this.walletName}] Loaded metadata for ${Object.keys(tokenMap).length} tokens`);\n      return tokenMap;\n    } catch (error) {\n      console.warn(`[${this.walletName}] Failed to fetch token list:`, error);\n      // Return empty object on error\n      return {};\n    }\n  }\n\n  /**\n   * Fetches the native SOL balance for the connected wallet with USD value.\n   * @returns The balance in SOL (not lamports) and USD value.\n   * @throws If the wallet is not connected or the public key is unavailable.\n   */\n  async getSolBalance(): Promise<{ amount: number; usdValue?: number }> {\n    if (!this.solanaAdapter.connected || !this.solanaAdapter.publicKey) {\n      throw new Error(\n        \"Solana wallet not connected or public key unavailable to fetch SOL balance.\"\n      );\n    }\n    const lamports = await this.solanaConnection.getBalance(\n      this.solanaAdapter.publicKey\n    );\n    const solAmount = lamports / LAMPORTS_PER_SOL;\n    \n    try {\n      // Get SOL price directly with a dedicated call\n      const response = await fetch('https://price.jup.ag/v4/price?ids=SOL');\n      if (!response.ok) {\n        throw new Error(`Failed to fetch SOL price, status: ${response.status}`);\n      }\n      \n      const priceData = await response.json();\n      // Extract SOL price - add more detailed logging\n      console.log(\"SOL price data:\", JSON.stringify(priceData, null, 2));\n      \n      if (priceData?.data?.SOL?.price) {\n        const solPrice = Number(priceData.data.SOL.price);\n        if (!isNaN(solPrice) && solPrice > 0) {\n          return {\n            amount: solAmount,\n            usdValue: solAmount * solPrice\n          };\n        }\n      }\n    } catch (error) {\n      console.warn(`[${this.walletName}] Failed to fetch SOL price:`, error);\n    }\n    \n    return { amount: solAmount };\n  }\n\n  /**\n   * Fetches the balances of all SPL tokens owned by the connected wallet.\n   * @returns An array of SplTokenBalance objects.\n   * @throws If the wallet is not connected or the public key is unavailable.\n   */\n  async getSplTokenBalances(): Promise<SplTokenBalance[]> {\n    if (!this.solanaAdapter.connected || !this.solanaAdapter.publicKey) {\n      throw new Error(\n        \"Solana wallet not connected or public key unavailable to fetch SPL token balances.\"\n      );\n    }\n\n    try {\n      // Fetch SOL balance first\n      const lamports = await this.solanaConnection.getBalance(\n        this.solanaAdapter.publicKey\n      );\n      const solAmount = lamports / LAMPORTS_PER_SOL;\n      \n      // Make a specific request for SOL price\n      let solUsdValue: number | undefined = undefined;\n      try {\n        const solPriceResponse = await fetch('https://price.jup.ag/v4/price?ids=SOL');\n        if (solPriceResponse.ok) {\n          const solPriceData = await solPriceResponse.json();\n          console.log(\"SOL price data:\", JSON.stringify(solPriceData, null, 2));\n          \n          if (solPriceData?.data?.SOL?.price) {\n            const solPrice = Number(solPriceData.data.SOL.price);\n            if (!isNaN(solPrice) && solPrice > 0) {\n              solUsdValue = solAmount * solPrice;\n              console.log(`SOL price: $${solPrice}, USD value: $${solUsdValue}`);\n            }\n          }\n        }\n      } catch (solPriceError) {\n        console.error(\"Error fetching SOL price:\", solPriceError);\n      }\n      \n      // Fetch token accounts\n      const tokenAccounts = await this.solanaConnection.getTokenAccountsByOwner(\n        this.solanaAdapter.publicKey,\n        {\n          programId: TOKEN_PROGRAM_ID,\n        }\n      );\n      \n      // Extract mint addresses to use for price fetching\n      const mintAddresses: string[] = [];\n      const accountsToProcess: Array<{pubkey: PublicKey, account: any}> = [];\n      \n      for (const item of tokenAccounts.value) {\n        try {\n          const accountInfo = await this.solanaConnection.getParsedAccountInfo(item.pubkey);\n          \n          if (!accountInfo.value) continue;\n          \n          const parsedData = 'parsed' in accountInfo.value.data ? \n            accountInfo.value.data.parsed : null;\n            \n          if (!parsedData || parsedData.type !== 'account') continue;\n          \n          const info = parsedData.info;\n          if (!info || !info.mint) continue;\n          \n          mintAddresses.push(info.mint);\n          accountsToProcess.push(item);\n        } catch (error) {\n          console.error(`Failed to pre-process token account ${item.pubkey.toBase58()}:`, error);\n        }\n      }\n      \n      // Now fetch token list and prices with the specific mint addresses we need\n      const tokenMap = await this.getTokenList();\n      \n      const priceMap: Record<string, number> = {};\n      \n      if (mintAddresses.length > 0) {\n        // Split into chunks of 50 to avoid URL length limits\n        for (let i = 0; i < mintAddresses.length; i += 50) {\n          const chunk = mintAddresses.slice(i, i + 50);\n          try {\n            const response = await fetch(`https://price.jup.ag/v4/price?ids=${chunk.join(',')}`);\n            \n            if (!response.ok) {\n              console.warn(`Failed to fetch prices for token chunk, status: ${response.status}`);\n              continue;\n            }\n            \n            const priceData = await response.json();\n            \n            if (priceData.data) {\n              for (const [address, data] of Object.entries(priceData.data)) {\n                if (data && typeof data === 'object' && 'price' in data && data.price !== null) {\n                  const price = Number(data.price);\n                  if (!isNaN(price) && price > 0) {\n                    priceMap[address] = price;\n                  }\n                }\n              }\n            }\n          } catch (error) {\n            console.warn(`Error fetching prices for token chunk:`, error);\n          }\n        }\n      }\n      \n      // Add special handling for well-known tokens\n      if (!priceMap['EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v']) {  // USDC address\n        priceMap['EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v'] = 1;  // USDC is 1 USD\n      }\n\n      // Use a typical SOL price if we didn't get one (fallback)\n      if (solUsdValue === undefined && solAmount > 0) {\n        // Try to estimate using a reasonable recent SOL price\n        const estimatedSolPrice = 150; // Fallback approximate price\n        solUsdValue = solAmount * estimatedSolPrice;\n        console.log(`Using estimated SOL price: $${estimatedSolPrice}, USD value: $${solUsdValue}`);\n      }\n\n      const balances: SplTokenBalance[] = [];\n      \n      // Add SOL as first token in the list\n      balances.push({\n        mint: 'SOL', // Use SOL as the mint address identifier\n        amount: lamports.toString(),\n        decimals: 9, // SOL has 9 decimals\n        uiAmount: solAmount,\n        symbol: 'SOL',\n        name: 'Solana',\n        logo: 'https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png', // Official SOL logo\n        usdValue: solUsdValue\n      });\n\n      for (const { pubkey } of accountsToProcess) {\n        try {\n          // Use getParsedAccountInfo instead of getAccount for better browser compatibility\n          const accountInfo = await this.solanaConnection.getParsedAccountInfo(pubkey);\n          \n          if (!accountInfo.value) continue;\n          \n          // Handle parsed account data\n          const parsedData = 'parsed' in accountInfo.value.data ? \n            accountInfo.value.data.parsed : null;\n            \n          if (!parsedData || parsedData.type !== 'account') continue;\n          \n          const info = parsedData.info;\n          if (!info || !info.mint || !info.tokenAmount) continue;\n          \n          const mintAddress = info.mint;\n          const amount = info.tokenAmount.amount;\n          const decimals = info.tokenAmount.decimals || 0;\n          const uiAmount = info.tokenAmount.uiAmount || \n            (Number(amount) / Math.pow(10, decimals));\n          \n          // Look up token metadata if available\n          const metadata = tokenMap[mintAddress];\n          \n          // Get USD value if price is available\n          let usdValue: number | undefined = undefined;\n          const price = priceMap[mintAddress];\n          \n          if (price && !isNaN(price) && price > 0) {\n            usdValue = uiAmount * price;\n          }\n          \n          // Special case for USDC and other stablecoins\n          if (mintAddress === 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v' && usdValue === undefined) {\n            usdValue = uiAmount; // USDC is 1:1 with USD\n          }\n            \n          balances.push({\n            mint: mintAddress,\n            amount: amount.toString(),\n            decimals: decimals,\n            uiAmount: uiAmount,\n            symbol: metadata?.symbol,\n            name: metadata?.name,\n            logo: metadata?.logoURI,\n            usdValue\n          });\n          \n        } catch (error) {\n          console.error(\n            `[${\n              this.walletName\n            }] Failed to process token account ${pubkey.toBase58()}:`,\n            error\n          );\n          // Skip this token account if parsing fails\n        }\n      }\n\n      return balances;\n    } catch (error) {\n      console.error(`[${this.walletName}] Error fetching SPL token balances:`, error);\n      return []; // Return empty array on error to be resilient\n    }\n  }\n\n  // --- SIWS Specific Methods ---\n\n  private createSiwsProviderActor(identity?: Identity): SiwsProviderActor {\n    if (!this.config.siwsProviderCanisterId) {\n      throw new Error(\"SIWS provider canister ID not configured.\");\n    }\n    const agent = HttpAgent.createSync({\n      host: this.config.hostUrl,\n      identity: identity ?? new AnonymousIdentity(), // Use provided identity or anonymous\n      verifyQuerySignatures: this.config.verifyQuerySignatures,\n    });\n    return Actor.createActor<SiwsProviderService>(siwsProviderIdlFactory, {\n      agent,\n      canisterId: this.config.siwsProviderCanisterId,\n    });\n  }\n\n  private async _prepareLogin(\n    actor: SiwsProviderActor,\n    address: string\n  ): Promise<any> {\n    const prepareResult = await actor.siws_prepare_login(address);\n    if (\"Err\" in prepareResult)\n      throw new Error(\n        `SIWS Prepare Login failed: ${JSON.stringify(prepareResult.Err)}`\n      );\n    return prepareResult.Ok;\n  }\n\n  private async _signSiwsMessage(siwsMessage: any): Promise<string> {\n    const messageText = formatSiwsMessage(siwsMessage);\n    const messageBytes = new TextEncoder().encode(messageText);\n\n    if (!(\"signMessage\" in this.solanaAdapter)) {\n      throw new Error(\n        `Connected Solana adapter '${this.walletName}' does not support signMessage.`\n      );\n    }\n\n    const signerAdapter = this.solanaAdapter as typeof this.solanaAdapter &\n      MessageSignerWalletAdapterProps<string>;\n    const signatureBytes = await signerAdapter.signMessage(messageBytes);\n\n    // Handle different signature byte formats from various Solana wallets\n    try {\n      // Special case for Backpack wallet which returns {signature: Uint8Array}\n      if (\n        typeof signatureBytes === \"object\" &&\n        \"signature\" in signatureBytes &&\n        signatureBytes.signature instanceof Uint8Array\n      ) {\n        return bs58.encode(signatureBytes.signature);\n      }\n\n      // First case: signatureBytes is already a Uint8Array\n      if (signatureBytes instanceof Uint8Array) {\n        return bs58.encode(signatureBytes);\n      }\n\n      // Second case: signatureBytes is an ArrayBuffer\n      if ((signatureBytes as any) instanceof ArrayBuffer) {\n        return bs58.encode(new Uint8Array(signatureBytes as any));\n      }\n\n      // Third case: signatureBytes is array-like but not a typed array\n      if (\n        Array.isArray(signatureBytes) ||\n        (typeof signatureBytes === \"object\" && \"length\" in signatureBytes)\n      ) {\n        return bs58.encode(new Uint8Array(signatureBytes as any));\n      }\n\n      // If we get here, log the actual type and try a last resort conversion\n      console.warn(\n        `[${this.walletName}] Unexpected signature bytes type:`,\n        typeof signatureBytes,\n        signatureBytes\n      );\n\n      // Last resort: try to convert using a simplified approach\n      const fallbackArray = Object.values(signatureBytes as any).map((val) =>\n        Number(val)\n      );\n      return bs58.encode(Uint8Array.from(fallbackArray));\n    } catch (e) {\n      console.error(`[${this.walletName}] Error encoding signature:`, e);\n      throw new Error(\n        `Failed to encode signature from ${this.walletName}: ${e.message}`\n      );\n    }\n  }\n\n  private _generateSessionIdentity(): {\n    sessionIdentity: Ed25519KeyIdentity;\n    sessionPublicKeyDer: ArrayBuffer;\n  } {\n    const sessionIdentity = Ed25519KeyIdentity.generate();\n    const sessionPublicKeyDer = sessionIdentity.getPublicKey().toDer();\n    return { sessionIdentity, sessionPublicKeyDer };\n  }\n\n  private async _loginWithSiws(\n    actor: SiwsProviderActor,\n    signature: string,\n    address: string,\n    sessionPublicKeyDer: ArrayBuffer\n  ): Promise<any> {\n    const loginResult = await actor.siws_login(\n      signature,\n      address,\n      new Uint8Array(sessionPublicKeyDer)\n    );\n    if (\"Err\" in loginResult)\n      throw new Error(`SIWS Login failed: ${JSON.stringify(loginResult.Err)}`);\n    return loginResult.Ok;\n  }\n\n  private async _getSiwsDelegation(\n    actor: SiwsProviderActor,\n    address: string,\n    sessionPublicKeyDer: ArrayBuffer,\n    expiration: bigint\n  ): Promise<any> {\n    const delegationResult = await actor.siws_get_delegation(\n      address,\n      new Uint8Array(sessionPublicKeyDer),\n      expiration\n    );\n    if (\"Err\" in delegationResult)\n      throw new Error(\n        `SIWS Get Delegation failed: ${JSON.stringify(delegationResult.Err)}`\n      );\n    return delegationResult.Ok;\n  }\n\n  private _createDelegationIdentity(\n    signedDelegation: any,\n    sessionIdentity: Ed25519KeyIdentity,\n    userCanisterPublicKeyDer: ArrayBuffer\n  ): DelegationIdentity {\n    const delegation = new Delegation(\n      signedDelegation.delegation.pubkey.slice().buffer,\n      signedDelegation.delegation.expiration,\n      signedDelegation.delegation.targets.length > 0\n        ? signedDelegation.delegation.targets[0]\n        : undefined\n    );\n\n    const delegations = [\n      {\n        delegation: delegation,\n        signature: signedDelegation.signature.slice().buffer as any,\n      },\n    ];\n\n    const delegationChain = DelegationChain.fromDelegations(\n      delegations,\n      userCanisterPublicKeyDer\n    );\n\n    const identity = DelegationIdentity.fromDelegation(\n      sessionIdentity,\n      delegationChain\n    );\n\n    return identity;\n  }\n\n  private async performSiwsLogin(\n    address: string\n  ): Promise<{ identity: Identity; principal: Principal }> {\n    const anonSiwsActor = this.createSiwsProviderActor();\n\n    // Step 1: Prepare login\n    const siwsMessage = await this._prepareLogin(anonSiwsActor, address);\n\n    // Step 2: Sign message\n    const signature = await this._signSiwsMessage(siwsMessage);\n\n    // Step 3: Generate session identity\n    const { sessionIdentity, sessionPublicKeyDer } =\n      this._generateSessionIdentity();\n\n    // Step 4: Login\n    const loginDetails = await this._loginWithSiws(\n      anonSiwsActor,\n      signature,\n      address,\n      sessionPublicKeyDer\n    );\n\n    // Step 5: Get delegation\n    const signedDelegation = await this._getSiwsDelegation(\n      anonSiwsActor,\n      address,\n      sessionPublicKeyDer,\n      loginDetails.expiration\n    );\n\n    // Step 6: Create delegation identity\n    const identity = this._createDelegationIdentity(\n      signedDelegation,\n      sessionIdentity,\n      loginDetails.user_canister_pubkey.slice().buffer // Ensure ArrayBuffer\n    );\n\n    const principal = identity.getPrincipal();\n\n    return { identity, principal };\n  }\n}\n","export default \"data:image/svg+xml,%3csvg%20width='1200'%20height='1200'%20viewBox='0%200%201200%201200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_2800_140397)'%3e%3crect%20width='1200'%20height='1200'%20fill='%239886E5'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M516.641%20777.604C466.226%20854.856%20381.747%20952.618%20269.335%20952.618C216.194%20952.618%20165.098%20930.741%20165.098%20835.714C165.098%20593.704%20495.521%20219.066%20802.1%20219.066C976.509%20219.066%201046%20340.071%201046%20477.484C1046%20653.865%20931.544%20855.54%20817.77%20855.54C781.661%20855.54%20763.948%20835.714%20763.948%20804.267C763.948%20796.063%20765.311%20787.175%20768.036%20777.604C729.202%20843.918%20654.261%20905.446%20584.089%20905.446C532.992%20905.446%20507.103%20873.315%20507.103%20828.194C507.103%20811.787%20510.51%20794.696%20516.641%20777.604ZM930.877%20472.714C930.877%20512.755%20907.253%20532.776%20880.826%20532.776C853.998%20532.776%20830.775%20512.755%20830.775%20472.714C830.775%20432.673%20853.998%20412.653%20880.826%20412.653C907.253%20412.653%20930.877%20432.673%20930.877%20472.714ZM780.73%20472.714C780.73%20512.755%20757.105%20532.776%20730.678%20532.776C703.851%20532.776%20680.627%20512.755%20680.627%20472.714C680.627%20432.673%20703.851%20412.653%20730.678%20412.653C757.105%20412.653%20780.73%20432.673%20780.73%20472.714Z'%20fill='%23FFFDF8'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2800_140397'%3e%3crect%20width='1200'%20height='1200'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='290'%20height='290'%20viewBox='0%200%20290%20290'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_146_299)'%3e%3cpath%20d='M63.2951%201H226.705C261.11%201%20289%2028.8905%20289%2063.2951V226.705C289%20261.11%20261.11%20289%20226.705%20289H63.2951C28.8905%20289%201%20261.11%201%20226.705V63.2951C1%2028.8905%2028.8905%201%2063.2951%201Z'%20fill='%23FFEF46'%20stroke='%23EEDA0F'%20stroke-width='2'/%3e%3cpath%20d='M140.548%20153.231L154.832%20139.432L181.462%20148.147C198.893%20153.958%20207.609%20164.61%20207.609%20179.62C207.609%20190.999%20203.251%20198.504%20194.536%20208.188L191.873%20211.093L192.841%20204.314C196.714%20179.62%20189.452%20168.968%20165.484%20161.22L140.548%20153.231ZM104.717%2068.739L177.347%2092.9488L161.61%20107.959L123.843%2095.3698C110.77%2091.012%20106.412%2083.9911%20104.717%2069.2232V68.739ZM100.359%20191.725L116.822%20175.988L147.811%20186.157C164.031%20191.483%20169.599%20198.504%20167.905%20216.177L100.359%20191.725ZM79.539%20121.516C79.539%20116.917%2081.9599%20112.559%2086.0756%20108.927C90.4334%20115.222%2097.9384%20120.79%20109.801%20124.664L135.464%20133.137L121.18%20146.937L96.0016%20138.705C84.3809%20134.832%2079.539%20129.021%2079.539%20121.516ZM155.558%20248.618C208.819%20213.272%20237.387%20189.304%20237.387%20159.768C237.387%20140.158%20225.766%20129.263%20200.104%20120.79L180.736%20114.253L233.756%2063.4128L223.103%2052.0342L207.367%2065.8337L133.043%2041.3818C110.043%2048.8869%2080.9916%2070.9178%2080.9916%2092.9487C80.9916%2095.3697%2081.2337%2097.7907%2081.96%20100.454C62.8342%20111.348%2055.0871%20121.516%2055.0871%20134.105C55.0871%20145.968%2061.3816%20157.831%2081.4758%20164.368L97.4542%20169.694L42.2559%20222.713L52.9082%20234.092L70.0972%20218.356L155.558%20248.618Z'%20fill='%2302050A'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_146_299'%3e%3crect%20width='290'%20height='290'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABUkSURBVHgB7d09bFxVm8Dxk8RxPvAbvR/sykhbmt7pTe/0RrulEZQgKEFQgkgJIuWu4nJXcR+Xu4r7uMc9EfASyGvy4Thk55kweRNsx/bMPXfuzPP7SaNxQiTiiWfO/55z7r2nnvYUACCV0wUASEcAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACChmQJMnL07d8rTnZ3ypPf8W+9577s7/d8LT/7wHOLPxOMop+fm+o/B16d+//rM/Pzz/zbzxvzzXw+egclz6mlPATopBvW97e2y++3286/3fh/0uyIC4OzCwvPnc5cXn/8a6C4BAB3yuDfAP7q9VR5tPXt0aaA/qZne7ECEwIWlpTLbi4L4NdAdAgDGLAb6B7c2y/2NjYke8I8SAXC+FwOvXVnuhwEwXgIAxiAG+p0b62VnfX2qB/3DRAxcWl01MwBjJACgRbF+f+/6Wv9on2cuLi+XS++sCgFomQCAFsRRfgz8ccTPwWJGYO7tFZsHoSUCACqLqf57a2spp/pParA0cPHKcgHqEgBQSQz4f//0s/4mP05mbmWl/PmD9wtQjwCACmKt/8cPP3p+cR5OLmYDXv/6K3sDoBIBAA3b3d7uD/6m/EcnAqAeAQANiiP+7999z+DfIBEAdbgZEDRkMO1v8G+W1xXqEADQEGv+9cTrevfLqwVojgCABsQ5/gb/uh5sbvZPqQSaIQBgRP2r+62tFeqL11loQTMEAIwopv5px+CKisDoBACM4P7NDUekLYv7KLi4EoxOAMAI/uHa/mNhLwCMTgDAkOIo9PH2dqF9sSHQaYEwGgEAQ/r1plv6jpNZABiNAIAhPewdhTI+sRcAGN5MAU7swa3xTEGfnpvrP8KpQ77+458bRXyPL36fT17Y8Bi///T3/zaOjZDx/4xlmHOLiwU4OQEAQxhlF/pgcD4zP99/hLjO/ek/Pfv9Uy/89xf//KQYRMMgEAbPe989i4QYuAchEc+jxMPjb7cFAAxJAEDDBoP32YWF/tczb8y/9OtJGsyHMcz3OIiCiIV+FPRiITZYxq9ftdHSRkAYngCAIcy9vfJ8sIrBffbNheeDvLvWnVy8Zq963eIWy/FaP7r9zzMvYqbk4pXlAgzH7YABICFnAQBAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACTkdsDQIXGL4Xg8/cPzpDnzwq194+vTc3P9B9AdAgBaFIN53Nc+7mm/992dstf7+snvj/h62s30YuDM74/4evbNhf7XZxcWCtCuU097CtC4GOxjoH/87XbZ7T3vbm2lGOSHNbvwLAbOLS6Ws70wiGegHgEADRkM+A9ubfafH/UGfEYTEdB/XF4UBNAwAQAjiEH//s2N8mDz2aA/iev1kyL2EEQEXFhaKuffWrKnAEYkAOCEXhz0HeWPT8TAa8vLYgCGJADgmGKwv3d9zZF+B13shcBrV5YtE8AJCAB4hRjod26sl531dYP+BIgzCy6trpbZy4v9r4HDCQA4QOzWj4H//saGgX8CxZLA+aWlcumdVSEAhxAA8ILBNL+1/ekRywNCAPYTAFCeHfHf/fKqgX+KCQF4mQAgtZjejyP+WOMnh7mVlTL39ooQID0BQFqDgd8afz6DzYIXrywXyEoAkE5M88d0v8vyEiHw+tdfmQ0gJQFAGqb7OUwsC8T+ABcUIhMBQAqO+jlKzAL87YvP3ZmQNAQAU81RPycVewNiNgCmnQBgasXR/o8ffuSonxOzN4AMBABTKa7id29tzQ5/hhaD/58/eL9/RUGYRgKAqfPzN9dM+dMYSwJMKwHA1Iij/b9/+pmr+dG4C71ZgL988rGzBJgqAoCpYL2f2uwLYNoIACbe7vZ2f/C33k9tIoBpcrrABHt4a9PgT2sGM02Pe9EJk84MABPr15sb5e7VqwXaFnsB/qU3E+CiQUwyMwBMJIM/4xQzTj+YCWDCCQAmjsGfLhABTDoBwEQx+NMlIoBJJgCYGLHb/5dr1wp0ySACnILKpBEATITB7mu7/emi+Ll0HQomjQCg8wz+TAI/p0wapwHSed+/+15/+p+Ti9PU4jH75kI5Mz/ff8QpbINHDFbxeNIbvAbPD29v9Z+taw/n3OJi/xRB6DoBQKe5sc/JxKAed687f3mx/zzKtevjiHZ3a6vcv7VZHm5uFo5vbmWlfydB6DIBQGfdu77Wv6UvR4ujzgtvLZWLy8tVblgziIH4N7HOfTxx86DXev8e0FUCgE6KKf+Y+ufVYuCPW9XGc1vub2wIgWOIEPvX//pP9w2gswQAnePOfkeLwSUG/phqHpeYndm5sW7T2yvMLiz0bx7kNsJ0kbMA6BxHl68Wa/vz//PfYx38w6XV1f4RbpuzD5MmZrLi5xm6yAwAnXL/5kb5yZX+DhUby8Y98B8kZgMMdIeLswKEEl0jAOgMU/+Hi3Xkv37xeX9KuasebG6Wu19etSRwgPj3i9kSSwF0iSUAOsPU/8Fi8Ih15C4P/uFCb2nCpreDxc+1GRK6RgDQCTH1H7vLedlg8J+UQXXS/r5tiutZPNraKtAVAoCx6x8dOd9/n0kdTAfLFaa797NEQpcIAMbO1P/BYhCd1CPpWK6IC+Hwsvg5j1MnoQsEAGMVH4im/veL3f5dX/M/SuwJiGsV8LJYChC8dIEAYKxiSpSXxeV8u3iq3zDiWgFOf3tZLAHYEEgXCADGJjb+2RT1spjyn7aj5lgKsB/gZTHr5WefcRMAjI2Nf/vF4D9tO+jj+5mWGY0mmQVg3AQAYxFH/9ZBXxYD5cUpvXvc3NsrZgH+IGYAzAIwTgKAsXD0v980b5iLwd8swH5mARgnAUDrHP3vN81H/wNmAfYzC8A4CQBa5+h/vwyny5kFOJhZAMZFANCqONpx9L/fbJJT5WIWgJeZBWBcBACt+oeroO0TF8zJcu38mAVwXYD9HtzaLNA2AUBr4sj/4aYPuj+68NZSySSCh5fFdQHcI4C2CQBaY63zYFmm/wfOJwue44jB3z0CaJsAoDW71jn3iev9Z7t1bny/zgbYz+wYbRMAtCLWOG3+2+9MssF/INusx3Hsbm/bDEirBACt+NUd/w6UdUNctlmP47IZkDYJAKqz+e9wM28knQGY8Fsd1+LW2LRJAFDd7m3Tmoc5lXQtPOv3fZTYDGgZgLYIAKoz/X+4rHsATv9JABzGMgBtEQBU5YiGg2QNn+OwDEBbBABVPTL9DycimmmLAKCqBzb/wYkJZ9ogAKjKxX84yBPXhHglMwC0QQBQTVzYxMV/Xu2p679zgAgA9wagNgFANXvfbhde7XHS1yjr930SZs+oTQBQzX3r/0fKepRnZuhoD+0DoDIBQDV7247yjrKb9DV67GfjSGYAqE0AUEUc4TnKO1rWD3kBcLSIQ/sAqEkAUIU13uOJSMr2IW9gOz5nS1CTAKAKR3jHd/9mriu/uTfE8bkeADUJAKrIurY9jGwXS3JviOOzjEZNAoAqTF0eX6ZzvmNAMzt0fF4rahIAVOGD62R2bqyXDO5dXyscn/cRNQkAGmf6/+R21qc/AOLo36ltJxMzQzZMUosAoHEub3ty8SE/7ZsB4/uzpn1yltOoRQDQOKcADufe2trUHu3FwO8+98PxfqIWAUDjTFkOJwbJad0LEN+Xo//heD9RiwCgcT7ohxd7Aabt9euHTYI9DrV4P1GLAKBx1iyHF0d7d7+8WqbJjx9+VBieGQBqEQA0zgfWaOK6ANNyutzP31xzBDsiQU0tAoDGOQtgdLEhcNKvmBfr/qb+R+f9RC0CgMaZAWjGL72j50m9EMzDW5vl52vXCqPzfqIWAUDjfGA1I17HH3rr55M2hR4Xgvrp6nTtY4BpJACgwyICvn/3vYmZCYj9C7HpTwQ2x2tJLQKARvmwat5gJqDr1wiIv98PBv/GeT2pZaZAg3xY1RGva6ypx/Old1ZLl8TfKc5asOEPJosZAJggcXbAnX//j87sC4gp/1iiMPjD5BEAMGFi8I8IiKPucc249Gckvrk2kZsUgWcsAcCEitmAuMHOpdXVcvHKcmlDDPyD8/st98BkO/W0p0BDBkentGtmfr7MLi729wfE102Lqf5Ht7cM/GPyb//3vwWaZgYApkCE115vNiBmBM71QuDC0lI5d3mxnF1YKMMaDPr9594DmC4CAKbMiwP26bm5fgTEI2YGzr658Pz3T/UeIa41H5eb3fvuTj8k4poD8XCkD9NNAMAUi0HcETxwEGcBAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAGjU6bm5AjTHe4paBACNig8rH1jQnJn5+QI1CAAad35pqQDNmFlYKFCDAKBxr11ZLkAzvJ+oRQDQuHOLi6YtoQHxXooH1CAAqOIvn3xcgNF4H1GTAKCKOGq59M5qAYbz5w/eN5NGVQKAai6trooAGEK8b+ZWVgrUdOppT4GK7m9slHvX18renTsFOFwc8ce0v3V/2iAAaEUM/g83N8vOjXUhAH8QA//FK8v9o37X0aAtAoDW7W5vlye9CHj87XaBzGbemC+zzpphTAQAACRkEyAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASminQor07d8rDW5tld3u7POl9DZmdnpsrF5aWyuzlxTIzP1+gTaee9hSoLAb8X765Vh5tbRVgv4vLy+XSO6tCgNYIAKrbubFefr52rQBHu7S62g8BqM0SAFXd/fJq+XVjowDHc29trf8sAqjNJkCquXd9zeAPQ4gIiJkzqEkAUEWs+Q+OZICTi2Wzx733EdQiAKjip08/K8Bofv7G3hnqEQA0Lnb67znFD0YW7yVnzlCLAKBxv9607g9NeXRbAFCHAKBx1i2hOWYAqEUA0DgBAM3xfqIWAUCjrP1Ds37b2SlQgwAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBQKNOz80VALpPANAoAQDNmpmfL1CDAKBxPrCgOWe8n6hEANC4mYWFAjTjrPcTlQgAGnd+cbEAzZh9UwBQhwCgcbOXBQA0ZVZQU4kAoHGzvSnLcz60YGTxPrKnhloEAFVcWFoqwGheu7JcoBYBQBUXex9cTgmE4cWR/8VlAUA9AoAqYvC/9M5qAYbj/UNtAoBq5lZW7AWAIcSRv6N/ahMAVPWXTz62FAAnEFP/jv5pgwCgqvgw+9sXnxfgaBHLr3/9lZ3/tEIAUF0sA/y1NxMAHM7gT9tOPe0p0IIHm5vl7pdXy287OwX4pxj0/9qbKZt12V9aJABo1d6dO+XHDz/qPwPPZshir4wjf9omABiLnfX1snNjXQiQ1uBU2ThbBsZBADA2Mfjvbm2Ve9fXhABpxBH/hbeW+qf5OUOGcRIAdMLu9nY/Bh7e3ipPejEQD3sFmHQxwMcjbugTd/U7v7Rkqp/OEAAAkJDTAAEgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhP4f21W+eWfljs0AAAAASUVORK5CYII=\"","import { Adapter } from \"../../types/index\"; // Adjust path as needed\nimport { WalletAdapterNetwork } from \"@solana/wallet-adapter-base\";\nimport { SolSiwsAdapter } from \"./SolSiwsAdapter\"; // Placeholder for the actual adapter\nimport phantomLogo from \"../../../assets/phantom.svg\";\nimport solflareLogo from \"../../../assets/solflare.svg\";\nimport backpackLogo from \"../../../assets/backpack.png\"; // Removed Backpack\n\n// Define the default SOL adapters map, including SIWS config\nexport const SolAdapters: Record<string, Adapter.Info> = {\n  phantomSiws: {\n    enabled: false, // Disabled by default, user must enable and configure\n    id: 'phantomSiws',\n    walletName: \"Phantom\",\n    logo: phantomLogo,\n    website: \"https://phantom.app\",\n    chain: 'SOL',\n    adapter: SolSiwsAdapter, // Use the unified SIWS adapter\n    config: {\n      solanaNetwork: WalletAdapterNetwork.Mainnet, // Default to mainnet\n    },\n  },\n  solflareSiws: {\n    enabled: false, // Disabled by default, user must enable and configure\n    id: 'solflareSiws',\n    walletName: \"Solflare\",\n    logo: solflareLogo,\n    website: \"https://solflare.com\",\n    chain: 'SOL',\n    adapter: SolSiwsAdapter, // Use the unified SIWS adapter\n    config: {\n      solanaNetwork: WalletAdapterNetwork.Mainnet, // Default to mainnet\n    },\n  },\n  backpackSiws: {\n    enabled: false, // Disabled by default, user must enable and configure\n    id: 'backpackSiws',\n    walletName: \"Backpack\",\n    logo: backpackLogo,\n    website: \"https://backpack.app\",\n    chain: 'SOL',\n    adapter: SolSiwsAdapter,\n    config: {\n      solanaNetwork: WalletAdapterNetwork.Mainnet,\n    },\n  },\n};\n\nexport { SolSiwsAdapter }; ","import { Adapter } from './types';\nimport { ICAdapters } from './adapters/ic'; // Removed defaultICAdapterConfigs import\nimport { SolAdapters } from './adapters/sol'; // Added import for SolAdapters\n\n// Main configuration for the PNP library\nexport interface PNPConfig {\n  dfxNetwork?: string; // Useful for determining dev environment\n  hostUrl?: string;\n  delegationTimeout?: bigint;\n  delegationTargets?: string[];\n  derivationOrigin?: string;\n  fetchRootKeys?: boolean; // Common agent setting\n  verifyQuerySignatures?: boolean; // Common agent setting\n  localStorageKey?: string;\n  siwsProviderCanisterId?: string; // Add SIWS provider Canister ID here\n  // Allow partial overrides for Adapter.Info, including its nested config\n  adapters?: { [key: string]: Partial<Omit<Adapter.Info, 'config'>> & { config?: Partial<Adapter.Info['config']> } };\n}\n\n// Default values for the main configuration\n// Update the type to reflect that 'adapters' now holds config and removed adapterConfigs\nexport const defaultPNPConfig: Required<Omit<PNPConfig, 'adapters' | 'siwsProviderCanisterId'>> & {\n  adapters: Record<string, Adapter.Info>; // 'adapters' now holds the complete, configured adapter info\n  siwsProviderCanisterId: string | undefined; // Add default value type\n} = {\n  // Global defaults\n  hostUrl: \"https://icp0.io\",\n  delegationTimeout: BigInt(24 * 60 * 60 * 1000 * 1000 * 1000), // 1 day\n  delegationTargets: [],\n  derivationOrigin: typeof window !== 'undefined' ? window.location.origin : \"\", // Default to browser origin\n  dfxNetwork: \"ic\",\n  fetchRootKeys: false,\n  verifyQuerySignatures: true,\n  localStorageKey: \"pnpConnectedWallet\",\n  siwsProviderCanisterId: undefined, // Default to undefined\n  adapters: {\n    ...ICAdapters,\n    ...SolAdapters, // Merge SolAdapters into the defaults\n  },\n};\n\n// Define the return type more explicitly to include adapters (which now contain config)\nexport type FullPNPConfig = typeof defaultPNPConfig;\n\n// Function to create a complete configuration object by merging user input with defaults\nexport function createPNPConfig(config: PNPConfig = {}): FullPNPConfig { \n  const mergedAdapters = { ...defaultPNPConfig.adapters };\n\n  if (config.adapters) {\n    for (const adapterId in config.adapters) {\n      const userAdapterOverride = config.adapters[adapterId];\n      if (!userAdapterOverride) continue; // Skip if override is null/undefined\n\n      const defaultAdapterInfo = mergedAdapters[adapterId];\n\n      if (!defaultAdapterInfo) {\n        // Handle case where user provides an adapter ID not in defaults\n        console.warn(`[PNP Config] Adapter ID '${adapterId}' provided by user not found in defaults. Skipping merge for this adapter.`);\n        // Optionally, you could attempt to construct a default-less adapter info here,\n        // but it's safer to warn and potentially skip if the base adapter is unknown.\n        continue;\n      }\n\n      // Perform a more robust merge\n      mergedAdapters[adapterId] = {\n        // Start with default Adapter.Info properties (id, logo, name, adapter constructor)\n        ...defaultAdapterInfo,\n        // Override top-level Adapter.Info properties from user (like enabled)\n        // Use nullish coalescing to ensure user's value is taken if provided\n        id: userAdapterOverride.id ?? defaultAdapterInfo.id,\n        logo: userAdapterOverride.logo ?? defaultAdapterInfo.logo,\n        walletName: userAdapterOverride.walletName ?? defaultAdapterInfo.walletName,\n        adapter: userAdapterOverride.adapter ?? defaultAdapterInfo.adapter,\n        enabled: userAdapterOverride.enabled ?? defaultAdapterInfo.enabled,\n        // Deep merge the 'config' object explicitly\n        config: {\n          ...defaultAdapterInfo.config,      // Start with default config\n          ...(userAdapterOverride.config), // Override with user's partial config\n        },\n      };\n    }\n  }\n\n  // Merge global settings: User's global settings override defaults\n  const mergedConfig: FullPNPConfig = {\n    ...defaultPNPConfig,\n    ...config,\n    adapters: mergedAdapters, // Use the adapters map with refined merging\n  };\n\n  return mergedConfig;\n}\n","// Add buffer polyfill for browser environment\nimport 'buffer';\nimport { Actor, HttpAgent, type ActorSubclass } from \"@dfinity/agent\";\nimport type { Wallet, Adapter } from \"./types\";\nimport { createPNPConfig, type PNPConfig } from \"./config\";\n\n// Re-export config types and creation function for easier consumption\nexport { createPNPConfig, type PNPConfig };\n// Re-export core types\nexport type { Wallet, Adapter, ActorSubclass };\n\n// Define the PNP class directly here\nexport class PNP {\n  account: Wallet.Account | null = null;\n  activeWallet: Adapter.Info | null = null;\n  provider: Adapter.Interface | null = null;\n  config: ReturnType<typeof createPNPConfig>;\n  actorCache: Map<string, ActorSubclass<any>> = new Map();\n  isConnecting: boolean = false;\n  adapters: Record<string, Adapter.Info>;\n\n  constructor(config: PNPConfig = {}) {\n    this.config = createPNPConfig(config);\n    this.adapters = this.config.adapters || {};\n  }\n\n  private getAdapterConfig(adapterId: string): Adapter.Info {\n    return this.config.adapters?.[adapterId];\n  }\n\n  private mergeAdapterConfig(adapterId: string): Wallet.PNPConfig {\n    const specificConfig = this.getAdapterConfig(adapterId);\n    return {\n      ...this.config,\n      ...specificConfig,\n    };\n  }\n\n  // Helper method to reset connection state\n  private _resetState(): void {\n    this.account = null;\n    this.provider = null;\n    this.activeWallet = null;\n    this.actorCache.clear();\n    localStorage.removeItem(this.config.localStorageKey);\n    // Note: isConnecting is handled separately in connect/disconnect callers\n  }\n\n  async connect(walletId?: string): Promise<Wallet.Account | null> {\n    if (this.isConnecting) return null;\n    this.isConnecting = true;\n    let instance: Adapter.Interface | null = null;\n\n    try {\n      const targetWalletId =\n        walletId || localStorage.getItem(this.config.localStorageKey);\n      if (!targetWalletId) return null;\n\n      localStorage.setItem(this.config.localStorageKey, targetWalletId);\n\n      const adapterInfo = this.adapters[targetWalletId];\n      if (!adapterInfo)\n        throw new Error(\n          `Wallet ${targetWalletId} not found in provided adapters`\n        );\n\n      const adapterConfig = this.mergeAdapterConfig(targetWalletId);\n\n      // Some adapters expect both adapterInfo and config parameters\n      instance = adapterInfo.adapter.length > 1 \n        ? new adapterInfo.adapter(adapterInfo, this.config)\n        : new adapterInfo.adapter(this.config);\n      const account = await instance.connect();\n\n      this.account = account;\n      this.activeWallet = adapterInfo;\n      this.provider = instance;\n      return account;\n    } catch (error) {\n      console.warn(\n        `[PNP] Connection failed for ${walletId || \"stored wallet\"}:`,\n        error\n      );\n      if (instance) {\n        try {\n          await instance.disconnect();\n        } catch (disconnectError) {\n          console.warn(\"[PNP] Disconnect error:\", disconnectError);\n        }\n      }\n      this._resetState(); // Use helper method\n      return null;\n    } finally {\n      this.isConnecting = false; // Still need to reset this flag here\n    }\n  }\n\n  getAdapter(walletId: string): Adapter.Interface {\n    const wallet = this.adapters[walletId];\n    if (!wallet)\n      throw new Error(`Wallet ${walletId} not found in provided adapters`);\n    const adapterConfig = this.mergeAdapterConfig(walletId);\n    return new wallet.adapter(wallet, this.config);\n  }\n\n  async disconnect(): Promise<void> {\n    // isConnecting should logically be false if disconnect is called,\n    // but setting it ensures consistency if called unexpectedly.\n    this.isConnecting = false;\n    try {\n      if (this.provider) await this.provider.disconnect();\n      this._resetState(); // Use helper method\n    } catch (error) {\n      console.warn(\"[PNP] Disconnect error:\", error);\n      this._resetState(); // Also use helper method on error\n    }\n    // No finally block needed for state reset anymore\n  }\n\n  getActor<T>(\n    canisterId: string,\n    idl: any,\n    options?: {\n      anon?: boolean;\n      requiresSigning?: boolean;\n    }\n  ): ActorSubclass<T> {\n    const { anon = false, requiresSigning = true } = options || {};\n\n    if (anon) {\n      return this.createAnonymousActor<T>(canisterId, idl);\n    }\n\n    if (!this.provider) {\n      throw new Error(\n        \"Cannot create signed actor. No wallet provider connected.\"\n      );\n    }\n\n    return this.provider.createActor<T>(canisterId, idl, { requiresSigning });\n  }\n\n  createAnonymousActor<T>(canisterId: string, idl: any): ActorSubclass<T> {\n    const cacheKey = `anon-${canisterId}`;\n    const cachedActor = this.actorCache.get(cacheKey);\n    if (cachedActor) return cachedActor;\n\n    const actor = Actor.createActor<T>(idl, {\n      agent: HttpAgent.createSync({\n        host: this.config.hostUrl,\n        verifyQuerySignatures: this.config.verifyQuerySignatures,\n      }),\n      canisterId,\n    });\n\n    this.actorCache.set(cacheKey, actor);\n    return actor;\n  }\n\n  isWalletConnected(): boolean {\n    return (\n      this.activeWallet !== null &&\n      this.provider !== null &&\n      this.account !== null\n    );\n  }\n\n  getEnabledWallets(): Adapter.Info[] {\n    return Object.values(this.adapters).filter((wallet) => {\n      const adapterConfig = this.config.adapters[wallet.id];\n      // Disabled if explicitly false or not defined (defaults to false implicitly)\n      return adapterConfig?.enabled !== false;\n    });\n  }\n}\n\n// Export the factory function and wallet list\nexport const createPNP = (config: PNPConfig = {}) => new PNP(config);\n"],"names":["base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","i","tripletToBase64","num","encodeChunk","uint8","start","end","output","extraBytes","parts","maxChunkLength","len2","ieee754","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","value","c","rt","base64","require$$0","require$$1","customInspectSymbol","exports","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","length","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","b","fromObject","assertSize","size","alloc","fill","encoding","checked","string","actual","fromArrayLike","array","arrayView","copy","byteOffset","obj","numberIsNaN","a","x","y","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","str","max","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","bytes","newBuf","checkOffset","ext","noAssert","mul","defineBigIntMethod","validateNumber","first","last","boundsError","lo","hi","checkInt","min","maxBytes","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","errors","E","sym","getMessage","Base","name","range","input","msg","received","addNumericalSeparator","checkBounds","type","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","Adapter","Status","Chain","dfinityLogo","N","H","F","V","G","z","v","r","o","J","W","A","U","S","g","h","$","B","T","M","u","C","k","w","t","f","p","P","l","I","L","O","D","_","X","R","K","q","gr","Ar","Tr","Er","Ir","Fr","Ur","yr","ar","Z","br","Rr","tr","Sr","_r","kr","ir","Cr","er","lr","Lr","Yr","or","Gr","Hr","Or","Wr","nr","Q","Nr","Mr","$r","zr","Dr","Pr","Jr","qr","Kr","ur","sr","cr","fr","hr","pr","Y","rr","jr","Vr","Xr","Zr","xr","_BaseIcAdapter","config","newState","principal","principalObj","Principal","AccountIdentifier","err","canisterId","idl","options","anon","requiresSigning","cacheKey","cachedActor","actor","Actor","error","BaseIcAdapter","_IIAdapter","AuthClient","client","identity","HttpAgent","resolve","reject","account","contextMessage","disconnectError","accountId","IIAdapter","plugLogo","_PlugAdapter","connected","actorPromise","prop","args","PlugAdapter","nfidLogo","NETWORK_ERROR","ENCODE_CHUNK_SIZE","fromBase64","toBase64","index","__classPrivateFieldSet","receiver","state","kind","__classPrivateFieldGet","_Signer_options","_Signer_channel","_Signer_establishingChannel","_Signer_scheduledChannelClosure","SignerError","wrapTransportError","unwrapResponse","response","Signer","channel","_a","request","responseListener","closeListener","scopes","owner","subaccount","params","result","DelegationChain","delegation","Delegation","contentMap","certificate","requests","entries","responses","isJsonRpcMessage","message","isJsonRpcResponse","_PostMessageChannel_closeListeners","_PostMessageChannel_options","_PostMessageChannel_closed","PostMessageChannel","event","listener","messageListener","PostMessageTransportError","urlIsSecureContext","url","_HeartbeatClient_instances","_HeartbeatClient_options","_HeartbeatClient_establish","_HeartbeatClient_maintain","_HeartbeatClient_receiveReadyResponse","_HeartbeatClient_sendStatusRequest","HeartbeatClient","pending","create","id","interval","timeout","origin","consume","entry","time","resetTimeout","handler","_PostMessageTransport_options","NON_CLICK_ESTABLISHMENT_LINK","withinClick","PostMessageTransport","signerWindow","isNumeric","mathceil","mathfloor","bignumberError","tooManyDigits","BASE","LOG_BASE","MAX_SAFE_INTEGER","POWS_TEN","SQRT_BASE","MAX","clone","configObject","div","convertBase","parseNumeric","BigNumber","ONE","DECIMAL_PLACES","ROUNDING_MODE","TO_EXP_NEG","TO_EXP_POS","MIN_EXP","MAX_EXP","CRYPTO","MODULO_MODE","POW_PRECISION","FORMAT","ALPHABET","alphabetHasNormalDecimalDigits","caseChanged","isNum","intCheck","round","maxOrMin","pow2_53","random53bitInt","dp","rand","sum","decimal","toBaseOut","baseIn","baseOut","arrL","sign","callerIsToString","xc","rm","toFixedPoint","coeffToString","multiply","base","temp","xlo","xhi","carry","klo","khi","compare","aL","bL","cmp","subtract","more","prod","prodL","qc","rem","remL","rem0","xi","xL","yc0","yL","yz","yc","bitFloor","format","c0","ne","toExponential","normalise","basePrefix","dotAfter","dotBefore","isInfinityOrNaN","whitespaceOrPlus","p1","p2","sd","ni","rd","pows10","half","isModExp","nIsBig","nIsNeg","nIsOdd","isOdd","xLTy","xe","ye","xcL","ycL","ylo","yhi","zc","sqrtBase","rep","g1","g2","groupSeparator","intPart","fractionPart","isNeg","intDigits","md","d0","d1","d2","exp","n0","n1","zs","decodeCallRequest","decoded","Cbor","expiry","Expiry","_Queue_ongoing","Queue","job","_SignerAgent_instances","_SignerAgent_isInternalConstructing","_SignerAgent_options","_SignerAgent_certificates","_SignerAgent_queue","_SignerAgent_executeTimeout","_SignerAgent_scheduled","_SignerAgent_autoBatch","_SignerAgent_validation","_SignerAgent_executeQueue","_SignerAgent_executeBatch","ROOT_KEY","IC_ROOT_KEY","MAX_AGE_IN_MINUTES","INVALID_RESPONSE_MESSAGE","SignerAgentError","SignerAgent","throwError","_b","_c","_d","scheduled","validation","supportedStandard","requestBody","SubmitRequestType","requestId","requestIdOf","Certificate","LookupStatus","requestKey","now","lookupTime","lookupResultToBuffer","lebDecode","PipeArrayBuffer","submitResponse","readStateResponse","status","reply","_options","_canisterId","_identity","_request","key","sequenceIndex","requestIndex","_NFIDAdapter","nfidInfo","signerHttpAgent","Ed25519KeyIdentity","maxTimeToLiveNs","delegationChain","delegationIdentity","DelegationIdentity","idlFactory","agent","inTargets","NFIDAdapter","oisyLogo","_OisyAdapter","signerUrl","storedPrincipal","accounts","agentToUse","OisyAdapter","commonDefaultConfig","ICAdapters","has","prefix","Events","EE","context","once","addListener","emitter","evt","clearEvent","EventEmitter","names","events","handlers","ee","listeners","a1","a2","a3","a4","a5","module","WalletError","WalletNotReadyError","WalletLoadError","WalletConfigError","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletAccountError","WalletPublicKeyError","WalletNotConnectedError","WalletSendTransactionError","WalletSignTransactionError","WalletSignMessageError","WalletReadyState","BaseWalletAdapter","transaction","connection","publicKey","scopePollingDetectionStrategy","detect","disposers","detectAndDispose","dispose","isIosAndRedirectable","userAgent","isIos","isSafari","isVersionedTransaction","BaseSignerWalletAdapter","emit","rawTransaction","signers","sendOptions","transactions","signedTransactions","BaseMessageSignerWalletAdapter","SolanaSignAndSendTransaction","SolanaSignMessage","SolanaSignTransaction","StandardConnect","StandardDisconnect","StandardEvents","WalletAdapterNetwork","anumber","isBytes","abytes","lengths","ahash","aexists","instance","checkFinished","aoutput","crypto","createView","rotr","word","shift","toBytes","data","concatBytes","arrays","pad","Hash$1","wrapConstructor","hashCons","hashC","randomBytes","bytesLength","setBigUint64","view","_32n","_u32_max","wh","wl","Chi","Maj","Hash","blockLen","outputLen","padOffset","take","dataView","oview","outLen","to","finished","destroyed","SHA256_K","SHA256_IV","SHA256_W","HashMD","W15","W2","s0","s1","sigma1","T1","T2","sha256","SHA256","U32_MASK64","fromBig","le","split","lst","Ah","Al","toBig","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","_h","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","add","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","sha512","_0n","_1n","item","abool","title","numberToHexUnpadded","hex","hexToNumber","hasHexBuiltin","hexes","bytesToHex","asciis","asciiToBase16","ch","hexToBytes","hl","al","ai","n2","char","bytesToNumberBE","bytesToNumberLE","numberToBytesBE","numberToBytesLE","ensureBytes","expectedLength","isPosBig","inRange","aInRange","bitLen","bitMask","u8n","u8fr","createHmacDrbg","hashLen","qByteLen","hmacFn","reset","reseed","seed","gen","sl","pred","validatorFns","object","validateObject","validators","optValidators","checkField","fieldName","isOptional","checkVal","memoized","map","computed","_2n","_3n","_4n","_5n","_8n","mod","pow","power","modulo","pow2","invert","number","tonelliShanks","legendreC","p1div4","Fp","root","Q1div2","t2","ge","FpSqrt","c1","nv","isNegativeLE","FIELD_FIELDS","validateField","field","initial","opts","FpPow","FpInvertBatch","nums","lastMultiplied","acc","inverted","nLength","nBitLength","_nBitLength","nByteLength","Field","ORDER","redef","BITS","BYTES","sqrtP","lhs","rhs","getFieldBytesLength","fieldOrder","bitLength","getMinHashLength","mapHashToField","fieldLen","minLen","reduced","constTimeNegate","condition","neg","validateW","bits","calcWOpts","scalarBits","windows","windowSize","maxNumber","mask","shiftBy","calcOffsets","window","wOpts","wbits","nextN","offsetStart","isZero","isNegF","validateMSMPoints","points","validateMSMScalars","scalars","pointPrecomputes","pointWindowSizes","getW","wNAF","elm","precomputes","wo","offsetF","transform","comp","prev","pippenger","fieldN","zero","MASK","buckets","lastBits","scalar","resI","sumI","validateBasic","curve","VERIFY_DEFAULT","validateOpts","twistedEdwards","curveDef","CURVE","CURVE_ORDER","prehash","cHash","cofactor","modP","Fn","uvRatio","adjustScalarBytes","domain","ctx","phflag","aCoordinate","banZero","aextpoint","other","Point","toAffineMemo","iz","is0","ax","ay","zz","assertValidMemo","X2","Y2","Z2","Z4","aX2","left","right","XY","ZT","ex","ey","ez","et","toInv","wnaf","X1","Y1","Z1","X1Z2","X2Z1","Y1Z2","Y2Z1","x1y1","X3","Y3","T3","Z3","zip215","normed","lastByte","y2","isValid","isXOdd","isLastByteOdd","privKey","getPrivateScalar","modN","modN_LE","hash","hashed","head","getExtendedPublicKey","point","pointBytes","getPublicKey","hashDomainToScalar","msgs","verifyOpts","verify","sig","SB","ED25519_P","ED25519_SQRT_M1","ed25519_pow_2_252_3","_10n","_20n","_40n","_80n","b2","b4","b5","b10","b20","b40","b80","b160","b240","b250","v3","v7","vx2","root1","root2","useRoot1","useRoot2","noRoot","ed25519Defaults","ed25519","assert","inherits","ctor","superCtor","TempCtor","BN","endian","off","parseHex4Bits","parseHexByte","lowerBound","parseLength","parseBase","limbLen","limbPow","total","dest","move","inspect","zeros","groupSizes","groupBases","padding","groupSize","groupBase","allocate","ArrayType","reqLength","postfix","position","toBitArray","bit","wbit","width","bytesNeeded","bitsLeft","smallMulTo","self","ncarry","rword","maxJ","comb10MulTo","mid","a0","al0","ah0","al1","ah1","al2","ah2","al3","ah3","al4","ah4","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","bl2","bh2","b3","bl3","bh3","bl4","bh4","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","bigMulTo","hncarry","jumboMulTo","isNegNum","carryMask","newCarry","hint","extended","maskedWords","mode","bhi","bhiBits","diff","qj","positive","dm","r2","yp","xp","im","jm","x1","x2","delta","negative","Red","primes","MPrime","rlen","K256","next","P224","P192","P25519","prime","mod3","one","nOne","lpow","inv","wnd","current","currentLen","Mont","this","copyProps","SafeBuffer","_Buffer","BASE_MAP","LEADER","FACTOR","iFACTOR","encode","source","zeroes","pbegin","pend","b58","it1","it2","decodeUnsafe","psz","b256","charCode","it3","it4","vch","decode","basex","bs58","clean","createHasher","sha256n","ToDictionary","stringToCodePoints","codePointsToString","code_points","cp","end_of_stream","Stream","tokens","token","decoderError","fatal","opt_code_point","DEFAULT_ENCODING","TextDecoder","UTF8Decoder","input_stream","TextEncoder","opt_string","UTF8Encoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","stream","bite","code_point","count","__createBinding","k2","__setModuleDefault","__decorate","decorators","desc","__importStar","__importDefault","lib","bn_js_1","bs58_1","require$$2","ResolvedTextDecoder","textDecoder","baseEncode","baseDecode","INITIAL_LENGTH","BorshError","BinaryWriter","elem","handlingRangeError","propertyKey","propertyDescriptor","originalMethod","BinaryReader","capitalizeFirstLetter","serializeField","schema","fieldType","writer","serializeStruct","structSchema","idx","serialize","Writer","deserializeField","reader","deserializeStruct","classType","fieldValue","deserialize","Reader","deserializeUnchecked","Layout_1","buffer_1","checkUint8Array","uint8ArrayToBuffer","Layout$1","span","property","rv","values","Layout","nameWithProperty","bindConstructorLayout","Class","layout","ExternalLayout","GreedyCount","elementSpan","OffsetLayout","UInt","UIntBE","Int","IntBE","V2E32","divmodInt64","hi32","lo32","roundedInt64","NearUInt64","NearUInt64BE","NearInt64","NearInt64BE","Float","FloatBE","Double","DoubleBE","Sequence","elementLayout","elo","Structure","fields","decodePrefixes","fd","fsp","firstOffset","lastOffset","lastWrote","fv","UnionDiscriminator","UnionLayoutDiscriminator","Union","discr","defaultLayout","discriminator","boundGetSourceVariant","gsv","vlo","tag","dlo","clo","contentOffset","variant","VariantLayout","vb","union","fixBitwiseResult","BitStructure","msb","bf","BitField","Boolean","container","totalBits","usedBits","wordValue","Blob","srcBuffer","CString","srcb","UTF8","maxSpan","Constant","SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY","SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH","SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH","SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH","SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH","SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE","encodeValue","encodeObjectContextEntry","encodeContextObject","searchParamsString","getErrorMessage","decodingAdviceMessage","SolanaError","contextAndErrorOptions","errorOptions","cause","contextRest","__publicField","getEncodedSize","encoder","createEncoder","createDecoder","decoder","isFixedSize","codec","combineCodec","assertByteArrayIsNotEmptyForCodec","codecDescription","assertByteArrayHasEnoughBytesForCodec","expected","assertNumberIsBetweenForCodec","isLittleEndian","numberEncoderFactory","arrayBuffer","numberDecoderFactory","toArrayBuffer","bytesOffset","getU64Encoder","getU64Decoder","getU64Codec","StructError","failure","failures","cached","explanation","rest","path","isIterable","isObject","isNonArrayObject","print","shiftIterator","done","toFailure","struct","branch","refinement","toFailures","run","coerce","ts","Struct$1","props","validator","refiner","coercer","is","validate","tuples","tuple","define","Struct","any","Element","boolean","literal","constant","description","never","nullable","optional","record","Key","Value","Structs","Never","keys","coerced","unknown","getRandomValues","rnds8","rng","REGEX","uuid","byteToHex","stringify","_nodeId","_clockseq","_lastMSecs","_lastNSecs","v1","node","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","parse","stringToBytes","DNS","URL","v35","version","hashfunc","generateUUID","namespace","md5","md5ToHexEncodedArray","wordsToMd5","bytesToWords","length32","hexTab","getOutputLength","inputLength8","olda","oldb","oldc","oldd","md5ff","md5gg","md5hh","md5ii","safeAdd","length8","lsw","msw","bitRotateLeft","cnt","md5cmn","v4","rnds","ROTL","sha1","_i","_i2","_t","_t2","v5","nil","generateRequest_1","method","generator","generateRequest","ClientBrowser","callServer","browser","callback","isBatch","hasCallback","responseText","isError","isNotError","WebSocketBrowserImpl","address","protocols","optionsOrCallback","cb","reason","WebSocket","DefaultDataPack","CommonClient","webSocketFactory","autoconnect","reconnect","reconnect_interval","max_reconnects","rest_options","generate_request_id","dataPack","ws_opts","rpc_id","resp","HMAC","_key","oHash","iHash","hmac","validateSigVerOpts","validatePointOpts","endo","DERErr","DER","dataLen","lenLen","isLong","lengthBytes","int","tlv","seqBytes","seqLeftBytes","rBytes","rLeftBytes","sBytes","sLeftBytes","rs","ss","seq","weierstrassPoints","_isCompressed","fromBytes","tail","weierstrassEquation","x3","isWithinCurveOrder","normPrivateKeyToScalar","wrapPrivateKey","aprjpoint","px","py","pz","privateKey","U1","U2","t0","t1","t3","t4","t5","sc","k1neg","k1","k2neg","k1p","k2p","fake","f1p","f2p","isTorsionFree","clearCofactor","isCompressed","_bits","weierstrass","compressedLen","uncompressedLen","invN","cat","sqrtError","suffix","isYOdd","cl","ul","numToNByteHex","isBiggerThanHalfOrder","HALF","normalizeS","slcNum","Signature","recovery","msgHash","rec","bits2int_modN","radj","u1","u2","utils","isProbPub","getSharedSecret","privateA","publicB","bits2int","ORDER_MASK","int2octets","prepSig","defaultSigOpts","lowS","ent","h1int","seedArgs","k2sig","kBytes","ik","normS","defaultVerOpts","signature","sg","isHex","isObj","_sig","derError","getHash","createCurve","defHash","secp256k1P","secp256k1N","divNearest","sqrtMod","_6n","_11n","_22n","_23n","_44n","_88n","b11","b22","b44","b88","b176","b220","b223","Fpk1","secp256k1","POW_2_128","c2","isOnCurve","secretKey","toBuffer","properties","SOLANA_SCHEMA","_PublicKey","MAX_SEED_LENGTH","PUBLIC_KEY_LENGTH","isPublicKeyData","uniquePublicKeyCounter","PublicKey","zeroPad","fromPublicKey","programId","publicKeyBytes","seeds","nonce","seedsWithNonce","pubkeyData","pubkey","PACKET_DATA_SIZE","VERSION_PREFIX_MASK","SIGNATURE_LENGTH_IN_BYTES","TransactionExpiredBlockheightExceededError","TransactionExpiredTimeoutError","timeoutSeconds","TransactionExpiredNonceInvalidError","MessageAccountKeys","staticAccountKeys","accountKeysFromLookups","keySegments","keySegment","instructions","keyIndexMap","findKeyIndex","keyIndex","instruction","meta","BufferLayout.blob","rustString","rsl","BufferLayout.struct","BufferLayout.u32","BufferLayout.offset","_decode","_encode","rslShim","authorized","lockup","BufferLayout.ns64","voteInit","BufferLayout.u8","voteAuthorizeWithSeedArgs","decodeLength","encodeLength","rem_len","CompiledKeys","payer","keyMetaMap","getOrInsertDefault","keyMeta","payerKeyMeta","ix","accountMeta","mapEntries","writableSigners","readonlySigners","writableNonSigners","readonlyNonSigners","header","payerAddress","lookupTable","writableIndexes","drainedWritableKeys","readonlyIndexes","drainedReadonlyKeys","lookupTableEntries","keyMetaFilter","lookupTableIndexes","drainedKeys","lookupTableIndex","END_OF_BUFFER_ERROR_MESSAGE","guardedShift","guardedSplice","Message","compiledKeys","numSignedAccounts","unsignedAccountIndex","numWritableUnsignedAccounts","numWritableSignedAccounts","numKeys","keyCount","programIdIndex","keyIndicesCount","dataCount","instructionCount","instructionBuffer","instructionBufferLength","BufferLayout.seq","signDataLayout","signData","numRequiredSignatures","numReadonlySignedAccounts","numReadonlyUnsignedAccounts","accountCount","accountKeys","recentBlockhash","dataLength","dataSlice","messageArgs","MessageV0","numStaticAccountKeys","lookupAccountKeysIndex","numWritableLookupAccountKeys","addressLookupTableAccounts","tableLookup","tableAccount","addressTableLookups","lookupTableAccounts","extractResult","addressTableLookup","writable","readonly","compiledInstructions","encodedStaticAccountKeysLength","serializedInstructions","encodedInstructionsLength","serializedAddressTableLookups","encodedAddressTableLookupsLength","messageLayout","serializedMessage","serializedMessageLength","serializedLength","encodedAccountKeyIndexesLength","encodedDataLength","instructionLayout","encodedWritableIndexesLength","encodedReadonlyIndexesLength","addressTableLookupLayout","maskedPrefix","staticAccountKeysLength","accountKeyIndexesLength","accountKeyIndexes","addressTableLookupsCount","accountKey","writableIndexesLength","readonlyIndexesLength","VersionedMessage","TransactionStatus","DEFAULT_SIGNATURE","TransactionInstruction","isSigner","isWritable","Transaction","minContextSlot","nonceInfo","blockhash","lastValidBlockHeight","items","feePayer","programIds","accountMetas","uniqueMetas","pubkeyString","uniqueIndex","feePayerIndex","payerMeta","signedKeys","unsignedKeys","pair","seen","uniqueSigners","signer","sigpair","requireAllSignatures","verifySignatures","sigErrors","errorMessage","signatures","signatureCount","transactionLength","wireTransaction","keyObj","sigPubkeyPair","VersionedTransaction","defaultSignatures","encodedSignaturesLength","transactionLayout","serializedTransaction","serializedTransactionLength","signaturesLength","messageData","signerPubkeys","signerIndex","NUM_TICKS_PER_SECOND","DEFAULT_TICKS_PER_SLOT","NUM_SLOTS_PER_SECOND","MS_PER_SLOT","SendTransactionError","action","transactionMessage","logs","maybeLogsOutput","guideText","cachedLogs","tx","SolanaJSONRPCError","customMessage","sleep","ms","FeeCalculatorLayout","BufferLayout.nu64","NonceAccountLayout","NonceAccount","nonceAccount","blob","bigIntLayout","bigInt","getDefaultExportFromCjs","fastStableStringify$1","hasRequiredFastStableStringify","requireFastStableStringify","objToString","objKeys","isArrayProp","propVal","toStr","returnVal","fastStableStringifyExports","fastStableStringify","MINIMUM_SLOT_PER_EPOCH","trailingZeros","nextPowerOfTwo","EpochSchedule","slotsPerEpoch","leaderScheduleSlotOffset","warmup","firstNormalEpoch","firstNormalSlot","slot","epoch","epochLen","slotIndex","normalSlotIndex","normalEpochIndex","fetchImpl","RpcWebSocketClient","rpc","readyState","decodeData","LOOKUP_TABLE_META_SIZE","AddressLookupTableAccount","U64_MAX","accountData","LookupTableMetaLayout","serializedAddressesLen","numSerializedAddresses","addresses","URL_RE","makeWebsocketUrl","endpoint","matches","hostish","portWithColon","protocol","startPort","websocketPort","PublicKeyFromString","RawAccountDataResult","BufferFromRawAccountData","BLOCKHASH_CACHE_TIMEOUT_MS","assertEndpointUrl","putativeUrl","extractCommitmentFromConfig","commitmentOrConfig","commitment","specifiedCommitment","specifiedConfig","applyDefaultMemcmpEncodingToFilters","filters","filter","createRpcResult","UnknownRpcResult","jsonRpcResult","jsonRpcResultAndContext","notificationResultAndContext","versionedMessageFromResponse","GetInflationGovernorResult","GetInflationRewardResult","GetRecentPrioritizationFeesResult","GetInflationRateResult","GetEpochInfoResult","GetEpochScheduleResult","GetLeaderScheduleResult","TransactionErrorResult","SignatureStatusResult","SignatureReceivedResult","VersionResult","ParsedInstructionStruct","PartiallyDecodedInstructionStruct","SimulatedTransactionResponseStruct","BlockProductionResponseStruct","createRpcClient","httpHeaders","customFetch","fetchMiddleware","disableRetryOnRateLimit","httpAgent","fetch","fetchWithMiddleware","info","init","modifiedFetchArgs","modifiedInfo","modifiedInit","RpcClient","COMMON_HTTP_HEADERS","too_many_requests_retries","waitTime","text","createRpcRequest","createRpcBatchRequest","batch","GetInflationGovernorRpcResult","GetInflationRateRpcResult","GetRecentPrioritizationFeesRpcResult","GetEpochInfoRpcResult","GetEpochScheduleRpcResult","GetLeaderScheduleRpcResult","SlotRpcResult","GetSupplyRpcResult","TokenAmountResult","GetTokenLargestAccountsResult","GetTokenAccountsByOwner","ParsedAccountDataResult","GetParsedTokenAccountsByOwner","GetLargestAccountsRpcResult","AccountInfoResult","KeyedAccountInfoResult","ParsedOrRawAccountData","ParsedAccountInfoResult","KeyedParsedAccountInfoResult","StakeActivationResult","GetConfirmedSignaturesForAddress2RpcResult","GetSignaturesForAddressRpcResult","AccountNotificationResult","ProgramAccountInfoResult","ProgramAccountNotificationResult","SlotInfoResult","SlotNotificationResult","SlotUpdateResult","SlotUpdateNotificationResult","SignatureNotificationResult","RootNotificationResult","ContactInfoResult","VoteAccountInfoResult","GetVoteAccounts","ConfirmationStatus","SignatureStatusResponse","GetSignatureStatusesRpcResult","GetMinimumBalanceForRentExemptionRpcResult","AddressTableLookupStruct","ConfirmedTransactionResult","AnnotatedAccountKey","ConfirmedTransactionAccountsModeResult","ParsedInstructionResult","RawInstructionResult","InstructionResult","UnknownInstructionResult","ParsedOrRawInstruction","ParsedConfirmedTransactionResult","TokenBalanceResult","LoadedAddressesResult","ConfirmedTransactionMetaResult","ParsedConfirmedTransactionMetaResult","TransactionVersionStruct","RewardsResult","GetBlockRpcResult","GetNoneModeBlockRpcResult","GetAccountsModeBlockRpcResult","GetParsedBlockRpcResult","GetParsedAccountsModeBlockRpcResult","GetParsedNoneModeBlockRpcResult","GetConfirmedBlockRpcResult","GetBlockSignaturesRpcResult","GetTransactionRpcResult","GetParsedTransactionRpcResult","GetLatestBlockhashRpcResult","IsBlockhashValidRpcResult","PerfSampleResult","GetRecentPerformanceSamplesRpcResult","GetFeeCalculatorRpcResult","RequestAirdropRpcResult","SendTransactionRpcResult","LogsResult","LogsNotificationResult","Connection","_commitmentOrConfig","requestPromises","requestHash","unsafeRes","wsEndpoint","configArg","tokenMintAddress","tokenAddress","ownerAddress","_args","mintAddress","publicKeys","rawConfig","configOrCommitment","configWithoutEncoding","baseSchema","strategy","rawSignature","decodedSignature","signal","signatureSubscriptionId","disposeSignatureSubscriptionStateChangeObserver","confirmationPromise","subscriptionSetupPromise","resolveSubscriptionSetup","nextState","abortSignal","expiryPromise","checkBlockHeight","currentBlockHeight","abortConfirmation","cancellationPromise","outcome","nonceAccountPubkey","nonceValue","currentNonceValue","lastCheckedSlot","getCurrentNonceValue","signatureStatus","commitmentForStatus","confirmationStatus","timeoutId","timeoutMs","startSlot","epochSchedule","wireMessage","extra","block","endSlot","firstAvailableBlock","highestConfirmedRoot","accountInfo","lamports","disableCache","expired","startTime","cachedLatestBlockhash","cachedBlockhash","latestBlockhash","transactionOrMessage","configOrSigners","includeAccounts","encodedTransaction","originalTx","traceIndent","logTrace","signersOrOptions","skipPreflight","preflightCommitment","subscription","nextSubscription","prevState","stateChangeCallbacks","clientSubscriptionId","activeWebSocketGeneration","isCurrentConnectionStillActive","serverSubscriptionId","unsubscribeMethod","callbackArgs","callbacks","notification","subscriptionConfig","existingSubscription","maybeFilters","subscriptionName","override","BufferLayout.u16","_Lockup","Lockup","unixTimestamp","custodian","LAMPORTS_PER_SOL","PhantomWalletName","PhantomWalletAdapter","wallet","newPublicKey","ref","_RegisterWalletEvent_detail","registerWallet","register","RegisterWalletEvent","api","SOLANA_MAINNET_CHAIN","SOLANA_DEVNET_CHAIN","SOLANA_TESTNET_CHAIN","icon","_SolflareMetaMaskWallet_instances","_SolflareMetaMaskWallet_listeners","_SolflareMetaMaskWallet_version","_SolflareMetaMaskWallet_name","_SolflareMetaMaskWallet_icon","_SolflareMetaMaskWallet_solflareMetaMask","_SolflareMetaMaskWallet_on","_SolflareMetaMaskWallet_emit","_SolflareMetaMaskWallet_off","_SolflareMetaMaskWallet_connect","_SolflareMetaMaskWallet_disconnect","_SolflareMetaMaskWallet_signAndSendTransaction","_SolflareMetaMaskWallet_signTransaction","_SolflareMetaMaskWallet_signMessage","SolflareMetaMaskWallet","SolflareMetaMaskClass","inputs","existingListener","registered","detectAndRegisterSolflareMetaMaskWallet","postMessage","onMessage","SolflareWalletName","SolflareWalletAdapter","SolflareClass","BackpackWalletName","BackpackWalletAdapter","formatSiwsMessage","issuedAtDate","expirationDate","formattedMessage","resource","IDL","RuntimeFeature","Address","GetAddressResponse","GetPrincipalResponse","SessionKey","Timestamp","SignedDelegation","GetDelegationResponse","SiwsSignature","CanisterPublicKey","LoginDetails","LoginResponse","SiwsMessage","PrepareLoginResponse","TOKEN_PROGRAM_ID","_SolSiwsAdapter","adapterInfo","pnpConfig","network","siwsResult","priceMap","tokenInfo","tokenMap","tokenAddresses","tokenChunks","chunk","requestIds","priceData","price","chunkError","tokenList","solAmount","solPrice","solUsdValue","solPriceResponse","solPriceData","solPriceError","tokenAccounts","mintAddresses","accountsToProcess","parsedData","balances","amount","decimals","uiAmount","metadata","usdValue","AnonymousIdentity","siwsProviderIdlFactory","prepareResult","siwsMessage","messageText","messageBytes","signatureBytes","fallbackArray","sessionIdentity","sessionPublicKeyDer","loginResult","expiration","delegationResult","signedDelegation","userCanisterPublicKeyDer","delegations","anonSiwsActor","loginDetails","SolSiwsAdapter","phantomLogo","solflareLogo","backpackLogo","SolAdapters","defaultPNPConfig","createPNPConfig","mergedAdapters","adapterId","userAdapterOverride","defaultAdapterInfo","PNP","specificConfig","walletId","targetWalletId","adapterConfig","createPNP"],"mappings":"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","x_google_ignoreList":[0,1,2,5,6,7,8,14,15,16,17,18,19,20,21,22,23,24,25,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,103]}